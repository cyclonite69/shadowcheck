"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Droppable = exports.Attribution = void 0;
exports["default"] = MapContainerFactory;
exports.isSplitSelector = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("react"));
var _styledComponents = _interopRequireWildcard(require("styled-components"));
var _reactMapGl = require("react-map-gl");
var _react2 = _interopRequireDefault(require("@deck.gl/react"));
var _reselect = require("reselect");
var _core = require("@dnd-kit/core");
var _debounce = _interopRequireDefault(require("lodash/debounce"));
var _mapPopover = _interopRequireDefault(require("./map/map-popover"));
var _mapControl = _interopRequireDefault(require("./map/map-control"));
var _styledComponents2 = require("./common/styled-components");
var _editor = _interopRequireDefault(require("./editor/editor"));
var _layers = require("@kepler.gl/layers");
var _utils = require("@kepler.gl/utils");
var _styles = require("@kepler.gl/styles");
var _constants = require("@kepler.gl/constants");
var _dndLayerItems = require("./common/dnd-layer-items");
var _mapViewStateContext = require("./map-view-state-context");
var _errorBoundary = _interopRequireDefault(require("./common/error-boundary"));
var _localization = require("@kepler.gl/localization");
var _core2 = require("@deck.gl/core");
var _reducers = require("@kepler.gl/reducers");
var _loadingIndicator = _interopRequireDefault(require("./loading-indicator"));
var _templateObject, _templateObject2; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
// libraries
// components
// utils
// default-settings
// Contexts
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != _typeof(e) && "function" != typeof e) return { "default": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n["default"] = e, t && t.set(e, n), n; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _callSuper(t, o, e) { return o = (0, _getPrototypeOf2["default"])(o), (0, _possibleConstructorReturn2["default"])(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2["default"])(t).constructor) : o.apply(t, e)); }
function _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }
// Debounce the propagation of viewport change and mouse moves to redux store.
// This is to avoid too many renders of other components when the map is
// being panned/zoomed (leading to laggy basemap/deck syncing).
var DEBOUNCE_VIEWPORT_PROPAGATE = 10;
var DEBOUNCE_MOUSE_MOVE_PROPAGATE = 10;

// How long should we wait between layer loading state changes before triggering a UI update
var DEBOUNCE_LOADING_STATE_PROPAGATE = 100;
var MAP_STYLE = {
  container: {
    display: 'inline-block',
    position: 'relative',
    width: '100%',
    height: '100%'
  },
  top: {
    position: 'absolute',
    top: 0,
    width: '100%',
    height: '100%',
    pointerEvents: 'none'
  }
};
var LOCALE_CODES_ARRAY = Object.keys(_localization.LOCALE_CODES);
var StyledMap = (0, _styledComponents["default"])(_styledComponents2.StyledMapContainer)(function (_ref) {
  var _ref$$mixBlendMode = _ref.$mixBlendMode,
    $mixBlendMode = _ref$$mixBlendMode === void 0 ? 'normal' : _ref$$mixBlendMode,
    $mapLibCssClass = _ref.$mapLibCssClass;
  return "\n  #default-deckgl-overlay {\n    mix-blend-mode: ".concat($mixBlendMode, ";\n  };\n  *[").concat($mapLibCssClass, "-children] {\n    position: absolute;\n  }\n");
});
var MAPBOXGL_STYLE_UPDATE = 'style.load';
var MAPBOXGL_RENDER = 'render';
var nop = function nop() {
  return;
};
var MapLibLogo = function MapLibLogo(_ref2) {
  var baseMapLibraryConfig = _ref2.baseMapLibraryConfig;
  return /*#__PURE__*/_react["default"].createElement("div", {
    className: "attrition-logo"
  }, "Basemap by:", /*#__PURE__*/_react["default"].createElement("a", {
    style: {
      marginLeft: '5px'
    },
    className: "".concat(baseMapLibraryConfig.mapLibCssClass, "-ctrl-logo"),
    target: "_blank",
    rel: "noopener noreferrer",
    href: baseMapLibraryConfig.mapLibUrl,
    "aria-label": "".concat(baseMapLibraryConfig.mapLibName, " logo")
  }));
};
var StyledDroppable = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  background-color: ", ";\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  pointer-events: none;\n  z-index: 1;\n"])), function (props) {
  return props.isOver ? props.theme.dndOverBackgroundColor : 'none';
});
var isSplitSelector = exports.isSplitSelector = function isSplitSelector(props) {
  return props.visState.splitMaps && props.visState.splitMaps.length > 1;
};
var Droppable = exports.Droppable = function Droppable(_ref3) {
  var containerId = _ref3.containerId;
  var _useDroppable = (0, _core.useDroppable)({
      id: containerId,
      data: {
        type: _dndLayerItems.DROPPABLE_MAP_CONTAINER_TYPE,
        index: containerId
      },
      disabled: !containerId
    }),
    isOver = _useDroppable.isOver,
    setNodeRef = _useDroppable.setNodeRef;
  return /*#__PURE__*/_react["default"].createElement(StyledDroppable, {
    ref: setNodeRef,
    isOver: isOver
  });
};
var StyledDatasetAttributionsContainer = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  max-width: ", ";\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  color: ", ";\n  margin-right: 2px;\n  margin-bottom: 1px;\n  line-height: ", ";\n\n  &:hover {\n    white-space: inherit;\n  }\n"])), function (props) {
  return props.isPalm ? '200px' : '300px';
}, function (props) {
  return props.theme.labelColor;
}, function (props) {
  return props.isPalm ? '1em' : '1.4em';
});
var DatasetAttributions = function DatasetAttributions(_ref4) {
  var datasetAttributions = _ref4.datasetAttributions,
    isPalm = _ref4.isPalm;
  return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, datasetAttributions !== null && datasetAttributions !== void 0 && datasetAttributions.length ? /*#__PURE__*/_react["default"].createElement(StyledDatasetAttributionsContainer, {
    isPalm: isPalm
  }, datasetAttributions.map(function (ds, idx) {
    return /*#__PURE__*/_react["default"].createElement("a", (0, _extends2["default"])({}, ds.url ? {
      href: ds.url
    } : null, {
      target: "_blank",
      rel: "noopener noreferrer",
      key: "".concat(ds.title, "_").concat(idx)
    }), ds.title, idx !== datasetAttributions.length - 1 ? ', ' : null);
  })) : null);
};
var Attribution = exports.Attribution = function Attribution(_ref5) {
  var _ref5$showBaseMapLibL = _ref5.showBaseMapLibLogo,
    showBaseMapLibLogo = _ref5$showBaseMapLibL === void 0 ? true : _ref5$showBaseMapLibL,
    _ref5$showOsmBasemapA = _ref5.showOsmBasemapAttribution,
    showOsmBasemapAttribution = _ref5$showOsmBasemapA === void 0 ? false : _ref5$showOsmBasemapA,
    datasetAttributions = _ref5.datasetAttributions,
    baseMapLibraryConfig = _ref5.baseMapLibraryConfig;
  var isPalm = (0, _utils.hasMobileWidth)(_styles.breakPointValues);
  var memoizedComponents = (0, _react.useMemo)(function () {
    if (!showBaseMapLibLogo) {
      return /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledAttribution, {
        mapLibCssClass: baseMapLibraryConfig.mapLibCssClass,
        mapLibAttributionCssClass: baseMapLibraryConfig.mapLibAttributionCssClass
      }, /*#__PURE__*/_react["default"].createElement(_styledComponents2.EndHorizontalFlexbox, null, /*#__PURE__*/_react["default"].createElement(DatasetAttributions, {
        datasetAttributions: datasetAttributions,
        isPalm: isPalm
      }), showOsmBasemapAttribution ? /*#__PURE__*/_react["default"].createElement("div", {
        className: "attrition-link"
      }, datasetAttributions !== null && datasetAttributions !== void 0 && datasetAttributions.length ? /*#__PURE__*/_react["default"].createElement("span", {
        className: "pipe-separator"
      }, "|") : null, /*#__PURE__*/_react["default"].createElement("a", {
        href: "http://www.openstreetmap.org/copyright",
        target: "_blank",
        rel: "noopener noreferrer"
      }, "\xA9 OpenStreetMap")) : null));
    }
    return /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledAttribution, {
      mapLibCssClass: baseMapLibraryConfig.mapLibCssClass,
      mapLibAttributionCssClass: baseMapLibraryConfig.mapLibAttributionCssClass
    }, /*#__PURE__*/_react["default"].createElement(_styledComponents2.EndHorizontalFlexbox, null, /*#__PURE__*/_react["default"].createElement(DatasetAttributions, {
      datasetAttributions: datasetAttributions,
      isPalm: isPalm
    }), /*#__PURE__*/_react["default"].createElement("div", {
      className: "attrition-link"
    }, datasetAttributions !== null && datasetAttributions !== void 0 && datasetAttributions.length ? /*#__PURE__*/_react["default"].createElement("span", {
      className: "pipe-separator"
    }, "|") : null, isPalm ? /*#__PURE__*/_react["default"].createElement(MapLibLogo, {
      baseMapLibraryConfig: baseMapLibraryConfig
    }) : null, /*#__PURE__*/_react["default"].createElement("a", {
      href: "https://kepler.gl/policy/",
      target: "_blank",
      rel: "noopener noreferrer"
    }, "\xA9 kepler.gl |", ' '), !isPalm ? /*#__PURE__*/_react["default"].createElement(MapLibLogo, {
      baseMapLibraryConfig: baseMapLibraryConfig
    }) : null)));
  }, [showBaseMapLibLogo, showOsmBasemapAttribution, datasetAttributions, isPalm, baseMapLibraryConfig]);
  return memoizedComponents;
};
MapContainerFactory.deps = [_mapPopover["default"], _mapControl["default"], _editor["default"]];
function MapContainerFactory(MapPopover, MapControl, Editor) {
  var MapContainer = /*#__PURE__*/function (_Component) {
    function MapContainer(_props) {
      var _this;
      (0, _classCallCheck2["default"])(this, MapContainer);
      _this = _callSuper(this, MapContainer, [_props]);
      (0, _defineProperty2["default"])(_this, "displayName", 'MapContainer');
      (0, _defineProperty2["default"])(_this, "anyActiveLayerLoading", false);
      (0, _defineProperty2["default"])(_this, "state", {
        // Determines whether attribution should be visible based the result of loading the map style
        showBaseMapAttribution: true
      });
      (0, _defineProperty2["default"])(_this, "_deck", null);
      (0, _defineProperty2["default"])(_this, "_map", null);
      (0, _defineProperty2["default"])(_this, "_ref", /*#__PURE__*/(0, _react.createRef)());
      (0, _defineProperty2["default"])(_this, "_deckGLErrorsElapsed", {});
      (0, _defineProperty2["default"])(_this, "previousLayers", {
        // [layers.id]: mapboxLayerConfig
      });
      (0, _defineProperty2["default"])(_this, "_handleResize", function (dimensions) {
        var _this$props = _this.props,
          primary = _this$props.primary,
          index = _this$props.index;
        if (primary) {
          var mapStateActions = _this.props.mapStateActions;
          if (dimensions && dimensions.width > 0 && dimensions.height > 0) {
            mapStateActions.updateMap(dimensions, index);
          }
        }
      });
      (0, _defineProperty2["default"])(_this, "layersSelector", function (props) {
        return props.visState.layers;
      });
      (0, _defineProperty2["default"])(_this, "layerDataSelector", function (props) {
        return props.visState.layerData;
      });
      (0, _defineProperty2["default"])(_this, "splitMapSelector", function (props) {
        return props.visState.splitMaps;
      });
      (0, _defineProperty2["default"])(_this, "splitMapIndexSelector", function (props) {
        return props.index;
      });
      (0, _defineProperty2["default"])(_this, "mapLayersSelector", (0, _reselect.createSelector)(_this.splitMapSelector, _this.splitMapIndexSelector, _utils.getMapLayersFromSplitMaps));
      (0, _defineProperty2["default"])(_this, "layerOrderSelector", function (props) {
        return props.visState.layerOrder;
      });
      (0, _defineProperty2["default"])(_this, "layersToRenderSelector", (0, _reselect.createSelector)(_this.layersSelector, _this.layerDataSelector, _this.mapLayersSelector, _reducers.prepareLayersToRender));
      (0, _defineProperty2["default"])(_this, "layersForDeckSelector", (0, _reselect.createSelector)(_this.layersSelector, _this.layerDataSelector, _reducers.prepareLayersForDeck));
      (0, _defineProperty2["default"])(_this, "filtersSelector", function (props) {
        return props.visState.filters;
      });
      (0, _defineProperty2["default"])(_this, "polygonFiltersSelector", (0, _reselect.createSelector)(_this.filtersSelector, function (filters) {
        return filters.filter(function (f) {
          return f.type === _constants.FILTER_TYPES.polygon && f.enabled !== false;
        });
      }));
      (0, _defineProperty2["default"])(_this, "featuresSelector", function (props) {
        return props.visState.editor.features;
      });
      (0, _defineProperty2["default"])(_this, "selectedFeatureSelector", function (props) {
        return props.visState.editor.selectedFeature;
      });
      (0, _defineProperty2["default"])(_this, "featureCollectionSelector", (0, _reselect.createSelector)(_this.polygonFiltersSelector, _this.featuresSelector, function (polygonFilters, features) {
        return {
          type: 'FeatureCollection',
          features: features.concat(polygonFilters.map(function (f) {
            return f.value;
          }))
        };
      }));
      // @ts-ignore - No overload matches this call
      (0, _defineProperty2["default"])(_this, "selectedPolygonIndexSelector", (0, _reselect.createSelector)(_this.featureCollectionSelector, _this.selectedFeatureSelector, function (collection, selectedFeature) {
        return collection.features.findIndex(function (f) {
          return f.id === (selectedFeature === null || selectedFeature === void 0 ? void 0 : selectedFeature.id);
        });
      }));
      (0, _defineProperty2["default"])(_this, "selectedFeatureIndexArraySelector", (0, _reselect.createSelector)(function (value) {
        return value;
      }, function (value) {
        return value < 0 ? [] : [value];
      }));
      (0, _defineProperty2["default"])(_this, "generateMapboxLayerMethodSelector", function (props) {
        var _props$generateMapbox;
        return (_props$generateMapbox = props.generateMapboxLayers) !== null && _props$generateMapbox !== void 0 ? _props$generateMapbox : _layers.generateMapboxLayers;
      });
      (0, _defineProperty2["default"])(_this, "mapboxLayersSelector", (0, _reselect.createSelector)(_this.layersSelector, _this.layerDataSelector, _this.layerOrderSelector, _this.layersToRenderSelector, _this.generateMapboxLayerMethodSelector, function (layer, layerData, layerOrder, layersToRender, generateMapboxLayerMethod) {
        return generateMapboxLayerMethod(layer, layerData, layerOrder, layersToRender);
      }));
      // merge in a background-color style if the basemap choice is NO_MAP_ID
      // used by <StyledMap> inline style prop
      (0, _defineProperty2["default"])(_this, "mapStyleTypeSelector", function (props) {
        return props.mapStyle.styleType;
      });
      (0, _defineProperty2["default"])(_this, "mapStyleBackgroundColorSelector", function (props) {
        return props.mapStyle.backgroundColor;
      });
      (0, _defineProperty2["default"])(_this, "styleSelector", (0, _reselect.createSelector)(_this.mapStyleTypeSelector, _this.mapStyleBackgroundColorSelector, function (styleType, backgroundColor) {
        return _objectSpread(_objectSpread({}, MAP_STYLE.container), styleType === _constants.NO_MAP_ID ? {
          backgroundColor: (0, _utils.rgbToHex)(backgroundColor)
        } : {});
      }));
      /* component private functions */
      (0, _defineProperty2["default"])(_this, "_onCloseMapPopover", function () {
        _this.props.visStateActions.onLayerClick(null);
      });
      (0, _defineProperty2["default"])(_this, "_onLayerHover", function (_idx, info) {
        _this.props.visStateActions.onLayerHover(info, _this.props.index);
      });
      (0, _defineProperty2["default"])(_this, "_onLayerSetDomain", function (idx, value) {
        _this.props.visStateActions.layerConfigChange(_this.props.visState.layers[idx], {
          colorDomain: value.domain,
          aggregatedBins: value.aggregatedBins
        });
      });
      (0, _defineProperty2["default"])(_this, "_onLayerFilteredItemsChange", function (idx, event) {
        _this.props.visStateActions.layerFilteredItemsChange(_this.props.visState.layers[idx], event);
      });
      (0, _defineProperty2["default"])(_this, "_onWMSFeatureInfo", function (idx, data) {
        _this.props.visStateActions.wmsFeatureInfo(_this.props.visState.layers[idx], data.featureInfo, data.coordinate);
      });
      (0, _defineProperty2["default"])(_this, "_handleMapToggleLayer", function (layerId) {
        var _this$props2 = _this.props,
          _this$props2$index = _this$props2.index,
          mapIndex = _this$props2$index === void 0 ? 0 : _this$props2$index,
          visStateActions = _this$props2.visStateActions;
        visStateActions.toggleLayerForMap(mapIndex, layerId);
      });
      (0, _defineProperty2["default"])(_this, "_onMapboxStyleUpdate", function (update) {
        // force refresh mapboxgl layers
        _this.previousLayers = {};
        _this._updateMapboxLayers();
        if (update && update.style) {
          // No attributions are needed if the style doesn't reference Mapbox sources
          _this.setState({
            showBaseMapAttribution: (0, _utils.isStyleUsingMapboxTiles)(update.style) || !(0, _utils.isStyleUsingOpenStreetMapTiles)(update.style)
          });
        }
        if (typeof _this.props.onMapStyleLoaded === 'function') {
          _this.props.onMapStyleLoaded(_this._map);
        }
      });
      (0, _defineProperty2["default"])(_this, "_setMapRef", function (mapRef) {
        // Handle change of the map library
        if (_this._map && mapRef) {
          var map = mapRef.getMap();
          if (map && _this._map !== map) {
            var _this$_map, _this$_map2;
            (_this$_map = _this._map) === null || _this$_map === void 0 || _this$_map.off(MAPBOXGL_STYLE_UPDATE, nop);
            (_this$_map2 = _this._map) === null || _this$_map2 === void 0 || _this$_map2.off(MAPBOXGL_RENDER, nop);
            _this._map = null;
          }
        }
        if (!_this._map && mapRef) {
          _this._map = mapRef.getMap();
          // i noticed in certain context we don't access the actual map element
          if (!_this._map) {
            return;
          }
          // bind mapboxgl event listener
          _this._map.on(MAPBOXGL_STYLE_UPDATE, _this._onMapboxStyleUpdate);
          _this._map.on(MAPBOXGL_RENDER, function () {
            if (typeof _this.props.onMapRender === 'function') {
              _this.props.onMapRender(_this._map);
            }
          });
        }
        if (_this.props.getMapboxRef) {
          // The parent component can gain access to our MapboxGlMap by
          // providing this callback. Note that 'mapbox' will be null when the
          // ref is unset (e.g. when a split map is closed).
          _this.props.getMapboxRef(mapRef, _this.props.index);
        }
      });
      (0, _defineProperty2["default"])(_this, "_onBeforeRender", function (_ref6) {
        var gl = _ref6.gl;
        (0, _utils.setLayerBlending)(gl, _this.props.visState.layerBlending);
      });
      (0, _defineProperty2["default"])(_this, "_onDeckError", function (error, layer) {
        var errorMessage = (error === null || error === void 0 ? void 0 : error.message) || 'unknown-error';
        var layerMessage = layer !== null && layer !== void 0 && layer.id ? " in ".concat(layer.id, " layer") : '';
        var errorMessageFull = errorMessage === 'WebGL context is lost' ? 'Your GPU was disconnected. This can happen if your computer goes to sleep. It can also occur for other reasons, such as if you are running too many GPU applications.' : "An error in deck.gl: ".concat(errorMessage).concat(layerMessage, ".");

        // Throttle error notifications, as React doesn't like too many state changes from here.
        var lastShown = _this._deckGLErrorsElapsed[errorMessageFull];
        if (!lastShown || lastShown < Date.now() - _constants.THROTTLE_NOTIFICATION_TIME) {
          _this._deckGLErrorsElapsed[errorMessageFull] = Date.now();

          // Mark layer as invalid
          var extraLayerMessage = '';
          var visStateActions = _this.props.visStateActions;
          if (layer) {
            var _topMostLayer$props;
            var topMostLayer = layer;
            while (topMostLayer.parent) {
              topMostLayer = topMostLayer.parent;
            }
            if ((_topMostLayer$props = topMostLayer.props) !== null && _topMostLayer$props !== void 0 && _topMostLayer$props.id) {
              visStateActions.layerSetIsValid(topMostLayer, false);
              extraLayerMessage = 'The layer has been disabled and highlighted.';
            }
          }

          // Create new error notification or update existing one with same id.
          // Update is required to preserve the order of notifications as they probably are going to "jump" based on order of errors.
          var uiStateActions = _this.props.uiStateActions;
          uiStateActions.addNotification((0, _utils.errorNotification)({
            message: "".concat(errorMessageFull, " ").concat(extraLayerMessage),
            id: errorMessageFull // treat the error message as id
          }));
        }
      });
      (0, _defineProperty2["default"])(_this, "_onViewportChangePropagateDebounced", (0, _debounce["default"])(function () {
        var _this$context;
        var viewState = (_this$context = _this.context) === null || _this$context === void 0 ? void 0 : _this$context.getInternalViewState(_this.props.index);
        (0, _utils.onViewPortChange)(viewState, _this.props.mapStateActions.updateMap, _this.props.onViewStateChange, _this.props.primary, _this.props.index);
      }, DEBOUNCE_VIEWPORT_PROPAGATE));
      (0, _defineProperty2["default"])(_this, "_onViewportChange", function (viewport) {
        var viewState = viewport.viewState;
        if (_this.props.isExport) {
          // Image export map shouldn't be interactive (otherwise this callback can
          // lead to inadvertent changes to the state of the main map)
          return;
        }
        var setInternalViewState = _this.context.setInternalViewState;
        setInternalViewState(viewState, _this.props.index);
        _this._onViewportChangePropagateDebounced();
      });
      (0, _defineProperty2["default"])(_this, "_onLayerHoverDebounced", (0, _debounce["default"])(function (data, index) {
        _this.props.visStateActions.onLayerHover(data, index);
      }, DEBOUNCE_MOUSE_MOVE_PROPAGATE));
      (0, _defineProperty2["default"])(_this, "_onMouseMoveDebounced", (0, _debounce["default"])(function (event, viewport) {
        _this.props.visStateActions.onMouseMove((0, _utils.normalizeEvent)(event, viewport));
      }, DEBOUNCE_MOUSE_MOVE_PROPAGATE));
      (0, _defineProperty2["default"])(_this, "_onLayerLoadingStateChange", (0, _debounce["default"])(function () {
        // trigger loading indicator update without any change to update UI
        _this.props.visStateActions.setLoadingIndicator({
          change: 0
        });
      }, DEBOUNCE_LOADING_STATE_PROPAGATE));
      (0, _defineProperty2["default"])(_this, "_toggleMapControl", function (panelId) {
        var _this$props3 = _this.props,
          index = _this$props3.index,
          uiStateActions = _this$props3.uiStateActions;
        uiStateActions.toggleMapControl(panelId, Number(index));
      });
      return _this;
    }
    (0, _inherits2["default"])(MapContainer, _Component);
    return (0, _createClass2["default"])(MapContainer, [{
      key: "componentDidMount",
      value: function componentDidMount() {
        if (!this._ref.current) {
          return;
        }
        (0, _utils.observeDimensions)(this._ref.current, this._handleResize);
      }
    }, {
      key: "componentWillUnmount",
      value: function componentWillUnmount() {
        // unbind mapboxgl event listener
        if (this._map) {
          var _this$_map3, _this$_map4;
          (_this$_map3 = this._map) === null || _this$_map3 === void 0 || _this$_map3.off(MAPBOXGL_STYLE_UPDATE, nop);
          (_this$_map4 = this._map) === null || _this$_map4 === void 0 || _this$_map4.off(MAPBOXGL_RENDER, nop);
        }
        if (!this._ref.current) {
          return;
        }
        (0, _utils.unobserveDimensions)(this._ref.current);
      }
    }, {
      key: "_onDeckInitialized",
      value: function _onDeckInitialized(gl) {
        if (this.props.onDeckInitialized) {
          this.props.onDeckInitialized(this._deck, gl);
        }
      }

      /**
       * 1) Allow effects only for the first view.
       * 2) Prevent effect:preRender call without valid generated viewports.
       * @param viewIndex View index.
       * @returns Returns true if effects can be used.
       */
    }, {
      key: "_isOKToRenderEffects",
      value: function _isOKToRenderEffects(viewIndex) {
        var _this$_deck;
        return !viewIndex && Boolean((_this$_deck = this._deck) === null || _this$_deck === void 0 || (_this$_deck = _this$_deck.viewManager) === null || _this$_deck === void 0 || (_this$_deck = _this$_deck._viewports) === null || _this$_deck === void 0 ? void 0 : _this$_deck.length);
      }
    }, {
      key: "_renderMapPopover",
      value: /* component render functions */

      /* eslint-disable complexity */
      function _renderMapPopover() {
        var _this$props$visState$;
        // this check is for limiting the display of the `<MapPopover>` to the `<MapContainer>` the user is interacting with
        // the DeckGL onHover event handler adds a `mapIndex` property which is available in the `hoverInfo` object of `visState`
        if (this.props.index !== ((_this$props$visState$ = this.props.visState.hoverInfo) === null || _this$props$visState$ === void 0 ? void 0 : _this$props$visState$.mapIndex)) {
          return null;
        }

        // TODO: move this into reducer so it can be tested
        var _this$props4 = this.props,
          mapState = _this$props4.mapState,
          _this$props4$visState = _this$props4.visState,
          hoverInfo = _this$props4$visState.hoverInfo,
          clicked = _this$props4$visState.clicked,
          datasets = _this$props4$visState.datasets,
          interactionConfig = _this$props4$visState.interactionConfig,
          animationConfig = _this$props4$visState.animationConfig,
          layers = _this$props4$visState.layers,
          _this$props4$visState2 = _this$props4$visState.mousePos,
          mousePosition = _this$props4$visState2.mousePosition,
          coordinate = _this$props4$visState2.coordinate,
          pinned = _this$props4$visState2.pinned;
        var layersToRender = this.layersToRenderSelector(this.props);
        if (!mousePosition || !interactionConfig.tooltip) {
          return null;
        }
        var layerHoverProp = (0, _reducers.getLayerHoverProp)({
          animationConfig: animationConfig,
          interactionConfig: interactionConfig,
          hoverInfo: hoverInfo,
          layers: layers,
          layersToRender: layersToRender,
          datasets: datasets
        });
        var compareMode = interactionConfig.tooltip.config ? interactionConfig.tooltip.config.compareMode : false;
        var pinnedPosition = {
          x: 0,
          y: 0
        };
        var layerPinnedProp = null;
        if (pinned || clicked) {
          // project lnglat to screen so that tooltip follows the object on zoom
          var viewport = (0, _utils.getViewportFromMapState)(mapState);
          var lngLat = clicked ? clicked.coordinate : pinned.coordinate;
          pinnedPosition = this._getHoverXY(viewport, lngLat);
          layerPinnedProp = (0, _reducers.getLayerHoverProp)({
            animationConfig: animationConfig,
            interactionConfig: interactionConfig,
            hoverInfo: clicked,
            layers: layers,
            layersToRender: layersToRender,
            datasets: datasets
          });
          if (layerHoverProp && layerPinnedProp) {
            layerHoverProp.primaryData = layerPinnedProp.data;
            layerHoverProp.compareType = interactionConfig.tooltip.config.compareType;
          }
        }
        var commonProp = {
          onClose: this._onCloseMapPopover,
          zoom: mapState.zoom,
          container: this._deck ? this._deck.canvas : undefined
        };
        return /*#__PURE__*/_react["default"].createElement(_errorBoundary["default"], null, layerPinnedProp && /*#__PURE__*/_react["default"].createElement(MapPopover, (0, _extends2["default"])({}, pinnedPosition, commonProp, {
          layerHoverProp: layerPinnedProp,
          coordinate: interactionConfig.coordinate.enabled && (pinned || {}).coordinate,
          frozen: true,
          isBase: compareMode,
          onSetFeatures: this.props.visStateActions.setFeatures,
          setSelectedFeature: this.props.visStateActions.setSelectedFeature
          // @ts-ignore Argument of type 'Readonly<MapContainerProps>' is not assignable to parameter of type 'never'
          ,
          featureCollection: this.featureCollectionSelector(this.props)
        })), layerHoverProp && (!layerPinnedProp || compareMode) && /*#__PURE__*/_react["default"].createElement(MapPopover, (0, _extends2["default"])({
          x: mousePosition[0],
          y: mousePosition[1]
        }, commonProp, {
          layerHoverProp: layerHoverProp,
          frozen: false,
          coordinate: interactionConfig.coordinate.enabled && coordinate,
          onSetFeatures: this.props.visStateActions.setFeatures,
          setSelectedFeature: this.props.visStateActions.setSelectedFeature
          // @ts-ignore Argument of type 'Readonly<MapContainerProps>' is not assignable to parameter of type 'never'
          ,
          featureCollection: this.featureCollectionSelector(this.props)
        })));
      }

      /* eslint-enable complexity */
    }, {
      key: "_getHoverXY",
      value: function _getHoverXY(viewport, lngLat) {
        var screenCoord = !viewport || !lngLat ? null : viewport.project(lngLat);
        return screenCoord && {
          x: screenCoord[0],
          y: screenCoord[1]
        };
      }
    }, {
      key: "_renderDeckOverlay",
      value: function _renderDeckOverlay(layersForDeck) {
        var _this$context2,
          _this2 = this;
        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
          primaryMap: false
        };
        var _this$props5 = this.props,
          mapStyle = _this$props5.mapStyle,
          visState = _this$props5.visState,
          mapState = _this$props5.mapState,
          visStateActions = _this$props5.visStateActions,
          mapboxApiAccessToken = _this$props5.mapboxApiAccessToken,
          mapboxApiUrl = _this$props5.mapboxApiUrl,
          deckGlProps = _this$props5.deckGlProps,
          index = _this$props5.index,
          mapControls = _this$props5.mapControls,
          deckRenderCallbacks = _this$props5.deckRenderCallbacks,
          theme = _this$props5.theme,
          generateDeckGLLayers = _this$props5.generateDeckGLLayers,
          onMouseMove = _this$props5.onMouseMove;
        var hoverInfo = visState.hoverInfo,
          editor = visState.editor;
        var primaryMap = options.primaryMap,
          isInteractive = options.isInteractive,
          children = options.children;

        // disable double click zoom when editor is in any draw mode
        var mapDraw = mapControls.mapDraw;
        var _ref7 = mapDraw || {},
          _ref7$active = _ref7.active,
          editorMenuActive = _ref7$active === void 0 ? false : _ref7$active;
        var isEditorDrawingMode = _layers.EditorLayerUtils.isDrawingActive(editorMenuActive, editor.mode);
        var internalViewState = (_this$context2 = this.context) === null || _this$context2 === void 0 ? void 0 : _this$context2.getInternalViewState(index);
        var internalMapState = _objectSpread(_objectSpread({}, mapState), internalViewState);
        var viewport = (0, _utils.getViewportFromMapState)(internalMapState);
        var editorFeatureSelectedIndex = this.selectedPolygonIndexSelector(this.props);
        var setFeatures = visStateActions.setFeatures,
          onLayerClick = visStateActions.onLayerClick,
          setSelectedFeature = visStateActions.setSelectedFeature;
        var generateDeckGLLayersMethod = generateDeckGLLayers !== null && generateDeckGLLayers !== void 0 ? generateDeckGLLayers : _reducers.computeDeckLayers;
        var deckGlLayers = generateDeckGLLayersMethod({
          visState: visState,
          mapState: internalMapState,
          mapStyle: mapStyle
        }, {
          mapIndex: index,
          primaryMap: primaryMap,
          mapboxApiAccessToken: mapboxApiAccessToken,
          mapboxApiUrl: mapboxApiUrl,
          layersForDeck: layersForDeck,
          editorInfo: primaryMap ? {
            editor: editor,
            editorMenuActive: editorMenuActive,
            onSetFeatures: setFeatures,
            setSelectedFeature: setSelectedFeature,
            // @ts-ignore Argument of type 'Readonly<MapContainerProps>' is not assignable to parameter of type 'never'
            featureCollection: this.featureCollectionSelector(this.props),
            selectedFeatureIndexes: this.selectedFeatureIndexArraySelector(
            // @ts-ignore Argument of type 'unknown' is not assignable to parameter of type 'number'.
            editorFeatureSelectedIndex),
            viewport: viewport
          } : undefined
        }, {
          onLayerHover: this._onLayerHover,
          onSetLayerDomain: this._onLayerSetDomain,
          onFilteredItemsChange: this._onLayerFilteredItemsChange,
          onWMSFeatureInfo: this._onWMSFeatureInfo
        }, deckGlProps);
        var extraDeckParams = {};
        if (primaryMap) {
          extraDeckParams.getTooltip = function (info) {
            return _layers.EditorLayerUtils.getTooltip(info, {
              editorMenuActive: editorMenuActive,
              editor: editor,
              theme: theme
            });
          };
          extraDeckParams.getCursor = function (_ref8) {
            var isDragging = _ref8.isDragging;
            var editorCursor = _layers.EditorLayerUtils.getCursor({
              editorMenuActive: editorMenuActive,
              editor: editor,
              hoverInfo: hoverInfo
            });
            if (editorCursor) return editorCursor;
            if (isDragging) return 'grabbing';
            if (hoverInfo !== null && hoverInfo !== void 0 && hoverInfo.layer) return 'pointer';
            return 'grab';
          };
        }
        var effects = this._isOKToRenderEffects(index) ? (0, _utils.computeDeckEffects)({
          visState: visState,
          mapState: mapState
        }) : [];
        var views = deckGlProps !== null && deckGlProps !== void 0 && deckGlProps.views ? deckGlProps === null || deckGlProps === void 0 ? void 0 : deckGlProps.views() : new _core2.MapView({
          legacyMeterSizes: true
        });
        var allDeckGlProps = _objectSpread(_objectSpread({}, deckGlProps), {}, {
          pickingRadius: _constants.DEFAULT_PICKING_RADIUS,
          views: views,
          layers: deckGlLayers,
          effects: effects
        });
        if (typeof (deckRenderCallbacks === null || deckRenderCallbacks === void 0 ? void 0 : deckRenderCallbacks.onDeckRender) === 'function') {
          allDeckGlProps = deckRenderCallbacks.onDeckRender(allDeckGlProps);
          if (!allDeckGlProps) {
            // if onDeckRender returns null, do not render deck.gl
            return null;
          }
        }
        return /*#__PURE__*/_react["default"].createElement("div", isInteractive ? {
          onMouseMove: primaryMap ? function (event) {
            onMouseMove === null || onMouseMove === void 0 || onMouseMove(event);
            _this2._onMouseMoveDebounced(event, viewport);
          } : undefined
        } : {
          style: {
            pointerEvents: 'none'
          }
        }, /*#__PURE__*/_react["default"].createElement(_react2["default"], (0, _extends2["default"])({
          id: "default-deckgl-overlay",
          onLoad: function onLoad() {
            if (typeof (deckRenderCallbacks === null || deckRenderCallbacks === void 0 ? void 0 : deckRenderCallbacks.onDeckLoad) === 'function') {
              deckRenderCallbacks.onDeckLoad();
            }
          }
        }, allDeckGlProps, {
          controller: isInteractive ? {
            doubleClickZoom: !isEditorDrawingMode,
            dragRotate: this.props.mapState.dragRotate
          } : false,
          initialViewState: internalViewState,
          onBeforeRender: this._onBeforeRender,
          onViewStateChange: isInteractive ? this._onViewportChange : undefined
        }, extraDeckParams, {
          onHover: isInteractive ? function (data) {
            var res = _layers.EditorLayerUtils.onHover(data, {
              editorMenuActive: editorMenuActive,
              editor: editor,
              hoverInfo: hoverInfo
            });
            if (res) return;
            _this2._onLayerHoverDebounced(data, index);
          } : null,
          onClick: function onClick(data, event) {
            // @ts-ignore
            (0, _utils.normalizeEvent)(event.srcEvent, viewport);
            var res = _layers.EditorLayerUtils.onClick(data, event, {
              editorMenuActive: editorMenuActive,
              editor: editor,
              onLayerClick: onLayerClick,
              setSelectedFeature: setSelectedFeature,
              mapIndex: index
            });
            if (res) return;
            visStateActions.onLayerClick(data);
          },
          onError: this._onDeckError,
          ref: function ref(comp) {
            // @ts-ignore
            if (comp && comp.deck && !_this2._deck) {
              // @ts-ignore
              _this2._deck = comp.deck;
            }
          },
          onWebGLInitialized: function onWebGLInitialized(gl) {
            return _this2._onDeckInitialized(gl);
          },
          onAfterRender: function onAfterRender() {
            if (typeof (deckRenderCallbacks === null || deckRenderCallbacks === void 0 ? void 0 : deckRenderCallbacks.onDeckAfterRender) === 'function') {
              deckRenderCallbacks.onDeckAfterRender(allDeckGlProps);
            }
            var anyActiveLayerLoading = (0, _reducers.areAnyDeckLayersLoading)(allDeckGlProps.layers);
            if (anyActiveLayerLoading !== _this2.anyActiveLayerLoading) {
              _this2._onLayerLoadingStateChange();
              _this2.anyActiveLayerLoading = anyActiveLayerLoading;
            }
          }
        }), children));
      }
    }, {
      key: "_updateMapboxLayers",
      value: function _updateMapboxLayers() {
        var mapboxLayers = this.mapboxLayersSelector(this.props);
        if (!Object.keys(mapboxLayers).length && !Object.keys(this.previousLayers).length) {
          return;
        }
        (0, _layers.updateMapboxLayers)(this._map, mapboxLayers, this.previousLayers);
        this.previousLayers = mapboxLayers;
      }
    }, {
      key: "_renderMapboxOverlays",
      value: function _renderMapboxOverlays() {
        if (this._map && this._map.isStyleLoaded()) {
          this._updateMapboxLayers();
        }
      }
    }, {
      key: "_renderMap",
      value: /* eslint-disable complexity */
      function _renderMap() {
        var _mapStyle$mapStyles, _getApplicationConfig, _this$context3, _mapStyle$bottomMapSt;
        var _this$props6 = this.props,
          visState = _this$props6.visState,
          mapState = _this$props6.mapState,
          mapStyle = _this$props6.mapStyle,
          mapStateActions = _this$props6.mapStateActions,
          _this$props6$MapCompo = _this$props6.MapComponent,
          MapComponent = _this$props6$MapCompo === void 0 ? _reactMapGl.Map : _this$props6$MapCompo,
          mapboxApiAccessToken = _this$props6.mapboxApiAccessToken,
          mapControls = _this$props6.mapControls,
          isExport = _this$props6.isExport,
          locale = _this$props6.locale,
          uiStateActions = _this$props6.uiStateActions,
          visStateActions = _this$props6.visStateActions,
          index = _this$props6.index,
          primary = _this$props6.primary,
          bottomMapContainerProps = _this$props6.bottomMapContainerProps,
          topMapContainerProps = _this$props6.topMapContainerProps,
          theme = _this$props6.theme,
          _this$props6$datasetA = _this$props6.datasetAttributions,
          datasetAttributions = _this$props6$datasetA === void 0 ? [] : _this$props6$datasetA,
          _this$props6$containe = _this$props6.containerId,
          containerId = _this$props6$containe === void 0 ? 0 : _this$props6$containe,
          isLoadingIndicatorVisible = _this$props6.isLoadingIndicatorVisible,
          activeSidePanel = _this$props6.activeSidePanel,
          sidePanelWidth = _this$props6.sidePanelWidth;
        var layers = visState.layers,
          datasets = visState.datasets,
          editor = visState.editor,
          interactionConfig = visState.interactionConfig;
        var layersToRender = this.layersToRenderSelector(this.props);
        var layersForDeck = this.layersForDeckSelector(this.props);

        // Current style can be a custom style, from which we pull the mapbox API acccess token
        var currentStyle = (_mapStyle$mapStyles = mapStyle.mapStyles) === null || _mapStyle$mapStyles === void 0 ? void 0 : _mapStyle$mapStyles[mapStyle.styleType];
        var baseMapLibraryName = (0, _utils.getBaseMapLibrary)(currentStyle);
        var baseMapLibraryConfig = (_getApplicationConfig = (0, _utils.getApplicationConfig)().baseMapLibraryConfig) === null || _getApplicationConfig === void 0 ? void 0 : _getApplicationConfig[baseMapLibraryName];
        var internalViewState = (_this$context3 = this.context) === null || _this$context3 === void 0 ? void 0 : _this$context3.getInternalViewState(index);
        var mapProps = _objectSpread(_objectSpread({}, internalViewState), {}, {
          preserveDrawingBuffer: true,
          mapboxAccessToken: (currentStyle === null || currentStyle === void 0 ? void 0 : currentStyle.accessToken) || mapboxApiAccessToken,
          // baseApiUrl: mapboxApiUrl,
          mapLib: baseMapLibraryConfig.getMapLib(),
          transformRequest: this.props.transformRequest || (0, _utils.transformRequest)((currentStyle === null || currentStyle === void 0 ? void 0 : currentStyle.accessToken) || mapboxApiAccessToken)
        });
        var hasGeocoderLayer = Boolean(layers.find(function (l) {
          return l.id === _constants.GEOCODER_LAYER_ID;
        }));
        var isSplit = Boolean(mapState.isSplit);
        var deck = this._renderDeckOverlay(layersForDeck, {
          primaryMap: true,
          isInteractive: true,
          children: /*#__PURE__*/_react["default"].createElement(MapComponent, (0, _extends2["default"])({
            key: "bottom-".concat(baseMapLibraryName)
          }, mapProps, {
            mapStyle: (_mapStyle$bottomMapSt = mapStyle.bottomMapStyle) !== null && _mapStyle$bottomMapSt !== void 0 ? _mapStyle$bottomMapSt : _constants.EMPTY_MAPBOX_STYLE
          }, bottomMapContainerProps, {
            ref: this._setMapRef
          }))
        });
        if (!deck) {
          // deckOverlay can be null if onDeckRender returns null
          // in this case we don't want to render the map
          return null;
        }
        return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement(MapControl, {
          mapState: mapState,
          datasets: datasets,
          availableLocales: LOCALE_CODES_ARRAY,
          dragRotate: mapState.dragRotate,
          isSplit: isSplit,
          primary: Boolean(primary),
          isExport: isExport,
          layers: layers,
          layersToRender: layersToRender,
          mapIndex: index || 0,
          mapControls: mapControls,
          readOnly: this.props.readOnly,
          scale: mapState.scale || 1,
          logoComponent: this.props.logoComponent,
          top: interactionConfig.geocoder && interactionConfig.geocoder.enabled ? theme.mapControlTop : 0,
          editor: editor,
          locale: locale,
          onTogglePerspective: mapStateActions.togglePerspective,
          onToggleSplitMap: mapStateActions.toggleSplitMap,
          onMapToggleLayer: this._handleMapToggleLayer,
          onToggleMapControl: this._toggleMapControl,
          onToggleSplitMapViewport: mapStateActions.toggleSplitMapViewport,
          onSetEditorMode: visStateActions.setEditorMode,
          onSetLocale: uiStateActions.setLocale,
          onToggleEditorVisibility: visStateActions.toggleEditorVisibility,
          onLayerVisConfigChange: visStateActions.layerVisConfigChange,
          mapHeight: mapState.height,
          setMapControlSettings: uiStateActions.setMapControlSettings,
          activeSidePanel: activeSidePanel
        }), isSplitSelector(this.props) && /*#__PURE__*/_react["default"].createElement(Droppable, {
          containerId: containerId
        }), deck, this._renderMapboxOverlays(), /*#__PURE__*/_react["default"].createElement(Editor, {
          index: index || 0,
          datasets: datasets,
          editor: editor,
          filters: this.polygonFiltersSelector(this.props),
          layers: layers,
          onDeleteFeature: visStateActions.deleteFeature,
          onSelect: visStateActions.setSelectedFeature,
          onTogglePolygonFilter: visStateActions.setPolygonFilterLayer,
          onSetEditorMode: visStateActions.setEditorMode,
          style: {
            pointerEvents: 'all',
            position: 'absolute',
            display: editor.visible ? 'block' : 'none'
          }
        }), this.props.children, mapStyle.topMapStyle ? /*#__PURE__*/_react["default"].createElement(MapComponent, (0, _extends2["default"])({
          key: "top-".concat(baseMapLibraryName),
          viewState: internalViewState,
          mapStyle: mapStyle.topMapStyle,
          style: MAP_STYLE.top,
          mapboxAccessToken: mapProps.mapboxAccessToken,
          transformRequest: mapProps.transformRequest,
          mapLib: baseMapLibraryConfig.getMapLib()
        }, topMapContainerProps)) : null, hasGeocoderLayer ? this._renderDeckOverlay((0, _defineProperty2["default"])({}, _constants.GEOCODER_LAYER_ID, hasGeocoderLayer), {
          primaryMap: false,
          isInteractive: false
        }) : null, this._renderMapPopover(), primary !== isSplit ? /*#__PURE__*/_react["default"].createElement(_loadingIndicator["default"], {
          isVisible: Boolean(isLoadingIndicatorVisible || this.anyActiveLayerLoading),
          activeSidePanel: Boolean(activeSidePanel),
          sidePanelWidth: sidePanelWidth
        }) : null, this.props.primary ? /*#__PURE__*/_react["default"].createElement(Attribution, {
          showBaseMapLibLogo: this.state.showBaseMapAttribution,
          showOsmBasemapAttribution: true,
          datasetAttributions: datasetAttributions,
          baseMapLibraryConfig: baseMapLibraryConfig
        }) : null);
      }
    }, {
      key: "render",
      value: function render() {
        var _mapStyle$mapStyles2, _getApplicationConfig2;
        var _this$props7 = this.props,
          visState = _this$props7.visState,
          mapStyle = _this$props7.mapStyle;
        var mapContent = this._renderMap();
        if (!mapContent) {
          // mapContent can be null if onDeckRender returns null
          // in this case we don't want to render the map
          return null;
        }
        var currentStyle = (_mapStyle$mapStyles2 = mapStyle.mapStyles) === null || _mapStyle$mapStyles2 === void 0 ? void 0 : _mapStyle$mapStyles2[mapStyle.styleType];
        var baseMapLibraryName = (0, _utils.getBaseMapLibrary)(currentStyle);
        var baseMapLibraryConfig = (_getApplicationConfig2 = (0, _utils.getApplicationConfig)().baseMapLibraryConfig) === null || _getApplicationConfig2 === void 0 ? void 0 : _getApplicationConfig2[baseMapLibraryName];
        return /*#__PURE__*/_react["default"].createElement(StyledMap, {
          ref: this._ref,
          style: this.styleSelector(this.props),
          onContextMenu: function onContextMenu(event) {
            return event.preventDefault();
          },
          $mixBlendMode: visState.overlayBlending,
          $mapLibCssClass: baseMapLibraryConfig.mapLibCssClass
        }, mapContent);
      }
    }]);
  }(_react.Component);
  (0, _defineProperty2["default"])(MapContainer, "contextType", _mapViewStateContext.MapViewStateContext);
  (0, _defineProperty2["default"])(MapContainer, "defaultProps", {
    MapComponent: _reactMapGl.Map,
    deckGlProps: {},
    index: 0,
    primary: true
  });
  return (0, _styledComponents.withTheme)(MapContainer);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9yZWFjdE1hcEdsIiwiX3JlYWN0MiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfcmVzZWxlY3QiLCJfY29yZSIsIl9kZWJvdW5jZSIsIl9tYXBQb3BvdmVyIiwiX21hcENvbnRyb2wiLCJfc3R5bGVkQ29tcG9uZW50czIiLCJfZWRpdG9yIiwiX2xheWVycyIsIl91dGlscyIsIl9zdHlsZXMiLCJfY29uc3RhbnRzIiwiX2RuZExheWVySXRlbXMiLCJfbWFwVmlld1N0YXRlQ29udGV4dCIsIl9lcnJvckJvdW5kYXJ5IiwiX2xvY2FsaXphdGlvbiIsIl9jb3JlMiIsIl9yZWR1Y2VycyIsIl9sb2FkaW5nSW5kaWNhdG9yIiwiX3RlbXBsYXRlT2JqZWN0IiwiX3RlbXBsYXRlT2JqZWN0MiIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiX3R5cGVvZiIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsIl9jYWxsU3VwZXIiLCJfZ2V0UHJvdG90eXBlT2YyIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yIiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIlJlZmxlY3QiLCJjb25zdHJ1Y3QiLCJjb25zdHJ1Y3RvciIsIkJvb2xlYW4iLCJwcm90b3R5cGUiLCJ2YWx1ZU9mIiwiREVCT1VOQ0VfVklFV1BPUlRfUFJPUEFHQVRFIiwiREVCT1VOQ0VfTU9VU0VfTU9WRV9QUk9QQUdBVEUiLCJERUJPVU5DRV9MT0FESU5HX1NUQVRFX1BST1BBR0FURSIsIk1BUF9TVFlMRSIsImNvbnRhaW5lciIsImRpc3BsYXkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwidG9wIiwicG9pbnRlckV2ZW50cyIsIkxPQ0FMRV9DT0RFU19BUlJBWSIsIkxPQ0FMRV9DT0RFUyIsIlN0eWxlZE1hcCIsInN0eWxlZCIsIlN0eWxlZE1hcENvbnRhaW5lciIsIl9yZWYiLCJfcmVmJCRtaXhCbGVuZE1vZGUiLCIkbWl4QmxlbmRNb2RlIiwiJG1hcExpYkNzc0NsYXNzIiwiY29uY2F0IiwiTUFQQk9YR0xfU1RZTEVfVVBEQVRFIiwiTUFQQk9YR0xfUkVOREVSIiwibm9wIiwiTWFwTGliTG9nbyIsIl9yZWYyIiwiYmFzZU1hcExpYnJhcnlDb25maWciLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJtYXJnaW5MZWZ0IiwibWFwTGliQ3NzQ2xhc3MiLCJ0YXJnZXQiLCJyZWwiLCJocmVmIiwibWFwTGliVXJsIiwibWFwTGliTmFtZSIsIlN0eWxlZERyb3BwYWJsZSIsImRpdiIsIl90YWdnZWRUZW1wbGF0ZUxpdGVyYWwyIiwicHJvcHMiLCJpc092ZXIiLCJ0aGVtZSIsImRuZE92ZXJCYWNrZ3JvdW5kQ29sb3IiLCJpc1NwbGl0U2VsZWN0b3IiLCJleHBvcnRzIiwidmlzU3RhdGUiLCJzcGxpdE1hcHMiLCJEcm9wcGFibGUiLCJfcmVmMyIsImNvbnRhaW5lcklkIiwiX3VzZURyb3BwYWJsZSIsInVzZURyb3BwYWJsZSIsImlkIiwiZGF0YSIsInR5cGUiLCJEUk9QUEFCTEVfTUFQX0NPTlRBSU5FUl9UWVBFIiwiaW5kZXgiLCJkaXNhYmxlZCIsInNldE5vZGVSZWYiLCJyZWYiLCJTdHlsZWREYXRhc2V0QXR0cmlidXRpb25zQ29udGFpbmVyIiwiaXNQYWxtIiwibGFiZWxDb2xvciIsIkRhdGFzZXRBdHRyaWJ1dGlvbnMiLCJfcmVmNCIsImRhdGFzZXRBdHRyaWJ1dGlvbnMiLCJGcmFnbWVudCIsIm1hcCIsImRzIiwiaWR4IiwiX2V4dGVuZHMyIiwidXJsIiwia2V5IiwidGl0bGUiLCJBdHRyaWJ1dGlvbiIsIl9yZWY1IiwiX3JlZjUkc2hvd0Jhc2VNYXBMaWJMIiwic2hvd0Jhc2VNYXBMaWJMb2dvIiwiX3JlZjUkc2hvd09zbUJhc2VtYXBBIiwic2hvd09zbUJhc2VtYXBBdHRyaWJ1dGlvbiIsImhhc01vYmlsZVdpZHRoIiwiYnJlYWtQb2ludFZhbHVlcyIsIm1lbW9pemVkQ29tcG9uZW50cyIsInVzZU1lbW8iLCJTdHlsZWRBdHRyaWJ1dGlvbiIsIm1hcExpYkF0dHJpYnV0aW9uQ3NzQ2xhc3MiLCJFbmRIb3Jpem9udGFsRmxleGJveCIsIk1hcENvbnRhaW5lckZhY3RvcnkiLCJkZXBzIiwiTWFwUG9wb3ZlckZhY3RvcnkiLCJNYXBDb250cm9sRmFjdG9yeSIsIkVkaXRvckZhY3RvcnkiLCJNYXBQb3BvdmVyIiwiTWFwQ29udHJvbCIsIkVkaXRvciIsIk1hcENvbnRhaW5lciIsIl9Db21wb25lbnQiLCJfdGhpcyIsIl9jbGFzc0NhbGxDaGVjazIiLCJzaG93QmFzZU1hcEF0dHJpYnV0aW9uIiwiY3JlYXRlUmVmIiwiZGltZW5zaW9ucyIsIl90aGlzJHByb3BzIiwicHJpbWFyeSIsIm1hcFN0YXRlQWN0aW9ucyIsInVwZGF0ZU1hcCIsImxheWVycyIsImxheWVyRGF0YSIsImNyZWF0ZVNlbGVjdG9yIiwic3BsaXRNYXBTZWxlY3RvciIsInNwbGl0TWFwSW5kZXhTZWxlY3RvciIsImdldE1hcExheWVyc0Zyb21TcGxpdE1hcHMiLCJsYXllck9yZGVyIiwibGF5ZXJzU2VsZWN0b3IiLCJsYXllckRhdGFTZWxlY3RvciIsIm1hcExheWVyc1NlbGVjdG9yIiwicHJlcGFyZUxheWVyc1RvUmVuZGVyIiwicHJlcGFyZUxheWVyc0ZvckRlY2siLCJmaWx0ZXJzIiwiZmlsdGVyc1NlbGVjdG9yIiwiZiIsIkZJTFRFUl9UWVBFUyIsInBvbHlnb24iLCJlbmFibGVkIiwiZWRpdG9yIiwiZmVhdHVyZXMiLCJzZWxlY3RlZEZlYXR1cmUiLCJwb2x5Z29uRmlsdGVyc1NlbGVjdG9yIiwiZmVhdHVyZXNTZWxlY3RvciIsInBvbHlnb25GaWx0ZXJzIiwidmFsdWUiLCJmZWF0dXJlQ29sbGVjdGlvblNlbGVjdG9yIiwic2VsZWN0ZWRGZWF0dXJlU2VsZWN0b3IiLCJjb2xsZWN0aW9uIiwiZmluZEluZGV4IiwiX3Byb3BzJGdlbmVyYXRlTWFwYm94IiwiZ2VuZXJhdGVNYXBib3hMYXllcnMiLCJsYXllck9yZGVyU2VsZWN0b3IiLCJsYXllcnNUb1JlbmRlclNlbGVjdG9yIiwiZ2VuZXJhdGVNYXBib3hMYXllck1ldGhvZFNlbGVjdG9yIiwibGF5ZXIiLCJsYXllcnNUb1JlbmRlciIsImdlbmVyYXRlTWFwYm94TGF5ZXJNZXRob2QiLCJtYXBTdHlsZSIsInN0eWxlVHlwZSIsImJhY2tncm91bmRDb2xvciIsIm1hcFN0eWxlVHlwZVNlbGVjdG9yIiwibWFwU3R5bGVCYWNrZ3JvdW5kQ29sb3JTZWxlY3RvciIsIk5PX01BUF9JRCIsInJnYlRvSGV4IiwidmlzU3RhdGVBY3Rpb25zIiwib25MYXllckNsaWNrIiwiX2lkeCIsImluZm8iLCJvbkxheWVySG92ZXIiLCJsYXllckNvbmZpZ0NoYW5nZSIsImNvbG9yRG9tYWluIiwiZG9tYWluIiwiYWdncmVnYXRlZEJpbnMiLCJldmVudCIsImxheWVyRmlsdGVyZWRJdGVtc0NoYW5nZSIsIndtc0ZlYXR1cmVJbmZvIiwiZmVhdHVyZUluZm8iLCJjb29yZGluYXRlIiwibGF5ZXJJZCIsIl90aGlzJHByb3BzMiIsIl90aGlzJHByb3BzMiRpbmRleCIsIm1hcEluZGV4IiwidG9nZ2xlTGF5ZXJGb3JNYXAiLCJ1cGRhdGUiLCJwcmV2aW91c0xheWVycyIsIl91cGRhdGVNYXBib3hMYXllcnMiLCJzZXRTdGF0ZSIsImlzU3R5bGVVc2luZ01hcGJveFRpbGVzIiwiaXNTdHlsZVVzaW5nT3BlblN0cmVldE1hcFRpbGVzIiwib25NYXBTdHlsZUxvYWRlZCIsIl9tYXAiLCJtYXBSZWYiLCJnZXRNYXAiLCJfdGhpcyRfbWFwIiwiX3RoaXMkX21hcDIiLCJvZmYiLCJvbiIsIl9vbk1hcGJveFN0eWxlVXBkYXRlIiwib25NYXBSZW5kZXIiLCJnZXRNYXBib3hSZWYiLCJfcmVmNiIsImdsIiwic2V0TGF5ZXJCbGVuZGluZyIsImxheWVyQmxlbmRpbmciLCJlcnJvciIsImVycm9yTWVzc2FnZSIsIm1lc3NhZ2UiLCJsYXllck1lc3NhZ2UiLCJlcnJvck1lc3NhZ2VGdWxsIiwibGFzdFNob3duIiwiX2RlY2tHTEVycm9yc0VsYXBzZWQiLCJEYXRlIiwibm93IiwiVEhST1RUTEVfTk9USUZJQ0FUSU9OX1RJTUUiLCJleHRyYUxheWVyTWVzc2FnZSIsIl90b3BNb3N0TGF5ZXIkcHJvcHMiLCJ0b3BNb3N0TGF5ZXIiLCJwYXJlbnQiLCJsYXllclNldElzVmFsaWQiLCJ1aVN0YXRlQWN0aW9ucyIsImFkZE5vdGlmaWNhdGlvbiIsImVycm9yTm90aWZpY2F0aW9uIiwiZGVib3VuY2UiLCJfdGhpcyRjb250ZXh0Iiwidmlld1N0YXRlIiwiY29udGV4dCIsImdldEludGVybmFsVmlld1N0YXRlIiwib25WaWV3UG9ydENoYW5nZSIsIm9uVmlld1N0YXRlQ2hhbmdlIiwidmlld3BvcnQiLCJpc0V4cG9ydCIsInNldEludGVybmFsVmlld1N0YXRlIiwiX29uVmlld3BvcnRDaGFuZ2VQcm9wYWdhdGVEZWJvdW5jZWQiLCJvbk1vdXNlTW92ZSIsIm5vcm1hbGl6ZUV2ZW50Iiwic2V0TG9hZGluZ0luZGljYXRvciIsImNoYW5nZSIsInBhbmVsSWQiLCJfdGhpcyRwcm9wczMiLCJ0b2dnbGVNYXBDb250cm9sIiwiTnVtYmVyIiwiX2luaGVyaXRzMiIsIl9jcmVhdGVDbGFzczIiLCJjb21wb25lbnREaWRNb3VudCIsImN1cnJlbnQiLCJvYnNlcnZlRGltZW5zaW9ucyIsIl9oYW5kbGVSZXNpemUiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsIl90aGlzJF9tYXAzIiwiX3RoaXMkX21hcDQiLCJ1bm9ic2VydmVEaW1lbnNpb25zIiwiX29uRGVja0luaXRpYWxpemVkIiwib25EZWNrSW5pdGlhbGl6ZWQiLCJfZGVjayIsIl9pc09LVG9SZW5kZXJFZmZlY3RzIiwidmlld0luZGV4IiwiX3RoaXMkX2RlY2siLCJ2aWV3TWFuYWdlciIsIl92aWV3cG9ydHMiLCJfcmVuZGVyTWFwUG9wb3ZlciIsIl90aGlzJHByb3BzJHZpc1N0YXRlJCIsImhvdmVySW5mbyIsIl90aGlzJHByb3BzNCIsIm1hcFN0YXRlIiwiX3RoaXMkcHJvcHM0JHZpc1N0YXRlIiwiY2xpY2tlZCIsImRhdGFzZXRzIiwiaW50ZXJhY3Rpb25Db25maWciLCJhbmltYXRpb25Db25maWciLCJfdGhpcyRwcm9wczQkdmlzU3RhdGUyIiwibW91c2VQb3MiLCJtb3VzZVBvc2l0aW9uIiwicGlubmVkIiwidG9vbHRpcCIsImxheWVySG92ZXJQcm9wIiwiZ2V0TGF5ZXJIb3ZlclByb3AiLCJjb21wYXJlTW9kZSIsImNvbmZpZyIsInBpbm5lZFBvc2l0aW9uIiwieCIsInkiLCJsYXllclBpbm5lZFByb3AiLCJnZXRWaWV3cG9ydEZyb21NYXBTdGF0ZSIsImxuZ0xhdCIsIl9nZXRIb3ZlclhZIiwicHJpbWFyeURhdGEiLCJjb21wYXJlVHlwZSIsImNvbW1vblByb3AiLCJvbkNsb3NlIiwiX29uQ2xvc2VNYXBQb3BvdmVyIiwiem9vbSIsImNhbnZhcyIsInVuZGVmaW5lZCIsImZyb3plbiIsImlzQmFzZSIsIm9uU2V0RmVhdHVyZXMiLCJzZXRGZWF0dXJlcyIsInNldFNlbGVjdGVkRmVhdHVyZSIsImZlYXR1cmVDb2xsZWN0aW9uIiwic2NyZWVuQ29vcmQiLCJwcm9qZWN0IiwiX3JlbmRlckRlY2tPdmVybGF5IiwibGF5ZXJzRm9yRGVjayIsIl90aGlzJGNvbnRleHQyIiwiX3RoaXMyIiwib3B0aW9ucyIsInByaW1hcnlNYXAiLCJfdGhpcyRwcm9wczUiLCJtYXBib3hBcGlBY2Nlc3NUb2tlbiIsIm1hcGJveEFwaVVybCIsImRlY2tHbFByb3BzIiwibWFwQ29udHJvbHMiLCJkZWNrUmVuZGVyQ2FsbGJhY2tzIiwiZ2VuZXJhdGVEZWNrR0xMYXllcnMiLCJpc0ludGVyYWN0aXZlIiwiY2hpbGRyZW4iLCJtYXBEcmF3IiwiX3JlZjciLCJfcmVmNyRhY3RpdmUiLCJhY3RpdmUiLCJlZGl0b3JNZW51QWN0aXZlIiwiaXNFZGl0b3JEcmF3aW5nTW9kZSIsIkVkaXRvckxheWVyVXRpbHMiLCJpc0RyYXdpbmdBY3RpdmUiLCJtb2RlIiwiaW50ZXJuYWxWaWV3U3RhdGUiLCJpbnRlcm5hbE1hcFN0YXRlIiwiZWRpdG9yRmVhdHVyZVNlbGVjdGVkSW5kZXgiLCJzZWxlY3RlZFBvbHlnb25JbmRleFNlbGVjdG9yIiwiZ2VuZXJhdGVEZWNrR0xMYXllcnNNZXRob2QiLCJjb21wdXRlRGVja0xheWVycyIsImRlY2tHbExheWVycyIsImVkaXRvckluZm8iLCJzZWxlY3RlZEZlYXR1cmVJbmRleGVzIiwic2VsZWN0ZWRGZWF0dXJlSW5kZXhBcnJheVNlbGVjdG9yIiwiX29uTGF5ZXJIb3ZlciIsIm9uU2V0TGF5ZXJEb21haW4iLCJfb25MYXllclNldERvbWFpbiIsIm9uRmlsdGVyZWRJdGVtc0NoYW5nZSIsIl9vbkxheWVyRmlsdGVyZWRJdGVtc0NoYW5nZSIsIm9uV01TRmVhdHVyZUluZm8iLCJfb25XTVNGZWF0dXJlSW5mbyIsImV4dHJhRGVja1BhcmFtcyIsImdldFRvb2x0aXAiLCJnZXRDdXJzb3IiLCJfcmVmOCIsImlzRHJhZ2dpbmciLCJlZGl0b3JDdXJzb3IiLCJlZmZlY3RzIiwiY29tcHV0ZURlY2tFZmZlY3RzIiwidmlld3MiLCJNYXBWaWV3IiwibGVnYWN5TWV0ZXJTaXplcyIsImFsbERlY2tHbFByb3BzIiwicGlja2luZ1JhZGl1cyIsIkRFRkFVTFRfUElDS0lOR19SQURJVVMiLCJvbkRlY2tSZW5kZXIiLCJfb25Nb3VzZU1vdmVEZWJvdW5jZWQiLCJvbkxvYWQiLCJvbkRlY2tMb2FkIiwiY29udHJvbGxlciIsImRvdWJsZUNsaWNrWm9vbSIsImRyYWdSb3RhdGUiLCJpbml0aWFsVmlld1N0YXRlIiwib25CZWZvcmVSZW5kZXIiLCJfb25CZWZvcmVSZW5kZXIiLCJfb25WaWV3cG9ydENoYW5nZSIsIm9uSG92ZXIiLCJyZXMiLCJfb25MYXllckhvdmVyRGVib3VuY2VkIiwib25DbGljayIsInNyY0V2ZW50Iiwib25FcnJvciIsIl9vbkRlY2tFcnJvciIsImNvbXAiLCJkZWNrIiwib25XZWJHTEluaXRpYWxpemVkIiwib25BZnRlclJlbmRlciIsIm9uRGVja0FmdGVyUmVuZGVyIiwiYW55QWN0aXZlTGF5ZXJMb2FkaW5nIiwiYXJlQW55RGVja0xheWVyc0xvYWRpbmciLCJfb25MYXllckxvYWRpbmdTdGF0ZUNoYW5nZSIsIm1hcGJveExheWVycyIsIm1hcGJveExheWVyc1NlbGVjdG9yIiwidXBkYXRlTWFwYm94TGF5ZXJzIiwiX3JlbmRlck1hcGJveE92ZXJsYXlzIiwiaXNTdHlsZUxvYWRlZCIsIl9yZW5kZXJNYXAiLCJfbWFwU3R5bGUkbWFwU3R5bGVzIiwiX2dldEFwcGxpY2F0aW9uQ29uZmlnIiwiX3RoaXMkY29udGV4dDMiLCJfbWFwU3R5bGUkYm90dG9tTWFwU3QiLCJfdGhpcyRwcm9wczYiLCJfdGhpcyRwcm9wczYkTWFwQ29tcG8iLCJNYXBDb21wb25lbnQiLCJNYXAiLCJsb2NhbGUiLCJib3R0b21NYXBDb250YWluZXJQcm9wcyIsInRvcE1hcENvbnRhaW5lclByb3BzIiwiX3RoaXMkcHJvcHM2JGRhdGFzZXRBIiwiX3RoaXMkcHJvcHM2JGNvbnRhaW5lIiwiaXNMb2FkaW5nSW5kaWNhdG9yVmlzaWJsZSIsImFjdGl2ZVNpZGVQYW5lbCIsInNpZGVQYW5lbFdpZHRoIiwibGF5ZXJzRm9yRGVja1NlbGVjdG9yIiwiY3VycmVudFN0eWxlIiwibWFwU3R5bGVzIiwiYmFzZU1hcExpYnJhcnlOYW1lIiwiZ2V0QmFzZU1hcExpYnJhcnkiLCJnZXRBcHBsaWNhdGlvbkNvbmZpZyIsIm1hcFByb3BzIiwicHJlc2VydmVEcmF3aW5nQnVmZmVyIiwibWFwYm94QWNjZXNzVG9rZW4iLCJhY2Nlc3NUb2tlbiIsIm1hcExpYiIsImdldE1hcExpYiIsInRyYW5zZm9ybVJlcXVlc3QiLCJoYXNHZW9jb2RlckxheWVyIiwiZmluZCIsImwiLCJHRU9DT0RFUl9MQVlFUl9JRCIsImlzU3BsaXQiLCJib3R0b21NYXBTdHlsZSIsIkVNUFRZX01BUEJPWF9TVFlMRSIsIl9zZXRNYXBSZWYiLCJhdmFpbGFibGVMb2NhbGVzIiwicmVhZE9ubHkiLCJzY2FsZSIsImxvZ29Db21wb25lbnQiLCJnZW9jb2RlciIsIm1hcENvbnRyb2xUb3AiLCJvblRvZ2dsZVBlcnNwZWN0aXZlIiwidG9nZ2xlUGVyc3BlY3RpdmUiLCJvblRvZ2dsZVNwbGl0TWFwIiwidG9nZ2xlU3BsaXRNYXAiLCJvbk1hcFRvZ2dsZUxheWVyIiwiX2hhbmRsZU1hcFRvZ2dsZUxheWVyIiwib25Ub2dnbGVNYXBDb250cm9sIiwiX3RvZ2dsZU1hcENvbnRyb2wiLCJvblRvZ2dsZVNwbGl0TWFwVmlld3BvcnQiLCJ0b2dnbGVTcGxpdE1hcFZpZXdwb3J0Iiwib25TZXRFZGl0b3JNb2RlIiwic2V0RWRpdG9yTW9kZSIsIm9uU2V0TG9jYWxlIiwic2V0TG9jYWxlIiwib25Ub2dnbGVFZGl0b3JWaXNpYmlsaXR5IiwidG9nZ2xlRWRpdG9yVmlzaWJpbGl0eSIsIm9uTGF5ZXJWaXNDb25maWdDaGFuZ2UiLCJsYXllclZpc0NvbmZpZ0NoYW5nZSIsIm1hcEhlaWdodCIsInNldE1hcENvbnRyb2xTZXR0aW5ncyIsIm9uRGVsZXRlRmVhdHVyZSIsImRlbGV0ZUZlYXR1cmUiLCJvblNlbGVjdCIsIm9uVG9nZ2xlUG9seWdvbkZpbHRlciIsInNldFBvbHlnb25GaWx0ZXJMYXllciIsInZpc2libGUiLCJ0b3BNYXBTdHlsZSIsImlzVmlzaWJsZSIsInN0YXRlIiwicmVuZGVyIiwiX21hcFN0eWxlJG1hcFN0eWxlczIiLCJfZ2V0QXBwbGljYXRpb25Db25maWcyIiwiX3RoaXMkcHJvcHM3IiwibWFwQ29udGVudCIsInN0eWxlU2VsZWN0b3IiLCJvbkNvbnRleHRNZW51IiwicHJldmVudERlZmF1bHQiLCJvdmVybGF5QmxlbmRpbmciLCJDb21wb25lbnQiLCJNYXBWaWV3U3RhdGVDb250ZXh0Iiwid2l0aFRoZW1lIl0sInNvdXJjZXMiOlsiLi4vc3JjL21hcC1jb250YWluZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbi8vIGxpYnJhcmllc1xuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50LCBjcmVhdGVSZWYsIHVzZU1lbW99IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQsIHt3aXRoVGhlbWV9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCB7TWFwLCBNYXBSZWZ9IGZyb20gJ3JlYWN0LW1hcC1nbCc7XG5pbXBvcnQge1BpY2tJbmZvfSBmcm9tICdAZGVjay5nbC9jb3JlL2xpYi9kZWNrJztcbmltcG9ydCBEZWNrR0wgZnJvbSAnQGRlY2suZ2wvcmVhY3QnO1xuaW1wb3J0IHtjcmVhdGVTZWxlY3RvciwgU2VsZWN0b3J9IGZyb20gJ3Jlc2VsZWN0JztcbmltcG9ydCB7dXNlRHJvcHBhYmxlfSBmcm9tICdAZG5kLWtpdC9jb3JlJztcbmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnO1xuXG5pbXBvcnQge1Zpc1N0YXRlQWN0aW9ucywgTWFwU3RhdGVBY3Rpb25zLCBVSVN0YXRlQWN0aW9uc30gZnJvbSAnQGtlcGxlci5nbC9hY3Rpb25zJztcblxuLy8gY29tcG9uZW50c1xuaW1wb3J0IE1hcFBvcG92ZXJGYWN0b3J5IGZyb20gJy4vbWFwL21hcC1wb3BvdmVyJztcbmltcG9ydCBNYXBDb250cm9sRmFjdG9yeSBmcm9tICcuL21hcC9tYXAtY29udHJvbCc7XG5pbXBvcnQge1xuICBTdHlsZWRNYXBDb250YWluZXIsXG4gIFN0eWxlZEF0dHJpYnV0aW9uLFxuICBFbmRIb3Jpem9udGFsRmxleGJveFxufSBmcm9tICcuL2NvbW1vbi9zdHlsZWQtY29tcG9uZW50cyc7XG5cbmltcG9ydCBFZGl0b3JGYWN0b3J5IGZyb20gJy4vZWRpdG9yL2VkaXRvcic7XG5cbi8vIHV0aWxzXG5pbXBvcnQge1xuICBnZW5lcmF0ZU1hcGJveExheWVycyxcbiAgdXBkYXRlTWFwYm94TGF5ZXJzLFxuICBMYXllckJhc2VDb25maWcsXG4gIFZpc3VhbENoYW5uZWxEb21haW4sXG4gIEVkaXRvckxheWVyVXRpbHMsXG4gIEFnZ3JlZ2F0ZWRCaW5cbn0gZnJvbSAnQGtlcGxlci5nbC9sYXllcnMnO1xuaW1wb3J0IHtcbiAgRGF0YXNldEF0dHJpYnV0aW9uLFxuICBNYXBTdGF0ZSxcbiAgTWFwQ29udHJvbHMsXG4gIFZpZXdwb3J0LFxuICBTcGxpdE1hcCxcbiAgU3BsaXRNYXBMYXllcnNcbn0gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5pbXBvcnQge1xuICBlcnJvck5vdGlmaWNhdGlvbixcbiAgc2V0TGF5ZXJCbGVuZGluZyxcbiAgaXNTdHlsZVVzaW5nTWFwYm94VGlsZXMsXG4gIGlzU3R5bGVVc2luZ09wZW5TdHJlZXRNYXBUaWxlcyxcbiAgZ2V0QmFzZU1hcExpYnJhcnksXG4gIEJhc2VNYXBMaWJyYXJ5Q29uZmlnLFxuICB0cmFuc2Zvcm1SZXF1ZXN0LFxuICBvYnNlcnZlRGltZW5zaW9ucyxcbiAgdW5vYnNlcnZlRGltZW5zaW9ucyxcbiAgaGFzTW9iaWxlV2lkdGgsXG4gIGdldE1hcExheWVyc0Zyb21TcGxpdE1hcHMsXG4gIG9uVmlld1BvcnRDaGFuZ2UsXG4gIGdldFZpZXdwb3J0RnJvbU1hcFN0YXRlLFxuICBub3JtYWxpemVFdmVudCxcbiAgcmdiVG9IZXgsXG4gIGNvbXB1dGVEZWNrRWZmZWN0cyxcbiAgZ2V0QXBwbGljYXRpb25Db25maWcsXG4gIEdldE1hcFJlZlxufSBmcm9tICdAa2VwbGVyLmdsL3V0aWxzJztcbmltcG9ydCB7YnJlYWtQb2ludFZhbHVlc30gZnJvbSAnQGtlcGxlci5nbC9zdHlsZXMnO1xuXG4vLyBkZWZhdWx0LXNldHRpbmdzXG5pbXBvcnQge1xuICBGSUxURVJfVFlQRVMsXG4gIEdFT0NPREVSX0xBWUVSX0lELFxuICBUSFJPVFRMRV9OT1RJRklDQVRJT05fVElNRSxcbiAgREVGQVVMVF9QSUNLSU5HX1JBRElVUyxcbiAgTk9fTUFQX0lELFxuICBFTVBUWV9NQVBCT1hfU1RZTEVcbn0gZnJvbSAnQGtlcGxlci5nbC9jb25zdGFudHMnO1xuXG5pbXBvcnQge0RST1BQQUJMRV9NQVBfQ09OVEFJTkVSX1RZUEV9IGZyb20gJy4vY29tbW9uL2RuZC1sYXllci1pdGVtcyc7XG4vLyBDb250ZXh0c1xuaW1wb3J0IHtNYXBWaWV3U3RhdGVDb250ZXh0fSBmcm9tICcuL21hcC12aWV3LXN0YXRlLWNvbnRleHQnO1xuXG5pbXBvcnQgRXJyb3JCb3VuZGFyeSBmcm9tICcuL2NvbW1vbi9lcnJvci1ib3VuZGFyeSc7XG5pbXBvcnQge0xPQ0FMRV9DT0RFU30gZnJvbSAnQGtlcGxlci5nbC9sb2NhbGl6YXRpb24nO1xuaW1wb3J0IHtNYXBWaWV3fSBmcm9tICdAZGVjay5nbC9jb3JlJztcbmltcG9ydCB7XG4gIE1hcFN0eWxlLFxuICBhcmVBbnlEZWNrTGF5ZXJzTG9hZGluZyxcbiAgY29tcHV0ZURlY2tMYXllcnMsXG4gIGdldExheWVySG92ZXJQcm9wLFxuICBMYXllckhvdmVyUHJvcCxcbiAgcHJlcGFyZUxheWVyc0ZvckRlY2ssXG4gIHByZXBhcmVMYXllcnNUb1JlbmRlcixcbiAgTGF5ZXJzVG9SZW5kZXJcbn0gZnJvbSAnQGtlcGxlci5nbC9yZWR1Y2Vycyc7XG5pbXBvcnQge1Zpc1N0YXRlfSBmcm9tICdAa2VwbGVyLmdsL3NjaGVtYXMnO1xuXG5pbXBvcnQgTG9hZGluZ0luZGljYXRvciBmcm9tICcuL2xvYWRpbmctaW5kaWNhdG9yJztcblxuLy8gRGVib3VuY2UgdGhlIHByb3BhZ2F0aW9uIG9mIHZpZXdwb3J0IGNoYW5nZSBhbmQgbW91c2UgbW92ZXMgdG8gcmVkdXggc3RvcmUuXG4vLyBUaGlzIGlzIHRvIGF2b2lkIHRvbyBtYW55IHJlbmRlcnMgb2Ygb3RoZXIgY29tcG9uZW50cyB3aGVuIHRoZSBtYXAgaXNcbi8vIGJlaW5nIHBhbm5lZC96b29tZWQgKGxlYWRpbmcgdG8gbGFnZ3kgYmFzZW1hcC9kZWNrIHN5bmNpbmcpLlxuY29uc3QgREVCT1VOQ0VfVklFV1BPUlRfUFJPUEFHQVRFID0gMTA7XG5jb25zdCBERUJPVU5DRV9NT1VTRV9NT1ZFX1BST1BBR0FURSA9IDEwO1xuXG4vLyBIb3cgbG9uZyBzaG91bGQgd2Ugd2FpdCBiZXR3ZWVuIGxheWVyIGxvYWRpbmcgc3RhdGUgY2hhbmdlcyBiZWZvcmUgdHJpZ2dlcmluZyBhIFVJIHVwZGF0ZVxuY29uc3QgREVCT1VOQ0VfTE9BRElOR19TVEFURV9QUk9QQUdBVEUgPSAxMDA7XG5cbmNvbnN0IE1BUF9TVFlMRToge1trZXk6IHN0cmluZ106IFJlYWN0LkNTU1Byb3BlcnRpZXN9ID0ge1xuICBjb250YWluZXI6IHtcbiAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGhlaWdodDogJzEwMCUnXG4gIH0sXG4gIHRvcDoge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGhlaWdodDogJzEwMCUnLFxuICAgIHBvaW50ZXJFdmVudHM6ICdub25lJ1xuICB9XG59O1xuXG5jb25zdCBMT0NBTEVfQ09ERVNfQVJSQVkgPSBPYmplY3Qua2V5cyhMT0NBTEVfQ09ERVMpO1xuXG5pbnRlcmZhY2UgU3R5bGVkTWFwQ29udGFpbmVyUHJvcHMge1xuICAkbWl4QmxlbmRNb2RlPzogc3RyaW5nO1xuICAkbWFwTGliQ3NzQ2xhc3M6IHN0cmluZztcbn1cblxuY29uc3QgU3R5bGVkTWFwID0gc3R5bGVkKFN0eWxlZE1hcENvbnRhaW5lcik8U3R5bGVkTWFwQ29udGFpbmVyUHJvcHM+KFxuICAoeyRtaXhCbGVuZE1vZGUgPSAnbm9ybWFsJywgJG1hcExpYkNzc0NsYXNzfSkgPT4gYFxuICAjZGVmYXVsdC1kZWNrZ2wtb3ZlcmxheSB7XG4gICAgbWl4LWJsZW5kLW1vZGU6ICR7JG1peEJsZW5kTW9kZX07XG4gIH07XG4gICpbJHskbWFwTGliQ3NzQ2xhc3N9LWNoaWxkcmVuXSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICB9XG5gXG4pO1xuXG5jb25zdCBNQVBCT1hHTF9TVFlMRV9VUERBVEUgPSAnc3R5bGUubG9hZCc7XG5jb25zdCBNQVBCT1hHTF9SRU5ERVIgPSAncmVuZGVyJztcbmNvbnN0IG5vcCA9ICgpID0+IHtcbiAgcmV0dXJuO1xufTtcblxudHlwZSBNYXBMaWJMb2dvUHJvcHMgPSB7XG4gIGJhc2VNYXBMaWJyYXJ5Q29uZmlnOiBCYXNlTWFwTGlicmFyeUNvbmZpZztcbn07XG5cbmNvbnN0IE1hcExpYkxvZ28gPSAoe2Jhc2VNYXBMaWJyYXJ5Q29uZmlnfTogTWFwTGliTG9nb1Byb3BzKSA9PiAoXG4gIDxkaXYgY2xhc3NOYW1lPVwiYXR0cml0aW9uLWxvZ29cIj5cbiAgICBCYXNlbWFwIGJ5OlxuICAgIDxhXG4gICAgICBzdHlsZT17e21hcmdpbkxlZnQ6ICc1cHgnfX1cbiAgICAgIGNsYXNzTmFtZT17YCR7YmFzZU1hcExpYnJhcnlDb25maWcubWFwTGliQ3NzQ2xhc3N9LWN0cmwtbG9nb2B9XG4gICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICBocmVmPXtiYXNlTWFwTGlicmFyeUNvbmZpZy5tYXBMaWJVcmx9XG4gICAgICBhcmlhLWxhYmVsPXtgJHtiYXNlTWFwTGlicmFyeUNvbmZpZy5tYXBMaWJOYW1lfSBsb2dvYH1cbiAgICAvPlxuICA8L2Rpdj5cbik7XG5cbmludGVyZmFjZSBTdHlsZWREcm9wcGFibGVQcm9wcyB7XG4gIGlzT3ZlcjogYm9vbGVhbjtcbn1cblxuY29uc3QgU3R5bGVkRHJvcHBhYmxlID0gc3R5bGVkLmRpdjxTdHlsZWREcm9wcGFibGVQcm9wcz5gXG4gIGJhY2tncm91bmQtY29sb3I6ICR7cHJvcHMgPT4gKHByb3BzLmlzT3ZlciA/IHByb3BzLnRoZW1lLmRuZE92ZXJCYWNrZ3JvdW5kQ29sb3IgOiAnbm9uZScpfTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgei1pbmRleDogMTtcbmA7XG5cbmV4cG9ydCBjb25zdCBpc1NwbGl0U2VsZWN0b3IgPSBwcm9wcyA9PlxuICBwcm9wcy52aXNTdGF0ZS5zcGxpdE1hcHMgJiYgcHJvcHMudmlzU3RhdGUuc3BsaXRNYXBzLmxlbmd0aCA+IDE7XG5cbmV4cG9ydCBjb25zdCBEcm9wcGFibGUgPSAoe2NvbnRhaW5lcklkfSkgPT4ge1xuICBjb25zdCB7aXNPdmVyLCBzZXROb2RlUmVmfSA9IHVzZURyb3BwYWJsZSh7XG4gICAgaWQ6IGNvbnRhaW5lcklkLFxuICAgIGRhdGE6IHt0eXBlOiBEUk9QUEFCTEVfTUFQX0NPTlRBSU5FUl9UWVBFLCBpbmRleDogY29udGFpbmVySWR9LFxuICAgIGRpc2FibGVkOiAhY29udGFpbmVySWRcbiAgfSk7XG5cbiAgcmV0dXJuIDxTdHlsZWREcm9wcGFibGUgcmVmPXtzZXROb2RlUmVmfSBpc092ZXI9e2lzT3Zlcn0gLz47XG59O1xuXG5pbnRlcmZhY2UgU3R5bGVkRGF0YXNldEF0dHJpYnV0aW9uc0NvbnRhaW5lclByb3BzIHtcbiAgaXNQYWxtOiBib29sZWFuO1xufVxuXG5jb25zdCBTdHlsZWREYXRhc2V0QXR0cmlidXRpb25zQ29udGFpbmVyID0gc3R5bGVkLmRpdjxTdHlsZWREYXRhc2V0QXR0cmlidXRpb25zQ29udGFpbmVyUHJvcHM+YFxuICBtYXgtd2lkdGg6ICR7cHJvcHMgPT4gKHByb3BzLmlzUGFsbSA/ICcyMDBweCcgOiAnMzAwcHgnKX07XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5sYWJlbENvbG9yfTtcbiAgbWFyZ2luLXJpZ2h0OiAycHg7XG4gIG1hcmdpbi1ib3R0b206IDFweDtcbiAgbGluZS1oZWlnaHQ6ICR7cHJvcHMgPT4gKHByb3BzLmlzUGFsbSA/ICcxZW0nIDogJzEuNGVtJyl9O1xuXG4gICY6aG92ZXIge1xuICAgIHdoaXRlLXNwYWNlOiBpbmhlcml0O1xuICB9XG5gO1xuXG5jb25zdCBEYXRhc2V0QXR0cmlidXRpb25zID0gKHtcbiAgZGF0YXNldEF0dHJpYnV0aW9ucyxcbiAgaXNQYWxtXG59OiB7XG4gIGRhdGFzZXRBdHRyaWJ1dGlvbnM6IERhdGFzZXRBdHRyaWJ1dGlvbltdO1xuICBpc1BhbG06IGJvb2xlYW47XG59KSA9PiAoXG4gIDw+XG4gICAge2RhdGFzZXRBdHRyaWJ1dGlvbnM/Lmxlbmd0aCA/IChcbiAgICAgIDxTdHlsZWREYXRhc2V0QXR0cmlidXRpb25zQ29udGFpbmVyIGlzUGFsbT17aXNQYWxtfT5cbiAgICAgICAge2RhdGFzZXRBdHRyaWJ1dGlvbnMubWFwKChkcywgaWR4KSA9PiAoXG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIHsuLi4oZHMudXJsID8ge2hyZWY6IGRzLnVybH0gOiBudWxsKX1cbiAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgIGtleT17YCR7ZHMudGl0bGV9XyR7aWR4fWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2RzLnRpdGxlfVxuICAgICAgICAgICAge2lkeCAhPT0gZGF0YXNldEF0dHJpYnV0aW9ucy5sZW5ndGggLSAxID8gJywgJyA6IG51bGx9XG4gICAgICAgICAgPC9hPlxuICAgICAgICApKX1cbiAgICAgIDwvU3R5bGVkRGF0YXNldEF0dHJpYnV0aW9uc0NvbnRhaW5lcj5cbiAgICApIDogbnVsbH1cbiAgPC8+XG4pO1xuXG50eXBlIEF0dHJpYnV0aW9uUHJvcHMgPSB7XG4gIHNob3dCYXNlTWFwTGliTG9nbzogYm9vbGVhbjtcbiAgc2hvd09zbUJhc2VtYXBBdHRyaWJ1dGlvbjogYm9vbGVhbjtcbiAgZGF0YXNldEF0dHJpYnV0aW9uczogRGF0YXNldEF0dHJpYnV0aW9uW107XG4gIGJhc2VNYXBMaWJyYXJ5Q29uZmlnOiBCYXNlTWFwTGlicmFyeUNvbmZpZztcbn07XG5cbmV4cG9ydCBjb25zdCBBdHRyaWJ1dGlvbjogUmVhY3QuRkM8QXR0cmlidXRpb25Qcm9wcz4gPSAoe1xuICBzaG93QmFzZU1hcExpYkxvZ28gPSB0cnVlLFxuICBzaG93T3NtQmFzZW1hcEF0dHJpYnV0aW9uID0gZmFsc2UsXG4gIGRhdGFzZXRBdHRyaWJ1dGlvbnMsXG4gIGJhc2VNYXBMaWJyYXJ5Q29uZmlnXG59OiBBdHRyaWJ1dGlvblByb3BzKSA9PiB7XG4gIGNvbnN0IGlzUGFsbSA9IGhhc01vYmlsZVdpZHRoKGJyZWFrUG9pbnRWYWx1ZXMpO1xuXG4gIGNvbnN0IG1lbW9pemVkQ29tcG9uZW50cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghc2hvd0Jhc2VNYXBMaWJMb2dvKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8U3R5bGVkQXR0cmlidXRpb25cbiAgICAgICAgICBtYXBMaWJDc3NDbGFzcz17YmFzZU1hcExpYnJhcnlDb25maWcubWFwTGliQ3NzQ2xhc3N9XG4gICAgICAgICAgbWFwTGliQXR0cmlidXRpb25Dc3NDbGFzcz17YmFzZU1hcExpYnJhcnlDb25maWcubWFwTGliQXR0cmlidXRpb25Dc3NDbGFzc31cbiAgICAgICAgPlxuICAgICAgICAgIDxFbmRIb3Jpem9udGFsRmxleGJveD5cbiAgICAgICAgICAgIDxEYXRhc2V0QXR0cmlidXRpb25zIGRhdGFzZXRBdHRyaWJ1dGlvbnM9e2RhdGFzZXRBdHRyaWJ1dGlvbnN9IGlzUGFsbT17aXNQYWxtfSAvPlxuICAgICAgICAgICAge3Nob3dPc21CYXNlbWFwQXR0cmlidXRpb24gPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0cml0aW9uLWxpbmtcIj5cbiAgICAgICAgICAgICAgICB7ZGF0YXNldEF0dHJpYnV0aW9ucz8ubGVuZ3RoID8gPHNwYW4gY2xhc3NOYW1lPVwicGlwZS1zZXBhcmF0b3JcIj58PC9zcGFuPiA6IG51bGx9XG4gICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgwqkgT3BlblN0cmVldE1hcFxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICA8L0VuZEhvcml6b250YWxGbGV4Ym94PlxuICAgICAgICA8L1N0eWxlZEF0dHJpYnV0aW9uPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFN0eWxlZEF0dHJpYnV0aW9uXG4gICAgICAgIG1hcExpYkNzc0NsYXNzPXtiYXNlTWFwTGlicmFyeUNvbmZpZy5tYXBMaWJDc3NDbGFzc31cbiAgICAgICAgbWFwTGliQXR0cmlidXRpb25Dc3NDbGFzcz17YmFzZU1hcExpYnJhcnlDb25maWcubWFwTGliQXR0cmlidXRpb25Dc3NDbGFzc31cbiAgICAgID5cbiAgICAgICAgPEVuZEhvcml6b250YWxGbGV4Ym94PlxuICAgICAgICAgIDxEYXRhc2V0QXR0cmlidXRpb25zIGRhdGFzZXRBdHRyaWJ1dGlvbnM9e2RhdGFzZXRBdHRyaWJ1dGlvbnN9IGlzUGFsbT17aXNQYWxtfSAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0cml0aW9uLWxpbmtcIj5cbiAgICAgICAgICAgIHtkYXRhc2V0QXR0cmlidXRpb25zPy5sZW5ndGggPyA8c3BhbiBjbGFzc05hbWU9XCJwaXBlLXNlcGFyYXRvclwiPnw8L3NwYW4+IDogbnVsbH1cbiAgICAgICAgICAgIHtpc1BhbG0gPyA8TWFwTGliTG9nbyBiYXNlTWFwTGlicmFyeUNvbmZpZz17YmFzZU1hcExpYnJhcnlDb25maWd9IC8+IDogbnVsbH1cbiAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2tlcGxlci5nbC9wb2xpY3kvXCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiPlxuICAgICAgICAgICAgICDCqSBrZXBsZXIuZ2wgfHsnICd9XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICB7IWlzUGFsbSA/IDxNYXBMaWJMb2dvIGJhc2VNYXBMaWJyYXJ5Q29uZmlnPXtiYXNlTWFwTGlicmFyeUNvbmZpZ30gLz4gOiBudWxsfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0VuZEhvcml6b250YWxGbGV4Ym94PlxuICAgICAgPC9TdHlsZWRBdHRyaWJ1dGlvbj5cbiAgICApO1xuICB9LCBbXG4gICAgc2hvd0Jhc2VNYXBMaWJMb2dvLFxuICAgIHNob3dPc21CYXNlbWFwQXR0cmlidXRpb24sXG4gICAgZGF0YXNldEF0dHJpYnV0aW9ucyxcbiAgICBpc1BhbG0sXG4gICAgYmFzZU1hcExpYnJhcnlDb25maWdcbiAgXSk7XG5cbiAgcmV0dXJuIG1lbW9pemVkQ29tcG9uZW50cztcbn07XG5cbk1hcENvbnRhaW5lckZhY3RvcnkuZGVwcyA9IFtNYXBQb3BvdmVyRmFjdG9yeSwgTWFwQ29udHJvbEZhY3RvcnksIEVkaXRvckZhY3RvcnldO1xuXG50eXBlIE1hcGJveFN0eWxlID0gc3RyaW5nIHwgb2JqZWN0IHwgdW5kZWZpbmVkO1xudHlwZSBQcm9wU2VsZWN0b3I8Uj4gPSBTZWxlY3RvcjxNYXBDb250YWluZXJQcm9wcywgUj47XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFwQ29udGFpbmVyUHJvcHMge1xuICB2aXNTdGF0ZTogVmlzU3RhdGU7XG4gIG1hcFN0YXRlOiBNYXBTdGF0ZTtcbiAgbWFwQ29udHJvbHM6IE1hcENvbnRyb2xzO1xuICBtYXBTdHlsZToge2JvdHRvbU1hcFN0eWxlPzogTWFwYm94U3R5bGU7IHRvcE1hcFN0eWxlPzogTWFwYm94U3R5bGV9ICYgTWFwU3R5bGU7XG4gIG1hcGJveEFwaUFjY2Vzc1Rva2VuOiBzdHJpbmc7XG4gIG1hcGJveEFwaVVybDogc3RyaW5nO1xuICB2aXNTdGF0ZUFjdGlvbnM6IHR5cGVvZiBWaXNTdGF0ZUFjdGlvbnM7XG4gIG1hcFN0YXRlQWN0aW9uczogdHlwZW9mIE1hcFN0YXRlQWN0aW9ucztcbiAgdWlTdGF0ZUFjdGlvbnM6IHR5cGVvZiBVSVN0YXRlQWN0aW9ucztcblxuICAvLyBvcHRpb25hbFxuICBwcmltYXJ5PzogYm9vbGVhbjsgLy8gcHJpbWFyeSBvbmUgd2lsbCBiZSByZXBvcnRpbmcgaXRzIHNpemUgdG8gYXBwU3RhdGVcbiAgcmVhZE9ubHk/OiBib29sZWFuO1xuICBpc0V4cG9ydD86IGJvb2xlYW47XG4gIC8vIG9uTWFwU3R5bGVMb2FkZWQ/OiAobWFwOiBtYXBsaWJyZWdsLk1hcCB8IFJldHVyblR5cGU8TWFwUmVmWydnZXRNYXAnXT4gfCBudWxsKSA9PiB2b2lkO1xuICBvbk1hcFN0eWxlTG9hZGVkPzogKG1hcDogR2V0TWFwUmVmIHwgbnVsbCkgPT4gdm9pZDtcbiAgb25NYXBSZW5kZXI/OiAobWFwOiBHZXRNYXBSZWYgfCBudWxsKSA9PiB2b2lkO1xuICBnZXRNYXBib3hSZWY/OiAobWFwYm94PzogTWFwUmVmIHwgbnVsbCwgaW5kZXg/OiBudW1iZXIpID0+IHZvaWQ7XG4gIGluZGV4PzogbnVtYmVyO1xuICBkZWxldGVNYXBMYWJlbHM/OiAoY29udGFpbmVySWQ6IHN0cmluZywgbGF5ZXJJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBjb250YWluZXJJZD86IG51bWJlcjtcblxuICBpc0xvYWRpbmdJbmRpY2F0b3JWaXNpYmxlPzogYm9vbGVhbjtcbiAgYWN0aXZlU2lkZVBhbmVsOiBzdHJpbmcgfCBudWxsO1xuICBzaWRlUGFuZWxXaWR0aD86IG51bWJlcjtcblxuICBsb2NhbGU/OiBhbnk7XG4gIHRoZW1lPzogYW55O1xuICBlZGl0b3I/OiBhbnk7XG4gIE1hcENvbXBvbmVudD86IHR5cGVvZiBNYXA7XG4gIGRlY2tHbFByb3BzPzogYW55O1xuICBvbkRlY2tJbml0aWFsaXplZD86IChhOiBhbnksIGI6IGFueSkgPT4gdm9pZDtcbiAgb25WaWV3U3RhdGVDaGFuZ2U/OiAodmlld3BvcnQ6IFZpZXdwb3J0KSA9PiB2b2lkO1xuXG4gIHRvcE1hcENvbnRhaW5lclByb3BzOiBhbnk7XG4gIGJvdHRvbU1hcENvbnRhaW5lclByb3BzOiBhbnk7XG4gIHRyYW5zZm9ybVJlcXVlc3Q/OiAodXJsOiBzdHJpbmcsIHJlc291cmNlVHlwZT86IHN0cmluZykgPT4ge3VybDogc3RyaW5nfTtcblxuICBkYXRhc2V0QXR0cmlidXRpb25zPzogRGF0YXNldEF0dHJpYnV0aW9uW107XG5cbiAgZ2VuZXJhdGVNYXBib3hMYXllcnM/OiB0eXBlb2YgZ2VuZXJhdGVNYXBib3hMYXllcnM7XG4gIGdlbmVyYXRlRGVja0dMTGF5ZXJzPzogdHlwZW9mIGNvbXB1dGVEZWNrTGF5ZXJzO1xuXG4gIG9uTW91c2VNb3ZlPzogKGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50ICYge2xuZ0xhdD86IFtudW1iZXIsIG51bWJlcl19KSA9PiB2b2lkO1xuXG4gIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xuICBkZWNrUmVuZGVyQ2FsbGJhY2tzPzoge1xuICAgIG9uRGVja0xvYWQ/OiAoKSA9PiB2b2lkO1xuICAgIG9uRGVja1JlbmRlcj86IChkZWNrUHJvcHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA9PiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw7XG4gICAgb25EZWNrQWZ0ZXJSZW5kZXI/OiAoZGVja1Byb3BzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4gYW55O1xuICB9O1xuXG4gIC8vIE9wdGlvbmFsOiBvdmVycmlkZSBsZWdlbmQgaGVhZGVyIGxvZ28gaW4gbWFwIGNvbnRyb2xzICh1c2VkIGJ5IGltYWdlIGV4cG9ydClcbiAgbG9nb0NvbXBvbmVudD86IFJlYWN0LkZDIHwgUmVhY3QuUmVhY3ROb2RlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNYXBDb250YWluZXJGYWN0b3J5KFxuICBNYXBQb3BvdmVyOiBSZXR1cm5UeXBlPHR5cGVvZiBNYXBQb3BvdmVyRmFjdG9yeT4sXG4gIE1hcENvbnRyb2w6IFJldHVyblR5cGU8dHlwZW9mIE1hcENvbnRyb2xGYWN0b3J5PixcbiAgRWRpdG9yOiBSZXR1cm5UeXBlPHR5cGVvZiBFZGl0b3JGYWN0b3J5PlxuKTogUmVhY3QuQ29tcG9uZW50VHlwZTxNYXBDb250YWluZXJQcm9wcz4ge1xuICBjbGFzcyBNYXBDb250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQ8TWFwQ29udGFpbmVyUHJvcHM+IHtcbiAgICBkaXNwbGF5TmFtZSA9ICdNYXBDb250YWluZXInO1xuXG4gICAgcHJpdmF0ZSBhbnlBY3RpdmVMYXllckxvYWRpbmcgPSBmYWxzZTtcblxuICAgIHN0YXRpYyBjb250ZXh0VHlwZSA9IE1hcFZpZXdTdGF0ZUNvbnRleHQ7XG5cbiAgICBkZWNsYXJlIGNvbnRleHQ6IFJlYWN0LkNvbnRleHRUeXBlPHR5cGVvZiBNYXBWaWV3U3RhdGVDb250ZXh0PjtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICBNYXBDb21wb25lbnQ6IE1hcCxcbiAgICAgIGRlY2tHbFByb3BzOiB7fSxcbiAgICAgIGluZGV4OiAwLFxuICAgICAgcHJpbWFyeTogdHJ1ZVxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgc3VwZXIocHJvcHMpO1xuICAgIH1cblxuICAgIHN0YXRlID0ge1xuICAgICAgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIGF0dHJpYnV0aW9uIHNob3VsZCBiZSB2aXNpYmxlIGJhc2VkIHRoZSByZXN1bHQgb2YgbG9hZGluZyB0aGUgbWFwIHN0eWxlXG4gICAgICBzaG93QmFzZU1hcEF0dHJpYnV0aW9uOiB0cnVlXG4gICAgfTtcblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgaWYgKCF0aGlzLl9yZWYuY3VycmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBvYnNlcnZlRGltZW5zaW9ucyh0aGlzLl9yZWYuY3VycmVudCwgdGhpcy5faGFuZGxlUmVzaXplKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIC8vIHVuYmluZCBtYXBib3hnbCBldmVudCBsaXN0ZW5lclxuICAgICAgaWYgKHRoaXMuX21hcCkge1xuICAgICAgICB0aGlzLl9tYXA/Lm9mZihNQVBCT1hHTF9TVFlMRV9VUERBVEUsIG5vcCk7XG4gICAgICAgIHRoaXMuX21hcD8ub2ZmKE1BUEJPWEdMX1JFTkRFUiwgbm9wKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5fcmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdW5vYnNlcnZlRGltZW5zaW9ucyh0aGlzLl9yZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgX2RlY2s6IGFueSA9IG51bGw7XG4gICAgX21hcDogR2V0TWFwUmVmIHwgbnVsbCA9IG51bGw7XG4gICAgX3JlZiA9IGNyZWF0ZVJlZjxIVE1MRGl2RWxlbWVudD4oKTtcbiAgICBfZGVja0dMRXJyb3JzRWxhcHNlZDoge1tpZDogc3RyaW5nXTogbnVtYmVyfSA9IHt9O1xuXG4gICAgcHJldmlvdXNMYXllcnMgPSB7XG4gICAgICAvLyBbbGF5ZXJzLmlkXTogbWFwYm94TGF5ZXJDb25maWdcbiAgICB9O1xuXG4gICAgX2hhbmRsZVJlc2l6ZSA9IGRpbWVuc2lvbnMgPT4ge1xuICAgICAgY29uc3Qge3ByaW1hcnksIGluZGV4fSA9IHRoaXMucHJvcHM7XG4gICAgICBpZiAocHJpbWFyeSkge1xuICAgICAgICBjb25zdCB7bWFwU3RhdGVBY3Rpb25zfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChkaW1lbnNpb25zICYmIGRpbWVuc2lvbnMud2lkdGggPiAwICYmIGRpbWVuc2lvbnMuaGVpZ2h0ID4gMCkge1xuICAgICAgICAgIG1hcFN0YXRlQWN0aW9ucy51cGRhdGVNYXAoZGltZW5zaW9ucywgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxheWVyc1NlbGVjdG9yOiBQcm9wU2VsZWN0b3I8VmlzU3RhdGVbJ2xheWVycyddPiA9IHByb3BzID0+IHByb3BzLnZpc1N0YXRlLmxheWVycztcbiAgICBsYXllckRhdGFTZWxlY3RvcjogUHJvcFNlbGVjdG9yPFZpc1N0YXRlWydsYXllcnMnXT4gPSBwcm9wcyA9PiBwcm9wcy52aXNTdGF0ZS5sYXllckRhdGE7XG4gICAgc3BsaXRNYXBTZWxlY3RvcjogUHJvcFNlbGVjdG9yPFNwbGl0TWFwW10+ID0gcHJvcHMgPT4gcHJvcHMudmlzU3RhdGUuc3BsaXRNYXBzO1xuICAgIHNwbGl0TWFwSW5kZXhTZWxlY3RvcjogUHJvcFNlbGVjdG9yPG51bWJlciB8IHVuZGVmaW5lZD4gPSBwcm9wcyA9PiBwcm9wcy5pbmRleDtcbiAgICBtYXBMYXllcnNTZWxlY3RvcjogUHJvcFNlbGVjdG9yPFNwbGl0TWFwTGF5ZXJzIHwgbnVsbCB8IHVuZGVmaW5lZD4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMuc3BsaXRNYXBTZWxlY3RvcixcbiAgICAgIHRoaXMuc3BsaXRNYXBJbmRleFNlbGVjdG9yLFxuICAgICAgZ2V0TWFwTGF5ZXJzRnJvbVNwbGl0TWFwc1xuICAgICk7XG4gICAgbGF5ZXJPcmRlclNlbGVjdG9yOiBQcm9wU2VsZWN0b3I8VmlzU3RhdGVbJ2xheWVyT3JkZXInXT4gPSBwcm9wcyA9PiBwcm9wcy52aXNTdGF0ZS5sYXllck9yZGVyO1xuICAgIGxheWVyc1RvUmVuZGVyU2VsZWN0b3I6IFByb3BTZWxlY3RvcjxMYXllcnNUb1JlbmRlcj4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMubGF5ZXJzU2VsZWN0b3IsXG4gICAgICB0aGlzLmxheWVyRGF0YVNlbGVjdG9yLFxuICAgICAgdGhpcy5tYXBMYXllcnNTZWxlY3RvcixcbiAgICAgIHByZXBhcmVMYXllcnNUb1JlbmRlclxuICAgICk7XG4gICAgbGF5ZXJzRm9yRGVja1NlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgICB0aGlzLmxheWVyc1NlbGVjdG9yLFxuICAgICAgdGhpcy5sYXllckRhdGFTZWxlY3RvcixcbiAgICAgIHByZXBhcmVMYXllcnNGb3JEZWNrXG4gICAgKTtcbiAgICBmaWx0ZXJzU2VsZWN0b3IgPSBwcm9wcyA9PiBwcm9wcy52aXNTdGF0ZS5maWx0ZXJzO1xuICAgIHBvbHlnb25GaWx0ZXJzU2VsZWN0b3IgPSBjcmVhdGVTZWxlY3Rvcih0aGlzLmZpbHRlcnNTZWxlY3RvciwgZmlsdGVycyA9PlxuICAgICAgZmlsdGVycy5maWx0ZXIoZiA9PiBmLnR5cGUgPT09IEZJTFRFUl9UWVBFUy5wb2x5Z29uICYmIGYuZW5hYmxlZCAhPT0gZmFsc2UpXG4gICAgKTtcbiAgICBmZWF0dXJlc1NlbGVjdG9yID0gcHJvcHMgPT4gcHJvcHMudmlzU3RhdGUuZWRpdG9yLmZlYXR1cmVzO1xuICAgIHNlbGVjdGVkRmVhdHVyZVNlbGVjdG9yID0gcHJvcHMgPT4gcHJvcHMudmlzU3RhdGUuZWRpdG9yLnNlbGVjdGVkRmVhdHVyZTtcbiAgICBmZWF0dXJlQ29sbGVjdGlvblNlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgICB0aGlzLnBvbHlnb25GaWx0ZXJzU2VsZWN0b3IsXG4gICAgICB0aGlzLmZlYXR1cmVzU2VsZWN0b3IsXG4gICAgICAocG9seWdvbkZpbHRlcnMsIGZlYXR1cmVzKSA9PiAoe1xuICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICBmZWF0dXJlczogZmVhdHVyZXMuY29uY2F0KHBvbHlnb25GaWx0ZXJzLm1hcChmID0+IGYudmFsdWUpKVxuICAgICAgfSlcbiAgICApO1xuICAgIC8vIEB0cy1pZ25vcmUgLSBObyBvdmVybG9hZCBtYXRjaGVzIHRoaXMgY2FsbFxuICAgIHNlbGVjdGVkUG9seWdvbkluZGV4U2VsZWN0b3IgPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMuZmVhdHVyZUNvbGxlY3Rpb25TZWxlY3RvcixcbiAgICAgIHRoaXMuc2VsZWN0ZWRGZWF0dXJlU2VsZWN0b3IsXG4gICAgICAoY29sbGVjdGlvbiwgc2VsZWN0ZWRGZWF0dXJlKSA9PlxuICAgICAgICBjb2xsZWN0aW9uLmZlYXR1cmVzLmZpbmRJbmRleChmID0+IGYuaWQgPT09IHNlbGVjdGVkRmVhdHVyZT8uaWQpXG4gICAgKTtcbiAgICBzZWxlY3RlZEZlYXR1cmVJbmRleEFycmF5U2VsZWN0b3IgPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgICh2YWx1ZTogbnVtYmVyKSA9PiB2YWx1ZSxcbiAgICAgIHZhbHVlID0+IHtcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgMCA/IFtdIDogW3ZhbHVlXTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgZ2VuZXJhdGVNYXBib3hMYXllck1ldGhvZFNlbGVjdG9yID0gcHJvcHMgPT4gcHJvcHMuZ2VuZXJhdGVNYXBib3hMYXllcnMgPz8gZ2VuZXJhdGVNYXBib3hMYXllcnM7XG5cbiAgICBtYXBib3hMYXllcnNTZWxlY3RvciA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgICAgdGhpcy5sYXllcnNTZWxlY3RvcixcbiAgICAgIHRoaXMubGF5ZXJEYXRhU2VsZWN0b3IsXG4gICAgICB0aGlzLmxheWVyT3JkZXJTZWxlY3RvcixcbiAgICAgIHRoaXMubGF5ZXJzVG9SZW5kZXJTZWxlY3RvcixcbiAgICAgIHRoaXMuZ2VuZXJhdGVNYXBib3hMYXllck1ldGhvZFNlbGVjdG9yLFxuICAgICAgKGxheWVyLCBsYXllckRhdGEsIGxheWVyT3JkZXIsIGxheWVyc1RvUmVuZGVyLCBnZW5lcmF0ZU1hcGJveExheWVyTWV0aG9kKSA9PlxuICAgICAgICBnZW5lcmF0ZU1hcGJveExheWVyTWV0aG9kKGxheWVyLCBsYXllckRhdGEsIGxheWVyT3JkZXIsIGxheWVyc1RvUmVuZGVyKVxuICAgICk7XG5cbiAgICAvLyBtZXJnZSBpbiBhIGJhY2tncm91bmQtY29sb3Igc3R5bGUgaWYgdGhlIGJhc2VtYXAgY2hvaWNlIGlzIE5PX01BUF9JRFxuICAgIC8vIHVzZWQgYnkgPFN0eWxlZE1hcD4gaW5saW5lIHN0eWxlIHByb3BcbiAgICBtYXBTdHlsZVR5cGVTZWxlY3RvciA9IHByb3BzID0+IHByb3BzLm1hcFN0eWxlLnN0eWxlVHlwZTtcbiAgICBtYXBTdHlsZUJhY2tncm91bmRDb2xvclNlbGVjdG9yID0gcHJvcHMgPT4gcHJvcHMubWFwU3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgIHN0eWxlU2VsZWN0b3IgPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMubWFwU3R5bGVUeXBlU2VsZWN0b3IsXG4gICAgICB0aGlzLm1hcFN0eWxlQmFja2dyb3VuZENvbG9yU2VsZWN0b3IsXG4gICAgICAoc3R5bGVUeXBlLCBiYWNrZ3JvdW5kQ29sb3IpID0+ICh7XG4gICAgICAgIC4uLk1BUF9TVFlMRS5jb250YWluZXIsXG4gICAgICAgIC4uLihzdHlsZVR5cGUgPT09IE5PX01BUF9JRCA/IHtiYWNrZ3JvdW5kQ29sb3I6IHJnYlRvSGV4KGJhY2tncm91bmRDb2xvcil9IDoge30pXG4gICAgICB9KVxuICAgICk7XG5cbiAgICAvKiBjb21wb25lbnQgcHJpdmF0ZSBmdW5jdGlvbnMgKi9cbiAgICBfb25DbG9zZU1hcFBvcG92ZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLnByb3BzLnZpc1N0YXRlQWN0aW9ucy5vbkxheWVyQ2xpY2sobnVsbCk7XG4gICAgfTtcblxuICAgIF9vbkxheWVySG92ZXIgPSAoX2lkeDogbnVtYmVyLCBpbmZvOiBQaWNrSW5mbzxhbnk+IHwgbnVsbCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMub25MYXllckhvdmVyKGluZm8sIHRoaXMucHJvcHMuaW5kZXgpO1xuICAgIH07XG5cbiAgICBfb25MYXllclNldERvbWFpbiA9IChcbiAgICAgIGlkeDogbnVtYmVyLFxuICAgICAgdmFsdWU6IHtkb21haW46IFZpc3VhbENoYW5uZWxEb21haW47IGFnZ3JlZ2F0ZWRCaW5zOiBBZ2dyZWdhdGVkQmluW119XG4gICAgKSA9PiB7XG4gICAgICB0aGlzLnByb3BzLnZpc1N0YXRlQWN0aW9ucy5sYXllckNvbmZpZ0NoYW5nZSh0aGlzLnByb3BzLnZpc1N0YXRlLmxheWVyc1tpZHhdLCB7XG4gICAgICAgIGNvbG9yRG9tYWluOiB2YWx1ZS5kb21haW4sXG4gICAgICAgIGFnZ3JlZ2F0ZWRCaW5zOiB2YWx1ZS5hZ2dyZWdhdGVkQmluc1xuICAgICAgfSBhcyBQYXJ0aWFsPExheWVyQmFzZUNvbmZpZz4pO1xuICAgIH07XG5cbiAgICBfb25MYXllckZpbHRlcmVkSXRlbXNDaGFuZ2UgPSAoaWR4LCBldmVudCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMubGF5ZXJGaWx0ZXJlZEl0ZW1zQ2hhbmdlKHRoaXMucHJvcHMudmlzU3RhdGUubGF5ZXJzW2lkeF0sIGV2ZW50KTtcbiAgICB9O1xuXG4gICAgX29uV01TRmVhdHVyZUluZm8gPSAoXG4gICAgICBpZHg6IG51bWJlcixcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZmVhdHVyZUluZm86IEFycmF5PHtuYW1lOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmd9PiB8IHN0cmluZyB8IG51bGw7XG4gICAgICAgIGNvb3JkaW5hdGU/OiBbbnVtYmVyLCBudW1iZXJdIHwgbnVsbDtcbiAgICAgIH1cbiAgICApID0+IHtcbiAgICAgIHRoaXMucHJvcHMudmlzU3RhdGVBY3Rpb25zLndtc0ZlYXR1cmVJbmZvKFxuICAgICAgICB0aGlzLnByb3BzLnZpc1N0YXRlLmxheWVyc1tpZHhdLFxuICAgICAgICBkYXRhLmZlYXR1cmVJbmZvLFxuICAgICAgICBkYXRhLmNvb3JkaW5hdGVcbiAgICAgICk7XG4gICAgfTtcblxuICAgIF9oYW5kbGVNYXBUb2dnbGVMYXllciA9IGxheWVySWQgPT4ge1xuICAgICAgY29uc3Qge2luZGV4OiBtYXBJbmRleCA9IDAsIHZpc1N0YXRlQWN0aW9uc30gPSB0aGlzLnByb3BzO1xuICAgICAgdmlzU3RhdGVBY3Rpb25zLnRvZ2dsZUxheWVyRm9yTWFwKG1hcEluZGV4LCBsYXllcklkKTtcbiAgICB9O1xuXG4gICAgX29uTWFwYm94U3R5bGVVcGRhdGUgPSB1cGRhdGUgPT4ge1xuICAgICAgLy8gZm9yY2UgcmVmcmVzaCBtYXBib3hnbCBsYXllcnNcbiAgICAgIHRoaXMucHJldmlvdXNMYXllcnMgPSB7fTtcbiAgICAgIHRoaXMuX3VwZGF0ZU1hcGJveExheWVycygpO1xuXG4gICAgICBpZiAodXBkYXRlICYmIHVwZGF0ZS5zdHlsZSkge1xuICAgICAgICAvLyBObyBhdHRyaWJ1dGlvbnMgYXJlIG5lZWRlZCBpZiB0aGUgc3R5bGUgZG9lc24ndCByZWZlcmVuY2UgTWFwYm94IHNvdXJjZXNcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc2hvd0Jhc2VNYXBBdHRyaWJ1dGlvbjpcbiAgICAgICAgICAgIGlzU3R5bGVVc2luZ01hcGJveFRpbGVzKHVwZGF0ZS5zdHlsZSkgfHwgIWlzU3R5bGVVc2luZ09wZW5TdHJlZXRNYXBUaWxlcyh1cGRhdGUuc3R5bGUpXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub25NYXBTdHlsZUxvYWRlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnByb3BzLm9uTWFwU3R5bGVMb2FkZWQodGhpcy5fbWFwKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3NldE1hcFJlZiA9IG1hcFJlZiA9PiB7XG4gICAgICAvLyBIYW5kbGUgY2hhbmdlIG9mIHRoZSBtYXAgbGlicmFyeVxuICAgICAgaWYgKHRoaXMuX21hcCAmJiBtYXBSZWYpIHtcbiAgICAgICAgY29uc3QgbWFwID0gbWFwUmVmLmdldE1hcCgpO1xuICAgICAgICBpZiAobWFwICYmIHRoaXMuX21hcCAhPT0gbWFwKSB7XG4gICAgICAgICAgdGhpcy5fbWFwPy5vZmYoTUFQQk9YR0xfU1RZTEVfVVBEQVRFLCBub3ApO1xuICAgICAgICAgIHRoaXMuX21hcD8ub2ZmKE1BUEJPWEdMX1JFTkRFUiwgbm9wKTtcbiAgICAgICAgICB0aGlzLl9tYXAgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5fbWFwICYmIG1hcFJlZikge1xuICAgICAgICB0aGlzLl9tYXAgPSBtYXBSZWYuZ2V0TWFwKCk7XG4gICAgICAgIC8vIGkgbm90aWNlZCBpbiBjZXJ0YWluIGNvbnRleHQgd2UgZG9uJ3QgYWNjZXNzIHRoZSBhY3R1YWwgbWFwIGVsZW1lbnRcbiAgICAgICAgaWYgKCF0aGlzLl9tYXApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gYmluZCBtYXBib3hnbCBldmVudCBsaXN0ZW5lclxuICAgICAgICB0aGlzLl9tYXAub24oTUFQQk9YR0xfU1RZTEVfVVBEQVRFLCB0aGlzLl9vbk1hcGJveFN0eWxlVXBkYXRlKTtcblxuICAgICAgICB0aGlzLl9tYXAub24oTUFQQk9YR0xfUkVOREVSLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb3BzLm9uTWFwUmVuZGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uTWFwUmVuZGVyKHRoaXMuX21hcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMucHJvcHMuZ2V0TWFwYm94UmVmKSB7XG4gICAgICAgIC8vIFRoZSBwYXJlbnQgY29tcG9uZW50IGNhbiBnYWluIGFjY2VzcyB0byBvdXIgTWFwYm94R2xNYXAgYnlcbiAgICAgICAgLy8gcHJvdmlkaW5nIHRoaXMgY2FsbGJhY2suIE5vdGUgdGhhdCAnbWFwYm94JyB3aWxsIGJlIG51bGwgd2hlbiB0aGVcbiAgICAgICAgLy8gcmVmIGlzIHVuc2V0IChlLmcuIHdoZW4gYSBzcGxpdCBtYXAgaXMgY2xvc2VkKS5cbiAgICAgICAgdGhpcy5wcm9wcy5nZXRNYXBib3hSZWYobWFwUmVmLCB0aGlzLnByb3BzLmluZGV4KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX29uRGVja0luaXRpYWxpemVkKGdsKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vbkRlY2tJbml0aWFsaXplZCkge1xuICAgICAgICB0aGlzLnByb3BzLm9uRGVja0luaXRpYWxpemVkKHRoaXMuX2RlY2ssIGdsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAxKSBBbGxvdyBlZmZlY3RzIG9ubHkgZm9yIHRoZSBmaXJzdCB2aWV3LlxuICAgICAqIDIpIFByZXZlbnQgZWZmZWN0OnByZVJlbmRlciBjYWxsIHdpdGhvdXQgdmFsaWQgZ2VuZXJhdGVkIHZpZXdwb3J0cy5cbiAgICAgKiBAcGFyYW0gdmlld0luZGV4IFZpZXcgaW5kZXguXG4gICAgICogQHJldHVybnMgUmV0dXJucyB0cnVlIGlmIGVmZmVjdHMgY2FuIGJlIHVzZWQuXG4gICAgICovXG4gICAgX2lzT0tUb1JlbmRlckVmZmVjdHModmlld0luZGV4PzogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gIXZpZXdJbmRleCAmJiBCb29sZWFuKHRoaXMuX2RlY2s/LnZpZXdNYW5hZ2VyPy5fdmlld3BvcnRzPy5sZW5ndGgpO1xuICAgIH1cblxuICAgIF9vbkJlZm9yZVJlbmRlciA9ICh7Z2x9KSA9PiB7XG4gICAgICBzZXRMYXllckJsZW5kaW5nKGdsLCB0aGlzLnByb3BzLnZpc1N0YXRlLmxheWVyQmxlbmRpbmcpO1xuICAgIH07XG5cbiAgICBfb25EZWNrRXJyb3IgPSAoZXJyb3IsIGxheWVyKSA9PiB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvcj8ubWVzc2FnZSB8fCAndW5rbm93bi1lcnJvcic7XG4gICAgICBjb25zdCBsYXllck1lc3NhZ2UgPSBsYXllcj8uaWQgPyBgIGluICR7bGF5ZXIuaWR9IGxheWVyYCA6ICcnO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlRnVsbCA9XG4gICAgICAgIGVycm9yTWVzc2FnZSA9PT0gJ1dlYkdMIGNvbnRleHQgaXMgbG9zdCdcbiAgICAgICAgICA/ICdZb3VyIEdQVSB3YXMgZGlzY29ubmVjdGVkLiBUaGlzIGNhbiBoYXBwZW4gaWYgeW91ciBjb21wdXRlciBnb2VzIHRvIHNsZWVwLiBJdCBjYW4gYWxzbyBvY2N1ciBmb3Igb3RoZXIgcmVhc29ucywgc3VjaCBhcyBpZiB5b3UgYXJlIHJ1bm5pbmcgdG9vIG1hbnkgR1BVIGFwcGxpY2F0aW9ucy4nXG4gICAgICAgICAgOiBgQW4gZXJyb3IgaW4gZGVjay5nbDogJHtlcnJvck1lc3NhZ2V9JHtsYXllck1lc3NhZ2V9LmA7XG5cbiAgICAgIC8vIFRocm90dGxlIGVycm9yIG5vdGlmaWNhdGlvbnMsIGFzIFJlYWN0IGRvZXNuJ3QgbGlrZSB0b28gbWFueSBzdGF0ZSBjaGFuZ2VzIGZyb20gaGVyZS5cbiAgICAgIGNvbnN0IGxhc3RTaG93biA9IHRoaXMuX2RlY2tHTEVycm9yc0VsYXBzZWRbZXJyb3JNZXNzYWdlRnVsbF07XG4gICAgICBpZiAoIWxhc3RTaG93biB8fCBsYXN0U2hvd24gPCBEYXRlLm5vdygpIC0gVEhST1RUTEVfTk9USUZJQ0FUSU9OX1RJTUUpIHtcbiAgICAgICAgdGhpcy5fZGVja0dMRXJyb3JzRWxhcHNlZFtlcnJvck1lc3NhZ2VGdWxsXSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgLy8gTWFyayBsYXllciBhcyBpbnZhbGlkXG4gICAgICAgIGxldCBleHRyYUxheWVyTWVzc2FnZSA9ICcnO1xuICAgICAgICBjb25zdCB7dmlzU3RhdGVBY3Rpb25zfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChsYXllcikge1xuICAgICAgICAgIGxldCB0b3BNb3N0TGF5ZXIgPSBsYXllcjtcbiAgICAgICAgICB3aGlsZSAodG9wTW9zdExheWVyLnBhcmVudCkge1xuICAgICAgICAgICAgdG9wTW9zdExheWVyID0gdG9wTW9zdExheWVyLnBhcmVudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRvcE1vc3RMYXllci5wcm9wcz8uaWQpIHtcbiAgICAgICAgICAgIHZpc1N0YXRlQWN0aW9ucy5sYXllclNldElzVmFsaWQodG9wTW9zdExheWVyLCBmYWxzZSk7XG4gICAgICAgICAgICBleHRyYUxheWVyTWVzc2FnZSA9ICdUaGUgbGF5ZXIgaGFzIGJlZW4gZGlzYWJsZWQgYW5kIGhpZ2hsaWdodGVkLic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIG5ldyBlcnJvciBub3RpZmljYXRpb24gb3IgdXBkYXRlIGV4aXN0aW5nIG9uZSB3aXRoIHNhbWUgaWQuXG4gICAgICAgIC8vIFVwZGF0ZSBpcyByZXF1aXJlZCB0byBwcmVzZXJ2ZSB0aGUgb3JkZXIgb2Ygbm90aWZpY2F0aW9ucyBhcyB0aGV5IHByb2JhYmx5IGFyZSBnb2luZyB0byBcImp1bXBcIiBiYXNlZCBvbiBvcmRlciBvZiBlcnJvcnMuXG4gICAgICAgIGNvbnN0IHt1aVN0YXRlQWN0aW9uc30gPSB0aGlzLnByb3BzO1xuICAgICAgICB1aVN0YXRlQWN0aW9ucy5hZGROb3RpZmljYXRpb24oXG4gICAgICAgICAgZXJyb3JOb3RpZmljYXRpb24oe1xuICAgICAgICAgICAgbWVzc2FnZTogYCR7ZXJyb3JNZXNzYWdlRnVsbH0gJHtleHRyYUxheWVyTWVzc2FnZX1gLFxuICAgICAgICAgICAgaWQ6IGVycm9yTWVzc2FnZUZ1bGwgLy8gdHJlYXQgdGhlIGVycm9yIG1lc3NhZ2UgYXMgaWRcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKiBjb21wb25lbnQgcmVuZGVyIGZ1bmN0aW9ucyAqL1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgY29tcGxleGl0eSAqL1xuICAgIF9yZW5kZXJNYXBQb3BvdmVyKCkge1xuICAgICAgLy8gdGhpcyBjaGVjayBpcyBmb3IgbGltaXRpbmcgdGhlIGRpc3BsYXkgb2YgdGhlIGA8TWFwUG9wb3Zlcj5gIHRvIHRoZSBgPE1hcENvbnRhaW5lcj5gIHRoZSB1c2VyIGlzIGludGVyYWN0aW5nIHdpdGhcbiAgICAgIC8vIHRoZSBEZWNrR0wgb25Ib3ZlciBldmVudCBoYW5kbGVyIGFkZHMgYSBgbWFwSW5kZXhgIHByb3BlcnR5IHdoaWNoIGlzIGF2YWlsYWJsZSBpbiB0aGUgYGhvdmVySW5mb2Agb2JqZWN0IG9mIGB2aXNTdGF0ZWBcbiAgICAgIGlmICh0aGlzLnByb3BzLmluZGV4ICE9PSB0aGlzLnByb3BzLnZpc1N0YXRlLmhvdmVySW5mbz8ubWFwSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIFRPRE86IG1vdmUgdGhpcyBpbnRvIHJlZHVjZXIgc28gaXQgY2FuIGJlIHRlc3RlZFxuICAgICAgY29uc3Qge1xuICAgICAgICBtYXBTdGF0ZSxcbiAgICAgICAgdmlzU3RhdGU6IHtcbiAgICAgICAgICBob3ZlckluZm8sXG4gICAgICAgICAgY2xpY2tlZCxcbiAgICAgICAgICBkYXRhc2V0cyxcbiAgICAgICAgICBpbnRlcmFjdGlvbkNvbmZpZyxcbiAgICAgICAgICBhbmltYXRpb25Db25maWcsXG4gICAgICAgICAgbGF5ZXJzLFxuICAgICAgICAgIG1vdXNlUG9zOiB7bW91c2VQb3NpdGlvbiwgY29vcmRpbmF0ZSwgcGlubmVkfVxuICAgICAgICB9XG4gICAgICB9ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IGxheWVyc1RvUmVuZGVyID0gdGhpcy5sYXllcnNUb1JlbmRlclNlbGVjdG9yKHRoaXMucHJvcHMpO1xuXG4gICAgICBpZiAoIW1vdXNlUG9zaXRpb24gfHwgIWludGVyYWN0aW9uQ29uZmlnLnRvb2x0aXApIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxheWVySG92ZXJQcm9wID0gZ2V0TGF5ZXJIb3ZlclByb3Aoe1xuICAgICAgICBhbmltYXRpb25Db25maWcsXG4gICAgICAgIGludGVyYWN0aW9uQ29uZmlnLFxuICAgICAgICBob3ZlckluZm8sXG4gICAgICAgIGxheWVycyxcbiAgICAgICAgbGF5ZXJzVG9SZW5kZXIsXG4gICAgICAgIGRhdGFzZXRzXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgY29tcGFyZU1vZGUgPSBpbnRlcmFjdGlvbkNvbmZpZy50b29sdGlwLmNvbmZpZ1xuICAgICAgICA/IGludGVyYWN0aW9uQ29uZmlnLnRvb2x0aXAuY29uZmlnLmNvbXBhcmVNb2RlXG4gICAgICAgIDogZmFsc2U7XG5cbiAgICAgIGxldCBwaW5uZWRQb3NpdGlvbiA9IHt4OiAwLCB5OiAwfTtcbiAgICAgIGxldCBsYXllclBpbm5lZFByb3A6IExheWVySG92ZXJQcm9wIHwgbnVsbCA9IG51bGw7XG4gICAgICBpZiAocGlubmVkIHx8IGNsaWNrZWQpIHtcbiAgICAgICAgLy8gcHJvamVjdCBsbmdsYXQgdG8gc2NyZWVuIHNvIHRoYXQgdG9vbHRpcCBmb2xsb3dzIHRoZSBvYmplY3Qgb24gem9vbVxuICAgICAgICBjb25zdCB2aWV3cG9ydCA9IGdldFZpZXdwb3J0RnJvbU1hcFN0YXRlKG1hcFN0YXRlKTtcbiAgICAgICAgY29uc3QgbG5nTGF0ID0gY2xpY2tlZCA/IGNsaWNrZWQuY29vcmRpbmF0ZSA6IHBpbm5lZC5jb29yZGluYXRlO1xuICAgICAgICBwaW5uZWRQb3NpdGlvbiA9IHRoaXMuX2dldEhvdmVyWFkodmlld3BvcnQsIGxuZ0xhdCk7XG4gICAgICAgIGxheWVyUGlubmVkUHJvcCA9IGdldExheWVySG92ZXJQcm9wKHtcbiAgICAgICAgICBhbmltYXRpb25Db25maWcsXG4gICAgICAgICAgaW50ZXJhY3Rpb25Db25maWcsXG4gICAgICAgICAgaG92ZXJJbmZvOiBjbGlja2VkLFxuICAgICAgICAgIGxheWVycyxcbiAgICAgICAgICBsYXllcnNUb1JlbmRlcixcbiAgICAgICAgICBkYXRhc2V0c1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGxheWVySG92ZXJQcm9wICYmIGxheWVyUGlubmVkUHJvcCkge1xuICAgICAgICAgIGxheWVySG92ZXJQcm9wLnByaW1hcnlEYXRhID0gbGF5ZXJQaW5uZWRQcm9wLmRhdGE7XG4gICAgICAgICAgbGF5ZXJIb3ZlclByb3AuY29tcGFyZVR5cGUgPSBpbnRlcmFjdGlvbkNvbmZpZy50b29sdGlwLmNvbmZpZy5jb21wYXJlVHlwZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjb21tb25Qcm9wID0ge1xuICAgICAgICBvbkNsb3NlOiB0aGlzLl9vbkNsb3NlTWFwUG9wb3ZlcixcbiAgICAgICAgem9vbTogbWFwU3RhdGUuem9vbSxcbiAgICAgICAgY29udGFpbmVyOiB0aGlzLl9kZWNrID8gdGhpcy5fZGVjay5jYW52YXMgOiB1bmRlZmluZWRcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxFcnJvckJvdW5kYXJ5PlxuICAgICAgICAgIHtsYXllclBpbm5lZFByb3AgJiYgKFxuICAgICAgICAgICAgPE1hcFBvcG92ZXJcbiAgICAgICAgICAgICAgey4uLnBpbm5lZFBvc2l0aW9ufVxuICAgICAgICAgICAgICB7Li4uY29tbW9uUHJvcH1cbiAgICAgICAgICAgICAgbGF5ZXJIb3ZlclByb3A9e2xheWVyUGlubmVkUHJvcH1cbiAgICAgICAgICAgICAgY29vcmRpbmF0ZT17aW50ZXJhY3Rpb25Db25maWcuY29vcmRpbmF0ZS5lbmFibGVkICYmIChwaW5uZWQgfHwge30pLmNvb3JkaW5hdGV9XG4gICAgICAgICAgICAgIGZyb3plbj17dHJ1ZX1cbiAgICAgICAgICAgICAgaXNCYXNlPXtjb21wYXJlTW9kZX1cbiAgICAgICAgICAgICAgb25TZXRGZWF0dXJlcz17dGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMuc2V0RmVhdHVyZXN9XG4gICAgICAgICAgICAgIHNldFNlbGVjdGVkRmVhdHVyZT17dGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMuc2V0U2VsZWN0ZWRGZWF0dXJlfVxuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIEFyZ3VtZW50IG9mIHR5cGUgJ1JlYWRvbmx5PE1hcENvbnRhaW5lclByb3BzPicgaXMgbm90IGFzc2lnbmFibGUgdG8gcGFyYW1ldGVyIG9mIHR5cGUgJ25ldmVyJ1xuICAgICAgICAgICAgICBmZWF0dXJlQ29sbGVjdGlvbj17dGhpcy5mZWF0dXJlQ29sbGVjdGlvblNlbGVjdG9yKHRoaXMucHJvcHMpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtsYXllckhvdmVyUHJvcCAmJiAoIWxheWVyUGlubmVkUHJvcCB8fCBjb21wYXJlTW9kZSkgJiYgKFxuICAgICAgICAgICAgPE1hcFBvcG92ZXJcbiAgICAgICAgICAgICAgeD17bW91c2VQb3NpdGlvblswXX1cbiAgICAgICAgICAgICAgeT17bW91c2VQb3NpdGlvblsxXX1cbiAgICAgICAgICAgICAgey4uLmNvbW1vblByb3B9XG4gICAgICAgICAgICAgIGxheWVySG92ZXJQcm9wPXtsYXllckhvdmVyUHJvcH1cbiAgICAgICAgICAgICAgZnJvemVuPXtmYWxzZX1cbiAgICAgICAgICAgICAgY29vcmRpbmF0ZT17aW50ZXJhY3Rpb25Db25maWcuY29vcmRpbmF0ZS5lbmFibGVkICYmIGNvb3JkaW5hdGV9XG4gICAgICAgICAgICAgIG9uU2V0RmVhdHVyZXM9e3RoaXMucHJvcHMudmlzU3RhdGVBY3Rpb25zLnNldEZlYXR1cmVzfVxuICAgICAgICAgICAgICBzZXRTZWxlY3RlZEZlYXR1cmU9e3RoaXMucHJvcHMudmlzU3RhdGVBY3Rpb25zLnNldFNlbGVjdGVkRmVhdHVyZX1cbiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBBcmd1bWVudCBvZiB0eXBlICdSZWFkb25seTxNYXBDb250YWluZXJQcm9wcz4nIGlzIG5vdCBhc3NpZ25hYmxlIHRvIHBhcmFtZXRlciBvZiB0eXBlICduZXZlcidcbiAgICAgICAgICAgICAgZmVhdHVyZUNvbGxlY3Rpb249e3RoaXMuZmVhdHVyZUNvbGxlY3Rpb25TZWxlY3Rvcih0aGlzLnByb3BzKX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9FcnJvckJvdW5kYXJ5PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvKiBlc2xpbnQtZW5hYmxlIGNvbXBsZXhpdHkgKi9cblxuICAgIF9nZXRIb3ZlclhZKHZpZXdwb3J0LCBsbmdMYXQpIHtcbiAgICAgIGNvbnN0IHNjcmVlbkNvb3JkID0gIXZpZXdwb3J0IHx8ICFsbmdMYXQgPyBudWxsIDogdmlld3BvcnQucHJvamVjdChsbmdMYXQpO1xuICAgICAgcmV0dXJuIHNjcmVlbkNvb3JkICYmIHt4OiBzY3JlZW5Db29yZFswXSwgeTogc2NyZWVuQ29vcmRbMV19O1xuICAgIH1cblxuICAgIF9yZW5kZXJEZWNrT3ZlcmxheShcbiAgICAgIGxheWVyc0ZvckRlY2ssXG4gICAgICBvcHRpb25zOiB7cHJpbWFyeU1hcDogYm9vbGVhbjsgaXNJbnRlcmFjdGl2ZT86IGJvb2xlYW47IGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlfSA9IHtcbiAgICAgICAgcHJpbWFyeU1hcDogZmFsc2VcbiAgICAgIH1cbiAgICApIHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgbWFwU3R5bGUsXG4gICAgICAgIHZpc1N0YXRlLFxuICAgICAgICBtYXBTdGF0ZSxcbiAgICAgICAgdmlzU3RhdGVBY3Rpb25zLFxuICAgICAgICBtYXBib3hBcGlBY2Nlc3NUb2tlbixcbiAgICAgICAgbWFwYm94QXBpVXJsLFxuICAgICAgICBkZWNrR2xQcm9wcyxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIG1hcENvbnRyb2xzLFxuICAgICAgICBkZWNrUmVuZGVyQ2FsbGJhY2tzLFxuICAgICAgICB0aGVtZSxcbiAgICAgICAgZ2VuZXJhdGVEZWNrR0xMYXllcnMsXG4gICAgICAgIG9uTW91c2VNb3ZlXG4gICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgY29uc3Qge2hvdmVySW5mbywgZWRpdG9yfSA9IHZpc1N0YXRlO1xuICAgICAgY29uc3Qge3ByaW1hcnlNYXAsIGlzSW50ZXJhY3RpdmUsIGNoaWxkcmVufSA9IG9wdGlvbnM7XG5cbiAgICAgIC8vIGRpc2FibGUgZG91YmxlIGNsaWNrIHpvb20gd2hlbiBlZGl0b3IgaXMgaW4gYW55IGRyYXcgbW9kZVxuICAgICAgY29uc3Qge21hcERyYXd9ID0gbWFwQ29udHJvbHM7XG4gICAgICBjb25zdCB7YWN0aXZlOiBlZGl0b3JNZW51QWN0aXZlID0gZmFsc2V9ID0gbWFwRHJhdyB8fCB7fTtcbiAgICAgIGNvbnN0IGlzRWRpdG9yRHJhd2luZ01vZGUgPSBFZGl0b3JMYXllclV0aWxzLmlzRHJhd2luZ0FjdGl2ZShlZGl0b3JNZW51QWN0aXZlLCBlZGl0b3IubW9kZSk7XG5cbiAgICAgIGNvbnN0IGludGVybmFsVmlld1N0YXRlID0gdGhpcy5jb250ZXh0Py5nZXRJbnRlcm5hbFZpZXdTdGF0ZShpbmRleCk7XG4gICAgICBjb25zdCBpbnRlcm5hbE1hcFN0YXRlID0gey4uLm1hcFN0YXRlLCAuLi5pbnRlcm5hbFZpZXdTdGF0ZX07XG4gICAgICBjb25zdCB2aWV3cG9ydCA9IGdldFZpZXdwb3J0RnJvbU1hcFN0YXRlKGludGVybmFsTWFwU3RhdGUpO1xuXG4gICAgICBjb25zdCBlZGl0b3JGZWF0dXJlU2VsZWN0ZWRJbmRleCA9IHRoaXMuc2VsZWN0ZWRQb2x5Z29uSW5kZXhTZWxlY3Rvcih0aGlzLnByb3BzKTtcblxuICAgICAgY29uc3Qge3NldEZlYXR1cmVzLCBvbkxheWVyQ2xpY2ssIHNldFNlbGVjdGVkRmVhdHVyZX0gPSB2aXNTdGF0ZUFjdGlvbnM7XG5cbiAgICAgIGNvbnN0IGdlbmVyYXRlRGVja0dMTGF5ZXJzTWV0aG9kID0gZ2VuZXJhdGVEZWNrR0xMYXllcnMgPz8gY29tcHV0ZURlY2tMYXllcnM7XG4gICAgICBjb25zdCBkZWNrR2xMYXllcnMgPSBnZW5lcmF0ZURlY2tHTExheWVyc01ldGhvZChcbiAgICAgICAge1xuICAgICAgICAgIHZpc1N0YXRlLFxuICAgICAgICAgIG1hcFN0YXRlOiBpbnRlcm5hbE1hcFN0YXRlLFxuICAgICAgICAgIG1hcFN0eWxlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBtYXBJbmRleDogaW5kZXgsXG4gICAgICAgICAgcHJpbWFyeU1hcCxcbiAgICAgICAgICBtYXBib3hBcGlBY2Nlc3NUb2tlbixcbiAgICAgICAgICBtYXBib3hBcGlVcmwsXG4gICAgICAgICAgbGF5ZXJzRm9yRGVjayxcbiAgICAgICAgICBlZGl0b3JJbmZvOiBwcmltYXJ5TWFwXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICAgICAgZWRpdG9yTWVudUFjdGl2ZSxcbiAgICAgICAgICAgICAgICBvblNldEZlYXR1cmVzOiBzZXRGZWF0dXJlcyxcbiAgICAgICAgICAgICAgICBzZXRTZWxlY3RlZEZlYXR1cmUsXG4gICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBBcmd1bWVudCBvZiB0eXBlICdSZWFkb25seTxNYXBDb250YWluZXJQcm9wcz4nIGlzIG5vdCBhc3NpZ25hYmxlIHRvIHBhcmFtZXRlciBvZiB0eXBlICduZXZlcidcbiAgICAgICAgICAgICAgICBmZWF0dXJlQ29sbGVjdGlvbjogdGhpcy5mZWF0dXJlQ29sbGVjdGlvblNlbGVjdG9yKHRoaXMucHJvcHMpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRmVhdHVyZUluZGV4ZXM6IHRoaXMuc2VsZWN0ZWRGZWF0dXJlSW5kZXhBcnJheVNlbGVjdG9yKFxuICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBBcmd1bWVudCBvZiB0eXBlICd1bmtub3duJyBpcyBub3QgYXNzaWduYWJsZSB0byBwYXJhbWV0ZXIgb2YgdHlwZSAnbnVtYmVyJy5cbiAgICAgICAgICAgICAgICAgIGVkaXRvckZlYXR1cmVTZWxlY3RlZEluZGV4XG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICB2aWV3cG9ydFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgb25MYXllckhvdmVyOiB0aGlzLl9vbkxheWVySG92ZXIsXG4gICAgICAgICAgb25TZXRMYXllckRvbWFpbjogdGhpcy5fb25MYXllclNldERvbWFpbixcbiAgICAgICAgICBvbkZpbHRlcmVkSXRlbXNDaGFuZ2U6IHRoaXMuX29uTGF5ZXJGaWx0ZXJlZEl0ZW1zQ2hhbmdlLFxuICAgICAgICAgIG9uV01TRmVhdHVyZUluZm86IHRoaXMuX29uV01TRmVhdHVyZUluZm9cbiAgICAgICAgfSxcbiAgICAgICAgZGVja0dsUHJvcHNcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGV4dHJhRGVja1BhcmFtczoge1xuICAgICAgICBnZXRUb29sdGlwPzogKGluZm86IGFueSkgPT4gb2JqZWN0IHwgbnVsbDtcbiAgICAgICAgZ2V0Q3Vyc29yPzogKHtpc0RyYWdnaW5nfToge2lzRHJhZ2dpbmc6IGJvb2xlYW59KSA9PiBzdHJpbmc7XG4gICAgICB9ID0ge307XG4gICAgICBpZiAocHJpbWFyeU1hcCkge1xuICAgICAgICBleHRyYURlY2tQYXJhbXMuZ2V0VG9vbHRpcCA9IGluZm8gPT5cbiAgICAgICAgICBFZGl0b3JMYXllclV0aWxzLmdldFRvb2x0aXAoaW5mbywge1xuICAgICAgICAgICAgZWRpdG9yTWVudUFjdGl2ZSxcbiAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgIHRoZW1lXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgZXh0cmFEZWNrUGFyYW1zLmdldEN1cnNvciA9ICh7aXNEcmFnZ2luZ306IHtpc0RyYWdnaW5nOiBib29sZWFufSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGVkaXRvckN1cnNvciA9IEVkaXRvckxheWVyVXRpbHMuZ2V0Q3Vyc29yKHtcbiAgICAgICAgICAgIGVkaXRvck1lbnVBY3RpdmUsXG4gICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICBob3ZlckluZm9cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoZWRpdG9yQ3Vyc29yKSByZXR1cm4gZWRpdG9yQ3Vyc29yO1xuXG4gICAgICAgICAgaWYgKGlzRHJhZ2dpbmcpIHJldHVybiAnZ3JhYmJpbmcnO1xuICAgICAgICAgIGlmIChob3ZlckluZm8/LmxheWVyKSByZXR1cm4gJ3BvaW50ZXInO1xuICAgICAgICAgIHJldHVybiAnZ3JhYic7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLl9pc09LVG9SZW5kZXJFZmZlY3RzKGluZGV4KVxuICAgICAgICA/IGNvbXB1dGVEZWNrRWZmZWN0cyh7dmlzU3RhdGUsIG1hcFN0YXRlfSlcbiAgICAgICAgOiBbXTtcblxuICAgICAgY29uc3Qgdmlld3MgPSBkZWNrR2xQcm9wcz8udmlld3NcbiAgICAgICAgPyBkZWNrR2xQcm9wcz8udmlld3MoKVxuICAgICAgICA6IG5ldyBNYXBWaWV3KHtsZWdhY3lNZXRlclNpemVzOiB0cnVlfSk7XG5cbiAgICAgIGxldCBhbGxEZWNrR2xQcm9wcyA9IHtcbiAgICAgICAgLi4uZGVja0dsUHJvcHMsXG4gICAgICAgIHBpY2tpbmdSYWRpdXM6IERFRkFVTFRfUElDS0lOR19SQURJVVMsXG4gICAgICAgIHZpZXdzLFxuICAgICAgICBsYXllcnM6IGRlY2tHbExheWVycyxcbiAgICAgICAgZWZmZWN0c1xuICAgICAgfTtcblxuICAgICAgaWYgKHR5cGVvZiBkZWNrUmVuZGVyQ2FsbGJhY2tzPy5vbkRlY2tSZW5kZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgYWxsRGVja0dsUHJvcHMgPSBkZWNrUmVuZGVyQ2FsbGJhY2tzLm9uRGVja1JlbmRlcihhbGxEZWNrR2xQcm9wcyk7XG4gICAgICAgIGlmICghYWxsRGVja0dsUHJvcHMpIHtcbiAgICAgICAgICAvLyBpZiBvbkRlY2tSZW5kZXIgcmV0dXJucyBudWxsLCBkbyBub3QgcmVuZGVyIGRlY2suZ2xcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgey4uLihpc0ludGVyYWN0aXZlXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBvbk1vdXNlTW92ZTogcHJpbWFyeU1hcFxuICAgICAgICAgICAgICAgICAgPyBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZU1vdmU/LihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25Nb3VzZU1vdmVEZWJvdW5jZWQoZXZlbnQsIHZpZXdwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7c3R5bGU6IHtwb2ludGVyRXZlbnRzOiAnbm9uZSd9fSl9XG4gICAgICAgID5cbiAgICAgICAgICA8RGVja0dMXG4gICAgICAgICAgICBpZD1cImRlZmF1bHQtZGVja2dsLW92ZXJsYXlcIlxuICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVja1JlbmRlckNhbGxiYWNrcz8ub25EZWNrTG9hZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGRlY2tSZW5kZXJDYWxsYmFja3Mub25EZWNrTG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgey4uLmFsbERlY2tHbFByb3BzfVxuICAgICAgICAgICAgY29udHJvbGxlcj17XG4gICAgICAgICAgICAgIGlzSW50ZXJhY3RpdmVcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZG91YmxlQ2xpY2tab29tOiAhaXNFZGl0b3JEcmF3aW5nTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1JvdGF0ZTogdGhpcy5wcm9wcy5tYXBTdGF0ZS5kcmFnUm90YXRlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5pdGlhbFZpZXdTdGF0ZT17aW50ZXJuYWxWaWV3U3RhdGV9XG4gICAgICAgICAgICBvbkJlZm9yZVJlbmRlcj17dGhpcy5fb25CZWZvcmVSZW5kZXJ9XG4gICAgICAgICAgICBvblZpZXdTdGF0ZUNoYW5nZT17aXNJbnRlcmFjdGl2ZSA/IHRoaXMuX29uVmlld3BvcnRDaGFuZ2UgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICB7Li4uZXh0cmFEZWNrUGFyYW1zfVxuICAgICAgICAgICAgb25Ib3Zlcj17XG4gICAgICAgICAgICAgIGlzSW50ZXJhY3RpdmVcbiAgICAgICAgICAgICAgICA/IGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBFZGl0b3JMYXllclV0aWxzLm9uSG92ZXIoZGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgIGVkaXRvck1lbnVBY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICAgIGhvdmVySW5mb1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTGF5ZXJIb3ZlckRlYm91bmNlZChkYXRhLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbkNsaWNrPXsoZGF0YSwgZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICBub3JtYWxpemVFdmVudChldmVudC5zcmNFdmVudCwgdmlld3BvcnQpO1xuICAgICAgICAgICAgICBjb25zdCByZXMgPSBFZGl0b3JMYXllclV0aWxzLm9uQ2xpY2soZGF0YSwgZXZlbnQsIHtcbiAgICAgICAgICAgICAgICBlZGl0b3JNZW51QWN0aXZlLFxuICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICBvbkxheWVyQ2xpY2ssXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRGZWF0dXJlLFxuICAgICAgICAgICAgICAgIG1hcEluZGV4OiBpbmRleFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgaWYgKHJlcykgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIHZpc1N0YXRlQWN0aW9ucy5vbkxheWVyQ2xpY2soZGF0YSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25FcnJvcj17dGhpcy5fb25EZWNrRXJyb3J9XG4gICAgICAgICAgICByZWY9e2NvbXAgPT4ge1xuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgIGlmIChjb21wICYmIGNvbXAuZGVjayAmJiAhdGhpcy5fZGVjaykge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWNrID0gY29tcC5kZWNrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25XZWJHTEluaXRpYWxpemVkPXtnbCA9PiB0aGlzLl9vbkRlY2tJbml0aWFsaXplZChnbCl9XG4gICAgICAgICAgICBvbkFmdGVyUmVuZGVyPXsoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVja1JlbmRlckNhbGxiYWNrcz8ub25EZWNrQWZ0ZXJSZW5kZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBkZWNrUmVuZGVyQ2FsbGJhY2tzLm9uRGVja0FmdGVyUmVuZGVyKGFsbERlY2tHbFByb3BzKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNvbnN0IGFueUFjdGl2ZUxheWVyTG9hZGluZyA9IGFyZUFueURlY2tMYXllcnNMb2FkaW5nKGFsbERlY2tHbFByb3BzLmxheWVycyk7XG4gICAgICAgICAgICAgIGlmIChhbnlBY3RpdmVMYXllckxvYWRpbmcgIT09IHRoaXMuYW55QWN0aXZlTGF5ZXJMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25MYXllckxvYWRpbmdTdGF0ZUNoYW5nZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYW55QWN0aXZlTGF5ZXJMb2FkaW5nID0gYW55QWN0aXZlTGF5ZXJMb2FkaW5nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L0RlY2tHTD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIF91cGRhdGVNYXBib3hMYXllcnMoKSB7XG4gICAgICBjb25zdCBtYXBib3hMYXllcnMgPSB0aGlzLm1hcGJveExheWVyc1NlbGVjdG9yKHRoaXMucHJvcHMpO1xuICAgICAgaWYgKCFPYmplY3Qua2V5cyhtYXBib3hMYXllcnMpLmxlbmd0aCAmJiAhT2JqZWN0LmtleXModGhpcy5wcmV2aW91c0xheWVycykubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlTWFwYm94TGF5ZXJzKHRoaXMuX21hcCwgbWFwYm94TGF5ZXJzLCB0aGlzLnByZXZpb3VzTGF5ZXJzKTtcblxuICAgICAgdGhpcy5wcmV2aW91c0xheWVycyA9IG1hcGJveExheWVycztcbiAgICB9XG5cbiAgICBfcmVuZGVyTWFwYm94T3ZlcmxheXMoKSB7XG4gICAgICBpZiAodGhpcy5fbWFwICYmIHRoaXMuX21hcC5pc1N0eWxlTG9hZGVkKCkpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlTWFwYm94TGF5ZXJzKCk7XG4gICAgICB9XG4gICAgfVxuICAgIF9vblZpZXdwb3J0Q2hhbmdlUHJvcGFnYXRlRGVib3VuY2VkID0gZGVib3VuY2UoKCkgPT4ge1xuICAgICAgY29uc3Qgdmlld1N0YXRlID0gdGhpcy5jb250ZXh0Py5nZXRJbnRlcm5hbFZpZXdTdGF0ZSh0aGlzLnByb3BzLmluZGV4KTtcbiAgICAgIG9uVmlld1BvcnRDaGFuZ2UoXG4gICAgICAgIHZpZXdTdGF0ZSxcbiAgICAgICAgdGhpcy5wcm9wcy5tYXBTdGF0ZUFjdGlvbnMudXBkYXRlTWFwLFxuICAgICAgICB0aGlzLnByb3BzLm9uVmlld1N0YXRlQ2hhbmdlLFxuICAgICAgICB0aGlzLnByb3BzLnByaW1hcnksXG4gICAgICAgIHRoaXMucHJvcHMuaW5kZXhcbiAgICAgICk7XG4gICAgfSwgREVCT1VOQ0VfVklFV1BPUlRfUFJPUEFHQVRFKTtcblxuICAgIF9vblZpZXdwb3J0Q2hhbmdlID0gdmlld3BvcnQgPT4ge1xuICAgICAgY29uc3Qge3ZpZXdTdGF0ZX0gPSB2aWV3cG9ydDtcbiAgICAgIGlmICh0aGlzLnByb3BzLmlzRXhwb3J0KSB7XG4gICAgICAgIC8vIEltYWdlIGV4cG9ydCBtYXAgc2hvdWxkbid0IGJlIGludGVyYWN0aXZlIChvdGhlcndpc2UgdGhpcyBjYWxsYmFjayBjYW5cbiAgICAgICAgLy8gbGVhZCB0byBpbmFkdmVydGVudCBjaGFuZ2VzIHRvIHRoZSBzdGF0ZSBvZiB0aGUgbWFpbiBtYXApXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHtzZXRJbnRlcm5hbFZpZXdTdGF0ZX0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICBzZXRJbnRlcm5hbFZpZXdTdGF0ZSh2aWV3U3RhdGUsIHRoaXMucHJvcHMuaW5kZXgpO1xuICAgICAgdGhpcy5fb25WaWV3cG9ydENoYW5nZVByb3BhZ2F0ZURlYm91bmNlZCgpO1xuICAgIH07XG5cbiAgICBfb25MYXllckhvdmVyRGVib3VuY2VkID0gZGVib3VuY2UoKGRhdGEsIGluZGV4KSA9PiB7XG4gICAgICB0aGlzLnByb3BzLnZpc1N0YXRlQWN0aW9ucy5vbkxheWVySG92ZXIoZGF0YSwgaW5kZXgpO1xuICAgIH0sIERFQk9VTkNFX01PVVNFX01PVkVfUFJPUEFHQVRFKTtcblxuICAgIF9vbk1vdXNlTW92ZURlYm91bmNlZCA9IGRlYm91bmNlKChldmVudCwgdmlld3BvcnQpID0+IHtcbiAgICAgIHRoaXMucHJvcHMudmlzU3RhdGVBY3Rpb25zLm9uTW91c2VNb3ZlKG5vcm1hbGl6ZUV2ZW50KGV2ZW50LCB2aWV3cG9ydCkpO1xuICAgIH0sIERFQk9VTkNFX01PVVNFX01PVkVfUFJPUEFHQVRFKTtcblxuICAgIF9vbkxheWVyTG9hZGluZ1N0YXRlQ2hhbmdlID0gZGVib3VuY2UoKCkgPT4ge1xuICAgICAgLy8gdHJpZ2dlciBsb2FkaW5nIGluZGljYXRvciB1cGRhdGUgd2l0aG91dCBhbnkgY2hhbmdlIHRvIHVwZGF0ZSBVSVxuICAgICAgdGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMuc2V0TG9hZGluZ0luZGljYXRvcih7Y2hhbmdlOiAwfSk7XG4gICAgfSwgREVCT1VOQ0VfTE9BRElOR19TVEFURV9QUk9QQUdBVEUpO1xuXG4gICAgX3RvZ2dsZU1hcENvbnRyb2wgPSBwYW5lbElkID0+IHtcbiAgICAgIGNvbnN0IHtpbmRleCwgdWlTdGF0ZUFjdGlvbnN9ID0gdGhpcy5wcm9wcztcblxuICAgICAgdWlTdGF0ZUFjdGlvbnMudG9nZ2xlTWFwQ29udHJvbChwYW5lbElkLCBOdW1iZXIoaW5kZXgpKTtcbiAgICB9O1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgY29tcGxleGl0eSAqL1xuICAgIF9yZW5kZXJNYXAoKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHZpc1N0YXRlLFxuICAgICAgICBtYXBTdGF0ZSxcbiAgICAgICAgbWFwU3R5bGUsXG4gICAgICAgIG1hcFN0YXRlQWN0aW9ucyxcbiAgICAgICAgTWFwQ29tcG9uZW50ID0gTWFwLFxuICAgICAgICBtYXBib3hBcGlBY2Nlc3NUb2tlbixcbiAgICAgICAgLy8gbWFwYm94QXBpVXJsLFxuICAgICAgICBtYXBDb250cm9scyxcbiAgICAgICAgaXNFeHBvcnQsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgdWlTdGF0ZUFjdGlvbnMsXG4gICAgICAgIHZpc1N0YXRlQWN0aW9ucyxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHByaW1hcnksXG4gICAgICAgIGJvdHRvbU1hcENvbnRhaW5lclByb3BzLFxuICAgICAgICB0b3BNYXBDb250YWluZXJQcm9wcyxcbiAgICAgICAgdGhlbWUsXG4gICAgICAgIGRhdGFzZXRBdHRyaWJ1dGlvbnMgPSBbXSxcbiAgICAgICAgY29udGFpbmVySWQgPSAwLFxuICAgICAgICBpc0xvYWRpbmdJbmRpY2F0b3JWaXNpYmxlLFxuICAgICAgICBhY3RpdmVTaWRlUGFuZWwsXG4gICAgICAgIHNpZGVQYW5lbFdpZHRoXG4gICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgY29uc3Qge2xheWVycywgZGF0YXNldHMsIGVkaXRvciwgaW50ZXJhY3Rpb25Db25maWd9ID0gdmlzU3RhdGU7XG5cbiAgICAgIGNvbnN0IGxheWVyc1RvUmVuZGVyID0gdGhpcy5sYXllcnNUb1JlbmRlclNlbGVjdG9yKHRoaXMucHJvcHMpO1xuICAgICAgY29uc3QgbGF5ZXJzRm9yRGVjayA9IHRoaXMubGF5ZXJzRm9yRGVja1NlbGVjdG9yKHRoaXMucHJvcHMpO1xuXG4gICAgICAvLyBDdXJyZW50IHN0eWxlIGNhbiBiZSBhIGN1c3RvbSBzdHlsZSwgZnJvbSB3aGljaCB3ZSBwdWxsIHRoZSBtYXBib3ggQVBJIGFjY2Nlc3MgdG9rZW5cbiAgICAgIGNvbnN0IGN1cnJlbnRTdHlsZSA9IG1hcFN0eWxlLm1hcFN0eWxlcz8uW21hcFN0eWxlLnN0eWxlVHlwZV07XG4gICAgICBjb25zdCBiYXNlTWFwTGlicmFyeU5hbWUgPSBnZXRCYXNlTWFwTGlicmFyeShjdXJyZW50U3R5bGUpO1xuICAgICAgY29uc3QgYmFzZU1hcExpYnJhcnlDb25maWcgPVxuICAgICAgICBnZXRBcHBsaWNhdGlvbkNvbmZpZygpLmJhc2VNYXBMaWJyYXJ5Q29uZmlnPy5bYmFzZU1hcExpYnJhcnlOYW1lXTtcblxuICAgICAgY29uc3QgaW50ZXJuYWxWaWV3U3RhdGUgPSB0aGlzLmNvbnRleHQ/LmdldEludGVybmFsVmlld1N0YXRlKGluZGV4KTtcbiAgICAgIGNvbnN0IG1hcFByb3BzID0ge1xuICAgICAgICAuLi5pbnRlcm5hbFZpZXdTdGF0ZSxcbiAgICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlLFxuICAgICAgICBtYXBib3hBY2Nlc3NUb2tlbjogY3VycmVudFN0eWxlPy5hY2Nlc3NUb2tlbiB8fCBtYXBib3hBcGlBY2Nlc3NUb2tlbixcbiAgICAgICAgLy8gYmFzZUFwaVVybDogbWFwYm94QXBpVXJsLFxuICAgICAgICBtYXBMaWI6IGJhc2VNYXBMaWJyYXJ5Q29uZmlnLmdldE1hcExpYigpLFxuICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OlxuICAgICAgICAgIHRoaXMucHJvcHMudHJhbnNmb3JtUmVxdWVzdCB8fFxuICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3QoY3VycmVudFN0eWxlPy5hY2Nlc3NUb2tlbiB8fCBtYXBib3hBcGlBY2Nlc3NUb2tlbilcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGhhc0dlb2NvZGVyTGF5ZXIgPSBCb29sZWFuKGxheWVycy5maW5kKGwgPT4gbC5pZCA9PT0gR0VPQ09ERVJfTEFZRVJfSUQpKTtcbiAgICAgIGNvbnN0IGlzU3BsaXQgPSBCb29sZWFuKG1hcFN0YXRlLmlzU3BsaXQpO1xuXG4gICAgICBjb25zdCBkZWNrID0gdGhpcy5fcmVuZGVyRGVja092ZXJsYXkobGF5ZXJzRm9yRGVjaywge1xuICAgICAgICBwcmltYXJ5TWFwOiB0cnVlLFxuICAgICAgICBpc0ludGVyYWN0aXZlOiB0cnVlLFxuICAgICAgICBjaGlsZHJlbjogKFxuICAgICAgICAgIDxNYXBDb21wb25lbnRcbiAgICAgICAgICAgIGtleT17YGJvdHRvbS0ke2Jhc2VNYXBMaWJyYXJ5TmFtZX1gfVxuICAgICAgICAgICAgey4uLm1hcFByb3BzfVxuICAgICAgICAgICAgbWFwU3R5bGU9e21hcFN0eWxlLmJvdHRvbU1hcFN0eWxlID8/IEVNUFRZX01BUEJPWF9TVFlMRX1cbiAgICAgICAgICAgIHsuLi5ib3R0b21NYXBDb250YWluZXJQcm9wc31cbiAgICAgICAgICAgIHJlZj17dGhpcy5fc2V0TWFwUmVmfVxuICAgICAgICAgIC8+XG4gICAgICAgIClcbiAgICAgIH0pO1xuICAgICAgaWYgKCFkZWNrKSB7XG4gICAgICAgIC8vIGRlY2tPdmVybGF5IGNhbiBiZSBudWxsIGlmIG9uRGVja1JlbmRlciByZXR1cm5zIG51bGxcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIGRvbid0IHdhbnQgdG8gcmVuZGVyIHRoZSBtYXBcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgIDxNYXBDb250cm9sXG4gICAgICAgICAgICBtYXBTdGF0ZT17bWFwU3RhdGV9XG4gICAgICAgICAgICBkYXRhc2V0cz17ZGF0YXNldHN9XG4gICAgICAgICAgICBhdmFpbGFibGVMb2NhbGVzPXtMT0NBTEVfQ09ERVNfQVJSQVl9XG4gICAgICAgICAgICBkcmFnUm90YXRlPXttYXBTdGF0ZS5kcmFnUm90YXRlfVxuICAgICAgICAgICAgaXNTcGxpdD17aXNTcGxpdH1cbiAgICAgICAgICAgIHByaW1hcnk9e0Jvb2xlYW4ocHJpbWFyeSl9XG4gICAgICAgICAgICBpc0V4cG9ydD17aXNFeHBvcnR9XG4gICAgICAgICAgICBsYXllcnM9e2xheWVyc31cbiAgICAgICAgICAgIGxheWVyc1RvUmVuZGVyPXtsYXllcnNUb1JlbmRlcn1cbiAgICAgICAgICAgIG1hcEluZGV4PXtpbmRleCB8fCAwfVxuICAgICAgICAgICAgbWFwQ29udHJvbHM9e21hcENvbnRyb2xzfVxuICAgICAgICAgICAgcmVhZE9ubHk9e3RoaXMucHJvcHMucmVhZE9ubHl9XG4gICAgICAgICAgICBzY2FsZT17bWFwU3RhdGUuc2NhbGUgfHwgMX1cbiAgICAgICAgICAgIGxvZ29Db21wb25lbnQ9e3RoaXMucHJvcHMubG9nb0NvbXBvbmVudH1cbiAgICAgICAgICAgIHRvcD17XG4gICAgICAgICAgICAgIGludGVyYWN0aW9uQ29uZmlnLmdlb2NvZGVyICYmIGludGVyYWN0aW9uQ29uZmlnLmdlb2NvZGVyLmVuYWJsZWRcbiAgICAgICAgICAgICAgICA/IHRoZW1lLm1hcENvbnRyb2xUb3BcbiAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVkaXRvcj17ZWRpdG9yfVxuICAgICAgICAgICAgbG9jYWxlPXtsb2NhbGV9XG4gICAgICAgICAgICBvblRvZ2dsZVBlcnNwZWN0aXZlPXttYXBTdGF0ZUFjdGlvbnMudG9nZ2xlUGVyc3BlY3RpdmV9XG4gICAgICAgICAgICBvblRvZ2dsZVNwbGl0TWFwPXttYXBTdGF0ZUFjdGlvbnMudG9nZ2xlU3BsaXRNYXB9XG4gICAgICAgICAgICBvbk1hcFRvZ2dsZUxheWVyPXt0aGlzLl9oYW5kbGVNYXBUb2dnbGVMYXllcn1cbiAgICAgICAgICAgIG9uVG9nZ2xlTWFwQ29udHJvbD17dGhpcy5fdG9nZ2xlTWFwQ29udHJvbH1cbiAgICAgICAgICAgIG9uVG9nZ2xlU3BsaXRNYXBWaWV3cG9ydD17bWFwU3RhdGVBY3Rpb25zLnRvZ2dsZVNwbGl0TWFwVmlld3BvcnR9XG4gICAgICAgICAgICBvblNldEVkaXRvck1vZGU9e3Zpc1N0YXRlQWN0aW9ucy5zZXRFZGl0b3JNb2RlfVxuICAgICAgICAgICAgb25TZXRMb2NhbGU9e3VpU3RhdGVBY3Rpb25zLnNldExvY2FsZX1cbiAgICAgICAgICAgIG9uVG9nZ2xlRWRpdG9yVmlzaWJpbGl0eT17dmlzU3RhdGVBY3Rpb25zLnRvZ2dsZUVkaXRvclZpc2liaWxpdHl9XG4gICAgICAgICAgICBvbkxheWVyVmlzQ29uZmlnQ2hhbmdlPXt2aXNTdGF0ZUFjdGlvbnMubGF5ZXJWaXNDb25maWdDaGFuZ2V9XG4gICAgICAgICAgICBtYXBIZWlnaHQ9e21hcFN0YXRlLmhlaWdodH1cbiAgICAgICAgICAgIHNldE1hcENvbnRyb2xTZXR0aW5ncz17dWlTdGF0ZUFjdGlvbnMuc2V0TWFwQ29udHJvbFNldHRpbmdzfVxuICAgICAgICAgICAgYWN0aXZlU2lkZVBhbmVsPXthY3RpdmVTaWRlUGFuZWx9XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7aXNTcGxpdFNlbGVjdG9yKHRoaXMucHJvcHMpICYmIDxEcm9wcGFibGUgY29udGFpbmVySWQ9e2NvbnRhaW5lcklkfSAvPn1cblxuICAgICAgICAgIHtkZWNrfVxuICAgICAgICAgIHt0aGlzLl9yZW5kZXJNYXBib3hPdmVybGF5cygpfVxuICAgICAgICAgIDxFZGl0b3JcbiAgICAgICAgICAgIGluZGV4PXtpbmRleCB8fCAwfVxuICAgICAgICAgICAgZGF0YXNldHM9e2RhdGFzZXRzfVxuICAgICAgICAgICAgZWRpdG9yPXtlZGl0b3J9XG4gICAgICAgICAgICBmaWx0ZXJzPXt0aGlzLnBvbHlnb25GaWx0ZXJzU2VsZWN0b3IodGhpcy5wcm9wcyl9XG4gICAgICAgICAgICBsYXllcnM9e2xheWVyc31cbiAgICAgICAgICAgIG9uRGVsZXRlRmVhdHVyZT17dmlzU3RhdGVBY3Rpb25zLmRlbGV0ZUZlYXR1cmV9XG4gICAgICAgICAgICBvblNlbGVjdD17dmlzU3RhdGVBY3Rpb25zLnNldFNlbGVjdGVkRmVhdHVyZX1cbiAgICAgICAgICAgIG9uVG9nZ2xlUG9seWdvbkZpbHRlcj17dmlzU3RhdGVBY3Rpb25zLnNldFBvbHlnb25GaWx0ZXJMYXllcn1cbiAgICAgICAgICAgIG9uU2V0RWRpdG9yTW9kZT17dmlzU3RhdGVBY3Rpb25zLnNldEVkaXRvck1vZGV9XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnYWxsJyxcbiAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGVkaXRvci52aXNpYmxlID8gJ2Jsb2NrJyA6ICdub25lJ1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgIHttYXBTdHlsZS50b3BNYXBTdHlsZSA/IChcbiAgICAgICAgICAgIDxNYXBDb21wb25lbnRcbiAgICAgICAgICAgICAga2V5PXtgdG9wLSR7YmFzZU1hcExpYnJhcnlOYW1lfWB9XG4gICAgICAgICAgICAgIHZpZXdTdGF0ZT17aW50ZXJuYWxWaWV3U3RhdGV9XG4gICAgICAgICAgICAgIG1hcFN0eWxlPXttYXBTdHlsZS50b3BNYXBTdHlsZX1cbiAgICAgICAgICAgICAgc3R5bGU9e01BUF9TVFlMRS50b3B9XG4gICAgICAgICAgICAgIG1hcGJveEFjY2Vzc1Rva2VuPXttYXBQcm9wcy5tYXBib3hBY2Nlc3NUb2tlbn1cbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdD17bWFwUHJvcHMudHJhbnNmb3JtUmVxdWVzdH1cbiAgICAgICAgICAgICAgbWFwTGliPXtiYXNlTWFwTGlicmFyeUNvbmZpZy5nZXRNYXBMaWIoKX1cbiAgICAgICAgICAgICAgey4uLnRvcE1hcENvbnRhaW5lclByb3BzfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogbnVsbH1cblxuICAgICAgICAgIHtoYXNHZW9jb2RlckxheWVyXG4gICAgICAgICAgICA/IHRoaXMuX3JlbmRlckRlY2tPdmVybGF5KFxuICAgICAgICAgICAgICAgIHtbR0VPQ09ERVJfTEFZRVJfSURdOiBoYXNHZW9jb2RlckxheWVyfSxcbiAgICAgICAgICAgICAgICB7cHJpbWFyeU1hcDogZmFsc2UsIGlzSW50ZXJhY3RpdmU6IGZhbHNlfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG51bGx9XG4gICAgICAgICAge3RoaXMuX3JlbmRlck1hcFBvcG92ZXIoKX1cbiAgICAgICAgICB7cHJpbWFyeSAhPT0gaXNTcGxpdCA/IChcbiAgICAgICAgICAgIDxMb2FkaW5nSW5kaWNhdG9yXG4gICAgICAgICAgICAgIGlzVmlzaWJsZT17Qm9vbGVhbihpc0xvYWRpbmdJbmRpY2F0b3JWaXNpYmxlIHx8IHRoaXMuYW55QWN0aXZlTGF5ZXJMb2FkaW5nKX1cbiAgICAgICAgICAgICAgYWN0aXZlU2lkZVBhbmVsPXtCb29sZWFuKGFjdGl2ZVNpZGVQYW5lbCl9XG4gICAgICAgICAgICAgIHNpZGVQYW5lbFdpZHRoPXtzaWRlUGFuZWxXaWR0aH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAge3RoaXMucHJvcHMucHJpbWFyeSA/IChcbiAgICAgICAgICAgIDxBdHRyaWJ1dGlvblxuICAgICAgICAgICAgICBzaG93QmFzZU1hcExpYkxvZ289e3RoaXMuc3RhdGUuc2hvd0Jhc2VNYXBBdHRyaWJ1dGlvbn1cbiAgICAgICAgICAgICAgc2hvd09zbUJhc2VtYXBBdHRyaWJ1dGlvbj17dHJ1ZX1cbiAgICAgICAgICAgICAgZGF0YXNldEF0dHJpYnV0aW9ucz17ZGF0YXNldEF0dHJpYnV0aW9uc31cbiAgICAgICAgICAgICAgYmFzZU1hcExpYnJhcnlDb25maWc9e2Jhc2VNYXBMaWJyYXJ5Q29uZmlnfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgIGNvbnN0IHt2aXNTdGF0ZSwgbWFwU3R5bGV9ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IG1hcENvbnRlbnQgPSB0aGlzLl9yZW5kZXJNYXAoKTtcbiAgICAgIGlmICghbWFwQ29udGVudCkge1xuICAgICAgICAvLyBtYXBDb250ZW50IGNhbiBiZSBudWxsIGlmIG9uRGVja1JlbmRlciByZXR1cm5zIG51bGxcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIGRvbid0IHdhbnQgdG8gcmVuZGVyIHRoZSBtYXBcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRTdHlsZSA9IG1hcFN0eWxlLm1hcFN0eWxlcz8uW21hcFN0eWxlLnN0eWxlVHlwZV07XG4gICAgICBjb25zdCBiYXNlTWFwTGlicmFyeU5hbWUgPSBnZXRCYXNlTWFwTGlicmFyeShjdXJyZW50U3R5bGUpO1xuICAgICAgY29uc3QgYmFzZU1hcExpYnJhcnlDb25maWcgPVxuICAgICAgICBnZXRBcHBsaWNhdGlvbkNvbmZpZygpLmJhc2VNYXBMaWJyYXJ5Q29uZmlnPy5bYmFzZU1hcExpYnJhcnlOYW1lXTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFN0eWxlZE1hcFxuICAgICAgICAgIHJlZj17dGhpcy5fcmVmfVxuICAgICAgICAgIHN0eWxlPXt0aGlzLnN0eWxlU2VsZWN0b3IodGhpcy5wcm9wcyl9XG4gICAgICAgICAgb25Db250ZXh0TWVudT17ZXZlbnQgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKX1cbiAgICAgICAgICAkbWl4QmxlbmRNb2RlPXt2aXNTdGF0ZS5vdmVybGF5QmxlbmRpbmd9XG4gICAgICAgICAgJG1hcExpYkNzc0NsYXNzPXtiYXNlTWFwTGlicmFyeUNvbmZpZy5tYXBMaWJDc3NDbGFzc31cbiAgICAgICAgPlxuICAgICAgICAgIHttYXBDb250ZW50fVxuICAgICAgICA8L1N0eWxlZE1hcD5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHdpdGhUaGVtZShNYXBDb250YWluZXIpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxpQkFBQSxHQUFBRix1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsV0FBQSxHQUFBRixPQUFBO0FBRUEsSUFBQUcsT0FBQSxHQUFBQyxzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQUssU0FBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sS0FBQSxHQUFBTixPQUFBO0FBQ0EsSUFBQU8sU0FBQSxHQUFBSCxzQkFBQSxDQUFBSixPQUFBO0FBS0EsSUFBQVEsV0FBQSxHQUFBSixzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQVMsV0FBQSxHQUFBTCxzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQVUsa0JBQUEsR0FBQVYsT0FBQTtBQU1BLElBQUFXLE9BQUEsR0FBQVAsc0JBQUEsQ0FBQUosT0FBQTtBQUdBLElBQUFZLE9BQUEsR0FBQVosT0FBQTtBQWdCQSxJQUFBYSxNQUFBLEdBQUFiLE9BQUE7QUFvQkEsSUFBQWMsT0FBQSxHQUFBZCxPQUFBO0FBR0EsSUFBQWUsVUFBQSxHQUFBZixPQUFBO0FBU0EsSUFBQWdCLGNBQUEsR0FBQWhCLE9BQUE7QUFFQSxJQUFBaUIsb0JBQUEsR0FBQWpCLE9BQUE7QUFFQSxJQUFBa0IsY0FBQSxHQUFBZCxzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQW1CLGFBQUEsR0FBQW5CLE9BQUE7QUFDQSxJQUFBb0IsTUFBQSxHQUFBcEIsT0FBQTtBQUNBLElBQUFxQixTQUFBLEdBQUFyQixPQUFBO0FBWUEsSUFBQXNCLGlCQUFBLEdBQUFsQixzQkFBQSxD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SSxDQUFDMVosS0FBSztVQUFoQ00sUUFBUSxHQUFBb1osWUFBQSxDQUFScFosUUFBUTtVQUFFa0csUUFBUSxHQUFBa1QsWUFBQSxDQUFSbFQsUUFBUTtRQUN6QixJQUFNbVQsVUFBVSxHQUFHLElBQUksQ0FBQzdFLFVBQVUsQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQzZFLFVBQVUsRUFBRTtVQUNmO1VBQ0E7VUFDQSxPQUFPLElBQUk7UUFDYjtRQUVBLElBQU0zRCxZQUFZLElBQUF3RCxvQkFBQSxHQUFHaFQsUUFBUSxDQUFDeVAsU0FBUyxjQUFBdUQsb0JBQUEsdUJBQWxCQSxvQkFBQSxDQUFxQmhULFFBQVEsQ0FBQ0MsU0FBUyxDQUFDO1FBQzdELElBQU15UCxrQkFBa0IsR0FBRyxJQUFBQyx3QkFBaUIsRUFBQ0gsWUFBWSxDQUFDO1FBQzFELElBQU05VyxvQkFBb0IsSUFBQXVhLHNCQUFBLEdBQ3hCLElBQUFyRCwyQkFBb0IsRUFBQyxDQUFDLENBQUNsWCxvQkFBb0IsY0FBQXVhLHNCQUFBLHVCQUEzQ0Esc0JBQUEsQ0FBOEN2RCxrQkFBa0IsQ0FBQztRQUVuRSxvQkFDRWxkLE1BQUEsWUFBQW1HLGFBQUEsQ0FBQ2QsU0FBUztVQUNSK0MsR0FBRyxFQUFFLElBQUksQ0FBQzVDLElBQUs7VUFDZmEsS0FBSyxFQUFFLElBQUksQ0FBQ3VhLGFBQWEsQ0FBQyxJQUFJLENBQUM1WixLQUFLLENBQUU7VUFDdEM2WixhQUFhLEVBQUUsU0FBZkEsYUFBYUEsQ0FBRXJTLEtBQUs7WUFBQSxPQUFJQSxLQUFLLENBQUNzUyxjQUFjLENBQUMsQ0FBQztVQUFBLENBQUM7VUFDL0NwYixhQUFhLEVBQUU0QixRQUFRLENBQUN5WixlQUFnQjtVQUN4Q3BiLGVBQWUsRUFBRU8sb0JBQW9CLENBQUNLO1FBQWUsR0FFcERvYSxVQUNRLENBQUM7TUFFaEI7SUFBQztFQUFBLEVBbDJCd0JLLGdCQUFTO0VBQUEsSUFBQXJkLGdCQUFBLGFBQTlCNkcsWUFBWSxpQkFLS3lXLHdDQUFtQjtFQUFBLElBQUF0ZCxnQkFBQSxhQUxwQzZHLFlBQVksa0JBU007SUFDcEI2UixZQUFZLEVBQUVDLGVBQUc7SUFDakJyRixXQUFXLEVBQUUsQ0FBQyxDQUFDO0lBQ2ZoUCxLQUFLLEVBQUUsQ0FBQztJQUNSK0MsT0FBTyxFQUFFO0VBQ1gsQ0FBQztFQXUxQkgsT0FBTyxJQUFBa1csMkJBQVMsRUFBQzFXLFlBQVksQ0FBQztBQUNoQyIsImlnbm9yZUxpc3QiOltdfQ==