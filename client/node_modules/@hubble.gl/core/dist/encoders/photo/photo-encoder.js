// hubble.gl
// SPDX-License-Identifier: MIT
// Copyright (c) vis.gl contributors
import FrameEncoder from "../frame-encoder.js";
import { canvasToArrayBuffer } from "../utils/index.js";
class PhotoEncoder extends FrameEncoder {
    constructor(settings) {
        super(settings);
        this.blob = null;
        this.add = this.add.bind(this);
    }
    async add(canvas) {
        // Adding a frame just overwrites old image
        const buffer = await canvasToArrayBuffer(canvas, this.mimeType, this.quality);
        this.blob = new Blob([buffer], { type: this.mimeType });
        return Promise.resolve();
    }
    async save() {
        return Promise.resolve(this.blob);
    }
}
export default PhotoEncoder;
