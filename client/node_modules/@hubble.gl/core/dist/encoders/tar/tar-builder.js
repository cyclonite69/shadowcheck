// hubble.gl
// SPDX-License-Identifier: MIT
// Copyright (c) vis.gl contributors
import Tar from "./tar.js";
const TAR_BUILDER_OPTIONS = {
    recordsPerBlock: 20
};
export default class TARBuilder {
    static get properties() {
        return {
            id: 'tar',
            name: 'TAR',
            extensions: ['tar'],
            mimeType: 'application/x-tar',
            builder: TARBuilder,
            options: TAR_BUILDER_OPTIONS
        };
    }
    constructor(options) {
        this.options = { ...TAR_BUILDER_OPTIONS, ...options };
        this.tape = new Tar(this.options.recordsPerBlock);
        this.count = 0;
    }
    addFile(buffer, filename) {
        this.tape.append(filename, new Uint8Array(buffer));
        this.count++;
    }
    async build() {
        return new Response(this.tape.save()).arrayBuffer();
    }
}
