"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getEchartsTools = getEchartsTools;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _plots = require("@openassistant/plots");
var _echarts = require("@openassistant/echarts");
var _src = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/actions/src");
var _utils = require("./utils");
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2["default"])(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; } // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function getEchartsTools(datasets, layers, dispatch) {
  // context for tools
  var getValues = /*#__PURE__*/function () {
    var _ref = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(datasetName, variableName) {
      var values;
      return _regenerator["default"].wrap(function _callee$(_context) {
        while (1) switch (_context.prev = _context.next) {
          case 0:
            values = (0, _utils.getValuesFromDataset)(datasets, layers, datasetName, variableName);
            return _context.abrupt("return", values);
          case 2:
          case "end":
            return _context.stop();
        }
      }, _callee);
    }));
    return function getValues(_x, _x2) {
      return _ref.apply(this, arguments);
    };
  }();
  var onSelected = function onSelected(datasetName, selectedIndices) {
    var triggerLayerReRender = function triggerLayerReRender(layer, isValid) {
      dispatch((0, _src.layerSetIsValid)(layer, isValid));
    };
    (0, _utils.highlightRows)(datasets, layers, datasetName, selectedIndices, triggerLayerReRender);
  };

  // Create the boxplot tool with the getValues implementation
  var boxplotTool = _objectSpread(_objectSpread({}, _plots.boxplot), {}, {
    context: _objectSpread(_objectSpread({}, _plots.boxplot.context), {}, {
      getValues: getValues,
      onSelected: onSelected
    }),
    component: _echarts.BoxplotComponent
  });

  // Create the bubble chart tool with the getValues implementation
  var bubbleChartTool = _objectSpread(_objectSpread({}, _plots.bubbleChart), {}, {
    context: _objectSpread(_objectSpread({}, _plots.bubbleChart.context), {}, {
      getValues: getValues,
      onSelected: onSelected
    }),
    component: _echarts.BubbleChartComponent
  });
  var histogramTool = _objectSpread(_objectSpread({}, _plots.histogram), {}, {
    context: _objectSpread(_objectSpread({}, _plots.histogram.context), {}, {
      getValues: getValues,
      onSelected: onSelected
    }),
    component: _echarts.HistogramPlotComponent
  });
  var pcpTool = _objectSpread(_objectSpread({}, _plots.pcp), {}, {
    context: _objectSpread(_objectSpread({}, _plots.pcp.context), {}, {
      getValues: getValues,
      onSelected: onSelected
    }),
    component: _echarts.ParallelCoordinateComponent
  });
  var scatterplotTool = _objectSpread(_objectSpread({}, _plots.scatterplot), {}, {
    context: _objectSpread(_objectSpread({}, _plots.scatterplot.context), {}, {
      getValues: getValues,
      onSelected: onSelected
    }),
    component: _echarts.ScatterplotComponent
  });
  return {
    boxplotTool: boxplotTool,
    bubbleChartTool: bubbleChartTool,
    histogramTool: histogramTool,
    pcpTool: pcpTool,
    scatterplotTool: scatterplotTool
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGxvdHMiLCJyZXF1aXJlIiwiX2VjaGFydHMiLCJfc3JjIiwiX3V0aWxzIiwib3duS2V5cyIsImUiLCJyIiwidCIsIk9iamVjdCIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJnZXRFY2hhcnRzVG9vbHMiLCJkYXRhc2V0cyIsImxheWVycyIsImRpc3BhdGNoIiwiZ2V0VmFsdWVzIiwiX3JlZiIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWdlbmVyYXRvciIsIm1hcmsiLCJfY2FsbGVlIiwiZGF0YXNldE5hbWUiLCJ2YXJpYWJsZU5hbWUiLCJ2YWx1ZXMiLCJ3cmFwIiwiX2NhbGxlZSQiLCJfY29udGV4dCIsInByZXYiLCJuZXh0IiwiZ2V0VmFsdWVzRnJvbURhdGFzZXQiLCJhYnJ1cHQiLCJzdG9wIiwiX3giLCJfeDIiLCJvblNlbGVjdGVkIiwic2VsZWN0ZWRJbmRpY2VzIiwidHJpZ2dlckxheWVyUmVSZW5kZXIiLCJsYXllciIsImlzVmFsaWQiLCJsYXllclNldElzVmFsaWQiLCJoaWdobGlnaHRSb3dzIiwiYm94cGxvdFRvb2wiLCJib3hwbG90IiwiY29udGV4dCIsImNvbXBvbmVudCIsIkJveHBsb3RDb21wb25lbnQiLCJidWJibGVDaGFydFRvb2wiLCJidWJibGVDaGFydCIsIkJ1YmJsZUNoYXJ0Q29tcG9uZW50IiwiaGlzdG9ncmFtVG9vbCIsImhpc3RvZ3JhbSIsIkhpc3RvZ3JhbVBsb3RDb21wb25lbnQiLCJwY3BUb29sIiwicGNwIiwiUGFyYWxsZWxDb29yZGluYXRlQ29tcG9uZW50Iiwic2NhdHRlcnBsb3RUb29sIiwic2NhdHRlcnBsb3QiLCJTY2F0dGVycGxvdENvbXBvbmVudCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9haS1hc3Npc3RhbnQvc3JjL3Rvb2xzL2VjaGFydHMtdG9vbHMudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCB7XG4gIGJveHBsb3QsXG4gIEJveHBsb3RUb29sLFxuICBidWJibGVDaGFydCxcbiAgQnViYmxlQ2hhcnRUb29sLFxuICBoaXN0b2dyYW0sXG4gIEhpc3RvZ3JhbVRvb2wsXG4gIHBjcCxcbiAgUENQVG9vbCxcbiAgc2NhdHRlcnBsb3QsXG4gIFNjYXR0ZXJwbG90VG9vbFxufSBmcm9tICdAb3BlbmFzc2lzdGFudC9wbG90cyc7XG5pbXBvcnQge1xuICBCb3hwbG90Q29tcG9uZW50LFxuICBCdWJibGVDaGFydENvbXBvbmVudCxcbiAgSGlzdG9ncmFtUGxvdENvbXBvbmVudCxcbiAgUGFyYWxsZWxDb29yZGluYXRlQ29tcG9uZW50LFxuICBTY2F0dGVycGxvdENvbXBvbmVudFxufSBmcm9tICdAb3BlbmFzc2lzdGFudC9lY2hhcnRzJztcblxuaW1wb3J0IHtsYXllclNldElzVmFsaWR9IGZyb20gJ0BrZXBsZXIuZ2wvYWN0aW9ucyc7XG5pbXBvcnQge0RhdGFzZXRzfSBmcm9tICdAa2VwbGVyLmdsL3RhYmxlJztcbmltcG9ydCB7TGF5ZXJ9IGZyb20gJ0BrZXBsZXIuZ2wvbGF5ZXJzJztcbmltcG9ydCB7RGlzcGF0Y2h9IGZyb20gJ3JlZHV4JztcblxuaW1wb3J0IHtnZXRWYWx1ZXNGcm9tRGF0YXNldCwgaGlnaGxpZ2h0Um93c30gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFY2hhcnRzVG9vbHMoZGF0YXNldHM6IERhdGFzZXRzLCBsYXllcnM6IExheWVyW10sIGRpc3BhdGNoOiBEaXNwYXRjaCkge1xuICAvLyBjb250ZXh0IGZvciB0b29sc1xuICBjb25zdCBnZXRWYWx1ZXMgPSBhc3luYyAoZGF0YXNldE5hbWU6IHN0cmluZywgdmFyaWFibGVOYW1lOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCB2YWx1ZXMgPSBnZXRWYWx1ZXNGcm9tRGF0YXNldChkYXRhc2V0cywgbGF5ZXJzLCBkYXRhc2V0TmFtZSwgdmFyaWFibGVOYW1lKTtcbiAgICByZXR1cm4gdmFsdWVzIGFzIG51bWJlcltdO1xuICB9O1xuXG4gIGNvbnN0IG9uU2VsZWN0ZWQgPSAoZGF0YXNldE5hbWU6IHN0cmluZywgc2VsZWN0ZWRJbmRpY2VzOiBudW1iZXJbXSkgPT4ge1xuICAgIGNvbnN0IHRyaWdnZXJMYXllclJlUmVuZGVyID0gKGxheWVyOiBMYXllciwgaXNWYWxpZDogYm9vbGVhbikgPT4ge1xuICAgICAgZGlzcGF0Y2gobGF5ZXJTZXRJc1ZhbGlkKGxheWVyLCBpc1ZhbGlkKSk7XG4gICAgfTtcbiAgICBoaWdobGlnaHRSb3dzKGRhdGFzZXRzLCBsYXllcnMsIGRhdGFzZXROYW1lLCBzZWxlY3RlZEluZGljZXMsIHRyaWdnZXJMYXllclJlUmVuZGVyKTtcbiAgfTtcblxuICAvLyBDcmVhdGUgdGhlIGJveHBsb3QgdG9vbCB3aXRoIHRoZSBnZXRWYWx1ZXMgaW1wbGVtZW50YXRpb25cbiAgY29uc3QgYm94cGxvdFRvb2w6IEJveHBsb3RUb29sID0ge1xuICAgIC4uLmJveHBsb3QsXG4gICAgY29udGV4dDoge1xuICAgICAgLi4uYm94cGxvdC5jb250ZXh0LFxuICAgICAgZ2V0VmFsdWVzLFxuICAgICAgb25TZWxlY3RlZFxuICAgIH0sXG4gICAgY29tcG9uZW50OiBCb3hwbG90Q29tcG9uZW50XG4gIH07XG5cbiAgLy8gQ3JlYXRlIHRoZSBidWJibGUgY2hhcnQgdG9vbCB3aXRoIHRoZSBnZXRWYWx1ZXMgaW1wbGVtZW50YXRpb25cbiAgY29uc3QgYnViYmxlQ2hhcnRUb29sOiBCdWJibGVDaGFydFRvb2wgPSB7XG4gICAgLi4uYnViYmxlQ2hhcnQsXG4gICAgY29udGV4dDoge1xuICAgICAgLi4uYnViYmxlQ2hhcnQuY29udGV4dCxcbiAgICAgIGdldFZhbHVlcyxcbiAgICAgIG9uU2VsZWN0ZWRcbiAgICB9LFxuICAgIGNvbXBvbmVudDogQnViYmxlQ2hhcnRDb21wb25lbnRcbiAgfTtcblxuICBjb25zdCBoaXN0b2dyYW1Ub29sOiBIaXN0b2dyYW1Ub29sID0ge1xuICAgIC4uLmhpc3RvZ3JhbSxcbiAgICBjb250ZXh0OiB7XG4gICAgICAuLi5oaXN0b2dyYW0uY29udGV4dCxcbiAgICAgIGdldFZhbHVlcyxcbiAgICAgIG9uU2VsZWN0ZWRcbiAgICB9LFxuICAgIGNvbXBvbmVudDogSGlzdG9ncmFtUGxvdENvbXBvbmVudFxuICB9O1xuXG4gIGNvbnN0IHBjcFRvb2w6IFBDUFRvb2wgPSB7XG4gICAgLi4ucGNwLFxuICAgIGNvbnRleHQ6IHtcbiAgICAgIC4uLnBjcC5jb250ZXh0LFxuICAgICAgZ2V0VmFsdWVzLFxuICAgICAgb25TZWxlY3RlZFxuICAgIH0sXG4gICAgY29tcG9uZW50OiBQYXJhbGxlbENvb3JkaW5hdGVDb21wb25lbnRcbiAgfTtcblxuICBjb25zdCBzY2F0dGVycGxvdFRvb2w6IFNjYXR0ZXJwbG90VG9vbCA9IHtcbiAgICAuLi5zY2F0dGVycGxvdCxcbiAgICBjb250ZXh0OiB7XG4gICAgICAuLi5zY2F0dGVycGxvdC5jb250ZXh0LFxuICAgICAgZ2V0VmFsdWVzLFxuICAgICAgb25TZWxlY3RlZFxuICAgIH0sXG4gICAgY29tcG9uZW50OiBTY2F0dGVycGxvdENvbXBvbmVudFxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgYm94cGxvdFRvb2wsXG4gICAgYnViYmxlQ2hhcnRUb29sLFxuICAgIGhpc3RvZ3JhbVRvb2wsXG4gICAgcGNwVG9vbCxcbiAgICBzY2F0dGVycGxvdFRvb2xcbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7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Q3JGLENBQUM7O0VBRUQ7RUFDQSxJQUFNSyxXQUF3QixHQUFBdEMsYUFBQSxDQUFBQSxhQUFBLEtBQ3pCdUMsY0FBTztJQUNWQyxPQUFPLEVBQUF4QyxhQUFBLENBQUFBLGFBQUEsS0FDRnVDLGNBQU8sQ0FBQ0MsT0FBTztNQUNsQjVCLFNBQVMsRUFBVEEsU0FBUztNQUNUbUIsVUFBVSxFQUFWQTtJQUFVLEVBQ1g7SUFDRFUsU0FBUyxFQUFFQztFQUFnQixFQUM1Qjs7RUFFRDtFQUNBLElBQU1DLGVBQWdDLEdBQUEzQyxhQUFBLENBQUFBLGFBQUEsS0FDakM0QyxrQkFBVztJQUNkSixPQUFPLEVBQUF4QyxhQUFBLENBQUFBLGFBQUEsS0FDRjRDLGtCQUFXLENBQUNKLE9BQU87TUFDdEI1QixTQUFTLEVBQVRBLFNBQVM7TUFDVG1CLFVBQVUsRUFBVkE7SUFBVSxFQUNYO0lBQ0RVLFNBQVMsRUFBRUk7RUFBb0IsRUFDaEM7RUFFRCxJQUFNQyxhQUE0QixHQUFBOUMsYUFBQSxDQUFBQSxhQUFBLEtBQzdCK0MsZ0JBQVM7SUFDWlAsT0FBTyxFQUFBeEMsYUFBQSxDQUFBQSxhQUFBLEtBQ0YrQyxnQkFBUyxDQUFDUCxPQUFPO01BQ3BCNUIsU0FBUyxFQUFUQSxTQUFTO01BQ1RtQixVQUFVLEVBQVZBO0lBQVUsRUFDWDtJQUNEVSxTQUFTLEVBQUVPO0VBQXNCLEVBQ2xDO0VBRUQsSUFBTUMsT0FBZ0IsR0FBQWpELGFBQUEsQ0FBQUEsYUFBQSxLQUNqQmtELFVBQUc7SUFDTlYsT0FBTyxFQUFBeEMsYUFBQSxDQUFBQSxhQUFBLEtBQ0ZrRCxVQUFHLENBQUNWLE9BQU87TUFDZDVCLFNBQVMsRUFBVEEsU0FBUztNQUNUbUIsVUFBVSxFQUFWQTtJQUFVLEVBQ1g7SUFDRFUsU0FBUyxFQUFFVTtFQUEyQixFQUN2QztFQUVELElBQU1DLGVBQWdDLEdBQUFwRCxhQUFBLENBQUFBLGFBQUEsS0FDakNxRCxrQkFBVztJQUNkYixPQUFPLEVBQUF4QyxhQUFBLENBQUFBLGFBQUEsS0FDRnFELGtCQUFXLENBQUNiLE9BQU87TUFDdEI1QixTQUFTLEVBQVRBLFNBQVM7TUFDVG1CLFVBQVUsRUFBVkE7SUFBVSxFQUNYO0lBQ0RVLFNBQVMsRUFBRWE7RUFBb0IsRUFDaEM7RUFFRCxPQUFPO0lBQ0xoQixXQUFXLEVBQVhBLFdBQVc7SUFDWEssZUFBZSxFQUFmQSxlQUFlO0lBQ2ZHLGFBQWEsRUFBYkEsYUFBYTtJQUNiRyxPQUFPLEVBQVBBLE9BQU87SUFDUEcsZUFBZSxFQUFmQTtFQUNGLENBQUM7QUFDSCIsImlnbm9yZUxpc3QiOltdfQ==