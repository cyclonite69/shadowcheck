"use strict";

// SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project

var resolve = require('path').resolve;
var join = require('path').join;

// Import package.json to read version
var KeplerPackage = require("../package");
var SRC_DIR = resolve(__dirname, '../src');
var OUTPUT_DIR = resolve(__dirname, '../umd');
var LIBRARY_BUNDLE_CONFIG = function LIBRARY_BUNDLE_CONFIG() {
  return {
    entry: {
      KeplerGl: join(SRC_DIR, 'index.ts')
    },
    // Silence warnings about big bundles
    stats: {
      warnings: false
    },
    output: {
      // Generate the bundle in dist folder
      path: OUTPUT_DIR,
      filename: 'keplergl.min.js',
      globalObject: 'this',
      library: '[name]',
      libraryTarget: 'umd'
    },
    // let's put everything in
    externals: {
      react: {
        root: 'React',
        commonjs2: 'react',
        commonjs: 'react',
        amd: 'react',
        umd: 'react'
      },
      'react-dom': {
        root: 'ReactDOM',
        commonjs2: 'react-dom',
        commonjs: 'react-dom',
        amd: 'react-dom',
        umd: 'react-dom'
      },
      redux: {
        root: 'Redux',
        commonjs2: 'redux',
        commonjs: 'redux',
        amd: 'redux',
        umd: 'redux'
      },
      'react-redux': {
        root: 'ReactRedux',
        commonjs2: 'react-redux',
        commonjs: 'react-redux',
        amd: 'react-redux',
        umd: 'react-redux'
      },
      'styled-components': {
        commonjs: 'styled-components',
        commonjs2: 'styled-components',
        amd: 'styled-components',
        root: 'styled'
      }
    },
    resolve: {
      extensions: ['.tsx', '.ts', '.js'],
      modules: ['node_modules', SRC_DIR]
    },
    module: {
      rules: [{
        test: /\.(js|ts|tsx)$/,
        loader: 'babel-loader',
        include: [SRC_DIR],
        options: {
          plugins: [['search-and-replace', {
            rules: [{
              search: "3.1.8",
              replace: KeplerPackage.version
            }]
          }]]
        }
      }]
    },
    node: {
      fs: 'empty'
    }
  };
};
module.exports = function (env) {
  return LIBRARY_BUNDLE_CONFIG(env);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNvbHZlIiwicmVxdWlyZSIsImpvaW4iLCJLZXBsZXJQYWNrYWdlIiwiU1JDX0RJUiIsIl9fZGlybmFtZSIsIk9VVFBVVF9ESVIiLCJMSUJSQVJZX0JVTkRMRV9DT05GSUciLCJlbnRyeSIsIktlcGxlckdsIiwic3RhdHMiLCJ3YXJuaW5ncyIsIm91dHB1dCIsInBhdGgiLCJmaWxlbmFtZSIsImdsb2JhbE9iamVjdCIsImxpYnJhcnkiLCJsaWJyYXJ5VGFyZ2V0IiwiZXh0ZXJuYWxzIiwicmVhY3QiLCJyb290IiwiY29tbW9uanMyIiwiY29tbW9uanMiLCJhbWQiLCJ1bWQiLCJyZWR1eCIsImV4dGVuc2lvbnMiLCJtb2R1bGVzIiwibW9kdWxlIiwicnVsZXMiLCJ0ZXN0IiwibG9hZGVyIiwiaW5jbHVkZSIsIm9wdGlvbnMiLCJwbHVnaW5zIiwic2VhcmNoIiwicmVwbGFjZSIsInZlcnNpb24iLCJub2RlIiwiZnMiLCJleHBvcnRzIiwiZW52Il0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xvY2FsaXphdGlvbi93ZWJwYWNrL3VtZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5jb25zdCByZXNvbHZlID0gcmVxdWlyZSgncGF0aCcpLnJlc29sdmU7XG5jb25zdCBqb2luID0gcmVxdWlyZSgncGF0aCcpLmpvaW47XG5cbi8vIEltcG9ydCBwYWNrYWdlLmpzb24gdG8gcmVhZCB2ZXJzaW9uXG5jb25zdCBLZXBsZXJQYWNrYWdlID0gcmVxdWlyZSgnLi4vcGFja2FnZScpO1xuXG5jb25zdCBTUkNfRElSID0gcmVzb2x2ZShfX2Rpcm5hbWUsICcuLi9zcmMnKTtcbmNvbnN0IE9VVFBVVF9ESVIgPSByZXNvbHZlKF9fZGlybmFtZSwgJy4uL3VtZCcpO1xuXG5jb25zdCBMSUJSQVJZX0JVTkRMRV9DT05GSUcgPSAoKSA9PiAoe1xuICBlbnRyeToge1xuICAgIEtlcGxlckdsOiBqb2luKFNSQ19ESVIsICdpbmRleC50cycpXG4gIH0sXG5cbiAgLy8gU2lsZW5jZSB3YXJuaW5ncyBhYm91dCBiaWcgYnVuZGxlc1xuICBzdGF0czoge1xuICAgIHdhcm5pbmdzOiBmYWxzZVxuICB9LFxuXG4gIG91dHB1dDoge1xuICAgIC8vIEdlbmVyYXRlIHRoZSBidW5kbGUgaW4gZGlzdCBmb2xkZXJcbiAgICBwYXRoOiBPVVRQVVRfRElSLFxuICAgIGZpbGVuYW1lOiAna2VwbGVyZ2wubWluLmpzJyxcbiAgICBnbG9iYWxPYmplY3Q6ICd0aGlzJyxcbiAgICBsaWJyYXJ5OiAnW25hbWVdJyxcbiAgICBsaWJyYXJ5VGFyZ2V0OiAndW1kJ1xuICB9LFxuXG4gIC8vIGxldCdzIHB1dCBldmVyeXRoaW5nIGluXG4gIGV4dGVybmFsczoge1xuICAgIHJlYWN0OiB7XG4gICAgICByb290OiAnUmVhY3QnLFxuICAgICAgY29tbW9uanMyOiAncmVhY3QnLFxuICAgICAgY29tbW9uanM6ICdyZWFjdCcsXG4gICAgICBhbWQ6ICdyZWFjdCcsXG4gICAgICB1bWQ6ICdyZWFjdCdcbiAgICB9LFxuICAgICdyZWFjdC1kb20nOiB7XG4gICAgICByb290OiAnUmVhY3RET00nLFxuICAgICAgY29tbW9uanMyOiAncmVhY3QtZG9tJyxcbiAgICAgIGNvbW1vbmpzOiAncmVhY3QtZG9tJyxcbiAgICAgIGFtZDogJ3JlYWN0LWRvbScsXG4gICAgICB1bWQ6ICdyZWFjdC1kb20nXG4gICAgfSxcbiAgICByZWR1eDoge1xuICAgICAgcm9vdDogJ1JlZHV4JyxcbiAgICAgIGNvbW1vbmpzMjogJ3JlZHV4JyxcbiAgICAgIGNvbW1vbmpzOiAncmVkdXgnLFxuICAgICAgYW1kOiAncmVkdXgnLFxuICAgICAgdW1kOiAncmVkdXgnXG4gICAgfSxcbiAgICAncmVhY3QtcmVkdXgnOiB7XG4gICAgICByb290OiAnUmVhY3RSZWR1eCcsXG4gICAgICBjb21tb25qczI6ICdyZWFjdC1yZWR1eCcsXG4gICAgICBjb21tb25qczogJ3JlYWN0LXJlZHV4JyxcbiAgICAgIGFtZDogJ3JlYWN0LXJlZHV4JyxcbiAgICAgIHVtZDogJ3JlYWN0LXJlZHV4J1xuICAgIH0sXG4gICAgJ3N0eWxlZC1jb21wb25lbnRzJzoge1xuICAgICAgY29tbW9uanM6ICdzdHlsZWQtY29tcG9uZW50cycsXG4gICAgICBjb21tb25qczI6ICdzdHlsZWQtY29tcG9uZW50cycsXG4gICAgICBhbWQ6ICdzdHlsZWQtY29tcG9uZW50cycsXG4gICAgICByb290OiAnc3R5bGVkJ1xuICAgIH1cbiAgfSxcbiAgcmVzb2x2ZToge1xuICAgIGV4dGVuc2lvbnM6IFsnLnRzeCcsICcudHMnLCAnLmpzJ10sXG4gICAgbW9kdWxlczogWydub2RlX21vZHVsZXMnLCBTUkNfRElSXVxuICB9LFxuICBtb2R1bGU6IHtcbiAgICBydWxlczogW1xuICAgICAge1xuICAgICAgICB0ZXN0OiAvXFwuKGpzfHRzfHRzeCkkLyxcbiAgICAgICAgbG9hZGVyOiAnYmFiZWwtbG9hZGVyJyxcbiAgICAgICAgaW5jbHVkZTogW1NSQ19ESVJdLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgcGx1Z2luczogW1xuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAnc2VhcmNoLWFuZC1yZXBsYWNlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJ1bGVzOiBbXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaDogJ19fUEFDS0FHRV9WRVJTSU9OX18nLFxuICAgICAgICAgICAgICAgICAgICByZXBsYWNlOiBLZXBsZXJQYWNrYWdlLnZlcnNpb25cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBdXG4gIH0sXG5cbiAgbm9kZToge1xuICAgIGZzOiAnZW1wdHknXG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVudiA9PiBMSUJSQVJZX0JVTkRMRV9DT05GSUcoZW52KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBOztBQUVBLElBQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDRCxPQUFPO0FBQ3ZDLElBQU1FLElBQUksR0FBR0QsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDQyxJQUFJOztBQUVqQztBQUNBLElBQU1DLGFBQWEsR0FBR0YsT0FBTyxhQUFhLENBQUM7QUFFM0MsSUFBTUcsT0FBTyxHQUFHSixPQUFPLENBQUNLLFNBQVMsRUFBRSxRQUFRLENBQUM7QUFDNUMsSUFBTUMsVUFBVSxHQUFHTixPQUFPLENBQUNLLFNBQVMsRUFBRSxRQUFRLENBQUM7QUFFL0MsSUFBTUUscUJBQXFCLEdBQUcsU0FBeEJBLHFCQUFxQkEsQ0FBQTtFQUFBLE9BQVU7SUFDbkNDLEtBQUssRUFBRTtNQUNMQyxRQUFRLEVBQUVQLElBQUksQ0FBQ0UsT0FBTyxFQUFFLFVBQVU7SUFDcEMsQ0FBQztJQUVEO0lBQ0FNLEtBQUssRUFBRTtNQUNMQyxRQUFRLEVBQUU7SUFDWixDQUFDO0lBRURDLE1BQU0sRUFBRTtNQUNOO01BQ0FDLElBQUksRUFBRVAsVUFBVTtNQUNoQlEsUUFBUSxFQUFFLGlCQUFpQjtNQUMzQkMsWUFBWSxFQUFFLE1BQU07TUFDcEJDLE9BQU8sRUFBRSxRQUFRO01BQ2pCQyxhQUFhLEVBQUU7SUFDakIsQ0FBQztJQUVEO0lBQ0FDLFNBQVMsRUFBRTtNQUNUQyxLQUFLLEVBQUU7UUFDTEMsSUFBSSxFQUFFLE9BQU87UUFDYkMsU0FBUyxFQUFFLE9BQU87UUFDbEJDLFFBQVEsRUFBRSxPQUFPO1FBQ2pCQyxHQUFHLEVBQUUsT0FBTztRQUNaQyxHQUFHLEVBQUU7TUFDUCxDQUFDO01BQ0QsV0FBVyxFQUFFO1FBQ1hKLElBQUksRUFBRSxVQUFVO1FBQ2hCQyxTQUFTLEVBQUUsV0FBVztRQUN0QkMsUUFBUSxFQUFFLFdBQVc7UUFDckJDLEdBQUcsRUFBRSxXQUFXO1FBQ2hCQyxHQUFHLEVBQUU7TUFDUCxDQUFDO01BQ0RDLEtBQUssRUFBRTtRQUNMTCxJQUFJLEVBQUUsT0FBTztRQUNiQyxTQUFTLEVBQUUsT0FBTztRQUNsQkMsUUFBUSxFQUFFLE9BQU87UUFDakJDLEdBQUcsRUFBRSxPQUFPO1FBQ1pDLEdBQUcsRUFBRTtNQUNQLENBQUM7TUFDRCxhQUFhLEVBQUU7UUFDYkosSUFBSSxFQUFFLFlBQVk7UUFDbEJDLFNBQVMsRUFBRSxhQUFhO1FBQ3hCQyxRQUFRLEVBQUUsYUFBYTtRQUN2QkMsR0FBRyxFQUFFLGFBQWE7UUFDbEJDLEdBQUcsRUFBRTtNQUNQLENBQUM7TUFDRCxtQkFBbUIsRUFBRTtRQUNuQkYsUUFBUSxFQUFFLG1CQUFtQjtRQUM3QkQsU0FBUyxFQUFFLG1CQUFtQjtRQUM5QkUsR0FBRyxFQUFFLG1CQUFtQjtRQUN4QkgsSUFBSSxFQUFFO01BQ1I7SUFDRixDQUFDO0lBQ0RwQixPQUFPLEVBQUU7TUFDUDBCLFVBQVUsRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDO01BQ2xDQyxPQUFPLEVBQUUsQ0FBQyxjQUFjLEVBQUV2QixPQUFPO0lBQ25DLENBQUM7SUFDRHdCLE1BQU0sRUFBRTtNQUNOQyxLQUFLLEVBQUUsQ0FDTDtRQUNFQyxJQUFJLEVBQUUsZ0JBQWdCO1FBQ3RCQyxNQUFNLEVBQUUsY0FBYztRQUN0QkMsT0FBTyxFQUFFLENBQUM1QixPQUFPLENBQUM7UUFDbEI2QixPQUFPLEVBQUU7VUFDUEMsT0FBTyxFQUFFLENBQ1AsQ0FDRSxvQkFBb0IsRUFDcEI7WUFDRUwsS0FBSyxFQUFFLENBQ0w7Y0FDRU0sTUFBTSxFQUFFLE9BQXFCO2NBQzdCQyxPQUFPLEVBQUVqQyxhQUFhLENBQUNrQztZQUN6QixDQUFDO1VBRUwsQ0FBQyxDQUNGO1FBRUw7TUFDRixDQUFDO0lBRUwsQ0FBQztJQUVEQyxJQUFJLEVBQUU7TUFDSkMsRUFBRSxFQUFFO0lBQ047RUFDRixDQUFDO0FBQUEsQ0FBQztBQUVGWCxNQUFNLENBQUNZLE9BQU8sR0FBRyxVQUFBQyxHQUFHO0VBQUEsT0FBSWxDLHFCQUFxQixDQUFDa0MsR0FBRyxDQUFDO0FBQUEiLCJpZ25vcmVMaXN0IjpbXX0=