"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.aiAssistantReducer = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _reduxActions = require("redux-actions");
var _actions = require("../actions");
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      (0, _defineProperty2["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
} // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
// Initial state for the reducer
var initialConfig = {
  isReady: false,
  provider: 'openai',
  model: 'gpt-4o',
  apiKey: '',
  baseUrl: 'http://localhost:11434/api',
  temperature: 0.0,
  topP: 1.0
};
var initialState = {
  config: initialConfig,
  messages: [],
  screenshotToAsk: {
    startScreenCapture: false,
    screenCaptured: ''
  }
};
var aiAssistantReducer = exports.aiAssistantReducer = (0, _reduxActions.handleActions)((0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])((0, _defineProperty2["default"])({}, _actions.UPDATE_AI_ASSISTANT_CONFIG, updateAiAssistantConfigHandler), _actions.UPDATE_AI_ASSISTANT_MESSAGES, updateAiAssistantMessagesHandler), _actions.SET_START_SCREEN_CAPTURE, setStartScreenCaptureHandler), _actions.SET_SCREEN_CAPTURED, setScreenCapturedHandler), _actions.SET_MAP_BOUNDARY, setMapBoundaryHandler), initialState);
function updateAiAssistantConfigHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    config: _objectSpread(_objectSpread({}, state.config), action.payload)
  });
}
function updateAiAssistantMessagesHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    messages: action.payload
  });
}
function setStartScreenCaptureHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    screenshotToAsk: {
      startScreenCapture: action.payload,
      screenCaptured: ''
    }
  });
}
function setScreenCapturedHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    screenshotToAsk: _objectSpread(_objectSpread({}, state.screenshotToAsk), {}, {
      screenCaptured: action.payload
    })
  });
}
function setMapBoundaryHandler(state, action) {
  return _objectSpread(_objectSpread({}, state), {}, {
    keplerGl: _objectSpread(_objectSpread({}, state.keplerGl), {}, {
      mapBoundary: action.payload
    })
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVkdXhBY3Rpb25zIiwicmVxdWlyZSIsIl9hY3Rpb25zIiwib3duS2V5cyIsImUiLCJyIiwidCIsIk9iamVjdCIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJpbml0aWFsQ29uZmlnIiwiaXNSZWFkeSIsInByb3ZpZGVyIiwibW9kZWwiLCJhcGlLZXkiLCJiYXNlVXJsIiwidGVtcGVyYXR1cmUiLCJ0b3BQIiwiaW5pdGlhbFN0YXRlIiwiY29uZmlnIiwibWVzc2FnZXMiLCJzY3JlZW5zaG90VG9Bc2siLCJzdGFydFNjcmVlbkNhcHR1cmUiLCJzY3JlZW5DYXB0dXJlZCIsImFpQXNzaXN0YW50UmVkdWNlciIsImV4cG9ydHMiLCJoYW5kbGVBY3Rpb25zIiwiVVBEQVRFX0FJX0FTU0lTVEFOVF9DT05GSUciLCJ1cGRhdGVBaUFzc2lzdGFudENvbmZpZ0hhbmRsZXIiLCJVUERBVEVfQUlfQVNTSVNUQU5UX01FU1NBR0VTIiwidXBkYXRlQWlBc3Npc3RhbnRNZXNzYWdlc0hhbmRsZXIiLCJTRVRfU1RBUlRfU0NSRUVOX0NBUFRVUkUiLCJzZXRTdGFydFNjcmVlbkNhcHR1cmVIYW5kbGVyIiwiU0VUX1NDUkVFTl9DQVBUVVJFRCIsInNldFNjcmVlbkNhcHR1cmVkSGFuZGxlciIsIlNFVF9NQVBfQk9VTkRBUlkiLCJzZXRNYXBCb3VuZGFyeUhhbmRsZXIiLCJzdGF0ZSIsImFjdGlvbiIsInBheWxvYWQiLCJrZXBsZXJHbCIsIm1hcEJvdW5kYXJ5Il0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL3JlZHVjZXJzL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCB7QWN0aW9uLCBoYW5kbGVBY3Rpb25zfSBmcm9tICdyZWR1eC1hY3Rpb25zJztcbmltcG9ydCB7XG4gIFVQREFURV9BSV9BU1NJU1RBTlRfQ09ORklHLFxuICBVUERBVEVfQUlfQVNTSVNUQU5UX01FU1NBR0VTLFxuICBTRVRfU1RBUlRfU0NSRUVOX0NBUFRVUkUsXG4gIFNFVF9TQ1JFRU5fQ0FQVFVSRUQsXG4gIFNFVF9NQVBfQk9VTkRBUllcbn0gZnJvbSAnLi4vYWN0aW9ucyc7XG5pbXBvcnQge01lc3NhZ2VNb2RlbH0gZnJvbSAnQG9wZW5hc3Npc3RhbnQvY29yZSc7XG5cbmV4cG9ydCB0eXBlIEFpQXNzaXN0YW50Q29uZmlnID0ge1xuICBpc1JlYWR5OiBib29sZWFuO1xuICBwcm92aWRlcjogc3RyaW5nO1xuICBtb2RlbDogc3RyaW5nO1xuICBhcGlLZXk6IHN0cmluZztcbiAgYmFzZVVybD86IHN0cmluZztcbiAgdGVtcGVyYXR1cmU6IG51bWJlcjtcbiAgdG9wUDogbnVtYmVyO1xuICBtYXBib3hUb2tlbj86IHN0cmluZztcbn07XG5cbi8vIEluaXRpYWwgc3RhdGUgZm9yIHRoZSByZWR1Y2VyXG5jb25zdCBpbml0aWFsQ29uZmlnOiBBaUFzc2lzdGFudENvbmZpZyA9IHtcbiAgaXNSZWFkeTogZmFsc2UsXG4gIHByb3ZpZGVyOiAnb3BlbmFpJyxcbiAgbW9kZWw6ICdncHQtNG8nLFxuICBhcGlLZXk6ICcnLFxuICBiYXNlVXJsOiAnaHR0cDovL2xvY2FsaG9zdDoxMTQzNC9hcGknLFxuICB0ZW1wZXJhdHVyZTogMC4wLFxuICB0b3BQOiAxLjBcbn07XG5cbmV4cG9ydCB0eXBlIEFpQXNzaXN0YW50U3RhdGUgPSB7XG4gIGNvbmZpZzogQWlBc3Npc3RhbnRDb25maWc7XG4gIG1lc3NhZ2VzOiBNZXNzYWdlTW9kZWxbXTtcbiAgc2NyZWVuc2hvdFRvQXNrOiB7XG4gICAgc3RhcnRTY3JlZW5DYXB0dXJlOiBib29sZWFuO1xuICAgIHNjcmVlbkNhcHR1cmVkOiBzdHJpbmc7XG4gIH07XG4gIGtlcGxlckdsPzoge1xuICAgIG1hcEJvdW5kYXJ5Pzoge1xuICAgICAgbnc6IFtudW1iZXIsIG51bWJlcl07XG4gICAgICBzZTogW251bWJlciwgbnVtYmVyXTtcbiAgICB9O1xuICB9O1xufTtcblxuY29uc3QgaW5pdGlhbFN0YXRlOiBBaUFzc2lzdGFudFN0YXRlID0ge1xuICBjb25maWc6IGluaXRpYWxDb25maWcsXG4gIG1lc3NhZ2VzOiBbXSxcbiAgc2NyZWVuc2hvdFRvQXNrOiB7XG4gICAgc3RhcnRTY3JlZW5DYXB0dXJlOiBmYWxzZSxcbiAgICBzY3JlZW5DYXB0dXJlZDogJydcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGFpQXNzaXN0YW50UmVkdWNlciA9IGhhbmRsZUFjdGlvbnM8QWlBc3Npc3RhbnRTdGF0ZSwgYW55PihcbiAge1xuICAgIFtVUERBVEVfQUlfQVNTSVNUQU5UX0NPTkZJR106IHVwZGF0ZUFpQXNzaXN0YW50Q29uZmlnSGFuZGxlcixcbiAgICBbVVBEQVRFX0FJX0FTU0lTVEFOVF9NRVNTQUdFU106IHVwZGF0ZUFpQXNzaXN0YW50TWVzc2FnZXNIYW5kbGVyLFxuICAgIFtTRVRfU1RBUlRfU0NSRUVOX0NBUFRVUkVdOiBzZXRTdGFydFNjcmVlbkNhcHR1cmVIYW5kbGVyLFxuICAgIFtTRVRfU0NSRUVOX0NBUFRVUkVEXTogc2V0U2NyZWVuQ2FwdHVyZWRIYW5kbGVyLFxuICAgIFtTRVRfTUFQX0JPVU5EQVJZXTogc2V0TWFwQm91bmRhcnlIYW5kbGVyXG4gIH0sXG4gIGluaXRpYWxTdGF0ZVxuKTtcblxuZnVuY3Rpb24gdXBkYXRlQWlBc3Npc3RhbnRDb25maWdIYW5kbGVyKFxuICBzdGF0ZTogQWlBc3Npc3RhbnRTdGF0ZSxcbiAgYWN0aW9uOiBBY3Rpb248QWlBc3Npc3RhbnRDb25maWc+XG4pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zdGF0ZSxcbiAgICBjb25maWc6IHsuLi5zdGF0ZS5jb25maWcsIC4uLmFjdGlvbi5wYXlsb2FkfVxuICB9O1xufVxuXG5mdW5jdGlvbiB1cGRhdGVBaUFzc2lzdGFudE1lc3NhZ2VzSGFuZGxlcihzdGF0ZTogQWlBc3Npc3RhbnRTdGF0ZSwgYWN0aW9uOiBBY3Rpb248TWVzc2FnZU1vZGVsW10+KSB7XG4gIHJldHVybiB7XG4gICAgLi4uc3RhdGUsXG4gICAgbWVzc2FnZXM6IGFjdGlvbi5wYXlsb2FkXG4gIH07XG59XG5cbmZ1bmN0aW9uIHNldFN0YXJ0U2NyZWVuQ2FwdHVyZUhhbmRsZXIoc3RhdGU6IEFpQXNzaXN0YW50U3RhdGUsIGFjdGlvbjogQWN0aW9uPGJvb2xlYW4+KSB7XG4gIHJldHVybiB7XG4gICAgLi4uc3RhdGUsXG4gICAgc2NyZWVuc2hvdFRvQXNrOiB7c3RhcnRTY3JlZW5DYXB0dXJlOiBhY3Rpb24ucGF5bG9hZCwgc2NyZWVuQ2FwdHVyZWQ6ICcnfVxuICB9O1xufVxuXG5mdW5jdGlvbiBzZXRTY3JlZW5DYXB0dXJlZEhhbmRsZXIoc3RhdGU6IEFpQXNzaXN0YW50U3RhdGUsIGFjdGlvbjogQWN0aW9uPHN0cmluZz4pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zdGF0ZSxcbiAgICBzY3JlZW5zaG90VG9Bc2s6IHsuLi5zdGF0ZS5zY3JlZW5zaG90VG9Bc2ssIHNjcmVlbkNhcHR1cmVkOiBhY3Rpb24ucGF5bG9hZH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc2V0TWFwQm91bmRhcnlIYW5kbGVyKFxuICBzdGF0ZTogQWlBc3Npc3RhbnRTdGF0ZSxcbiAgYWN0aW9uOiBBY3Rpb248e253OiBbbnVtYmVyLCBudW1iZXJdOyBzZTogW251bWJlciwgbnVtYmVyXX0+XG4pIHtcbiAgcmV0dXJuIHtcbiAgICAuLi5zdGF0ZSxcbiAgICBrZXBsZXJHbDoge1xuICAgICAgLi4uc3RhdGUua2VwbGVy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