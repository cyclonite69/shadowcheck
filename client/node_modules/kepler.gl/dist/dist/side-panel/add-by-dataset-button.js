"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _styledComponents = _interopRequireDefault(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/styled-components"));
var _localization = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/localization/src");
var _react2 = _interopRequireDefault(require("@tippyjs/react"));
var _icons = require("../common/icons");
var _styledComponents2 = require("../common/styled-components");
var _typeahead = _interopRequireDefault(require("../common/item-selector/typeahead"));
var _accessor = _interopRequireDefault(require("../common/item-selector/accessor"));
var _reactIntl = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react-intl");
var _context = require("../context");
var _templateObject, _templateObject2, _templateObject3; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
var DropdownContainer = _styledComponents["default"].div.attrs({
  className: 'add-layer-menu-dropdown'
})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  .list-selector {\n    border-top: 1px solid ", ";\n    width: 100%;\n    /* disable scrolling, currently set to 280px internally */\n    max-height: unset;\n  }\n  .list__item > div {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    line-height: 18px;\n    padding: 0;\n    svg {\n      margin-right: 10px;\n    }\n  }\n"])), function (props) {
  return props.theme.secondaryInputBorderColor;
});
var DropdownMenu = _styledComponents["default"].div.attrs({
  className: 'dropdown-menu'
})(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  flex-direction: column;\n  min-width: 240px;\n  max-width: 240px;\n  position: absolute;\n  top: 100%;\n  left: -53px;\n  z-index: 5;\n"])));
var ListItemWrapper = _styledComponents["default"].div.attrs({
  className: 'dropdown-menu-list-item-wrapper'
})(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  color: ", ";\n  font-size: 11px;\n  letter-spacing: 0.2px;\n  overflow: auto;\n  .dataset-color {\n    flex-shrink: 0;\n    margin-top: 3px;\n  }\n  .dataset-name {\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n"])), function (props) {
  return props.theme.textColor;
});
var TYPEAHEAD_CLASS = 'typeahead';
var TYPEAHEAD_INPUT_CLASS = 'typeahead__input';
var ListItem = function ListItem(_ref) {
  var value = _ref.value;
  return /*#__PURE__*/_react["default"].createElement(ListItemWrapper, null, /*#__PURE__*/_react["default"].createElement(_styledComponents2.DatasetSquare, {
    className: "dataset-color",
    backgroundColor: value.color
  }), /*#__PURE__*/_react["default"].createElement("div", {
    className: "dataset-name",
    title: value.label
  }, value.label));
};
var AddByDatasetButton = function AddByDatasetButton(_ref2) {
  var datasets = _ref2.datasets,
    onAdd = _ref2.onAdd,
    buttonIntlId = _ref2.buttonIntlId,
    className = _ref2.className,
    inactive = _ref2.inactive;
  var _useState = (0, _react.useState)(),
    _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
    tippyInstance = _useState2[0],
    setTippyInstance = _useState2[1];
  var options = (0, _react.useMemo)(function () {
    return Object.values(datasets).map(function (ds) {
      return {
        label: ds.label,
        value: ds.id,
        color: ds.color
      };
    });
  }, [datasets]);
  var onClickBtn = (0, _react.useCallback)(function () {
    if (options.length === 1) {
      onAdd(options[0].value);
    }
    return;
  }, [options, onAdd]);
  var onOptionSelected = (0, _react.useCallback)(function (option) {
    if (!option) {
      return;
    }
    onAdd(option.value);
    if (tippyInstance) {
      // @ts-ignore
      tippyInstance.hide();
    }
  }, [onAdd, tippyInstance]);
  var intl = (0, _reactIntl.useIntl)();
  var buttonRendered = /*#__PURE__*/_react["default"].createElement(_styledComponents2.Button, {
    tabIndex: -1,
    className: className || 'add-by-dataset-button',
    onClick: onClickBtn,
    disabled: !options.length || inactive
  }, /*#__PURE__*/_react["default"].createElement(_icons.Add, {
    height: "12px"
  }), /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
    id: buttonIntlId
  }));
  return options.length === 1 ? buttonRendered : /*#__PURE__*/_react["default"].createElement(_context.RootContext.Consumer, null, function (context) {
    return /*#__PURE__*/_react["default"].createElement(_react2["default"], {
      trigger: "click",
      arrow: false,
      interactive: true,
      placement: "bottom",
      appendTo: (context === null || context === void 0 ? void 0 : context.current) || 'parent'
      // @ts-ignore
      ,

      onCreate: setTippyInstance,
      duration: 0,
      content: /*#__PURE__*/_react["default"].createElement(DropdownMenu, null, /*#__PURE__*/_react["default"].createElement(DropdownContainer, null, /*#__PURE__*/_react["default"].createElement(_typeahead["default"], {
        className: TYPEAHEAD_CLASS,
        customClasses: {
          results: 'list-selector',
          input: TYPEAHEAD_INPUT_CLASS,
          listItem: 'list__item'
        },
        placeholder: intl ? intl.formatMessage({
          id: 'placeholder.search'
        }) : 'Search',
        selectedItems: null,
        options: options,
        displayOption: _accessor["default"].generateOptionToStringFor('label'),
        filterOption: 'label',
        searchable: true,
        onOptionSelected: onOptionSelected,
        customListItemComponent: ListItem
      })))
    }, buttonRendered);
  });
};
var _default = exports["default"] = AddByDatasetButton;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfbG9jYWxpemF0aW9uIiwiX3JlYWN0MiIsIl9pY29ucyIsIl9zdHlsZWRDb21wb25lbnRzMiIsIl90eXBlYWhlYWQiLCJfYWNjZXNzb3IiLCJfcmVhY3RJbnRsIiwiX2NvbnRleHQiLCJfdGVtcGxhdGVPYmplY3QiLCJfdGVtcGxhdGVPYmplY3QyIiwiX3RlbXBsYXRlT2JqZWN0MyIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiX3R5cGVvZiIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIkRyb3Bkb3duQ29udGFpbmVyIiwiZGl2IiwiYXR0cnMiLCJjbGFzc05hbWUiLCJfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsMiIsInByb3BzIiwidGhlbWUiLCJzZWNvbmRhcnlJbnB1dEJvcmRlckNvbG9yIiwiRHJvcGRvd25NZW51IiwiTGlzdEl0ZW1XcmFwcGVyIiwidGV4dENvbG9yIiwiVFlQRUFIRUFEX0NMQVNTIiwiVFlQRUFIRUFEX0lOUFVUX0NMQVNTIiwiTGlzdEl0ZW0iLCJfcmVmIiwidmFsdWUiLCJjcmVhdGVFbGVtZW50IiwiRGF0YXNldFNxdWFyZSIsImJhY2tncm91bmRDb2xvciIsImNvbG9yIiwidGl0bGUiLCJsYWJlbCIsIkFkZEJ5RGF0YXNldEJ1dHRvbiIsIl9yZWYyIiwiZGF0YXNldHMiLCJvbkFkZCIsImJ1dHRvbkludGxJZCIsImluYWN0aXZlIiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwidGlwcHlJbnN0YW5jZSIsInNldFRpcHB5SW5zdGFuY2UiLCJvcHRpb25zIiwidXNlTWVtbyIsInZhbHVlcyIsIm1hcCIsImRzIiwiaWQiLCJvbkNsaWNrQnRuIiwidXNlQ2FsbGJhY2siLCJsZW5ndGgiLCJvbk9wdGlvblNlbGVjdGVkIiwib3B0aW9uIiwiaGlkZSIsImludGwiLCJ1c2VJbnRsIiwiYnV0dG9uUmVuZGVyZWQiLCJCdXR0b24iLCJ0YWJJbmRleCIsIm9uQ2xpY2siLCJkaXNhYmxlZCIsIkFkZCIsImhlaWdodCIsIkZvcm1hdHRlZE1lc3NhZ2UiLCJSb290Q29udGV4dCIsIkNvbnN1bWVyIiwiY29udGV4dCIsInRyaWdnZXIiLCJhcnJvdyIsImludGVyYWN0aXZlIiwicGxhY2VtZW50IiwiYXBwZW5kVG8iLCJjdXJyZW50Iiwib25DcmVhdGUiLCJkdXJhdGlvbiIsImNvbnRlbnQiLCJjdXN0b21DbGFzc2VzIiwicmVzdWx0cyIsImlucHV0IiwibGlzdEl0ZW0iLCJwbGFjZWhvbGRlciIsImZvcm1hdE1lc3NhZ2UiLCJzZWxlY3RlZEl0ZW1zIiwiZGlzcGxheU9wdGlvbiIsImdlbmVyYXRlT3B0aW9uVG9TdHJpbmdGb3IiLCJmaWx0ZXJPcHRpb24iLCJzZWFyY2hhYmxlIiwiY3VzdG9tTGlzdEl0ZW1Db21wb25lbnQiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvc2lkZS1wYW5lbC9hZGQtYnktZGF0YXNldC1idXR0b24udHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VNZW1vLCB1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ0BrZXBsZXIuZ2wvbG9jYWxpemF0aW9uJztcbmltcG9ydCB7RGF0YXNldHMsIEtlcGxlclRhYmxlfSBmcm9tICdAa2VwbGVyLmdsL3RhYmxlJztcblxuaW1wb3J0IFRpcHB5IGZyb20gJ0B0aXBweWpzL3JlYWN0JztcbmltcG9ydCB7QWRkfSBmcm9tICcuLi9jb21tb24vaWNvbnMnO1xuaW1wb3J0IHtCdXR0b24sIERhdGFzZXRTcXVhcmV9IGZyb20gJy4uL2NvbW1vbi9zdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgVHlwZWFoZWFkIGZyb20gJy4uL2NvbW1vbi9pdGVtLXNlbGVjdG9yL3R5cGVhaGVhZCc7XG5pbXBvcnQgQWNjZXNzb3IgZnJvbSAnLi4vY29tbW9uL2l0ZW0tc2VsZWN0b3IvYWNjZXNzb3InO1xuaW1wb3J0IHt1c2VJbnRsfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7Um9vdENvbnRleHR9IGZyb20gJy4uL2NvbnRleHQnO1xuXG5jb25zdCBEcm9wZG93bkNvbnRhaW5lciA9IHN0eWxlZC5kaXYuYXR0cnMoe1xuICBjbGFzc05hbWU6ICdhZGQtbGF5ZXItbWVudS1kcm9wZG93bidcbn0pYFxuICAubGlzdC1zZWxlY3RvciB7XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuc2Vjb25kYXJ5SW5wdXRCb3JkZXJDb2xvcn07XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgLyogZGlzYWJsZSBzY3JvbGxpbmcsIGN1cnJlbnRseSBzZXQgdG8gMjgwcHggaW50ZXJuYWxseSAqL1xuICAgIG1heC1oZWlnaHQ6IHVuc2V0O1xuICB9XG4gIC5saXN0X19pdGVtID4gZGl2IHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICAgIGxpbmUtaGVpZ2h0OiAxOHB4O1xuICAgIHBhZGRpbmc6IDA7XG4gICAgc3ZnIHtcbiAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcbiAgICB9XG4gIH1cbmA7XG5cbmNvbnN0IERyb3Bkb3duTWVudSA9IHN0eWxlZC5kaXYuYXR0cnMoe1xuICBjbGFzc05hbWU6ICdkcm9wZG93bi1tZW51J1xufSlgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIG1pbi13aWR0aDogMjQwcHg7XG4gIG1heC13aWR0aDogMjQwcHg7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgdG9wOiAxMDAlO1xuICBsZWZ0OiAtNTNweDtcbiAgei1pbmRleDogNTtcbmA7XG5cbmNvbnN0IExpc3RJdGVtV3JhcHBlciA9IHN0eWxlZC5kaXYuYXR0cnMoe1xuICBjbGFzc05hbWU6ICdkcm9wZG93bi1tZW51LWxpc3QtaXRlbS13cmFwcGVyJ1xufSlgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLnRleHRDb2xvcn07XG4gIGZvbnQtc2l6ZTogMTFweDtcbiAgbGV0dGVyLXNwYWNpbmc6IDAuMnB4O1xuICBvdmVyZmxvdzogYXV0bztcbiAgLmRhdGFzZXQtY29sb3Ige1xuICAgIGZsZXgtc2hyaW5rOiAwO1xuICAgIG1hcmdpbi10b3A6IDNweDtcbiAgfVxuICAuZGF0YXNldC1uYW1lIHtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIH1cbmA7XG5cbmNvbnN0IFRZUEVBSEVBRF9DTEFTUyA9ICd0eXBlYWhlYWQnO1xuY29uc3QgVFlQRUFIRUFEX0lOUFVUX0NMQVNTID0gJ3R5cGVhaGVhZF9faW5wdXQnO1xuXG5leHBvcnQgdHlwZSBBZGRCeURhdGFzZXRCdXR0b25Qcm9wcyA9IHtcbiAgZGF0YXNldHM6IERhdGFzZXRzO1xuICBvbkFkZDogKGRhdGFJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBidXR0b25JbnRsSWQ6IHN0cmluZztcbiAgaW5hY3RpdmU/OiBib29sZWFuO1xuICBjbGFzc05hbWU/OiBzdHJpbmc7XG59O1xuXG5jb25zdCBMaXN0SXRlbSA9ICh7dmFsdWV9KSA9PiAoXG4gIDxMaXN0SXRlbVdyYXBwZXI+XG4gICAgPERhdGFzZXRTcXVhcmUgY2xhc3NOYW1lPVwiZGF0YXNldC1jb2xvclwiIGJhY2tncm91bmRDb2xvcj17dmFsdWUuY29sb3J9IC8+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJkYXRhc2V0LW5hbWVcIiB0aXRsZT17dmFsdWUubGFiZWx9PlxuICAgICAge3ZhbHVlLmxhYmVsfVxuICAgIDwvZGl2PlxuICA8L0xpc3RJdGVtV3JhcHBlcj5cbik7XG5cbmNvbnN0IEFkZEJ5RGF0YXNldEJ1dHRvbjogUmVhY3QuRkM8QWRkQnlEYXRhc2V0QnV0dG9uUHJvcHM+ID0gKHtcbiAgZGF0YXNldHMsXG4gIG9uQWRkLFxuICBidXR0b25JbnRsSWQsXG4gIGNsYXNzTmFtZSxcbiAgaW5hY3RpdmVcbn0pID0+IHtcbiAgY29uc3QgW3RpcHB5SW5zdGFuY2UsIHNldFRpcHB5SW5zdGFuY2VdID0gdXNlU3RhdGUoKTtcblxuICBjb25zdCBvcHRpb25zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoZGF0YXNldHMpLm1hcCgoZHM6IEtlcGxlclRhYmxlKSA9PiAoe1xuICAgICAgbGFiZWw6IGRzLmxhYmVsLFxuICAgICAgdmFsdWU6IGRzLmlkLFxuICAgICAgY29sb3I6IGRzLmNvbG9yXG4gICAgfSkpO1xuICB9LCBbZGF0YXNldHNdKTtcblxuICBjb25zdCBvbkNsaWNrQnRuID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChvcHRpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgb25BZGQob3B0aW9uc1swXS52YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuO1xuICB9LCBbb3B0aW9ucywgb25BZGRdKTtcblxuICBjb25zdCBvbk9wdGlvblNlbGVjdGVkID0gdXNlQ2FsbGJhY2soXG4gICAgb3B0aW9uID0+IHtcbiAgICAgIGlmICghb3B0aW9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG9uQWRkKG9wdGlvbi52YWx1ZSk7XG4gICAgICBpZiAodGlwcHlJbnN0YW5jZSkge1xuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHRpcHB5SW5zdGFuY2UuaGlkZSgpO1xuICAgICAgfVxuICAgIH0sXG4gICAgW29uQWRkLCB0aXBweUluc3RhbmNlXVxuICApO1xuXG4gIGNvbnN0IGludGwgPSB1c2VJbnRsKCk7XG5cbiAgY29uc3QgYnV0dG9uUmVuZGVyZWQgPSAoXG4gICAgPEJ1dHRvblxuICAgICAgdGFiSW5kZXg9ey0xfVxuICAgICAgY2xhc3NOYW1lPXtjbGFzc05hbWUgfHwgJ2FkZC1ieS1kYXRhc2V0LWJ1dHRvbid9XG4gICAgICBvbkNsaWNrPXtvbkNsaWNrQnRufVxuICAgICAgZGlzYWJsZWQ9eyFvcHRpb25zLmxlbmd0aCB8fCBpbmFjdGl2ZX1cbiAgICA+XG4gICAgICA8QWRkIGhlaWdodD1cIjEycHhcIiAvPlxuICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9e2J1dHRvbkludGxJZH0gLz5cbiAgICA8L0J1dHRvbj5cbiAgKTtcblxuICByZXR1cm4gb3B0aW9ucy5sZW5ndGggPT09IDEgPyAoXG4gICAgYnV0dG9uUmVuZGVyZWRcbiAgKSA6IChcbiAgICA8Um9vdENvbnRleHQuQ29uc3VtZXI+XG4gICAgICB7Y29udGV4dCA9PiAoXG4gICAgICAgIDxUaXBweVxuICAgICAgICAgIHRyaWdnZXI9XCJjbGlja1wiXG4gICAgICAgICAgYXJyb3c9e2ZhbHNlfVxuICAgICAgICAgIGludGVyYWN0aXZlXG4gICAgICAgICAgcGxhY2VtZW50PVwiYm90dG9tXCJcbiAgICAgICAgICBhcHBlbmRUbz17Y29udGV4dD8uY3VycmVudCB8fCAncGFyZW50J31cbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgb25DcmVhdGU9e3NldFRpcHB5SW5zdGFuY2V9XG4gICAgICAgICAgZHVyYXRpb249ezB9XG4gICAgICAgICAgY29udGVudD17XG4gICAgICAgICAgICA8RHJvcGRvd25NZW51PlxuICAgICAgICAgICAgICA8RHJvcGRvd25Db250YWluZXI+XG4gICAgICAgICAgICAgICAgPFR5cGVhaGVhZFxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtUWVBFQUhFQURfQ0xBU1N9XG4gICAgICAgICAgICAgICAgICBjdXN0b21DbGFzc2VzPXt7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHM6ICdsaXN0LXNlbGVjdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IFRZUEVBSEVBRF9JTlBVVF9DTEFTUyxcbiAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW06ICdsaXN0X19pdGVtJ1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtpbnRsID8gaW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ3BsYWNlaG9sZGVyLnNlYXJjaCd9KSA6ICdTZWFyY2gnfVxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtcz17bnVsbH1cbiAgICAgICAgICAgICAgICAgIG9wdGlvbnM9e29wdGlvbnN9XG4gICAgICAgICAgICAgICAgICBkaXNwbGF5T3B0aW9uPXtBY2Nlc3Nvci5nZW5lcmF0ZU9wdGlvblRvU3RyaW5nRm9yKCdsYWJlbCcpfVxuICAgICAgICAgICAgICAgICAgZmlsdGVyT3B0aW9uPXsnbGFiZWwnfVxuICAgICAgICAgICAgICAgICAgc2VhcmNoYWJsZVxuICAgICAgICAgICAgICAgICAgb25PcHRpb25TZWxlY3RlZD17b25PcHRpb25TZWxlY3RlZH1cbiAgICAgICAgICAgICAgICAgIGN1c3RvbUxpc3RJdGVtQ29tcG9uZW50PXtMaXN0SXRlbX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L0Ryb3Bkb3duQ29udGFpbmVyPlxuICAgICAgICAgICAgPC9Ecm9wZG93bk1lbnU+XG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAge2J1dHRvblJlbmRlcmVkfVxuICAgICAgICA8L1RpcHB5PlxuICAgICAgKX1cbiAgICA8L1Jvb3RDb250ZXh0LkNvbnN1bWVyPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQWRkQnlEYXRhc2V0QnV0dG9uO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBR0EsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsaUJBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLGFBQUEsR0FBQUgsT0FBQTtBQUdBLElBQUFJLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFLLE1BQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLGtCQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxVQUFBLEdBQUFMLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBUSxTQUFBLEdBQUFOLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBUyxVQUFBLEdBQUFULE9BQUE7QUFDQSxJQUFBVSxRQUFBLEdBQUFWLE9BQUE7QUFBdUMsSUFBQVcsZUFBQSxFQUFBQyxnQkFBQSxFQUFBQyxnQkFBQSxFQWR2QztBQUNBO0FBQUEsU0FBQUMseUJBQUFDLENBQUE7RUFBQSx5QkFBQUMsT0FBQTtFQUFBLElBQUFDLENBQUEsT0FBQUQsT0FBQTtJQUFBRSxDQUFBLE9BQUFGLE9BQUE7RUFBQSxRQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsQ0FBQTtJQUFBLE9BQUFBLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBO0VBQUEsR0FBQUYsQ0FBQTtBQUFBO0FBQUEsU0FBQWhCLHdCQUFBZ0IsQ0FBQSxFQUFBRSxDQUFBO0VBQUEsS0FBQUEsQ0FBQSxJQUFBRixDQUFBLElBQUFBLENBQUEsQ0FBQUksVUFBQSxTQUFBSixDQUFBO0VBQUEsYUFBQUEsQ0FBQSxnQkFBQUssT0FBQSxDQUFBTCxDQUFBLDBCQUFBQSxDQUFBO0lBQUEs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