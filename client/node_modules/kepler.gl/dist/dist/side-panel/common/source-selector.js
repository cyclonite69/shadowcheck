"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _styledComponents = _interopRequireDefault(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/styled-components"));
var _sourceDataSelectorContent = _interopRequireDefault(require("./source-data-selector-content"));
var _fieldSelector = _interopRequireDefault(require("../../common/field-selector"));
var _templateObject, _templateObject2, _templateObject3; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
var StyledSourceContainer = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  background-color: #1c2233;\n"])));
SourceSelectorFactory.deps = [_sourceDataSelectorContent["default"], _fieldSelector["default"]];
function SourceSelectorFactory(SourceDataSelectorContent, FieldSelector) {
  var StyledSourceDataSelectorContent = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n    margin-bottom: 2px;\n\n    .item-selector__dropdown {\n      border-top-left-radius: 2px;\n      border-top-right-radius: 2px;\n      border-bottom-left-radius: 0;\n      border-bottom-right-radius: 0;\n    }\n  "])));
  var StyledFieldSelector = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n    .item-selector__dropdown {\n      border-top-left-radius: 0;\n      border-top-right-radius: 0;\n      border-bottom-left-radius: 2px;\n      border-bottom-right-radius: 2px;\n    }\n  "])));
  var SourceSelector = function SourceSelector(_ref) {
    var className = _ref.className,
      datasets = _ref.datasets,
      dataId = _ref.dataId,
      disabled = _ref.disabled,
      onSelectDataset = _ref.onSelectDataset,
      fields = _ref.fields,
      fieldValue = _ref.fieldValue,
      onFieldSelector = _ref.onFieldSelector,
      inputTheme = _ref.inputTheme;
    var datasetFields = (0, _react.useMemo)(function () {
      var _datasets$dataId;
      return fields || ((_datasets$dataId = datasets[dataId]) === null || _datasets$dataId === void 0 ? void 0 : _datasets$dataId.fields);
    }, [dataId, datasets, fields]);
    return /*#__PURE__*/_react["default"].createElement(StyledSourceContainer, {
      className: className
    }, /*#__PURE__*/_react["default"].createElement(StyledSourceDataSelectorContent, null, /*#__PURE__*/_react["default"].createElement(SourceDataSelectorContent, {
      inputTheme: inputTheme,
      datasets: datasets,
      disabled: disabled,
      dataId: dataId,
      onSelect: onSelectDataset
    })), dataId && /*#__PURE__*/_react["default"].createElement(StyledFieldSelector, null, /*#__PURE__*/_react["default"].createElement(FieldSelector, {
      inputTheme: inputTheme,
      fields: datasetFields,
      value: fieldValue,
      erasable: false,
      onSelect: onFieldSelector
    })));
  };
  SourceSelector.displayName = 'SourceSelector';
  return SourceSelector;
}
var _default = exports["default"] = SourceSelectorFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfc291cmNlRGF0YVNlbGVjdG9yQ29udGVudCIsIl9maWVsZFNlbGVjdG9yIiwiX3RlbXBsYXRlT2JqZWN0IiwiX3RlbXBsYXRlT2JqZWN0MiIsIl90ZW1wbGF0ZU9iamVjdDMiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJTdHlsZWRTb3VyY2VDb250YWluZXIiLCJkaXYiLCJfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsMiIsIlNvdXJjZVNlbGVjdG9yRmFjdG9yeSIsImRlcHMiLCJTb3VyY2VEYXRhU2VsZWN0b3JDb250ZW50IiwiRmllbGRTZWxlY3RvciIsIlN0eWxlZFNvdXJjZURhdGFTZWxlY3RvckNvbnRlbnQiLCJTdHlsZWRGaWVsZFNlbGVjdG9yIiwiU291cmNlU2VsZWN0b3IiLCJfcmVmIiwiY2xhc3NOYW1lIiwiZGF0YXNldHMiLCJkYXRhSWQiLCJkaXNhYmxlZCIsIm9uU2VsZWN0RGF0YXNldCIsImZpZWxkcyIsImZpZWxkVmFsdWUiLCJvbkZpZWxkU2VsZWN0b3IiLCJpbnB1dFRoZW1lIiwiZGF0YXNldEZpZWxkcyIsInVzZU1lbW8iLCJfZGF0YXNldHMkZGF0YUlkIiwiY3JlYXRlRWxlbWVudCIsIm9uU2VsZWN0IiwidmFsdWUiLCJlcmFzYWJsZSIsImRpc3BsYXlOYW1lIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NpZGUtcGFuZWwvY29tbW9uL3NvdXJjZS1zZWxlY3Rvci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IFJlYWN0LCB7dXNlTWVtb30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5cbmltcG9ydCBTb3VyY2VEYXRhU2VsZWN0b3JDb250ZW50RmFjdG9yeSBmcm9tICcuL3NvdXJjZS1kYXRhLXNlbGVjdG9yLWNvbnRlbnQnO1xuaW1wb3J0IEZpZWxkU2VsZWN0b3JGYWN0b3J5IGZyb20gJy4uLy4uL2NvbW1vbi9maWVsZC1zZWxlY3Rvcic7XG5cbmNvbnN0IFN0eWxlZFNvdXJjZUNvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGJhY2tncm91bmQtY29sb3I6ICMxYzIyMzM7XG5gO1xuXG5Tb3VyY2VTZWxlY3RvckZhY3RvcnkuZGVwcyA9IFtTb3VyY2VEYXRhU2VsZWN0b3JDb250ZW50RmFjdG9yeSwgRmllbGRTZWxlY3RvckZhY3RvcnldO1xuXG5mdW5jdGlvbiBTb3VyY2VTZWxlY3RvckZhY3RvcnkoU291cmNlRGF0YVNlbGVjdG9yQ29udGVudCwgRmllbGRTZWxlY3Rvcikge1xuICBjb25zdCBTdHlsZWRTb3VyY2VEYXRhU2VsZWN0b3JDb250ZW50ID0gc3R5bGVkLmRpdmBcbiAgICBtYXJnaW4tYm90dG9tOiAycHg7XG5cbiAgICAuaXRlbS1zZWxlY3Rvcl9fZHJvcGRvd24ge1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMnB4O1xuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDJweDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDA7XG4gICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMDtcbiAgICB9XG4gIGA7XG5cbiAgY29uc3QgU3R5bGVkRmllbGRTZWxlY3RvciA9IHN0eWxlZC5kaXZgXG4gICAgLml0ZW0tc2VsZWN0b3JfX2Ryb3Bkb3duIHtcbiAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDA7XG4gICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IDJweDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAycHg7XG4gICAgfVxuICBgO1xuXG4gIGNvbnN0IFNvdXJjZVNlbGVjdG9yID0gKHtcbiAgICBjbGFzc05hbWUsXG4gICAgZGF0YXNldHMsXG4gICAgZGF0YUlkLFxuICAgIGRpc2FibGVkLFxuICAgIG9uU2VsZWN0RGF0YXNldCxcbiAgICBmaWVsZHMsXG4gICAgZmllbGRWYWx1ZSxcbiAgICBvbkZpZWxkU2VsZWN0b3IsXG4gICAgaW5wdXRUaGVtZVxuICB9KSA9PiB7XG4gICAgY29uc3QgZGF0YXNldEZpZWxkcyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgICAgcmV0dXJuIGZpZWxkcyB8fCBkYXRhc2V0c1tkYXRhSWRdPy5maWVsZHM7XG4gICAgfSwgW2RhdGFJZCwgZGF0YXNldHMsIGZpZWxkc10pO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxTdHlsZWRTb3VyY2VDb250YWluZXIgY2xhc3NOYW1lPXtjbGFzc05hbWV9PlxuICAgICAgICA8U3R5bGVkU291cmNlRGF0YVNlbGVjdG9yQ29udGVudD5cbiAgICAgICAgICA8U291cmNlRGF0YVNlbGVjdG9yQ29udGVudFxuICAgICAgICAgICAgaW5wdXRUaGVtZT17aW5wdXRUaGVtZX1cbiAgICAgICAgICAgIGRhdGFzZXRzPXtkYXRhc2V0c31cbiAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgIGRhdGFJZD17ZGF0YUlkfVxuICAgICAgICAgICAgb25TZWxlY3Q9e29uU2VsZWN0RGF0YXNldH1cbiAgICAgICAgICAvPlxuICAgICAgICA8L1N0eWxlZFNvdXJjZURhdGFTZWxlY3RvckNvbnRlbnQ+XG4gICAgICAgIHtkYXRhSWQgJiYgKFxuICAgICAgICAgIDxTdHlsZWRGaWVsZFNlbGVjdG9yPlxuICAgICAgICAgICAgPEZpZWxkU2VsZWN0b3JcbiAgICAgICAgICAgICAgaW5wdXRUaGVtZT17aW5wdXRUaGVtZX1cbiAgICAgICAgICAgICAgZmllbGRzPXtkYXRhc2V0RmllbGRzfVxuICAgICAgICAgICAgICB2YWx1ZT17ZmllbGRWYWx1ZX1cbiAgICAgICAgICAgICAgZXJhc2FibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICBvblNlbGVjdD17b25GaWVsZFNlbGVjdG9yfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L1N0eWxlZEZpZWxkU2VsZWN0b3I+XG4gICAgICAgICl9XG4gICAgICA8L1N0eWxlZFNvdXJjZUNvbnRhaW5lcj5cbiAgICApO1xuICB9O1xuXG4gIFNvdXJjZVNlbGVjdG9yLmRpc3BsYXlOYW1lID0gJ1NvdXJjZVNlbGVjdG9yJztcblxuICByZXR1cm4gU291cmNlU2VsZWN0b3I7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNvdXJjZVNlbGVjdG9yRmFjdG9yeTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBR0EsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsaUJBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUVBLElBQUFHLDBCQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBSSxjQUFBLEdBQUFGLHNCQUFBLENBQUFGLE9BQUE7QUFBK0QsSUFBQUssZUFBQSxFQUFBQyxnQkFBQSxFQUFBQyxnQkFBQSxFQVAvRDtBQUNBO0FBQUEsU0FBQUMseUJBQUFDLENBQUE7RUFBQSx5QkFBQUMsT0FBQTtFQUFBLElBQUFDLENBQUEsT0FBQUQsT0FBQTtJQUFBRSxDQUFBLE9BQUFGLE9BQUE7RUFBQSxRQUFBRix3QkFBQSxZQUFBQSx5QkFBQUMsQ0FBQTtJQUFBLE9BQUFBLENBQUEsR0FBQUcs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