"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.InputBoxContainer = exports.ColorSelectorInput = exports.ColorBlock = void 0;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _reactIntl = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react-intl");
var _styledComponents = _interopRequireDefault(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/styled-components"));
var _react2 = require("@floating-ui/react");
var _utils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/utils/src");
var _rangeSlider = _interopRequireDefault(require("../../common/range-slider"));
var _styledComponents2 = require("../../common/styled-components");
var _colorPalette = _interopRequireDefault(require("./color-palette"));
var _colorRangeSelector = _interopRequireDefault(require("./color-range-selector"));
var _singleColorPalette = _interopRequireDefault(require("./single-color-palette"));
var _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
var OpacitySliderWrapper = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  padding: 0px 12px 12px 12px;\n"])));
var OPACITY_SLIDER_PROPS = {
  type: 'number',
  range: [0, 1],
  value0: 0,
  step: 0.01,
  isRanged: false,
  label: 'Opacity',
  showInput: true
};
var ColorBlock = exports.ColorBlock = _styledComponents["default"].div.withConfig({
  shouldForwardProp: _styledComponents2.shouldForwardProp
})(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  width: 32px;\n  height: 18px;\n  border-radius: 1px;\n  background-color: ", ";\n"])), function (props) {
  return Array.isArray(props.backgroundcolor) ? "rgb(".concat(props.backgroundcolor.slice(0, 3).join(','), ")") : 'transparent';
});
var StyledColorSelectorWrapper = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  .selector__dropdown {\n    max-height: 600px; /* increase from the default 500px defined by StyledPanelDropdown */\n  }\n"])));
var ColorSelectorInput = exports.ColorSelectorInput = _styledComponents["default"].div.withConfig({
  shouldForwardProp: _styledComponents2.shouldForwardProp
})(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2["default"])(["\n  ", ";\n  height: ", ";\n\n  .color-selector__selector__label {\n    text-transform: capitalize;\n    font-size: 12px;\n    text-align: center;\n    color: ", ";\n  }\n"])), function (props) {
  return props.inputTheme === 'secondary' ? props.theme.secondaryInput : props.theme.input;
}, function (props) {
  return props.theme.inputBoxHeight;
}, function (props) {
  return props.theme.inputPlaceholderColor;
});
var InputBoxContainer = exports.InputBoxContainer = _styledComponents["default"].div(_templateObject5 || (_templateObject5 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  justify-content: space-between;\n\n  .color-select__input-group {\n    flex-grow: 1;\n  }\n  .color-select__input-group:nth-child(2) {\n    margin-left: 12px;\n  }\n"])));
ColorSelectorFactory.deps = [_colorRangeSelector["default"], _rangeSlider["default"]];
function ColorSelectorFactory(ColorRangeSelector, RangeSlider) {
  var ColorSelector = function ColorSelector(_ref) {
    var _ref$colorSets = _ref.colorSets,
      colorSets = _ref$colorSets === void 0 ? [] : _ref$colorSets,
      colorUI = _ref.colorUI,
      inputTheme = _ref.inputTheme,
      disabled = _ref.disabled,
      useOpacity = _ref.useOpacity,
      setColorUI = _ref.setColorUI;
    var _useState = (0, _react.useState)(colorUI ? colorUI.showDropdown : false),
      _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
      showDropdown = _useState2[0],
      setShowDropdown = _useState2[1];
    var showSketcher = colorUI ? colorUI.showSketcher : false;
    var editingLookup = colorUI ? colorUI.showDropdown : showDropdown;
    var editingColorSet = typeof editingLookup === 'number' && colorSets[editingLookup] ? colorSets[editingLookup] : false;
    var closePanelDropdown = (0, _react.useCallback)(function () {
      if (editingLookup === false) {
        return;
      }
      if (setColorUI) {
        setColorUI({
          showDropdown: false,
          showSketcher: false
        });
      } else {
        setShowDropdown(false);
      }
    }, [editingLookup, setColorUI, setShowDropdown]);
    var handleClickOutside = (0, _react.useCallback)(function () {
      if (Number.isInteger(showSketcher)) {
        // if sketcher is open, let sketch to close itself first
        return;
      }
      closePanelDropdown();
    }, [showSketcher, closePanelDropdown]);

    // floating-ui boilerplate to establish close on outside click
    var _useFloating = (0, _react2.useFloating)({
        open: true,
        onOpenChange: function onOpenChange(v) {
          if (!v) {
            handleClickOutside();
          }
        }
      }),
      refs = _useFloating.refs,
      context = _useFloating.context;
    var dismiss = (0, _react2.useDismiss)(context);
    var _useInteractions = (0, _react2.useInteractions)([dismiss]),
      getFloatingProps = _useInteractions.getFloatingProps;
    var setColor = (0, _react.useCallback)(function (colorSet, color, opacity) {
      var _ref2 = colorSet || {},
        setColor = _ref2.setColor;
      if (!setColor) {
        return;
      }
      if (useOpacity && Array.isArray(color)) {
        setColor([].concat((0, _toConsumableArray2["default"])(color.slice(0, 3)), [opacity]));
      } else {
        setColor(color);
      }
    }, [useOpacity]);
    var onSelectColor = (0, _react.useCallback)(function (color, e) {
      if (e) e.stopPropagation();
      var colorSet = editingColorSet;
      if (colorSet) {
        setColor(colorSet, color, colorSet.selectedColor[3]);
      }
    }, [editingColorSet, setColor]);
    var onSelectOpacity = (0, _react.useCallback)(function (opacity, e) {
      if (e) e.stopPropagation();
      var colorSet = editingColorSet;
      if (colorSet) {
        setColor(colorSet, colorSet.selectedColor, Math.round(opacity[1] * 255));
      }
    }, [editingColorSet, setColor]);
    var onToggleDropdown = (0, _react.useCallback)(function (e, i) {
      e.stopPropagation();
      e.preventDefault();
      var showDropdownValue = editingLookup === false ? i // open it for the specific color set index
      : false; // close it
      if (setColorUI) {
        setColorUI({
          showDropdown: showDropdownValue
        });
      } else {
        setShowDropdown(showDropdownValue);
      }
    }, [editingLookup, setColorUI, setShowDropdown]);
    return /*#__PURE__*/_react["default"].createElement(StyledColorSelectorWrapper, (0, _extends2["default"])({
      className: "color-selector",
      ref: refs.setFloating
    }, getFloatingProps()), /*#__PURE__*/_react["default"].createElement(InputBoxContainer, null, colorSets.map(function (cSet, i) {
      return /*#__PURE__*/_react["default"].createElement("div", {
        className: "color-select__input-group",
        key: i
      }, /*#__PURE__*/_react["default"].createElement(ColorSelectorInput, {
        className: "color-selector__selector",
        active: editingLookup === i,
        disabled: disabled,
        inputTheme: inputTheme,
        onClick: function onClick(e) {
          return onToggleDropdown(e, i);
        }
      }, cSet.isRange ? /*#__PURE__*/_react["default"].createElement(_colorPalette["default"], {
        colors: cSet.selectedColor.colors
      }) : /*#__PURE__*/_react["default"].createElement(ColorBlock, {
        className: "color-selector__selector__block",
        backgroundcolor: cSet.selectedColor
      }), cSet.label ? /*#__PURE__*/_react["default"].createElement("div", {
        className: "color-selector__selector__label"
      }, cSet.label) : null));
    })), editingColorSet ? /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledPanelDropdown, {
      className: "color-selector__dropdown"
    }, editingColorSet.isRange && colorUI && setColorUI ? /*#__PURE__*/_react["default"].createElement(ColorRangeSelector, {
      selectedColorRange: editingColorSet.selectedColor,
      onSelectColorRange: onSelectColor,
      setColorPaletteUI: setColorUI,
      colorPaletteUI: colorUI
    }) : /*#__PURE__*/_react["default"].createElement(_singleColorPalette["default"], {
      selectedColor: (0, _utils.rgbToHex)(editingColorSet.selectedColor),
      onSelectColor: onSelectColor
    }), useOpacity ? /*#__PURE__*/_react["default"].createElement(OpacitySliderWrapper, null, /*#__PURE__*/_react["default"].createElement(_styledComponents2.PanelLabel, null, /*#__PURE__*/_react["default"].createElement(_reactIntl.FormattedMessage, {
      id: "color.opacity"
    })), /*#__PURE__*/_react["default"].createElement(RangeSlider, (0, _extends2["default"])({}, OPACITY_SLIDER_PROPS, {
      value1: editingColorSet.selectedColor[3] / 255,
      onChange: onSelectOpacity
    }))) : null) : null);
  };
  return ColorSelector;
}
var _default = exports["default"] = ColorSelectorFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcmVhY3RJbnRsIiwiX3N0eWxlZENvbXBvbmVudHMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3JlYWN0MiIsIl91dGlscyIsIl9yYW5nZVNsaWRlciIsIl9zdHlsZWRDb21wb25lbnRzMiIsIl9jb2xvclBhbGV0dGUiLCJfY29sb3JSYW5nZVNlbGVjdG9yIiwiX3NpbmdsZUNvbG9yUGFsZXR0ZSIsIl90ZW1wbGF0ZU9iamVjdCIsIl90ZW1wbGF0ZU9iamVjdDIiLCJfdGVtcGxhdGVPYmplY3QzIiwiX3RlbXBsYXRlT2JqZWN0NCIsIl90ZW1wbGF0ZU9iamVjdDUiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJPcGFjaXR5U2xpZGVyV3JhcHBlciIsImRpdiIsIl90YWdnZWRUZW1wbGF0ZUxpdGVyYWwyIiwiT1BBQ0lUWV9TTElERVJfUFJPUFMiLCJ0eXBlIiwicmFuZ2UiLCJ2YWx1ZTAiLCJzdGVwIiwiaXNSYW5nZWQiLCJsYWJlbCIsInNob3dJbnB1dCIsIkNvbG9yQmxvY2siLCJleHBvcnRzIiwid2l0aENvbmZpZyIsInNob3VsZEZvcndhcmRQcm9wIiwicHJvcHMiLCJBcnJheSIsImlzQXJyYXkiLCJiYWNrZ3JvdW5kY29sb3IiLCJjb25jYXQiLCJzbGljZSIsImpvaW4iLCJTdHlsZWRDb2xvclNlbGVjdG9yV3JhcHBlciIsIkNvbG9yU2VsZWN0b3JJbnB1dCIsImlucHV0VGhlbWUiLCJ0aGVtZSIsInNlY29uZGFyeUlucHV0IiwiaW5wdXQiLCJpbnB1dEJveEhlaWdodCIsImlucHV0UGxhY2Vob2xkZXJDb2xvciIsIklucHV0Qm94Q29udGFpbmVyIiwiQ29sb3JTZWxlY3RvckZhY3RvcnkiLCJkZXBzIiwiQ29sb3JSYW5nZVNlbGVjdG9yIiwiUmFuZ2VTbGlkZXIiLCJDb2xvclNlbGVjdG9yIiwiX3JlZiIsIl9yZWYkY29sb3JTZXRzIiwiY29sb3JTZXRzIiwiY29sb3JVSSIsImRpc2FibGVkIiwidXNlT3BhY2l0eSIsInNldENvbG9yVUkiLCJfdXNlU3RhdGUiLCJ1c2VTdGF0ZSIsInNob3dEcm9wZG93biIsIl91c2VTdGF0ZTIiLCJfc2xpY2VkVG9BcnJheTIiLCJzZXRTaG93RHJvcGRvd24iLCJzaG93U2tldGNoZXIiLCJlZGl0aW5nTG9va3VwIiwiZWRpdGluZ0NvbG9yU2V0IiwiY2xvc2VQYW5lbERyb3Bkb3duIiwidXNlQ2FsbGJhY2siLCJoYW5kbGVDbGlja091dHNpZGUiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJfdXNlRmxvYXRpbmciLCJ1c2VGbG9hdGluZyIsIm9wZW4iLCJvbk9wZW5DaGFuZ2UiLCJ2IiwicmVmcyIsImNvbnRleHQiLCJkaXNtaXNzIiwidXNlRGlzbWlzcyIsIl91c2VJbnRlcmFjdGlvbnMiLCJ1c2VJbnRlcmFjdGlvbnMiLCJnZXRGbG9hdGluZ1Byb3BzIiwic2V0Q29sb3IiLCJjb2xvclNldCIsImNvbG9yIiwib3BhY2l0eSIsIl9yZWYyIiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsIm9uU2VsZWN0Q29sb3IiLCJzdG9wUHJvcGFnYXRpb24iLCJzZWxlY3RlZENvbG9yIiwib25TZWxlY3RPcGFjaXR5IiwiTWF0aCIsInJvdW5kIiwib25Ub2dnbGVEcm9wZG93biIsInByZXZlbnREZWZhdWx0Iiwic2hvd0Ryb3Bkb3duVmFsdWUiLCJjcmVhdGVFbGVtZW50IiwiX2V4dGVuZHMyIiwiY2xhc3NOYW1lIiwicmVmIiwic2V0RmxvYXRpbmciLCJtYXAiLCJjU2V0Iiwia2V5IiwiYWN0aXZlIiwib25DbGljayIsImlzUmFuZ2UiLCJjb2xvcnMiLCJTdHlsZWRQYW5lbERyb3Bkb3duIiwic2VsZWN0ZWRDb2xvclJhbmdlIiwib25TZWxlY3RDb2xvclJhbmdlIiwic2V0Q29sb3JQYWxldHRlVUkiLCJjb2xvclBhbGV0dGVVSSIsInJnYlRvSGV4IiwiUGFuZWxMYWJlbCIsIkZvcm1hdHRlZE1lc3NhZ2UiLCJpZCIsInZhbHVlMSIsIm9uQ2hhbmdlIiwiX2RlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2lkZS1wYW5lbC9sYXllci1wYW5lbC9jb2xvci1zZWxlY3Rvci50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IFJlYWN0LCB7dXNlQ2FsbGJhY2ssIHVzZVN0YXRlLCBNb3VzZUV2ZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ3JlYWN0LWludGwnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQge3VzZURpc21pc3MsIHVzZUZsb2F0aW5nLCB1c2VJbnRlcmFjdGlvbnN9IGZyb20gJ0BmbG9hdGluZy11aS9yZWFjdCc7XG5cbmltcG9ydCB7Q29sb3JSYW5nZX0gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5pbXBvcnQge0NvbG9yVUksIE5lc3RlZFBhcnRpYWwsIFJHQkFDb2xvciwgUkdCQ29sb3J9IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuaW1wb3J0IHtyZ2JUb0hleH0gZnJvbSAnQGtlcGxlci5nbC91dGlscyc7XG5cbmltcG9ydCBSYW5nZVNsaWRlckZhY3RvcnkgZnJvbSAnLi4vLi4vY29tbW9uL3JhbmdlLXNsaWRlcic7XG5pbXBvcnQge1BhbmVsTGFiZWwsIHNob3VsZEZvcndhcmRQcm9wLCBTdHlsZWRQYW5lbERyb3Bkb3dufSBmcm9tICcuLi8uLi9jb21tb24vc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IENvbG9yUGFsZXR0ZSBmcm9tICcuL2NvbG9yLXBhbGV0dGUnO1xuaW1wb3J0IENvbG9yUmFuZ2VTZWxlY3RvckZhY3RvcnkgZnJvbSAnLi9jb2xvci1yYW5nZS1zZWxlY3Rvcic7XG5pbXBvcnQgU2luZ2xlQ29sb3JQYWxldHRlIGZyb20gJy4vc2luZ2xlLWNvbG9yLXBhbGV0dGUnO1xuXG50eXBlIENvbG9yU2VsZWN0b3JJbnB1dFByb3BzID0ge1xuICBhY3RpdmU6IGJvb2xlYW47XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgaW5wdXRUaGVtZT86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIENvbG9yU2V0ID0ge1xuICBzZWxlY3RlZENvbG9yOiBSR0JDb2xvciB8IFJHQkFDb2xvciB8IENvbG9yUmFuZ2U7XG4gIHNldENvbG9yOiAodjogUkdCQ29sb3IgfCBSR0JBQ29sb3IgfCBDb2xvclJhbmdlKSA9PiB2b2lkO1xuICBpc1JhbmdlPzogYm9vbGVhbjtcbiAgbGFiZWw/OiBzdHJpbmc7XG59O1xuXG50eXBlIENvbG9yU2VsZWN0b3JQcm9wcyA9IHtcbiAgY29sb3JTZXRzOiBDb2xvclNldFtdO1xuICBjb2xvclVJPzogQ29sb3JVSTtcbiAgaW5wdXRUaGVtZT86IHN0cmluZztcbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICB1c2VPcGFjaXR5PzogYm9vbGVhbjtcbiAgc2V0Q29sb3JVST86IChuZXdDb25maWc6IE5lc3RlZFBhcnRpYWw8Q29sb3JVST4pID0+IHZvaWQ7XG59O1xuXG5jb25zdCBPcGFjaXR5U2xpZGVyV3JhcHBlciA9IHN0eWxlZC5kaXZgXG4gIHBhZGRpbmc6IDBweCAxMnB4IDEycHggMTJweDtcbmA7XG5cbmNvbnN0IE9QQUNJVFlfU0xJREVSX1BST1BTID0ge1xuICB0eXBlOiAnbnVtYmVyJyxcbiAgcmFuZ2U6IFswLCAxXSxcbiAgdmFsdWUwOiAwLFxuICBzdGVwOiAwLjAxLFxuICBpc1JhbmdlZDogZmFsc2UsXG4gIGxhYmVsOiAnT3BhY2l0eScsXG4gIHNob3dJbnB1dDogdHJ1ZVxufTtcblxuZXhwb3J0IGNvbnN0IENvbG9yQmxvY2sgPSBzdHlsZWQuZGl2LndpdGhDb25maWcoe1xuICBzaG91bGRGb3J3YXJkUHJvcFxufSk8e2JhY2tncm91bmRjb2xvcjogUkdCQ29sb3J9PmBcbiAgd2lkdGg6IDMycHg7XG4gIGhlaWdodDogMThweDtcbiAgYm9yZGVyLXJhZGl1czogMXB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAke3Byb3BzID0+XG4gICAgQXJyYXkuaXNBcnJheShwcm9wcy5iYWNrZ3JvdW5kY29sb3IpXG4gICAgICA/IGByZ2IoJHtwcm9wcy5iYWNrZ3JvdW5kY29sb3Iuc2xpY2UoMCwgMykuam9pbignLCcpfSlgXG4gICAgICA6ICd0cmFuc3BhcmVudCd9O1xuYDtcblxuY29uc3QgU3R5bGVkQ29sb3JTZWxlY3RvcldyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICAuc2VsZWN0b3JfX2Ryb3Bkb3duIHtcbiAgICBtYXgtaGVpZ2h0OiA2MDBweDsgLyogaW5jcmVhc2UgZnJvbSB0aGUgZGVmYXVsdCA1MDBweCBkZWZpbmVkIGJ5IFN0eWxlZFBhbmVsRHJvcGRvd24gKi9cbiAgfVxuYDtcblxuZXhwb3J0IGNvbnN0IENvbG9yU2VsZWN0b3JJbnB1dCA9IHN0eWxlZC5kaXYud2l0aENvbmZpZyh7XG4gIHNob3VsZEZvcndhcmRQcm9wXG59KTxDb2xvclNlbGVjdG9ySW5wdXRQcm9wcz5gXG4gICR7cHJvcHMgPT4gKHByb3BzLmlucHV0VGhlbWUgPT09ICdzZWNvbmRhcnknID8gcHJvcHMudGhlbWUuc2Vjb25kYXJ5SW5wdXQgOiBwcm9wcy50aGVtZS5pbnB1dCl9O1xuICBoZWlnaHQ6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuaW5wdXRCb3hIZWlnaHR9O1xuXG4gIC5jb2xvci1zZWxlY3Rvcl9fc2VsZWN0b3JfX2xhYmVsIHtcbiAgICB0ZXh0LXRyYW5zZm9ybTogY2FwaXRhbGl6ZTtcbiAgICBmb250LXNpemU6IDEycHg7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGNvbG9yOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLmlucHV0UGxhY2Vob2xkZXJDb2xvcn07XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBJbnB1dEJveENvbnRhaW5lciA9IHN0eWxlZC5kaXZgXG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcblxuICAuY29sb3Itc2VsZWN0X19pbnB1dC1ncm91cCB7XG4gICAgZmxleC1ncm93OiAxO1xuICB9XG4gIC5jb2xvci1zZWxlY3RfX2lucHV0LWdyb3VwOm50aC1jaGlsZCgyKSB7XG4gICAgbWFyZ2luLWxlZnQ6IDEycHg7XG4gIH1cbmA7XG5cbkNvbG9yU2VsZWN0b3JGYWN0b3J5LmRlcHMgPSBbQ29sb3JSYW5nZVNlbGVjdG9yRmFjdG9yeSwgUmFuZ2VTbGlkZXJGYWN0b3J5XTtcblxuZnVuY3Rpb24gQ29sb3JTZWxlY3RvckZhY3RvcnkoXG4gIENvbG9yUmFuZ2VTZWxlY3RvcjogUmV0dXJuVHlwZTx0eXBlb2YgQ29sb3JSYW5nZVNlbGVjdG9yRmFjdG9yeT4sXG4gIFJhbmdlU2xpZGVyOiBSZXR1cm5UeXBlPHR5cGVvZiBSYW5nZVNsaWRlckZhY3Rvcnk+XG4pOiBSZWFjdC5GQzxDb2xvclNlbGVjdG9yUHJvcHM+IHtcbiAgY29uc3QgQ29sb3JTZWxlY3RvcjogUmVhY3QuRkM8Q29sb3JTZWxlY3RvclByb3BzPiA9ICh7XG4gICAgY29sb3JTZXRzID0gW10sXG4gICAgY29sb3JVSSxcbiAgICBpbnB1dFRoZW1lLFxuICAgIGRpc2FibGVkLFxuICAgIHVzZU9wYWNpdHksXG4gICAgc2V0Q29sb3JVSVxuICB9OiBDb2xvclNlbGVjdG9yUHJvcHMpID0+IHtcbiAgICBjb25zdCBbc2hvd0Ryb3Bkb3duLCBzZXRTaG93RHJvcGRvd25dID0gdXNlU3RhdGUoY29sb3JVSSA/IGNvbG9yVUkuc2hvd0Ryb3Bkb3duIDogZmFsc2UpO1xuICAgIGNvbnN0IHNob3dTa2V0Y2hlciA9IGNvbG9yVUkgPyBjb2xvclVJLnNob3dTa2V0Y2hlciA6IGZhbHNlO1xuICAgIGNvbnN0IGVkaXRpbmdMb29rdXAgPSBjb2xvclVJID8gY29sb3JVSS5zaG93RHJvcGRvd24gOiBzaG93RHJvcGRvd247XG4gICAgY29uc3QgZWRpdGluZ0NvbG9yU2V0OiBDb2xvclNldCB8IGZhbHNlID1cbiAgICAgIHR5cGVvZiBlZGl0aW5nTG9va3VwID09PSAnbnVtYmVyJyAmJiBjb2xvclNldHNbZWRpdGluZ0xvb2t1cF1cbiAgICAgICAgPyBjb2xvclNldHNbZWRpdGluZ0xvb2t1cF1cbiAgICAgICAgOiBmYWxzZTtcblxuICAgIGNvbnN0IGNsb3NlUGFuZWxEcm9wZG93biA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgIGlmIChlZGl0aW5nTG9va3VwID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoc2V0Q29sb3JVSSkge1xuICAgICAgICBzZXRDb2xvclVJKHtzaG93RHJvcGRvd246IGZhbHNlLCBzaG93U2tldGNoZXI6IGZhbHNlfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRTaG93RHJvcGRvd24oZmFsc2UpO1xuICAgICAgfVxuICAgIH0sIFtlZGl0aW5nTG9va3VwLCBzZXRDb2xvclVJLCBzZXRTaG93RHJvcGRvd25dKTtcblxuICAgIGNvbnN0IGhhbmRsZUNsaWNrT3V0c2lkZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKHNob3dTa2V0Y2hlcikpIHtcbiAgICAgICAgLy8gaWYgc2tldGNoZXIgaXMgb3BlbiwgbGV0IHNrZXRjaCB0byBjbG9zZSBpdHNlbGYgZmlyc3RcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2xvc2VQYW5lbERyb3Bkb3duKCk7XG4gICAgfSwgW3Nob3dTa2V0Y2hlciwgY2xvc2VQYW5lbERyb3Bkb3duXSk7XG5cbiAgICAvLyBmbG9hdGluZy11aSBib2lsZXJwbGF0ZSB0byBlc3RhYmxpc2ggY2xvc2Ugb24gb3V0c2lkZSBjbGlja1xuICAgIGNvbnN0IHtyZWZzLCBjb250ZXh0fSA9IHVzZUZsb2F0aW5nKHtcbiAgICAgIG9wZW46IHRydWUsXG4gICAgICBvbk9wZW5DaGFuZ2U6IHYgPT4ge1xuICAgICAgICBpZiAoIXYpIHtcbiAgICAgICAgICBoYW5kbGVDbGlja091dHNpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGRpc21pc3MgPSB1c2VEaXNtaXNzKGNvbnRleHQpO1xuICAgIGNvbnN0IHtnZXRGbG9hdGluZ1Byb3BzfSA9IHVzZUludGVyYWN0aW9ucyhbZGlzbWlzc10pO1xuXG4gICAgY29uc3Qgc2V0Q29sb3IgPSB1c2VDYWxsYmFjayhcbiAgICAgIChjb2xvclNldDogQ29sb3JTZXQsIGNvbG9yOiBSR0JDb2xvciB8IFJHQkFDb2xvciB8IENvbG9yUmFuZ2UsIG9wYWNpdHk6IG51bWJlcikgPT4ge1xuICAgICAgICBjb25zdCB7c2V0Q29sb3J9ID0gY29sb3JTZXQgfHwge307XG4gICAgICAgIGlmICghc2V0Q29sb3IpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVzZU9wYWNpdHkgJiYgQXJyYXkuaXNBcnJheShjb2xvcikpIHtcbiAgICAgICAgICBzZXRDb2xvcihbLi4uY29sb3Iuc2xpY2UoMCwgMyksIG9wYWNpdHldIGFzIFJHQkFDb2xvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0Q29sb3IoY29sb3IpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgW3VzZU9wYWNpdHldXG4gICAgKTtcblxuICAgIGNvbnN0IG9uU2VsZWN0Q29sb3IgPSB1c2VDYWxsYmFjayhcbiAgICAgIChjb2xvcjogUkdCQ29sb3IgfCBDb2xvclJhbmdlLCBlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChlKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBjb25zdCBjb2xvclNldCA9IGVkaXRpbmdDb2xvclNldDtcbiAgICAgICAgaWYgKGNvbG9yU2V0KSB7XG4gICAgICAgICAgc2V0Q29sb3IoY29sb3JTZXQsIGNvbG9yLCBjb2xvclNldC5zZWxlY3RlZENvbG9yWzNdKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFtlZGl0aW5nQ29sb3JTZXQsIHNldENvbG9yXVxuICAgICk7XG5cbiAgICBjb25zdCBvblNlbGVjdE9wYWNpdHkgPSB1c2VDYWxsYmFjayhcbiAgICAgIChvcGFjaXR5OiBudW1iZXJbXSwgZTogRXZlbnQgfCBudWxsIHwgdW5kZWZpbmVkKSA9PiB7XG4gICAgICAgIGlmIChlKSBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBjb25zdCBjb2xvclNldCA9IGVkaXRpbmdDb2xvclNldDtcbiAgICAgICAgaWYgKGNvbG9yU2V0KSB7XG4gICAgICAgICAgc2V0Q29sb3IoY29sb3JTZXQsIGNvbG9yU2V0LnNlbGVjdGVkQ29sb3IsIE1hdGgucm91bmQob3BhY2l0eVsxXSAqIDI1NSkpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgW2VkaXRpbmdDb2xvclNldCwgc2V0Q29sb3JdXG4gICAgKTtcblxuICAgIGNvbnN0IG9uVG9nZ2xlRHJvcGRvd24gPSB1c2VDYWxsYmFjayhcbiAgICAgIChlLCBpKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3Qgc2hvd0Ryb3Bkb3duVmFsdWUgPVxuICAgICAgICAgIGVkaXRpbmdMb29rdXAgPT09IGZhbHNlXG4gICAgICAgICAgICA/IGkgLy8gb3BlbiBpdCBmb3IgdGhlIHNwZWNpZmljIGNvbG9yIHNldCBpbmRleFxuICAgICAgICAgICAgOiBmYWxzZTsgLy8gY2xvc2UgaXRcbiAgICAgICAgaWYgKHNldENvbG9yVUkpIHtcbiAgICAgICAgICBzZXRDb2xvclVJKHtzaG93RHJvcGRvd246IHNob3dEcm9wZG93blZhbHVlfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0U2hvd0Ryb3Bkb3duKHNob3dEcm9wZG93blZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFtlZGl0aW5nTG9va3VwLCBzZXRDb2xvclVJLCBzZXRTaG93RHJvcGRvd25dXG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U3R5bGVkQ29sb3JTZWxlY3RvcldyYXBwZXJcbiAgICAgICAgY2xhc3NOYW1lPVwiY29sb3Itc2VsZWN0b3JcIlxuICAgICAgICByZWY9e3JlZnMuc2V0RmxvYXRpbmd9XG4gICAgICAgIHsuLi5nZXRGbG9hdGluZ1Byb3BzKCl9XG4gICAgICA+XG4gICAgICAgIDxJbnB1dEJveENvbnRhaW5lcj5cbiAgICAgICAgICB7Y29sb3JTZXRzLm1hcCgoY1NldCwgaSkgPT4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb2xvci1zZWxlY3RfX2lucHV0LWdyb3VwXCIga2V5PXtpfT5cbiAgICAgICAgICAgICAgPENvbG9yU2VsZWN0b3JJbnB1dFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbG9yLXNlbGVjdG9yX19zZWxlY3RvclwiXG4gICAgICAgICAgICAgICAgYWN0aXZlPXtlZGl0aW5nTG9va3VwID09PSBpfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICAgICAgICBpbnB1dFRoZW1lPXtpbnB1dFRoZW1lfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2UgPT4gb25Ub2dnbGVEcm9wZG93bihlLCBpKX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtjU2V0LmlzUmFuZ2UgPyAoXG4gICAgICAgICAgICAgICAgICA8Q29sb3JQYWxldHRlIGNvbG9ycz17KGNTZXQuc2VsZWN0ZWRDb2xvciBhcyBDb2xvclJhbmdlKS5jb2xvcnN9IC8+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxDb2xvckJsb2NrXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImNvbG9yLXNlbGVjdG9yX19zZWxlY3Rvcl9fYmxvY2tcIlxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kY29sb3I9e2NTZXQuc2VsZWN0ZWRDb2xvciBhcyBSR0JDb2xvcn1cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7Y1NldC5sYWJlbCA/IChcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29sb3Itc2VsZWN0b3JfX3NlbGVjdG9yX19sYWJlbFwiPntjU2V0LmxhYmVsfTwvZGl2PlxuICAgICAgICAgICAgICAgICkgOiBudWxsfVxuICAgICAgICAgICAgICA8L0NvbG9yU2VsZWN0b3JJbnB1dD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L0lucHV0Qm94Q29udGFpbmVyPlxuICAgICAgICB7ZWRpdGluZ0NvbG9yU2V0ID8gKFxuICAgICAgICAgIDxTdHlsZWRQYW5lbERyb3Bkb3duIGNsYXNzTmFtZT1cImNvbG9yLXNlbGVjdG9yX19kcm9wZG93blwiPlxuICAgICAgICAgICAge2VkaXRpbmdDb2xvclNldC5pc1JhbmdlICYmIGNvbG9yVUkgJiYgc2V0Q29sb3JVSSA/IChcbiAgICAgICAgICAgICAgPENvbG9yUmFuZ2VTZWxlY3RvclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkQ29sb3JSYW5nZT17ZWRpdGluZ0NvbG9yU2V0LnNlbGVjdGVkQ29sb3IgYXMgQ29sb3JSYW5nZX1cbiAgICAgICAgICAgICAgICBvblNlbGVjdENvbG9yUmFuZ2U9e29uU2VsZWN0Q29sb3J9XG4gICAgICAgICAgICAgICAgc2V0Q29sb3JQYWxldHRlVUk9e3NldENvbG9yVUl9XG4gICAgICAgICAgICAgICAgY29sb3JQYWxldHRlVUk9e2NvbG9yVUkgYXMgQ29sb3JVSX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxTaW5nbGVDb2xvclBhbGV0dGVcbiAgICAgICAgICAgICAgICBzZWxlY3RlZENvbG9yPXtyZ2JUb0hleChlZGl0aW5nQ29sb3JTZXQuc2VsZWN0ZWRDb2xvciBhcyBSR0JDb2xvcil9XG4gICAgICAgICAgICAgICAgb25TZWxlY3RDb2xvcj17b25TZWxlY3RDb2xvcn1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7dXNlT3BhY2l0eSA/IChcbiAgICAgICAgICAgICAgPE9wYWNpdHlTbGlkZXJXcmFwcGVyPlxuICAgICAgICAgICAgICAgIDxQYW5lbExhYmVsPlxuICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJjb2xvci5vcGFjaXR5XCIgLz5cbiAgICAgICAgICAgICAgICA8L1BhbmVsTGFiZWw+XG4gICAgICAgICAgICAgICAgPFJhbmdlU2xpZGVyXG4gICAgICAgICAgICAgICAgICB7Li4uT1BBQ0lUWV9TTElERVJfUFJPUFN9XG4gICAgICAgICAgICAgICAgICB2YWx1ZTE9e2VkaXRpbmdDb2xvclNldC5zZWxlY3RlZENvbG9yWzNdIC8gMjU1fVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e29uU2VsZWN0T3BhY2l0eX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L09wYWNpdHlTbGlkZXJXcmFwcGVyPlxuICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgPC9TdHlsZWRQYW5lbERyb3Bkb3duPlxuICAgICAgICApIDogbnVsbH1cbiAgICAgIDwvU3R5bGVkQ29sb3JTZWxlY3RvcldyYXBwZXI+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gQ29sb3JTZWxlY3Rvcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29sb3JTZWxlY3RvckZhY3Rvcnk7XG4iXSwibWFw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