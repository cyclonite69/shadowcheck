"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _datasetLayerSection = _interopRequireDefault(require("./dataset-layer-section"));
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
// SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project

DatasetLayerGroupFactory.deps = [_datasetLayerSection["default"]];
function DatasetLayerGroupFactory(DatasetLayerSection) {
  var DatasetLayerGroup = function DatasetLayerGroup(props) {
    var datasets = props.datasets,
      showDatasetTable = props.showDatasetTable,
      layers = props.layers,
      updateTableColor = props.updateTableColor,
      showDeleteDataset = props.showDeleteDataset,
      removeDataset = props.removeDataset,
      layerOrder = props.layerOrder,
      layerClasses = props.layerClasses,
      uiStateActions = props.uiStateActions,
      visStateActions = props.visStateActions,
      mapStateActions = props.mapStateActions;
    var datasetLayerSectionData = (0, _react.useMemo)(function () {
      return Object.values(datasets).map(function (dataset) {
        // Global layer order will contain the correct order of layers
        // We just empty the positions in layers array (for each dataset)
        // where the layer doesn't belong to a dataset and set it to null
        var datasetLayers = layers.map(function (layer) {
          return layer.config.dataId === dataset.id ? layer : null;
        }).filter(function (layer) {
          return Boolean(layer);
        });
        return {
          dataset: dataset,
          datasetLayers: datasetLayers
        };
      });
    }, [datasets, layers]);
    return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, datasetLayerSectionData.map(function (dlsData) {
      return /*#__PURE__*/_react["default"].createElement(DatasetLayerSection, {
        key: dlsData.dataset.id,
        dataset: dlsData.dataset,
        layers: dlsData.datasetLayers,
        datasets: datasets,
        showDatasetTable: showDatasetTable,
        updateTableColor: updateTableColor,
        showDeleteDataset: showDeleteDataset,
        removeDataset: removeDataset,
        layerOrder: layerOrder,
        layerClasses: layerClasses,
        uiStateActions: uiStateActions,
        visStateActions: visStateActions,
        mapStateActions: mapStateActions
      });
    }));
  };
  return DatasetLayerGroup;
}
var _default = exports["default"] = DatasetLayerGroupFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfZGF0YXNldExheWVyU2VjdGlvbiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJEYXRhc2V0TGF5ZXJHcm91cEZhY3RvcnkiLCJkZXBzIiwiRGF0YXNldExheWVyU2VjdGlvbiIsIkRhdGFzZXRMYXllckdyb3VwIiwicHJvcHMiLCJkYXRhc2V0cyIsInNob3dEYXRhc2V0VGFibGUiLCJsYXllcnMiLCJ1cGRhdGVUYWJsZUNvbG9yIiwic2hvd0RlbGV0ZURhdGFzZXQiLCJyZW1vdmVEYXRhc2V0IiwibGF5ZXJPcmRlciIsImxheWVyQ2xhc3NlcyIsInVpU3RhdGVBY3Rpb25zIiwidmlzU3RhdGVBY3Rpb25zIiwibWFwU3RhdGVBY3Rpb25zIiwiZGF0YXNldExheWVyU2VjdGlvbkRhdGEiLCJ1c2VNZW1vIiwidmFsdWVzIiwibWFwIiwiZGF0YXNldCIsImRhdGFzZXRMYXllcnMiLCJsYXllciIsImNvbmZpZyIsImRhdGFJZCIsImlkIiwiZmlsdGVyIiwiQm9vbGVhbiIsImNyZWF0ZUVsZW1lbnQiLCJGcmFnbWVudCIsImRsc0RhdGEiLCJrZXkiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2lkZS1wYW5lbC9sYXllci1wYW5lbC9kYXRhc2V0LWxheWVyLWdyb3VwLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQgUmVhY3QsIHt1c2VNZW1vfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBEYXRhc2V0TGF5ZXJTZWN0aW9uRmFjdG9yeSBmcm9tICcuL2RhdGFzZXQtbGF5ZXItc2VjdGlvbic7XG5pbXBvcnQge0xheWVyLCBMYXllckNsYXNzZXNUeXBlfSBmcm9tICdAa2VwbGVyLmdsL2xheWVycyc7XG5pbXBvcnQge1VJU3RhdGVBY3Rpb25zLCBWaXNTdGF0ZUFjdGlvbnMsIEFjdGlvbkhhbmRsZXIsIE1hcFN0YXRlQWN0aW9uc30gZnJvbSAnQGtlcGxlci5nbC9hY3Rpb25zJztcbmltcG9ydCB7S2VwbGVyVGFibGUsIERhdGFzZXRzfSBmcm9tICdAa2VwbGVyLmdsL3RhYmxlJztcblxudHlwZSBEYXRhc2V0TGF5ZXJHcm91cFByb3BzID0ge1xuICBkYXRhc2V0czogRGF0YXNldHM7XG4gIGxheWVyczogTGF5ZXJbXTtcbiAgbGF5ZXJPcmRlcjogc3RyaW5nW107XG4gIGxheWVyQ2xhc3NlczogTGF5ZXJDbGFzc2VzVHlwZTtcbiAgc2hvd0RlbGV0ZURhdGFzZXQ6IGJvb2xlYW47XG4gIHJlbW92ZURhdGFzZXQ6IEFjdGlvbkhhbmRsZXI8dHlwZW9mIFVJU3RhdGVBY3Rpb25zLm9wZW5EZWxldGVNb2RhbD47XG4gIHNob3dEYXRhc2V0VGFibGU6IEFjdGlvbkhhbmRsZXI8dHlwZW9mIFZpc1N0YXRlQWN0aW9ucy5zaG93RGF0YXNldFRhYmxlPjtcbiAgdXBkYXRlVGFibGVDb2xvcjogQWN0aW9uSGFuZGxlcjx0eXBlb2YgVmlzU3RhdGVBY3Rpb25zLnVwZGF0ZVRhYmxlQ29sb3I+O1xuICB1aVN0YXRlQWN0aW9uczogdHlwZW9mIFVJU3RhdGVBY3Rpb25zO1xuICB2aXNTdGF0ZUFjdGlvbnM6IHR5cGVvZiBWaXNTdGF0ZUFjdGlvbnM7XG4gIG1hcFN0YXRlQWN0aW9uczogdHlwZW9mIE1hcFN0YXRlQWN0aW9ucztcbn07XG5cbkRhdGFzZXRMYXllckdyb3VwRmFjdG9yeS5kZXBzID0gW0RhdGFzZXRMYXllclNlY3Rpb25GYWN0b3J5XTtcblxuZnVuY3Rpb24gRGF0YXNldExheWVyR3JvdXBGYWN0b3J5KFxuICBEYXRhc2V0TGF5ZXJTZWN0aW9uOiBSZXR1cm5UeXBlPHR5cGVvZiBEYXRhc2V0TGF5ZXJTZWN0aW9uRmFjdG9yeT5cbikge1xuICBjb25zdCBEYXRhc2V0TGF5ZXJHcm91cDogUmVhY3QuRkM8RGF0YXNldExheWVyR3JvdXBQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgZGF0YXNldHMsXG4gICAgICBzaG93RGF0YXNldFRhYmxlLFxuICAgICAgbGF5ZXJzLFxuICAgICAgdXBkYXRlVGFibGVDb2xvcixcbiAgICAgIHNob3dEZWxldGVEYXRhc2V0LFxuICAgICAgcmVtb3ZlRGF0YXNldCxcbiAgICAgIGxheWVyT3JkZXIsXG4gICAgICBsYXllckNsYXNzZXMsXG4gICAgICB1aVN0YXRlQWN0aW9ucyxcbiAgICAgIHZpc1N0YXRlQWN0aW9ucyxcbiAgICAgIG1hcFN0YXRlQWN0aW9uc1xuICAgIH0gPSBwcm9wcztcblxuICAgIGNvbnN0IGRhdGFzZXRMYXllclNlY3Rpb25EYXRhID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhkYXRhc2V0cykubWFwKChkYXRhc2V0OiBLZXBsZXJUYWJsZSkgPT4ge1xuICAgICAgICAvLyBHbG9iYWwgbGF5ZXIgb3JkZXIgd2lsbCBjb250YWluIHRoZSBjb3JyZWN0IG9yZGVyIG9mIGxheWVyc1xuICAgICAgICAvLyBXZSBqdXN0IGVtcHR5IHRoZSBwb3NpdGlvbnMgaW4gbGF5ZXJzIGFycmF5IChmb3IgZWFjaCBkYXRhc2V0KVxuICAgICAgICAvLyB3aGVyZSB0aGUgbGF5ZXIgZG9lc24ndCBiZWxvbmcgdG8gYSBkYXRhc2V0IGFuZCBzZXQgaXQgdG8gbnVsbFxuICAgICAgICBjb25zdCBkYXRhc2V0TGF5ZXJzID0gbGF5ZXJzXG4gICAgICAgICAgLm1hcChsYXllciA9PiAobGF5ZXIuY29uZmlnLmRhdGFJZCA9PT0gZGF0YXNldC5pZCA/IGxheWVyIDogbnVsbCkpXG4gICAgICAgICAgLmZpbHRlcihsYXllciA9PiBCb29sZWFuKGxheWVyKSk7XG5cbiAgICAgICAgcmV0dXJuIHtkYXRhc2V0LCBkYXRhc2V0TGF5ZXJzfTtcbiAgICAgIH0pO1xuICAgIH0sIFtkYXRhc2V0cywgbGF5ZXJzXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAge2RhdGFzZXRMYXllclNlY3Rpb25EYXRhLm1hcChkbHNEYXRhID0+IChcbiAgICAgICAgICA8RGF0YXNldExheWVyU2VjdGlvblxuICAgICAgICAgICAga2V5PXtkbHNEYXRhLmRhdGFzZXQuaWR9XG4gICAgICAgICAgICBkYXRhc2V0PXtkbHNEYXRhLmRhdGFzZXR9XG4gICAgICAgICAgICBsYXllcnM9e2Rsc0RhdGEuZGF0YXNldExheWVycyBhcyBMYXllcltdfVxuICAgICAgICAgICAgZGF0YXNldHM9e2RhdGFzZXRzfVxuICAgICAgICAgICAgc2hvd0RhdGFzZXRUYWJsZT17c2hvd0RhdGFzZXRUYWJsZX1cbiAgICAgICAgICAgIHVwZGF0ZVRhYmxlQ29sb3I9e3VwZGF0ZVRhYmxlQ29sb3J9XG4gICAgICAgICAgICBzaG93RGVsZXRlRGF0YXNldD17c2hvd0RlbGV0ZURhdGFzZXR9XG4gICAgICAgICAgICByZW1vdmVEYXRhc2V0PXtyZW1vdmVEYXRhc2V0fVxuICAgICAgICAgICAgbGF5ZXJPcmRlcj17bGF5ZXJPcmRlcn1cbiAgICAgICAgICAgIGxheWVyQ2xhc3Nlcz17bGF5ZXJDbGFzc2VzfVxuICAgICAgICAgICAgdWlTdGF0ZUFjdGlvbnM9e3VpU3RhdGVBY3Rpb25zfVxuICAgICAgICAgICAgdmlzU3RhdGVBY3Rpb25zPXt2aXNTdGF0ZUFjdGlvbnN9XG4gICAgICAgICAgICBtYXBTdGF0ZUFjdGlvbnM9e21hcFN0YXRlQWN0aW9uc31cbiAgICAgICAgICAvPlxuICAgICAgICApKX1cbiAgICAgIDwvPlxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIERhdGFzZXRMYXllckdyb3VwO1xufVxuXG5leHBvcnQgZGVmYXVsdCBEYXRhc2V0TGF5ZXJHcm91cEZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBR0EsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQUMsb0JBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUFpRSxTQUFBRyx5QkFBQUMsQ0FBQTtFQUFBLHlCQUFBQyxPQUFBO0VBQUEsSUFBQUMsQ0FBQSxPQUFBRCxPQUFBO0lBQUFFLENBQUEsT0FBQUYsT0FBQTtFQUFBLFFBQUFGLHdCQUFBLFlBQUFBLHlCQUFBQyxDQUFBO0lBQUEsT0FBQUEsQ0FBQSxHQUFBRyxDQUFBLEdBQUFELENBQUE7RUFBQSxHQUFBRixDQUFBO0FBQUE7QUFBQSxTQUFBTCx3QkFBQUssQ0FBQSxFQUFBRSxDQUFBO0VBQUEsS0FBQUEsQ0FBQSxJQUFBRixDQUFBLElBQUFBLENBQUEsQ0FBQUksVUFBQSxTQUFBSixDQUFBO0VBQUEsYUFBQUEsQ0FBQSxnQkFBQUssT0FBQSxDQUFBTCxDQUFBLDBCQUFBQSxDQUFBO0lBQUEsV0FBQUE7RUFBQTtFQUFBLElBQUFHLENBQUEsR0FBQUosd0JBQUEsQ0FBQUcsQ0FBQTtFQUFBLElBQUFDLENBQUEsSUFBQUEsQ0FBQSxDQUFBRyxHQUFBLENBQUFOLENBQUEsVUFBQUcsQ0FBQSxDQUFBSSxHQUFBLENBQUFQLENBQUE7RUFBQSxJQUFBUSxDQUFBO01BQUFDLFNBQUE7SUFBQTtJQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsY0FBQSxJQUFBRCxNQUFBLENBQUFFLHdCQUFBO0VBQUEsU0FBQUMsQ0FBQSxJQUFBZCxDQUFBLG9CQUFBYyxDQUFBLE9BQUFDLGNBQUEsQ0FBQUMsSUFBQSxDQUFBaEIsQ0FBQSxFQUFBYyxDQUFBO0lBQUEsSUFBQUcsQ0FBQSxHQUFBUCxDQUFBLEdBQUFDLE1BQUEsQ0FBQUUsd0JBQUEsQ0FBQWIsQ0FBQSxFQUFBYyxDQUFBO0lBQUFHLENBQUEsS0FBQUEsQ0FBQSxDQUFBVixHQUFBLElBQUFVLENBQUEsQ0FBQUMsR0FBQSxJQUFBUCxNQUFBLENBQUFDLGNBQUEsQ0FBQUosQ0FBQSxFQUFBTSxDQUFBLEVBQUFHLENBQUEsSUFBQVQsQ0FBQSxDQUFBTSxDQUFBLElBQUFkLENBQUEsQ0FBQWMsQ0FBQTtFQUFBO0VBQUEsT0FBQU4sQ0FBQSxjQUFBUixDQUFBLEVBQUFHLENBQUEsSUFBQUEsQ0FBQSxDQUFBZSxHQUFBLENBQUFsQixDQUFBLEVBQUFRLENBQUEsR0FBQUEsQ0FBQTtBQUFBO0FBTGpFO0FBQ0E7O0FBdUJBVyx3QkFBd0IsQ0FBQ0MsSUFBSSxHQUFHLENBQUN2QixvQkFBQSxXQUEwQixDQUFDO0FBRTVELFNBQVNzQix3QkFBd0JBLENBQy9CRSxtQkFBa0UsRUFDbEU7RUFDQSxJQUFNQyxpQkFBbUQsR0FBRyxTQUF0REEsaUJBQW1EQSxDQUFHQyxLQUFLLEVBQUk7SUFDbkUsSUFDRUMsUUFBUSxHQVdORCxLQUFLLENBWFBDLFFBQVE7TUFDUkMsZ0JBQWdCLEdBVWRGLEtBQUssQ0FWUEUsZ0JBQWdCO01BQ2hCQyxNQUFNLEdBU0pILEtBQUssQ0FUUEcsTUFBTTtNQUNOQyxnQkFBZ0IsR0FRZEosS0FBSyxDQVJQSSxnQkFBZ0I7TUFDaEJDLGlCQUFpQixHQU9mTCxLQUFLLENBUFBLLGlCQUFpQjtNQUNqQkMsYUFBYSxHQU1YTixLQUFLLENBTlBNLGFBQWE7TUFDYkMsVUFBVSxHQUtSUCxLQUFLLENBTFBPLFVBQVU7TUFDVkMsWUFBWSxHQUlWUixLQUFLLENBSlBRLFlBQVk7TUFDWkMsY0FBYyxHQUdaVCxLQUFLLENBSFBTLGNBQWM7TUFDZEMsZUFBZSxHQUViVixLQUFLLENBRlBVLGVBQWU7TUFDZkMsZUFBZSxHQUNiWCxLQUFLLENBRFBXLGVBQWU7SUFHakIsSUFBTUMsdUJBQXVCLEdBQUcsSUFBQXpDLE1BQUEsQ0FBQTBDLE9BQU8sRUFBQyxZQUFNO01BQzVDLE9BQU96QixNQUFNLENBQUMwQixNQUFNLENBQUNiLFFBQVEsQ0FBQyxDQUFDYyxHQUFHLENBQUMsVUFBQ0MsT0FBb0IsRUFBSztRQUMzRDtRQUNBO1FBQ0E7UUFDQSxJQUFNQyxhQUFhLEdBQUdkLE1BQU0sQ0FDekJZLEdBQUcsQ0FBQyxVQUFBRyxLQUFLO1VBQUEsT0FBS0EsS0FBSyxDQUFDQyxNQUFNLENBQUNDLE1BQU0sS0FBS0osT0FBTyxDQUFDSyxFQUFFLEdBQUdILEtBQUssR0FBRyxJQUFJO1FBQUEsQ0FBQyxDQUFDLENBQ2pFSSxNQUFNLENBQUMsVUFBQUosS0FBSztVQUFBLE9BQUlLLE9BQU8sQ0FBQ0wsS0FBSyxDQUFDO1FBQUEsRUFBQztRQUVsQyxPQUFPO1VBQUNGLE9BQU8sRUFBUEEsT0FBTztVQUFFQyxhQUFhLEVBQWJBO1FBQWEsQ0FBQztNQUNqQyxDQUFDLENBQUM7SUFDSixDQUFDLEVBQUUsQ0FBQ2hCLFFBQVEsRUFBRUUsTUFBTSxDQUFDLENBQUM7SUFFdEIsb0JBQ0VoQyxNQUFBLFlBQUFxRCxhQUFBLENBQUFyRCxNQUFBLFlBQUFzRCxRQUFBLFFBQ0diLHVCQUF1QixDQUFDRyxHQUFHLENBQUMsVUFBQVcsT0FBTztNQUFBLG9CQUNsQ3ZELE1BQUEsWUFBQXFELGFBQUEsQ0FBQzFCLG1CQUFtQjtRQUNsQjZCLEdBQUcsRUFBRUQsT0FBTyxDQUFDVixPQUFPLENBQUNLLEVBQUc7UUFDeEJMLE9BQU8sRUFBRVUsT0FBTyxDQUFDVixPQUFRO1FBQ3pCYixNQUFNLEVBQUV1QixPQUFPLENBQUNULGFBQXlCO1FBQ3pDaEIsUUFBUSxFQUFFQSxRQUFTO1FBQ25CQyxnQkFBZ0IsRUFBRUEsZ0JBQWlCO1FBQ25DRSxnQkFBZ0IsRUFBRUEsZ0JBQWlCO1FBQ25DQyxpQkFBaUIsRUFBRUEsaUJBQWtCO1FBQ3JDQyxhQUFhLEVBQUVBLGFBQWM7UUFDN0JDLFVBQVUsRUFBRUEsVUFBVztRQUN2QkMsWUFBWSxFQUFFQSxZQUFhO1FBQzNCQyxjQUFjLEVBQUVBLGNBQWU7UUFDL0JDLGVBQWUsRUFBRUEsZUFBZ0I7UUFDakNDLGVBQWUsRUFBRUE7TUFBZ0IsQ0FDbEMsQ0FBQztJQUFBLENBQ0gsQ0FDRCxDQUFDO0VBRVAsQ0FBQztFQUVELE9BQU9aLGlCQUFpQjtBQUMxQjtBQUFDLElBQUE2QixRQUFBLEdBQUFDLE9BQUEsY0FFY2pDLHdCQUF3QiIsImlnbm9yZUxpc3QiOltdfQ==