"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ColumnModeConfigFactory = ColumnModeConfigFactory;
exports["default"] = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _styledComponents = _interopRequireDefault(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/styled-components"));
var _styledComponents2 = require("../../common/styled-components");
var _checkbox = _interopRequireDefault(require("../../common/checkbox"));
var _panelHeaderAction = _interopRequireDefault(require("../panel-header-action"));
var _layerColumnConfig = _interopRequireDefault(require("./layer-column-config"));
var _localization = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/localization/src");
var _icons = require("../../common/icons");
var _templateObject, _templateObject2, _templateObject3; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      (0, _defineProperty2["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
}
var TopRow = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  justify-content: space-between;\n"])));
var Separator = (0, _styledComponents["default"])(function (_ref) {
  var children = _ref.children,
    className = _ref.className;
  return /*#__PURE__*/_react["default"].createElement("div", {
    className: className
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "separator-line-cell"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "separator-line"
  })), /*#__PURE__*/_react["default"].createElement("div", {
    className: "separator-content"
  }, children), /*#__PURE__*/_react["default"].createElement("div", {
    className: "separator-line-cell"
  }, /*#__PURE__*/_react["default"].createElement("div", {
    className: "separator-line"
  })));
})(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  flex-direction: row;\n  & > * + * {\n    margin-left: 10px;\n  }\n  & > .separator-line-cell {\n    display: flex;\n    flex-grow: 1;\n    align-items: center;\n  }\n  & > .separator-content {\n    color: ", ";\n  }\n  & > .separator-line-cell > .separator-line {\n    display: flex;\n    border-bottom: 1px solid ", ";\n    width: 100%;\n    line-height: 1px;\n    height: 1px;\n  }\n"])), function (props) {
  return props.theme.labelColor;
}, function (props) {
  return props.theme.labelColor;
});
var ConfigPanesContainer = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  flex-direction: column;\n  & > * + * {\n    margin-top: 10px;\n  }\n  fieldset {\n    border: 1px solid ", ";\n    margin: 0;\n  }\n  legend {\n    display: flex;\n    label {\n      color: ", ";\n    }\n  }\n"])), function (props) {
  return props.theme.labelColor;
}, function (props) {
  return props.theme.labelColor;
});
ColumnModeConfigFactory.deps = [_panelHeaderAction["default"]];
function ColumnModeConfigFactory(PanelHeaderAction) {
  var ColumnModeConfig = function ColumnModeConfig(_ref2) {
    var id = _ref2.id,
      supportedColumnModes = _ref2.supportedColumnModes,
      selectedColumnMode = _ref2.selectedColumnMode,
      columns = _ref2.columns,
      renderColumnConfig = _ref2.renderColumnConfig,
      selectColumnMode = _ref2.selectColumnMode,
      _ref2$getHelpHandler = _ref2.getHelpHandler,
      getHelpHandler = _ref2$getHelpHandler === void 0 ? function () {
        return null;
      } : _ref2$getHelpHandler;
    var columnModes = (0, _react.useMemo)(function () {
      return supportedColumnModes ? supportedColumnModes.map(function (_ref3) {
        var key = _ref3.key,
          label = _ref3.label,
          requiredColumns = _ref3.requiredColumns,
          optionalColumns = _ref3.optionalColumns;
        var allColumns = (requiredColumns || []).concat(optionalColumns || []).reduce(function (acc, k) {
          acc[k] = columns[k];
          return acc;
        }, {});
        return {
          key: key,
          label: label,
          columns: allColumns
        };
      }) : Object.keys(columns).length > 0 ? [{
        key: 'default',
        label: '',
        columns: columns
      }] : [];
    }, [supportedColumnModes, columns]);
    return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, columnModes.length > 0 ? /*#__PURE__*/_react["default"].createElement(TopRow, null, /*#__PURE__*/_react["default"].createElement(_styledComponents2.PanelLabel, null, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
      id: 'columns.title'
    })), /*#__PURE__*/_react["default"].createElement(_styledComponents2.PanelLabel, null, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
      id: "layer.required"
    }))) : null, /*#__PURE__*/_react["default"].createElement(ConfigPanesContainer, null, columnModes.map(function (modeConfig, i) {
      var columnMode = modeConfig.key,
        label = modeConfig.label;
      var isSelected = selectedColumnMode === columnMode || columnModes.length === 1;
      var columnPanel = renderColumnConfig(modeConfig, isSelected);
      var helpHandler = getHelpHandler(modeConfig);
      var selectColumnModeHandler = function selectColumnModeHandler() {
        return selectColumnMode(modeConfig);
      };
      return /*#__PURE__*/_react["default"].createElement(_react.Fragment, {
        key: columnMode
      }, i > 0 ? /*#__PURE__*/_react["default"].createElement(Separator, null, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
        id: "layer.columnModesSeparator"
      })) : null, columnModes.length > 1 ? /*#__PURE__*/_react["default"].createElement("div", {
        className: "layer-column-mode-panel"
      }, /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledPanelHeader, {
        className: "interaction-panel__header"
      }, /*#__PURE__*/_react["default"].createElement(_styledComponents2.PanelHeaderContent, {
        className: "interaction-panel__header__content"
      }, /*#__PURE__*/_react["default"].createElement(_checkbox["default"], {
        type: "radio",
        name: "layer-".concat(id, "-input-modes"),
        checked: isSelected,
        id: "".concat(id, "-input-column-").concat(columnMode),
        label: label,
        onChange: selectColumnModeHandler
      })), helpHandler ? /*#__PURE__*/_react["default"].createElement("div", {
        className: "interaction-panel__header__actions"
      }, /*#__PURE__*/_react["default"].createElement(PanelHeaderAction, {
        id: "".concat(id, "-help-button"),
        className: "layer__help-button",
        tooltip: 'layerConfiguration.howTo',
        onClick: helpHandler,
        IconComponent: _icons.Help
      })) : null), /*#__PURE__*/_react["default"].createElement(_styledComponents2.PanelContent, {
        className: "interaction-panel__content"
      }, columnPanel)) : columnPanel);
    })));
  };
  return ColumnModeConfig;
}
LayerColumnModeConfigFactory.deps = [_layerColumnConfig["default"], ColumnModeConfigFactory];
function LayerColumnModeConfigFactory(LayerColumnConfig, ColumnModeConfig) {
  var LayerColumnModeConfig = function LayerColumnModeConfig(_ref4) {
    var id = _ref4.id,
      layer = _ref4.layer,
      supportedColumnModes = _ref4.supportedColumnModes,
      layerConfig = _ref4.layerConfig,
      fields = _ref4.fields,
      fieldPairs = _ref4.fieldPairs,
      openModal = _ref4.openModal,
      _updateLayerConfig = _ref4.updateLayerConfig;
    var columns = layerConfig.columns;
    var selectColumnMode = (0, _react.useCallback)(function (_ref5) {
      var columnMode = _ref5.key;
      _updateLayerConfig({
        columnMode: columnMode
      });
    }, [_updateLayerConfig]);
    var renderColumnConfig = (0, _react.useCallback)(function (_ref6, isSelected) {
      var columnMode = _ref6.key,
        cols = _ref6.columns;
      return /*#__PURE__*/_react["default"].createElement(LayerColumnConfig, {
        columnPairs: layer.columnPairs,
        columns: cols,
        assignColumnPairs: layer.assignColumnPairs.bind(layer),
        assignColumn: layer.assignColumn.bind(layer),
        columnLabels: layer.columnLabels,
        fields: fields,
        fieldPairs: fieldPairs,
        updateLayerConfig: function updateLayerConfig(config) {
          return _updateLayerConfig(_objectSpread(_objectSpread({}, config), !isSelected && columnMode !== 'defaut' ? {
            columnMode: columnMode
          } : {}));
        },
        isActive: isSelected
      });
    }, [layer, _updateLayerConfig, fieldPairs, fields]);
    var getHelpHandler = (0, _react.useCallback)(function (_ref7) {
      var _layer$layerInfoModal;
      var columnMode = _ref7.key;
      var modal = (_layer$layerInfoModal = layer.layerInfoModal) === null || _layer$layerInfoModal === void 0 ? void 0 : _layer$layerInfoModal[columnMode];
      if (modal) {
        return function () {
          return openModal(modal);
        };
      }
      return null;
    }, [layer, openModal]);
    return /*#__PURE__*/_react["default"].createElement(ColumnModeConfig, {
      id: id,
      supportedColumnModes: supportedColumnModes,
      selectedColumnMode: layerConfig.columnMode,
      columns: columns,
      selectColumnMode: selectColumnMode,
      renderColumnConfig: renderColumnConfig,
      getHelpHandler: getHelpHandler
    });
  };
  return LayerColumnModeConfig;
}
var _default = exports["default"] = LayerColumnModeConfigFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfc3R5bGVkQ29tcG9uZW50czIiLCJfY2hlY2tib3giLCJfcGFuZWxIZWFkZXJBY3Rpb24iLCJfbGF5ZXJDb2x1bW5Db25maWciLCJfbG9jYWxpemF0aW9uIiwiX2ljb25zIiwiX3RlbXBsYXRlT2JqZWN0IiwiX3RlbXBsYXRlT2JqZWN0MiIsIl90ZW1wbGF0ZU9iamVjdDMiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJvd25LZXlzIiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm8iLCJmaWx0ZXIiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJUb3BSb3ciLCJkaXYiLCJfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsMiIsIlNlcGFyYXRvciIsIl9yZWYiLCJjaGlsZHJlbiIsImNsYXNzTmFtZSIsImNyZWF0ZUVsZW1lbnQiLCJwcm9wcyIsInRoZW1lIiwibGFiZWxDb2xvciIsIkNvbmZpZ1BhbmVzQ29udGFpbmVyIiwiQ29sdW1uTW9kZUNvbmZpZ0ZhY3RvcnkiLCJkZXBzIiwiUGFuZWxIZWFkZXJBY3Rpb24iLCJDb2x1bW5Nb2RlQ29uZmlnIiwiX3JlZjIiLCJpZCIsInN1cHBvcnRlZENvbHVtbk1vZGVzIiwic2VsZWN0ZWRDb2x1bW5Nb2RlIiwiY29sdW1ucyIsInJlbmRlckNvbHVtbkNvbmZpZyIsInNlbGVjdENvbHVtbk1vZGUiLCJfcmVmMiRnZXRIZWxwSGFuZGxlciIsImdldEhlbHBIYW5kbGVyIiwiY29sdW1uTW9kZXMiLCJ1c2VNZW1vIiwibWFwIiwiX3JlZjMiLCJrZXkiLCJsYWJlbCIsInJlcXVpcmVkQ29sdW1ucyIsIm9wdGlvbmFsQ29sdW1ucyIsImFsbENvbHVtbnMiLCJjb25jYXQiLCJyZWR1Y2UiLCJhY2MiLCJrIiwiRnJhZ21lbnQiLCJQYW5lbExhYmVsIiwiRm9ybWF0dGVkTWVzc2FnZSIsIm1vZGVDb25maWciLCJjb2x1bW5Nb2RlIiwiaXNTZWxlY3RlZCIsImNvbHVtblBhbmVsIiwiaGVscEhhbmRsZXIiLCJzZWxlY3RDb2x1bW5Nb2RlSGFuZGxlciIsIlN0eWxlZFBhbmVsSGVhZGVyIiwiUGFuZWxIZWFkZXJDb250ZW50IiwidHlwZSIsIm5hbWUiLCJjaGVja2VkIiwib25DaGFuZ2UiLCJ0b29sdGlwIiwib25DbGljayIsIkljb25Db21wb25lbnQiLCJIZWxwIiwiUGFuZWxDb250ZW50IiwiTGF5ZXJDb2x1bW5Nb2RlQ29uZmlnRmFjdG9yeSIsIkxheWVyQ29sdW1uQ29uZmlnIiwiTGF5ZXJDb2x1bW5Nb2RlQ29uZmlnIiwiX3JlZjQiLCJsYXllciIsImxheWVyQ29uZmlnIiwiZmllbGRzIiwiZmllbGRQYWlycyIsIm9wZW5Nb2RhbCIsIl91cGRhdGVMYXllckNvbmZpZyIsInVwZGF0ZUxheWVyQ29uZmlnIiwidXNlQ2FsbGJhY2siLCJfcmVmNSIsIl9yZWY2IiwiY29scyIsImNvbHVtblBhaXJzIiwiYXNzaWduQ29sdW1uUGFpcnMiLCJiaW5kIiwiYXNzaWduQ29sdW1uIiwiY29sdW1uTGFiZWxzIiwiY29uZmlnIiwiaXNBY3RpdmUiLCJfcmVmNyIsIl9sYXllciRsYXllckluZm9Nb2RhbCIsIm1vZGFsIiwibGF5ZXJJbmZvTW9kYWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2lkZS1wYW5lbC9sYXllci1wYW5lbC9sYXllci1jb2x1bW4tbW9kZS1jb25maWcudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBSZWFjdCwge0ZyYWdtZW50LCB1c2VDYWxsYmFjaywgdXNlTWVtb30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5cbmltcG9ydCB7XG4gIFBhbmVsSGVhZGVyQ29udGVudCxcbiAgUGFuZWxMYWJlbCxcbiAgU3R5bGVkUGFuZWxIZWFkZXIsXG4gIFBhbmVsQ29udGVudFxufSBmcm9tICcuLi8uLi9jb21tb24vc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IENoZWNrYm94IGZyb20gJy4uLy4uL2NvbW1vbi9jaGVja2JveCc7XG5pbXBvcnQge01pbmltYWxGaWVsZH0gZnJvbSAnLi4vLi4vY29tbW9uL2ZpZWxkLXNlbGVjdG9yJztcbmltcG9ydCBQYW5lbEhlYWRlckFjdGlvbkZhY3RvcnkgZnJvbSAnLi4vcGFuZWwtaGVhZGVyLWFjdGlvbic7XG5pbXBvcnQgTGF5ZXJDb2x1bW5Db25maWdGYWN0b3J5IGZyb20gJy4vbGF5ZXItY29sdW1uLWNvbmZpZyc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ0BrZXBsZXIuZ2wvbG9jYWxpemF0aW9uJztcbmltcG9ydCB7TGF5ZXIsIExheWVySW5mb01vZGFsLCBMYXllckJhc2VDb25maWd9IGZyb20gJ0BrZXBsZXIuZ2wvbGF5ZXJzJztcbmltcG9ydCB7U3VwcG9ydGVkQ29sdW1uTW9kZSwgRmllbGRQYWlyLCBMYXllckNvbHVtbnN9IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuaW1wb3J0IHtCYXNlQ29tcG9uZW50UHJvcHN9IGZyb20gJy4uLy4uL3R5cGVzJztcblxuaW1wb3J0IHtIZWxwfSBmcm9tICcuLi8uLi9jb21tb24vaWNvbnMnO1xuXG5jb25zdCBUb3BSb3cgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG5gO1xuXG5jb25zdCBTZXBhcmF0b3IgPSBzdHlsZWQoKHtjaGlsZHJlbiwgY2xhc3NOYW1lfTogQmFzZUNvbXBvbmVudFByb3BzKSA9PiAoXG4gIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWV9PlxuICAgIDxkaXYgY2xhc3NOYW1lPVwic2VwYXJhdG9yLWxpbmUtY2VsbFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJzZXBhcmF0b3ItbGluZVwiIC8+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzc05hbWU9XCJzZXBhcmF0b3ItY29udGVudFwiPntjaGlsZHJlbn08L2Rpdj5cbiAgICA8ZGl2IGNsYXNzTmFtZT1cInNlcGFyYXRvci1saW5lLWNlbGxcIj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwic2VwYXJhdG9yLWxpbmVcIiAvPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbikpYFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAmID4gKiArICoge1xuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICB9XG4gICYgPiAuc2VwYXJhdG9yLWxpbmUtY2VsbCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBmbGV4LWdyb3c6IDE7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgfVxuICAmID4gLnNlcGFyYXRvci1jb250ZW50IHtcbiAgICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5sYWJlbENvbG9yfTtcbiAgfVxuICAmID4gLnNlcGFyYXRvci1saW5lLWNlbGwgPiAuc2VwYXJhdG9yLWxpbmUge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICR7cHJvcHMgPT4gcHJvcHMudGhlbWUubGFiZWxDb2xvcn07XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgbGluZS1oZWlnaHQ6IDFweDtcbiAgICBoZWlnaHQ6IDFweDtcbiAgfVxuYDtcblxuY29uc3QgQ29uZmlnUGFuZXNDb250YWluZXIgPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAmID4gKiArICoge1xuICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gIH1cbiAgZmllbGRzZXQge1xuICAgIGJvcmRlcjogMXB4IHNvbGlkICR7cHJvcHMgPT4gcHJvcHMudGhlbWUubGFiZWxDb2xvcn07XG4gICAgbWFyZ2luOiAwO1xuICB9XG4gIGxlZ2VuZCB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBsYWJlbCB7XG4gICAgICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5sYWJlbENvbG9yfTtcbiAgICB9XG4gIH1cbmA7XG5cbmludGVyZmFjZSBGaWVsZE9wdGlvbiBleHRlbmRzIE1pbmltYWxGaWVsZCB7XG4gIGZpZWxkSWR4OiBudW1iZXI7XG59XG5leHBvcnQgdHlwZSBTdXBwb3J0ZWRDb2x1bW5Nb2RlQ29uZmlnID0ge1xuICBrZXk6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgY29sdW1uczogTGF5ZXJDb2x1bW5zO1xufTtcbmV4cG9ydCB0eXBlIENvbHVtbk1vZGVDb25maWdQcm9wcyA9IHtcbiAgc3VwcG9ydGVkQ29sdW1uTW9kZXM6IFN1cHBvcnRlZENvbHVtbk1vZGVbXSB8IG51bGw7XG4gIHNlbGVjdGVkQ29sdW1uTW9kZT86IHN0cmluZztcbiAgaWQ6IHN0cmluZztcbiAgY29sdW1uczogTGF5ZXJDb2x1bW5zO1xuICByZW5kZXJDb2x1bW5Db25maWc6IChcbiAgICBtb2RlOiB7a2V5OiBzdHJpbmc7IGxhYmVsOiBzdHJpbmc7IGNvbHVtbnM6IGFueX0sXG4gICAgc2VsZWN0ZWQ6IGJvb2xlYW5cbiAgKSA9PiBKU1guRWxlbWVudDtcbiAgc2VsZWN0Q29sdW1uTW9kZTogKG1vZGU6IFN1cHBvcnRlZENvbHVtbk1vZGVDb25maWcpID0+IHZvaWQ7XG4gIGdldEhlbHBIYW5kbGVyPzogKG1vZGU6IFN1cHBvcnRlZENvbHVtbk1vZGVDb25maWcpID0+ICgoKSA9PiB2b2lkKSB8IG51bGw7XG59O1xuXG5Db2x1bW5Nb2RlQ29uZmlnRmFjdG9yeS5kZXBzID0gW1BhbmVsSGVhZGVyQWN0aW9uRmFjdG9yeV07XG5cbmV4cG9ydCBmdW5jdGlvbiBDb2x1bW5Nb2RlQ29uZmlnRmFjdG9yeShcbiAgUGFuZWxIZWFkZXJBY3Rpb246IFJldHVyblR5cGU8dHlwZW9mIFBhbmVsSGVhZGVyQWN0aW9uRmFjdG9yeT5cbikge1xuICBjb25zdCBDb2x1bW5Nb2RlQ29uZmlnOiBSZWFjdC5GQzxDb2x1bW5Nb2RlQ29uZmlnUHJvcHM+ID0gKHtcbiAgICBpZCxcbiAgICBzdXBwb3J0ZWRDb2x1bW5Nb2RlcyxcbiAgICBzZWxlY3RlZENvbHVtbk1vZGUsXG4gICAgY29sdW1ucyxcbiAgICByZW5kZXJDb2x1bW5Db25maWcsXG4gICAgc2VsZWN0Q29sdW1uTW9kZSxcbiAgICBnZXRIZWxwSGFuZGxlciA9ICgpID0+IG51bGxcbiAgfTogQ29sdW1uTW9kZUNvbmZpZ1Byb3BzKSA9PiB7XG4gICAgY29uc3QgY29sdW1uTW9kZXMgPSB1c2VNZW1vKFxuICAgICAgKCkgPT5cbiAgICAgICAgc3VwcG9ydGVkQ29sdW1uTW9kZXNcbiAgICAgICAgICA/IHN1cHBvcnRlZENvbHVtbk1vZGVzLm1hcCgoe2tleSwgbGFiZWwsIHJlcXVpcmVkQ29sdW1ucywgb3B0aW9uYWxDb2x1bW5zfSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBhbGxDb2x1bW5zID0gKHJlcXVpcmVkQ29sdW1ucyB8fCBbXSlcbiAgICAgICAgICAgICAgICAuY29uY2F0KG9wdGlvbmFsQ29sdW1ucyB8fCBbXSlcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIGspID0+IHtcbiAgICAgICAgICAgICAgICAgIGFjY1trXSA9IGNvbHVtbnNba107XG4gICAgICAgICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgICAgcmV0dXJuIHtrZXksIGxhYmVsLCBjb2x1bW5zOiBhbGxDb2x1bW5zfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgOiBPYmplY3Qua2V5cyhjb2x1bW5zKS5sZW5ndGggPiAwXG4gICAgICAgICAgPyBbe2tleTogJ2RlZmF1bHQnLCBsYWJlbDogJycsIGNvbHVtbnN9XVxuICAgICAgICAgIDogW10sXG4gICAgICBbc3VwcG9ydGVkQ29sdW1uTW9kZXMsIGNvbHVtbnNdXG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICB7Y29sdW1uTW9kZXMubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICA8VG9wUm93PlxuICAgICAgICAgICAgPFBhbmVsTGFiZWw+XG4gICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPXsnY29sdW1ucy50aXRsZSd9IC8+XG4gICAgICAgICAgICA8L1BhbmVsTGFiZWw+XG4gICAgICAgICAgICA8UGFuZWxMYWJlbD5cbiAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9XCJsYXllci5yZXF1aXJlZFwiIC8+XG4gICAgICAgICAgICA8L1BhbmVsTGFiZWw+XG4gICAgICAgICAgPC9Ub3BSb3c+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgICA8Q29uZmlnUGFuZXNDb250YWluZXI+XG4gICAgICAgICAge2NvbHVtbk1vZGVzLm1hcCgobW9kZUNvbmZpZywgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qge2tleTogY29sdW1uTW9kZSwgbGFiZWx9ID0gbW9kZUNvbmZpZztcblxuICAgICAgICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHNlbGVjdGVkQ29sdW1uTW9kZSA9PT0gY29sdW1uTW9kZSB8fCBjb2x1bW5Nb2Rlcy5sZW5ndGggPT09IDE7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW5QYW5lbCA9IHJlbmRlckNvbHVtbkNvbmZpZyhtb2RlQ29uZmlnLCBpc1NlbGVjdGVkKTtcbiAgICAgICAgICAgIGNvbnN0IGhlbHBIYW5kbGVyID0gZ2V0SGVscEhhbmRsZXIobW9kZUNvbmZpZyk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RDb2x1bW5Nb2RlSGFuZGxlciA9ICgpID0+IHNlbGVjdENvbHVtbk1vZGUobW9kZUNvbmZpZyk7XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgIDxGcmFnbWVudCBrZXk9e2NvbHVtbk1vZGV9PlxuICAgICAgICAgICAgICAgIHtpID4gMCA/IChcbiAgICAgICAgICAgICAgICAgIDxTZXBhcmF0b3I+XG4gICAgICAgICAgICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPVwibGF5ZXIuY29sdW1uTW9kZXNTZXBhcmF0b3JcIiAvPlxuICAgICAgICAgICAgICAgICAgPC9TZXBhcmF0b3I+XG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAge2NvbHVtbk1vZGVzLmxlbmd0aCA+IDEgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxheWVyLWNvbHVtbi1tb2RlLXBhbmVsXCI+XG4gICAgICAgICAgICAgICAgICAgIDxTdHlsZWRQYW5lbEhlYWRlciBjbGFzc05hbWU9XCJpbnRlcmFjdGlvbi1wYW5lbF9faGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPFBhbmVsSGVhZGVyQ29udGVudCBjbGFzc05hbWU9XCJpbnRlcmFjdGlvbi1wYW5lbF9faGVhZGVyX19jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8Q2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cInJhZGlvXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT17YGxheWVyLSR7aWR9LWlucHV0LW1vZGVzYH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17aXNTZWxlY3RlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake2lkfS1pbnB1dC1jb2x1bW4tJHtjb2x1bW5Nb2RlfWB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtsYWJlbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3NlbGVjdENvbHVtbk1vZGVIYW5kbGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8L1BhbmVsSGVhZGVyQ29udGVudD5cbiAgICAgICAgICAgICAgICAgICAgICB7aGVscEhhbmRsZXIgPyAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImludGVyYWN0aW9uLXBhbmVsX19oZWFkZXJfX2FjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPFBhbmVsSGVhZGVyQWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9e2Ake2lkfS1oZWxwLWJ1dHRvbmB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibGF5ZXJfX2hlbHAtYnV0dG9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwPXsnbGF5ZXJDb25maWd1cmF0aW9uLmhvd1RvJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtoZWxwSGFuZGxlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJY29uQ29tcG9uZW50PXtIZWxwfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAgICAgIDwvU3R5bGVkUGFuZWxIZWFkZXI+XG4gICAgICAgICAgICAgICAgICAgIDxQYW5lbENvbnRlbnQgY2xhc3NOYW1lPVwiaW50ZXJhY3Rpb24tcGFuZWxfX2NvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7Y29sdW1uUGFuZWx9XG4gICAgICAgICAgICAgICAgICAgIDwvUGFuZWxDb250ZW50PlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIGNvbHVtblBhbmVsXG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9GcmFnbWVudD5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSl9XG4gICAgICAgIDwvQ29uZmlnUGFuZXNDb250YWluZXI+XG4gICAgICA8Lz5cbiAgICApO1xuICB9O1xuXG4gIHJldHVybiBDb2x1bW5Nb2RlQ29uZmlnO1xufVxuXG5leHBvcnQgdHlwZSBMYXllckNvbHVtbk1vZGVDb25maWdQcm9wcyA9IHtcbiAgbGF5ZXI6IExheWVyO1xuICBsYXllckNvbmZpZzogTGF5ZXJCYXNlQ29uZmlnO1xuICBzdXBwb3J0ZWRDb2x1bW5Nb2RlczogU3VwcG9ydGVkQ29sdW1uTW9kZVtdIHwgbnVsbDtcbiAgaWQ6IHN0cmluZztcbiAgZmllbGRzOiBGaWVsZE9wdGlvbltdO1xuICBmaWVsZFBhaXJzPzogRmllbGRQYWlyW107XG4gIG9wZW5Nb2RhbDogKGw6IExheWVySW5mb01vZGFsKSA9PiB2b2lkO1xuICB1cGRhdGVMYXllckNvbmZpZzogKGNvbmZpZzogUGFydGlhbDxMYXllckJhc2VDb25maWc+KSA9PiB2b2lkO1xuICB1cGRhdGVMYXllclR5cGU6ICh0eXBlOiBzdHJpbmcpID0+IHZvaWQ7XG59O1xuXG5MYXllckNvbHVtbk1vZGVDb25maWdGYWN0b3J5LmRlcHMgPSBbTGF5ZXJDb2x1bW5Db25maWdGYWN0b3J5LCBDb2x1bW5Nb2RlQ29uZmlnRmFjdG9yeV07XG5cbmZ1bmN0aW9uIExheWVyQ29sdW1uTW9kZUNvbmZpZ0ZhY3RvcnkoXG4gIExheWVyQ29sdW1uQ29uZmlnOiBSZXR1cm5UeXBlPHR5cGVvZiBMYXllckNvbHVtbkNvbmZpZ0ZhY3Rvcnk+LFxuICBDb2x1bW5Nb2RlQ29uZmlnOiBSZXR1cm5UeXBlPHR5cGVvZiBDb2x1bW5Nb2RlQ29uZmlnRmFjdG9yeT5cbikge1xuICBjb25zdCBMYXllckNvbHVtbk1vZGVDb25maWcgPSAoe1xuICAgIGlkLFxuICAgIGxheWVyLFxuICAgIHN1cHBvcnRlZENvbHVtbk1vZGVzLFxuICAgIGxheWVyQ29uZmlnLFxuICAgIGZpZWxkcyxcbiAgICBmaWVsZFBhaXJzLFxuICAgIG9wZW5Nb2RhbCxcbiAgICB1cGRhdGVMYXllckNvbmZpZ1xuICB9OiBMYXllckNvbHVtbk1vZGVDb25maWdQcm9wcykgPT4ge1xuICAgIGNvbnN0IHtjb2x1bW5zfSA9IGxheWVyQ29uZmlnO1xuXG4gICAgY29uc3Qgc2VsZWN0Q29sdW1uTW9kZSA9IHVzZUNhbGxiYWNrKFxuICAgICAgKHtrZXk6IGNvbHVtbk1vZGV9KSA9PiB7XG4gICAgICAgIHVwZGF0ZUxheWVyQ29uZmlnKHtjb2x1bW5Nb2RlfSk7XG4gICAgICB9LFxuICAgICAgW3VwZGF0ZUxheWVyQ29uZmlnXVxuICAgICk7XG5cbiAgICBjb25zdCByZW5kZXJDb2x1bW5Db25maWcgPSB1c2VDYWxsYmFjayhcbiAgICAgICh7a2V5OiBjb2x1bW5Nb2RlLCBjb2x1bW5zOiBjb2xzfSwgaXNTZWxlY3RlZCkgPT4gKFxuICAgICAgICA8TGF5ZXJDb2x1bW5Db25maWdcbiAgICAgICAgICBjb2x1bW5QYWlycz17bGF5ZXIuY29sdW1uUGFpcnN9XG4gICAgICAgICAgY29sdW1ucz17Y29sc31cbiAgICAgICAgICBhc3NpZ25Db2x1bW5QYWlycz17bGF5ZXIuYXNzaWduQ29sdW1uUGFpcnMuYmluZChsYXllcil9XG4gICAgICAgICAgYXNzaWduQ29sdW1uPXtsYXllci5hc3NpZ25Db2x1bW4uYmluZChsYXllcil9XG4gICAgICAgICAgY29sdW1uTGFiZWxzPXtsYXllci5jb2x1bW5MYWJlbHN9XG4gICAgICAgICAgZmllbGRzPXtmaWVsZHN9XG4gICAgICAgICAgZmllbGRQYWlycz17ZmllbGRQYWlyc31cbiAgICAgICAgICB1cGRhdGVMYXllckNvbmZpZz17Y29uZmlnID0+XG4gICAgICAgICAgICB1cGRhdGVMYXllckNvbmZpZyh7XG4gICAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgICAgLy8gaWYgY29sdW1uIG1vZGUgbm90IGN1cnJlbnRseSBzZWxlY3RlZFxuICAgICAgICAgICAgICAvLyBzZXQgY29sdW1uIG1vZGUgYWxvbmcgd2l0aCB0aGUgY29sdW1uc1xuICAgICAgICAgICAgICAuLi4oIWlzU2VsZWN0ZWQgJiYgY29sdW1uTW9kZSAhPT0gJ2RlZmF1dCcgPyB7Y29sdW1uTW9kZX0gOiB7fSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGlzQWN0aXZlPXtpc1NlbGVjdGVkfVxuICAgICAgICAvPlxuICAgICAgKSxcbiAgICAgIFtsYXllciwgdXBkYXRlTGF5ZXJDb25maWcsIGZpZWxkUGFpcnMsIGZpZWxkc11cbiAgICApO1xuXG4gICAgY29uc3QgZ2V0SGVscEhhbmRsZXIgPSB1c2VDYWxsYmFjayhcbiAgICAgICh7a2V5OiBjb2x1bW5Nb2RlfSkgPT4ge1xuICAgICAgICBjb25zdCBtb2RhbCA9IGxheWVyLmxheWVySW5mb01vZGFsPy5bY29sdW1uTW9kZV07XG4gICAgICAgIGlmIChtb2RhbCkge1xuICAgICAgICAgIHJldHVybiAoKSA9PiBvcGVuTW9kYWwobW9kYWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSxcbiAgICAgIFtsYXllciwgb3Blbk1vZGFsXVxuICAgICk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPENvbHVtbk1vZGVDb25maWdcbiAgICAgICAgaWQ9e2lkfVxuICAgICAgICBzdXBwb3J0ZWRDb2x1bW5Nb2Rlcz17c3VwcG9ydGVkQ29sdW1uTW9kZXN9XG4gICAgICAgIHNlbGVjdGVkQ29sdW1uTW9kZT17bGF5ZXJDb25maWcuY29sdW1uTW9kZX1cbiAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgc2VsZWN0Q29sdW1uTW9kZT17c2VsZWN0Q29sdW1uTW9kZX1cbiAgICAgICAgcmVuZGVyQ29sdW1uQ29uZmlnPXtyZW5kZXJDb2x1bW5Db25maWd9XG4gICAgICAgIGdldEhlbHBIYW5kbGVyPXtnZXRIZWxwSGFuZGxlcn1cbiAgICAgIC8+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gTGF5ZXJDb2x1bW5Nb2RlQ29uZmlnO1xufVxuXG5leHBvcnQgZGVmYXVsdCBMYXllckNvbHVtbk1vZGVDb25maWdGYWN0b3J5O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUdBLElBQUFBLE1BQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGlCQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFFQSxJQUFBRyxrQkFBQSxHQUFBSCxPQUFBO0FBTUEsSUFBQUksU0FBQSxHQUFBRixzQkFBQSxDQUFBRixPQUFBO0FBRUEsSUFBQUssa0JBQUEsR0FBQUgsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFNLGtCQUFBLEdBQUFKLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBTyxhQUFBLEdBQUFQLE9BQUE7QUFLQSxJQUFBUSxNQUFBLEdBQUFSLE9BQUE7QUFBd0MsSUFBQVMsZUFBQSxFQUFBQyxnQkFBQSxFQUFBQyxnQkFBQSxFQXJCeEM7QUFDQTtBQUFBLFNBQUFDLHlCQUFBQyxDQUFBO0VBQUEseUJBQUFDLE9BQUE7RUFBQSxJQUFBQyxDQUFBLE9BQUFELE9BQUE7SUFBQUUsQ0FBQSxPQUFBRixPQUFBO0VBQUEsUUFBQUYsd0JBQUEsWUFBQUEseUJBQUFDLENBQUE7SUFBQSxPQUFBQSxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQTtFQUFBLEdBQUFGLENBQUE7QUFBQTtBQUFBLFNBQUFkLHdCQUFBYyxDQUFB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