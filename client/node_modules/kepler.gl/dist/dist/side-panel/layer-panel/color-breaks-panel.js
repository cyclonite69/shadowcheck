"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = exports.EditButton = exports.ColorBreaksDisplay = exports.CategoricalColorDisplay = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _commonUtils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/common-utils/src");
var _constants = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/constants/src");
var _utils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/utils/src");
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _styledComponents = _interopRequireDefault(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/styled-components"));
var _columnStatsChart = _interopRequireDefault(require("../../common/column-stats-chart"));
var _icons = require("../../common/icons");
var _styledComponents2 = require("../../common/styled-components");
var _customPalette = _interopRequireWildcard(require("./custom-palette"));
var _templateObject, _templateObject2, _templateObject3; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      (0, _defineProperty2["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
}
var StyledColorBreaksPanel = _styledComponents["default"].div.attrs({
  className: 'styled-color-breaks-panel'
})(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  margin-bottom: 10px;\n"])));
var StyledColorBreaksDisplay = _styledComponents["default"].div.attrs({
  className: 'styled-color-breaks-display'
})(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  padding: 8px 12px 0 12px;\n"])));
var ColorBreaksPanelWrapper = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])([""])));
var EditButton = exports.EditButton = function EditButton(_ref) {
  var onClickEdit = _ref.onClickEdit;
  return /*#__PURE__*/_react["default"].createElement(_styledComponents2.Button, {
    className: "editp__button",
    link: true,
    onClick: onClickEdit
  }, /*#__PURE__*/_react["default"].createElement(_icons.Edit, {
    height: "16px"
  }), "Edit");
};
var ColorBreaksDisplay = exports.ColorBreaksDisplay = function ColorBreaksDisplay(_ref2) {
  var currentBreaks = _ref2.currentBreaks,
    onEdit = _ref2.onEdit;
  if (!(0, _utils.isNumericColorBreaks)(currentBreaks)) {
    // don't display color breaks for ordinal breaks, user can change it in custom breaks
    return null;
  }
  return /*#__PURE__*/_react["default"].createElement(StyledColorBreaksDisplay, null, onEdit ? /*#__PURE__*/_react["default"].createElement(EditButton, {
    onClickEdit: onEdit
  }) : null, currentBreaks.map(function (item, index) {
    return /*#__PURE__*/_react["default"].createElement(_customPalette.ColorPaletteItem, {
      className: "disabled",
      key: index
    }, /*#__PURE__*/_react["default"].createElement("div", {
      className: "custom-palette-input__left"
    }, /*#__PURE__*/_react["default"].createElement(_customPalette.ColorSwatch, {
      color: item.data
    }), /*#__PURE__*/_react["default"].createElement(_customPalette.EditableColorRange, {
      item: item,
      isLast: index === currentBreaks.length - 1,
      index: index,
      editable: false
    })));
  }));
};
var CategoricalColorDisplay = exports.CategoricalColorDisplay = function CategoricalColorDisplay(_ref3) {
  var colorMap = _ref3.colorMap,
    onEdit = _ref3.onEdit;
  return /*#__PURE__*/_react["default"].createElement(StyledColorBreaksDisplay, null, onEdit ? /*#__PURE__*/_react["default"].createElement(EditButton, {
    onClickEdit: onEdit
  }) : null, colorMap === null || colorMap === void 0 ? void 0 : colorMap.map(function (cm, index) {
    return /*#__PURE__*/_react["default"].createElement(_customPalette.ColorPaletteItem, {
      className: "disabled",
      key: index
    }, /*#__PURE__*/_react["default"].createElement("div", {
      className: "custom-palette-input__left"
    }, /*#__PURE__*/_react["default"].createElement(_customPalette.ColorSwatch, {
      color: cm[1]
    }), /*#__PURE__*/_react["default"].createElement(_customPalette.CategoricalSelector, {
      index: index,
      selectedValues: (0, _commonUtils.toArray)(cm[0]),
      allValues: [],
      editable: false
    })));
  }));
};
ColorBreaksPanelFactory.deps = [_customPalette["default"], _columnStatsChart["default"]];
function ColorBreaksPanelFactory(CustomPalette, ColumnStatsChart) {
  // eslint-disable-next-line complexity
  var ColorBreaksPanel = function ColorBreaksPanel(_ref4) {
    var _customPalette$name;
    var colorBreaks = _ref4.colorBreaks,
      colorUIConfig = _ref4.colorUIConfig,
      dataset = _ref4.dataset,
      colorField = _ref4.colorField,
      isCustomBreaks = _ref4.isCustomBreaks,
      allBins = _ref4.allBins,
      filteredBins = _ref4.filteredBins,
      isFiltered = _ref4.isFiltered,
      histogramDomain = _ref4.histogramDomain,
      ordinalDomain = _ref4.ordinalDomain,
      setColorUI = _ref4.setColorUI,
      onScaleChange = _ref4.onScaleChange,
      onApply = _ref4.onApply,
      onCancel = _ref4.onCancel;
    var customPalette = colorUIConfig.customPalette,
      showSketcher = colorUIConfig.showSketcher,
      colorRangeConfig = colorUIConfig.colorRangeConfig;
    var isEditingCustomBreaks = Boolean(colorRangeConfig.customBreaks);
    var currentBreaks = (0, _react.useMemo)(function () {
      return isEditingCustomBreaks ? (0, _utils.colorMapToColorBreaks)(customPalette.colorMap) : colorBreaks;
    }, [customPalette.colorMap, isEditingCustomBreaks, colorBreaks]);
    var onClickEditCustomBreaks = (0, _react.useCallback)(function () {
      setColorUI({
        colorRangeConfig: {
          customBreaks: true
        }
      });
    }, [setColorUI]);
    var onCilckCancel = (0, _react.useCallback)(function () {
      setColorUI({
        showSketcher: false,
        colorRangeConfig: {
          customBreaks: false
        }
      });
      onCancel();
    }, [setColorUI, onCancel]);
    var onColumnStatsChartChanged = (0, _react.useCallback)(function (newColorBreaks) {
      var newColors = newColorBreaks.map(function (cb) {
        return cb.data;
      });
      var newColorMap = (0, _utils.colorBreaksToColorMap)(newColorBreaks);
      var newCustomPalette = _objectSpread(_objectSpread({}, customPalette), {}, {
        colorMap: newColorMap,
        colors: newColors
      });

      // update custom pallette editor
      if (!isEditingCustomBreaks) {
        setColorUI({
          colorRangeConfig: {
            customBreaks: true
          },
          customPalette: newCustomPalette
        });
      } else {
        setColorUI({
          customPalette: newCustomPalette
        });
      }

      // trigger the map to re-render using newCustomPalette
      onScaleChange(_constants.SCALE_TYPES.custom, newCustomPalette);
    }, [setColorUI, customPalette, isEditingCustomBreaks, onScaleChange]);
    return /*#__PURE__*/_react["default"].createElement(ColorBreaksPanelWrapper, null, dataset && allBins.length > 1 && (0, _utils.isNumericColorBreaks)(colorBreaks) ? /*#__PURE__*/_react["default"].createElement(ColumnStatsChart, {
      colorField: colorField,
      dataset: dataset,
      colorBreaks: currentBreaks,
      allBins: allBins,
      filteredBins: filteredBins,
      isFiltered: isFiltered,
      histogramDomain: histogramDomain,
      onChangedUpdater: onColumnStatsChartChanged
    }) : null, /*#__PURE__*/_react["default"].createElement(StyledColorBreaksPanel, null, isEditingCustomBreaks ? /*#__PURE__*/_react["default"].createElement(CustomPalette, {
      ordinalDomain: ordinalDomain,
      customPalette: customPalette,
      setColorPaletteUI: setColorUI,
      showSketcher: showSketcher,
      onApply: onApply,
      onCancel: onCilckCancel
    }) : currentBreaks && allBins.length > 1 && (0, _utils.isNumericColorBreaks)(colorBreaks) ? /*#__PURE__*/_react["default"].createElement(ColorBreaksDisplay, {
      currentBreaks: currentBreaks,
      onEdit: isCustomBreaks ? onClickEditCustomBreaks : null
    }) : customPalette.colorMap && customPalette.type === 'customOrdinal' && (_customPalette$name = customPalette.name) !== null && _customPalette$name !== void 0 && _customPalette$name.endsWith(colorField.name) ? /*#__PURE__*/_react["default"].createElement(CategoricalColorDisplay, {
      colorMap: customPalette.colorMap,
      onEdit: isCustomBreaks ? onClickEditCustomBreaks : null
    }) : null));
  };
  return /*#__PURE__*/_react["default"].memo(ColorBreaksPanel);
}
var _default = exports["default"] = ColorBreaksPanelFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29tbW9uVXRpbHMiLCJyZXF1aXJlIiwiX2NvbnN0YW50cyIsIl91dGlscyIsIl9yZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwiX3N0eWxlZENvbXBvbmVudHMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2NvbHVtblN0YXRzQ2hhcnQiLCJfaWNvbnMiLCJfc3R5bGVkQ29tcG9uZW50czIiLCJfY3VzdG9tUGFsZXR0ZSIsIl90ZW1wbGF0ZU9iamVjdCIsIl90ZW1wbGF0ZU9iamVjdDIiLCJfdGVtcGxhdGVPYmplY3QzIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsIl9fZXNNb2R1bGUiLCJfdHlwZW9mIiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0Iiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiU3R5bGVkQ29sb3JCcmVha3NQYW5lbCIsImRpdiIsImF0dHJzIiwiY2xhc3NOYW1lIiwiX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbDIiLCJTdHlsZWRDb2xvckJyZWFrc0Rpc3BsYXkiLCJDb2xvckJyZWFrc1BhbmVsV3JhcHBlciIsIkVkaXRCdXR0b24iLCJleHBvcnRzIiwiX3JlZiIsIm9uQ2xpY2tFZGl0IiwiY3JlYXRlRWxlbWVudCIsIkJ1dHRvbiIsImxpbmsiLCJvbkNsaWNrIiwiRWRpdCIsImhlaWdodCIsIkNvbG9yQnJlYWtzRGlzcGxheSIsIl9yZWYyIiwiY3VycmVudEJyZWFrcyIsIm9uRWRpdCIsImlzTnVtZXJpY0NvbG9yQnJlYWtzIiwibWFwIiwiaXRlbSIsImluZGV4IiwiQ29sb3JQYWxldHRlSXRlbSIsImtleSIsIkNvbG9yU3dhdGNoIiwiY29sb3IiLCJkYXRhIiwiRWRpdGFibGVDb2xvclJhbmdlIiwiaXNMYXN0IiwiZWRpdGFibGUiLCJDYXRlZ29yaWNhbENvbG9yRGlzcGxheSIsIl9yZWYzIiwiY29sb3JNYXAiLCJjbSIsIkNhdGVnb3JpY2FsU2VsZWN0b3IiLCJzZWxlY3RlZFZhbHVlcyIsInRvQXJyYXkiLCJhbGxWYWx1ZXMiLCJDb2xvckJyZWFrc1BhbmVsRmFjdG9yeSIsImRlcHMiLCJDdXN0b21QYWxldHRlIiwiQ29sdW1uU3RhdHNDaGFydCIsIkNvbG9yQnJlYWtzUGFuZWwiLCJfcmVmNCIsIl9jdXN0b21QYWxldHRlJG5hbWUiLCJjb2xvckJyZWFrcyIsImNvbG9yVUlDb25maWciLCJkYXRhc2V0IiwiY29sb3JGaWVsZCIsImlzQ3VzdG9tQnJlYWtzIiwiYWxsQmlucyIsImZpbHRlcmVkQmlucyIsImlzRmlsdGVyZWQiLCJoaXN0b2dyYW1Eb21haW4iLCJvcmRpbmFsRG9tYWluIiwic2V0Q29sb3JVSSIsIm9uU2NhbGVDaGFuZ2UiLCJvbkFwcGx5Iiwib25DYW5jZWwiLCJjdXN0b21QYWxldHRlIiwic2hvd1NrZXRjaGVyIiwiY29sb3JSYW5nZUNvbmZpZyIsImlzRWRpdGluZ0N1c3RvbUJyZWFrcyIsIkJvb2xlYW4iLCJjdXN0b21CcmVha3MiLCJ1c2VNZW1vIiwiY29sb3JNYXBUb0NvbG9yQnJlYWtzIiwib25DbGlja0VkaXRDdXN0b21CcmVha3MiLCJ1c2VDYWxsYmFjayIsIm9uQ2lsY2tDYW5jZWwiLCJvbkNvbHVtblN0YXRzQ2hhcnRDaGFuZ2VkIiwibmV3Q29sb3JCcmVha3MiLCJuZXdDb2xvcnMiLCJjYiIsIm5ld0NvbG9yTWFwIiwiY29sb3JCcmVha3NUb0NvbG9yTWFwIiwibmV3Q3VzdG9tUGFsZXR0ZSIsImNvbG9ycyIsIlNDQUxFX1RZUEVTIiwiY3VzdG9tIiwib25DaGFuZ2VkVXBkYXRlciIsInNldENvbG9yUGFsZXR0ZVVJIiwidHlwZSIsIm5hbWUiLCJlbmRzV2l0aCIsIm1lbW8iLCJfZGVmYXVsdCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zaWRlLXBhbmVsL2xheWVyLXBhbmVsL2NvbG9yLWJyZWFrcy1wYW5lbC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IHt0b0FycmF5fSBmcm9tICdAa2VwbGVyLmdsL2NvbW1vbi11dGlscyc7XG5pbXBvcnQge1NDQUxFX1RZUEVTfSBmcm9tICdAa2VwbGVyLmdsL2NvbnN0YW50cyc7XG5pbXBvcnQge0tlcGxlclRhYmxlfSBmcm9tICdAa2VwbGVyLmdsL3RhYmxlJztcbmltcG9ydCB7QmluLCBDb2xvck1hcCwgQ29sb3JVSSwgRmllbGR9IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuaW1wb3J0IHtcbiAgQ29sb3JCcmVhayxcbiAgQ29sb3JCcmVha09yZGluYWwsXG4gIGNvbG9yQnJlYWtzVG9Db2xvck1hcCxcbiAgY29sb3JNYXBUb0NvbG9yQnJlYWtzLFxuICBpc051bWVyaWNDb2xvckJyZWFrcyBhcyBub3RPcmRpbmFsQ29sb3JCcmVha3Ncbn0gZnJvbSAnQGtlcGxlci5nbC91dGlscyc7XG5pbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlTWVtb30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQgQ29sdW1uU3RhdHNDaGFydEZhY3RvcnkgZnJvbSAnLi4vLi4vY29tbW9uL2NvbHVtbi1zdGF0cy1jaGFydCc7XG5pbXBvcnQge0VkaXR9IGZyb20gJy4uLy4uL2NvbW1vbi9pY29ucyc7XG5pbXBvcnQge0J1dHRvbn0gZnJvbSAnLi4vLi4vY29tbW9uL3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBDdXN0b21QYWxldHRlRmFjdG9yeSwge1xuICBDb2xvclBhbGV0dGVJdGVtLFxuICBDb2xvclN3YXRjaCxcbiAgRWRpdGFibGVDb2xvclJhbmdlLFxuICBDYXRlZ29yaWNhbFNlbGVjdG9yLFxuICBTZXRDb2xvclVJRnVuY1xufSBmcm9tICcuL2N1c3RvbS1wYWxldHRlJztcblxuY29uc3QgU3R5bGVkQ29sb3JCcmVha3NQYW5lbCA9IHN0eWxlZC5kaXYuYXR0cnMoe1xuICBjbGFzc05hbWU6ICdzdHlsZWQtY29sb3ItYnJlYWtzLXBhbmVsJ1xufSlgXG4gIG1hcmdpbi1ib3R0b206IDEwcHg7XG5gO1xuXG5jb25zdCBTdHlsZWRDb2xvckJyZWFrc0Rpc3BsYXkgPSBzdHlsZWQuZGl2LmF0dHJzKHtcbiAgY2xhc3NOYW1lOiAnc3R5bGVkLWNvbG9yLWJyZWFrcy1kaXNwbGF5J1xufSlgXG4gIHBhZGRpbmc6IDhweCAxMnB4IDAgMTJweDtcbmA7XG5cbmNvbnN0IENvbG9yQnJlYWtzUGFuZWxXcmFwcGVyID0gc3R5bGVkLmRpdmBgO1xuXG50eXBlIEVkaXRCdXR0b25Qcm9wcyA9IHtvbkNsaWNrRWRpdDogKCkgPT4gdm9pZH07XG5cbmV4cG9ydCBjb25zdCBFZGl0QnV0dG9uOiBSZWFjdC5GQzxFZGl0QnV0dG9uUHJvcHM+ID0gKHtvbkNsaWNrRWRpdH0pID0+IChcbiAgPEJ1dHRvbiBjbGFzc05hbWU9XCJlZGl0cF9fYnV0dG9uXCIgbGluayBvbkNsaWNrPXtvbkNsaWNrRWRpdH0+XG4gICAgPEVkaXQgaGVpZ2h0PVwiMTZweFwiIC8+XG4gICAgRWRpdFxuICA8L0J1dHRvbj5cbik7XG5cbmV4cG9ydCB0eXBlIENvbG9yQnJlYWtzRGlzcGxheVByb3BzID0ge1xuICBjdXJyZW50QnJlYWtzPzogQ29sb3JCcmVha1tdIHwgQ29sb3JCcmVha09yZGluYWxbXSB8IG51bGw7XG4gIG9uRWRpdDogKCgpID0+IHZvaWQpIHwgbnVsbDtcbn07XG5cbmV4cG9ydCBjb25zdCBDb2xvckJyZWFrc0Rpc3BsYXk6IFJlYWN0LkZDPENvbG9yQnJlYWtzRGlzcGxheVByb3BzPiA9ICh7Y3VycmVudEJyZWFrcywgb25FZGl0fSkgPT4ge1xuICBpZiAoIW5vdE9yZGluYWxDb2xvckJyZWFrcyhjdXJyZW50QnJlYWtzKSkge1xuICAgIC8vIGRvbid0IGRpc3BsYXkgY29sb3IgYnJlYWtzIGZvciBvcmRpbmFsIGJyZWFrcywgdXNlciBjYW4gY2hhbmdlIGl0IGluIGN1c3RvbSBicmVha3NcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gKFxuICAgIDxTdHlsZWRDb2xvckJyZWFrc0Rpc3BsYXk+XG4gICAgICB7b25FZGl0ID8gPEVkaXRCdXR0b24gb25DbGlja0VkaXQ9e29uRWRpdH0gLz4gOiBudWxsfVxuICAgICAge2N1cnJlbnRCcmVha3MubWFwKChpdGVtLCBpbmRleCkgPT4gKFxuICAgICAgICA8Q29sb3JQYWxldHRlSXRlbSBjbGFzc05hbWU9XCJkaXNhYmxlZFwiIGtleT17aW5kZXh9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3VzdG9tLXBhbGV0dGUtaW5wdXRfX2xlZnRcIj5cbiAgICAgICAgICAgIDxDb2xvclN3YXRjaCBjb2xvcj17aXRlbS5kYXRhfSAvPlxuICAgICAgICAgICAgPEVkaXRhYmxlQ29sb3JSYW5nZVxuICAgICAgICAgICAgICBpdGVtPXtpdGVtfVxuICAgICAgICAgICAgICBpc0xhc3Q9e2luZGV4ID09PSBjdXJyZW50QnJlYWtzLmxlbmd0aCAtIDF9XG4gICAgICAgICAgICAgIGluZGV4PXtpbmRleH1cbiAgICAgICAgICAgICAgZWRpdGFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9Db2xvclBhbGV0dGVJdGVtPlxuICAgICAgKSl9XG4gICAgPC9TdHlsZWRDb2xvckJyZWFrc0Rpc3BsYXk+XG4gICk7XG59O1xuXG5leHBvcnQgdHlwZSBDYXRlZ29yaWNhbENvbG9yRGlzcGxheVByb3BzID0ge1xuICBjb2xvck1hcD86IENvbG9yTWFwO1xuICBvbkVkaXQ6ICgoKSA9PiB2b2lkKSB8IG51bGw7XG59O1xuXG5leHBvcnQgY29uc3QgQ2F0ZWdvcmljYWxDb2xvckRpc3BsYXk6IFJlYWN0LkZDPENhdGVnb3JpY2FsQ29sb3JEaXNwbGF5UHJvcHM+ID0gKHtcbiAgY29sb3JNYXAsXG4gIG9uRWRpdFxufTogQ2F0ZWdvcmljYWxDb2xvckRpc3BsYXlQcm9wcykgPT4ge1xuICByZXR1cm4gKFxuICAgIDxTdHlsZWRDb2xvckJyZWFrc0Rpc3BsYXk+XG4gICAgICB7b25FZGl0ID8gPEVkaXRCdXR0b24gb25DbGlja0VkaXQ9e29uRWRpdH0gLz4gOiBudWxsfVxuICAgICAge2NvbG9yTWFwPy5tYXAoKGNtLCBpbmRleCkgPT4gKFxuICAgICAgICA8Q29sb3JQYWxldHRlSXRlbSBjbGFzc05hbWU9XCJkaXNhYmxlZFwiIGtleT17aW5kZXh9PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY3VzdG9tLXBhbGV0dGUtaW5wdXRfX2xlZnRcIj5cbiAgICAgICAgICAgIDxDb2xvclN3YXRjaCBjb2xvcj17Y21bMV19IC8+XG4gICAgICAgICAgICA8Q2F0ZWdvcmljYWxTZWxlY3RvclxuICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWVzPXt0b0FycmF5KGNtWzBdKX1cbiAgICAgICAgICAgICAgYWxsVmFsdWVzPXtbXX1cbiAgICAgICAgICAgICAgZWRpdGFibGU9e2ZhbHNlfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9Db2xvclBhbGV0dGVJdGVtPlxuICAgICAgKSl9XG4gICAgPC9TdHlsZWRDb2xvckJyZWFrc0Rpc3BsYXk+XG4gICk7XG59O1xuXG5leHBvcnQgdHlwZSBDb2xvckJyZWFrc1BhbmVsUHJvcHMgPSB7XG4gIGNvbG9yQnJlYWtzOiBDb2xvckJyZWFrW10gfCBDb2xvckJyZWFrT3JkaW5hbFtdIHwgbnVsbDtcbiAgY29sb3JVSUNvbmZpZzogQ29sb3JVSTtcbiAgZGF0YXNldDogS2VwbGVyVGFibGUgfCB1bmRlZmluZWQ7XG4gIGNvbG9yRmllbGQ6IEZpZWxkO1xuICBpc0N1c3RvbUJyZWFrczogYm9vbGVhbjtcbiAgYWxsQmluczogQmluW107XG4gIGZpbHRlcmVkQmluczogQmluW107XG4gIGlzRmlsdGVyZWQ6IGJvb2xlYW47XG4gIGhpc3RvZ3JhbURvbWFpbjogbnVtYmVyW107XG4gIG9yZGluYWxEb21haW46IG51bWJlcltdIHwgc3RyaW5nW107XG4gIHNldENvbG9yVUk6IFNldENvbG9yVUlGdW5jO1xuICBvblNjYWxlQ2hhbmdlOiAodjogc3RyaW5nLCB2aXNDb25mZz86IFJlY29yZDxzdHJpbmcsIGFueT4pID0+IHZvaWQ7XG4gIG9uQXBwbHk6IChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB2b2lkO1xuICBvbkNhbmNlbDogKCkgPT4gdm9pZDtcbn07XG5cbkNvbG9yQnJlYWtzUGFuZWxGYWN0b3J5LmRlcHMgPSBbQ3VzdG9tUGFsZXR0ZUZhY3RvcnksIENvbHVtblN0YXRzQ2hhcnRGYWN0b3J5XTtcblxuZnVuY3Rpb24gQ29sb3JCcmVha3NQYW5lbEZhY3RvcnkoXG4gIEN1c3RvbVBhbGV0dGU6IFJldHVyblR5cGU8dHlwZW9mIEN1c3RvbVBhbGV0dGVGYWN0b3J5PixcbiAgQ29sdW1uU3RhdHNDaGFydDogUmV0dXJuVHlwZTx0eXBlb2YgQ29sdW1uU3RhdHNDaGFydEZhY3Rvcnk+XG4pOiBSZWFjdC5GQzxDb2xvckJyZWFrc1BhbmVsUHJvcHM+IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNvbXBsZXhpdHlcbiAgY29uc3QgQ29sb3JCcmVha3NQYW5lbDogUmVhY3QuRkM8Q29sb3JCcmVha3NQYW5lbFByb3BzPiA9ICh7XG4gICAgY29sb3JCcmVha3MsXG4gICAgY29sb3JVSUNvbmZpZyxcbiAgICBkYXRhc2V0LFxuICAgIGNvbG9yRmllbGQsXG4gICAgaXNDdXN0b21CcmVha3MsXG4gICAgYWxsQmlucyxcbiAgICBmaWx0ZXJlZEJpbnMsXG4gICAgaXNGaWx0ZXJlZCxcbiAgICBoaXN0b2dyYW1Eb21haW4sXG4gICAgb3JkaW5hbERvbWFpbixcbiAgICBzZXRDb2xvclVJLFxuICAgIG9uU2NhbGVDaGFuZ2UsXG4gICAgb25BcHBseSxcbiAgICBvbkNhbmNlbFxuICB9KSA9PiB7XG4gICAgY29uc3Qge2N1c3RvbVBhbGV0dGUsIHNob3dTa2V0Y2hlciwgY29sb3JSYW5nZUNvbmZpZ30gPSBjb2xvclVJQ29uZmlnO1xuICAgIGNvbnN0IGlzRWRpdGluZ0N1c3RvbUJyZWFrcyA9IEJvb2xlYW4oY29sb3JSYW5nZUNvbmZpZy5jdXN0b21CcmVha3MpO1xuXG4gICAgY29uc3QgY3VycmVudEJyZWFrcyA9IHVzZU1lbW8oXG4gICAgICAoKSA9PiAoaXNFZGl0aW5nQ3VzdG9tQnJlYWtzID8gY29sb3JNYXBUb0NvbG9yQnJlYWtzKGN1c3RvbVBhbGV0dGUuY29sb3JNYXApIDogY29sb3JCcmVha3MpLFxuICAgICAgW2N1c3RvbVBhbGV0dGUuY29sb3JNYXAsIGlzRWRpdGluZ0N1c3RvbUJyZWFrcywgY29sb3JCcmVha3NdXG4gICAgKTtcblxuICAgIGNvbnN0IG9uQ2xpY2tFZGl0Q3VzdG9tQnJlYWtzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgc2V0Q29sb3JVSSh7XG4gICAgICAgIGNvbG9yUmFuZ2VDb25maWc6IHtcbiAgICAgICAgICBjdXN0b21CcmVha3M6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwgW3NldENvbG9yVUldKTtcblxuICAgIGNvbnN0IG9uQ2lsY2tDYW5jZWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgICBzZXRDb2xvclVJKHtcbiAgICAgICAgc2hvd1NrZXRjaGVyOiBmYWxzZSxcbiAgICAgICAgY29sb3JSYW5nZUNvbmZpZzoge1xuICAgICAgICAgIGN1c3RvbUJyZWFrczogZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBvbkNhbmNlbCgpO1xuICAgIH0sIFtzZXRDb2xvclVJLCBvbkNhbmNlbF0pO1xuXG4gICAgY29uc3Qgb25Db2x1bW5TdGF0c0NoYXJ0Q2hhbmdlZCA9IHVzZUNhbGxiYWNrKFxuICAgICAgbmV3Q29sb3JCcmVha3MgPT4ge1xuICAgICAgICBjb25zdCBuZXdDb2xvcnMgPSBuZXdDb2xvckJyZWFrcy5tYXAoY2IgPT4gY2IuZGF0YSk7XG4gICAgICAgIGNvbnN0IG5ld0NvbG9yTWFwID0gY29sb3JCcmVha3NUb0NvbG9yTWFwKG5ld0NvbG9yQnJlYWtzKTtcblxuICAgICAgICBjb25zdCBuZXdDdXN0b21QYWxldHRlID0ge1xuICAgICAgICAgIC4uLmN1c3RvbVBhbGV0dGUsXG4gICAgICAgICAgY29sb3JNYXA6IG5ld0NvbG9yTWFwLFxuICAgICAgICAgIGNvbG9yczogbmV3Q29sb3JzXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gdXBkYXRlIGN1c3RvbSBwYWxsZXR0ZSBlZGl0b3JcbiAgICAgICAgaWYgKCFpc0VkaXRpbmdDdXN0b21CcmVha3MpIHtcbiAgICAgICAgICBzZXRDb2xvclVJKHtcbiAgICAgICAgICAgIGNvbG9yUmFuZ2VDb25maWc6IHtcbiAgICAgICAgICAgICAgY3VzdG9tQnJlYWtzOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3VzdG9tUGFsZXR0ZTogbmV3Q3VzdG9tUGFsZXR0ZVxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldENvbG9yVUkoe2N1c3RvbVBhbGV0dGU6IG5ld0N1c3RvbVBhbGV0dGV9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHRyaWdnZXIgdGhlIG1hcCB0byByZS1yZW5kZXIgdXNpbmcgbmV3Q3VzdG9tUGFsZXR0ZVxuICAgICAgICBvblNjYWxlQ2hhbmdlKFNDQUxFX1RZUEVTLmN1c3RvbSwgbmV3Q3VzdG9tUGFsZXR0ZSk7XG4gICAgICB9LFxuICAgICAgW3NldENvbG9yVUksIGN1c3RvbVBhbGV0dGUsIGlzRWRpdGluZ0N1c3RvbUJyZWFrcywgb25TY2FsZUNoYW5nZV1cbiAgICApO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxDb2xvckJyZWFrc1BhbmVsV3JhcHBlcj5cbiAgICAgICAge2RhdGFzZXQgJiYgYWxsQmlucy5sZW5ndGggPiAxICYmIG5vdE9yZGluYWxDb2xvckJyZWFrcyhjb2xvckJyZWFrcykgPyAoXG4gICAgICAgICAgPENvbHVtblN0YXRzQ2hhcnRcbiAgICAgICAgICAgIGNvbG9yRmllbGQ9e2NvbG9yRmllbGR9XG4gICAgICAgICAgICBkYXRhc2V0PXtkYXRhc2V0fVxuICAgICAgICAgICAgY29sb3JCcmVha3M9e2N1cnJlbnRCcmVha3N9XG4gICAgICAgICAgICBhbGxCaW5zPXthbGxCaW5zfVxuICAgICAgICAgICAgZmlsdGVyZWRCaW5zPXtmaWx0ZXJlZEJpbnN9XG4gICAgICAgICAgICBpc0ZpbHRlcmVkPXtpc0ZpbHRlcmVkfVxuICAgICAgICAgICAgaGlzdG9ncmFtRG9tYWluPXtoaXN0b2dyYW1Eb21haW59XG4gICAgICAgICAgICBvbkNoYW5nZWRVcGRhdGVyPXtvbkNvbHVtblN0YXRzQ2hhcnRDaGFuZ2VkfVxuICAgICAgICAgIC8+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgICA8U3R5bGVkQ29sb3JCcmVha3NQYW5lbD5cbiAgICAgICAgICB7aXNFZGl0aW5nQ3VzdG9tQnJlYWtzID8gKFxuICAgICAgICAgICAgPEN1c3RvbVBhbGV0dGVcbiAgICAgICAgICAgICAgb3JkaW5hbERvbWFpbj17b3JkaW5hbERvbWFpbn1cbiAgICAgICAgICAgICAgY3VzdG9tUGFsZXR0ZT17Y3VzdG9tUGFsZXR0ZX1cbiAgICAgICAgICAgICAgc2V0Q29sb3JQYWxldHRlVUk9e3NldENvbG9yVUl9XG4gICAgICAgICAgICAgIHNob3dTa2V0Y2hlcj17c2hvd1NrZXRjaGVyfVxuICAgICAgICAgICAgICBvbkFwcGx5PXtvbkFwcGx5fVxuICAgICAgICAgICAgICBvbkNhbmNlbD17b25DaWxja0NhbmNlbH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSA6IGN1cnJlbnRCcmVha3MgJiYgYWxsQmlucy5sZW5ndGggPiAxICYmIG5vdE9yZGluYWxDb2xvckJyZWFrcyhjb2xvckJyZWFrcykgPyAoXG4gICAgICAgICAgICA8Q29sb3JCcmVha3NEaXNwbGF5XG4gICAgICAgICAgICAgIGN1cnJlbnRCcmVha3M9e2N1cnJlbnRCcmVha3N9XG4gICAgICAgICAgICAgIG9uRWRpdD17aXNDdXN0b21CcmVha3MgPyBvbkNsaWNrRWRpdEN1c3RvbUJyZWFrcyA6IG51bGx9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICkgOiBjdXN0b21QYWxldHRlLmNvbG9yTWFwICYmXG4gICAgICAgICAgICBjdXN0b21QYWxldHRlLnR5cGUgPT09ICdjdXN0b21PcmRpbmFsJyAmJlxuICAgICAgICAgICAgY3VzdG9tUGFsZXR0ZS5uYW1lPy5lbmRzV2l0aChjb2xvckZpZWxkLm5hbWUpID8gKFxuICAgICAgICAgICAgPENhdGVnb3JpY2FsQ29sb3JEaXNwbGF5XG4gICAgICAgICAgICAgIGNvbG9yTWFwPXtjdXN0b21QYWxldHRlLmNvbG9yTWFwfVxuICAgICAgICAgICAgICBvbkVkaXQ9e2lzQ3VzdG9tQnJlYWtzID8gb25DbGlja0VkaXRDdXN0b21CcmVha3MgOiBudWxsfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9TdHlsZWRDb2xvckJyZWFrc1BhbmVsPlxuICAgICAgPC9Db2xvckJyZWFrc1BhbmVsV3JhcHBlcj5cbiAgICApO1xuICB9O1xuXG4gIHJldHVybiBSZWFjdC5tZW1vKENvbG9yQnJlYWtzUGFuZWwpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBDb2xvckJyZWFrc1BhbmVsRmFjdG9yeTtcbiJdLCJtYXBw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