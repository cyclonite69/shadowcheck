"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _reactIntl = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react-intl");
var _styledComponents = require("../common/styled-components");
var _sourceDataCatalog = _interopRequireDefault(require("./common/source-data-catalog"));
var _filterPanel = _interopRequireDefault(require("./filter-panel/filter-panel"));
var _constants = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/constants/src");
var _utils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/utils/src");
var _panelViewListToggle = _interopRequireDefault(require("./panel-view-list-toggle"));
var _panelTitle = _interopRequireDefault(require("./panel-title"));
var _addFilterButton = _interopRequireDefault(require("./filter-panel/add-filter-button"));
var _datasetSection = _interopRequireDefault(require("./layer-panel/dataset-section"));
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      (0, _defineProperty2["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
} // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
FilterManagerFactory.deps = [_datasetSection["default"], _filterPanel["default"], _panelTitle["default"], _addFilterButton["default"], _panelViewListToggle["default"], _sourceDataCatalog["default"]];
function FilterManagerFactory(DatasetSection, FilterPanel, PanelTitle, AddFilterButton, PanelViewListToggle, SourceDataCatalog) {
  var FilterList = function FilterList(_ref) {
    var filtersByIndex = _ref.filtersByIndex,
      filters = _ref.filters,
      datasets = _ref.datasets,
      layers = _ref.layers,
      isAnyFilterAnimating = _ref.isAnyFilterAnimating,
      visStateActions = _ref.visStateActions;
    var _removeFilter = visStateActions.removeFilter,
      setFilter = visStateActions.setFilter,
      setFilterPlot = visStateActions.setFilterPlot,
      toggleFilterAnimation = visStateActions.toggleFilterAnimation,
      _toggleFilterFeature = visStateActions.toggleFilterFeature,
      setFilterView = visStateActions.setFilterView,
      syncTimeFilterWithLayerTimeline = visStateActions.syncTimeFilterWithLayerTimeline;
    var filterPanelCallbacks = (0, _react.useMemo)(function () {
      return filtersByIndex.reduce(function (accu, _ref2) {
        var filter = _ref2.filter,
          idx = _ref2.idx;
        return _objectSpread(_objectSpread({}, accu), {}, (0, _defineProperty2["default"])({}, filter.id, {
          removeFilter: function removeFilter() {
            return _removeFilter(idx);
          },
          toggleFilterView: function toggleFilterView() {
            return setFilterView(idx, (0, _utils.isSideFilter)(filter) ? _constants.FILTER_VIEW_TYPES.enlarged : _constants.FILTER_VIEW_TYPES.side);
          },
          toggleAnimation: function toggleAnimation() {
            return toggleFilterAnimation(idx);
          },
          toggleFilterFeature: function toggleFilterFeature() {
            return _toggleFilterFeature(idx);
          }
        }));
      }, {});
    }, [filtersByIndex, _removeFilter, setFilterView, toggleFilterAnimation, _toggleFilterFeature]);
    return /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelSection, null, (0, _toConsumableArray2["default"])(filtersByIndex).reverse().map(function (_ref3) {
      var filter = _ref3.filter,
        idx = _ref3.idx;
      return /*#__PURE__*/_react["default"].createElement(FilterPanel, {
        key: "".concat(filter.id, "-").concat(idx),
        idx: idx,
        filters: filters,
        filter: filter,
        datasets: datasets,
        layers: layers,
        isAnyFilterAnimating: isAnyFilterAnimating,
        removeFilter: filterPanelCallbacks[filter.id].removeFilter,
        enlargeFilter: filterPanelCallbacks[filter.id].toggleFilterView,
        toggleAnimation: filterPanelCallbacks[filter.id].toggleAnimation,
        toggleFilterFeature: filterPanelCallbacks[filter.id].toggleFilterFeature,
        setFilter: setFilter,
        setFilterPlot: setFilterPlot,
        syncTimeFilterWithLayerTimeline: syncTimeFilterWithLayerTimeline
      });
    }));
  };
  var DatasetFilterSection = function DatasetFilterSection(_ref4) {
    var filtersByIndex = _ref4.filtersByIndex,
      filters = _ref4.filters,
      dataset = _ref4.dataset,
      datasets = _ref4.datasets,
      layers = _ref4.layers,
      isAnyFilterAnimating = _ref4.isAnyFilterAnimating,
      visStateActions = _ref4.visStateActions,
      showDatasetTable = _ref4.showDatasetTable,
      updateTableColor = _ref4.updateTableColor,
      removeDataset = _ref4.removeDataset,
      showDeleteDataset = _ref4.showDeleteDataset;
    var datasetCatalog = (0, _react.useMemo)(function () {
      return (0, _defineProperty2["default"])({}, dataset.id, dataset);
    }, [dataset]);
    return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement(SourceDataCatalog, {
      datasets: datasetCatalog,
      showDatasetTable: showDatasetTable,
      updateTableColor: updateTableColor,
      removeDataset: removeDataset,
      showDeleteDataset: showDeleteDataset
    }), /*#__PURE__*/_react["default"].createElement(FilterList, {
      filtersByIndex: filtersByIndex,
      filters: filters,
      datasets: datasets,
      layers: layers,
      isAnyFilterAnimating: isAnyFilterAnimating,
      visStateActions: visStateActions
    }));
  };
  var FilterManager = function FilterManager(_ref6) {
    var _ref6$filters = _ref6.filters,
      filters = _ref6$filters === void 0 ? [] : _ref6$filters,
      datasets = _ref6.datasets,
      layers = _ref6.layers,
      showDatasetTable = _ref6.showDatasetTable,
      updateTableColor = _ref6.updateTableColor,
      removeDataset = _ref6.removeDataset,
      showAddDataModal = _ref6.showAddDataModal,
      panelMetadata = _ref6.panelMetadata,
      panelListView = _ref6.panelListView,
      visStateActions = _ref6.visStateActions,
      uiStateActions = _ref6.uiStateActions;
    var addFilter = visStateActions.addFilter;
    var togglePanelListView = uiStateActions.togglePanelListView;
    var isAnyFilterAnimating = filters.some(function (f) {
      return f.isAnimating;
    });
    var onClickAddFilter = (0, _react.useCallback)(function (dataset) {
      return addFilter(dataset);
    }, [addFilter]);
    var isSortByDatasetMode = panelListView === _constants.PANEL_VIEW_TOGGLES.byDataset;
    var filtersByIndex = (0, _react.useMemo)(function () {
      return filters.map(function (f, idx) {
        return {
          filter: f,
          idx: idx
        };
      });
    }, [filters]);
    var filtersByDatasets = (0, _react.useMemo)(function () {
      return Object.keys(datasets).reduce(function (accu, dataId) {
        return _objectSpread(_objectSpread({}, accu), {}, (0, _defineProperty2["default"])({}, dataId, filtersByIndex.filter(function (fidx) {
          return fidx.filter.dataId && fidx.filter.dataId[0] === dataId;
        })));
      }, {});
    }, [datasets, filtersByIndex]);
    var _TogglePanelListView = (0, _react.useCallback)(function (listView) {
      togglePanelListView({
        panelId: 'filter',
        listView: listView
      });
    }, [togglePanelListView]);
    var intl = (0, _reactIntl.useIntl)();
    var filterListProps = {
      datasets: datasets,
      filters: filters,
      layers: layers,
      isAnyFilterAnimating: isAnyFilterAnimating,
      visStateActions: visStateActions
    };
    var sourceDataCatalogProps = {
      showDatasetTable: showDatasetTable,
      updateTableColor: updateTableColor,
      removeDataset: removeDataset,
      showDeleteDataset: true
    };
    return /*#__PURE__*/_react["default"].createElement("div", {
      className: "filter-manager"
    }, /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelSection, null, /*#__PURE__*/_react["default"].createElement(PanelViewListToggle, {
      togglePanelListView: _TogglePanelListView,
      mode: panelListView
    })), /*#__PURE__*/_react["default"].createElement(DatasetSection, (0, _extends2["default"])({
      datasets: datasets
    }, sourceDataCatalogProps, {
      showDatasetList: !isSortByDatasetMode,
      showAddDataModal: showAddDataModal
    })), /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelDivider, null), /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelSection, null, /*#__PURE__*/_react["default"].createElement(PanelTitle, {
      className: "filter-manager-title",
      title: intl.formatMessage({
        id: panelMetadata.label
      })
    }, /*#__PURE__*/_react["default"].createElement(AddFilterButton, {
      datasets: datasets,
      onAdd: onClickAddFilter
    }))), /*#__PURE__*/_react["default"].createElement(_styledComponents.SidePanelSection, null, isSortByDatasetMode ? Object.keys(filtersByDatasets).map(function (dataId) {
      return /*#__PURE__*/_react["default"].createElement(DatasetFilterSection, (0, _extends2["default"])({
        key: dataId,
        filtersByIndex: filtersByDatasets[dataId],
        dataset: datasets[dataId]
      }, filterListProps, sourceDataCatalogProps));
    }) : /*#__PURE__*/_react["default"].createElement(FilterList, (0, _extends2["default"])({
      filtersByIndex: filtersByIndex
    }, filterListProps))));
  };
  return FilterManager;
}
var _default = exports["default"] = FilterManagerFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcmVhY3RJbnRsIiwiX3N0eWxlZENvbXBvbmVudHMiLCJfc291cmNlRGF0YUNhdGFsb2ciLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX2ZpbHRlclBhbmVsIiwiX2NvbnN0YW50cyIsIl91dGlscyIsIl9wYW5lbFZpZXdMaXN0VG9nZ2xlIiwiX3BhbmVsVGl0bGUiLCJfYWRkRmlsdGVyQnV0dG9uIiwiX2RhdGFzZXRTZWN0aW9uIiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsIl9fZXNNb2R1bGUiLCJfdHlwZW9mIiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0Iiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiRmlsdGVyTWFuYWdlckZhY3RvcnkiLCJkZXBzIiwiRGF0YXNldFNlY3Rpb24iLCJGaWx0ZXJQYW5lbCIsIlBhbmVsVGl0bGUiLCJBZGRGaWx0ZXJCdXR0b24iLCJQYW5lbFZpZXdMaXN0VG9nZ2xlIiwiU291cmNlRGF0YUNhdGFsb2ciLCJGaWx0ZXJMaXN0IiwiX3JlZiIsImZpbHRlcnNCeUluZGV4IiwiZmlsdGVycyIsImRhdGFzZXRzIiwibGF5ZXJzIiwiaXNBbnlGaWx0ZXJBbmltYXRpbmciLCJ2aXNTdGF0ZUFjdGlvbnMiLCJfcmVtb3ZlRmlsdGVyIiwicmVtb3ZlRmlsdGVyIiwic2V0RmlsdGVyIiwic2V0RmlsdGVyUGxvdCIsInRvZ2dsZUZpbHRlckFuaW1hdGlvbiIsIl90b2dnbGVGaWx0ZXJGZWF0dXJlIiwidG9nZ2xlRmlsdGVyRmVhdHVyZSIsInNldEZpbHRlclZpZXciLCJzeW5jVGltZUZpbHRlcldpdGhMYXllclRpbWVsaW5lIiwiZmlsdGVyUGFuZWxDYWxsYmFja3MiLCJ1c2VNZW1vIiwicmVkdWNlIiwiYWNjdSIsIl9yZWYyIiwiaWR4IiwiaWQiLCJ0b2dnbGVGaWx0ZXJWaWV3IiwiaXNTaWRlRmlsdGVyIiwiRklMVEVSX1ZJRVdfVFlQRVMiLCJlbmxhcmdlZCIsInNpZGUiLCJ0b2dnbGVBbmltYXRpb24iLCJjcmVhdGVFbGVtZW50IiwiU2lkZVBhbmVsU2VjdGlvbiIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJyZXZlcnNlIiwibWFwIiwiX3JlZjMiLCJrZXkiLCJjb25jYXQiLCJlbmxhcmdlRmlsdGVyIiwiRGF0YXNldEZpbHRlclNlY3Rpb24iLCJfcmVmNCIsImRhdGFzZXQiLCJzaG93RGF0YXNldFRhYmxlIiwidXBkYXRlVGFibGVDb2xvciIsInJlbW92ZURhdGFzZXQiLCJzaG93RGVsZXRlRGF0YXNldCIsImRhdGFzZXRDYXRhbG9nIiwiRnJhZ21lbnQiLCJGaWx0ZXJNYW5hZ2VyIiwiX3JlZjYiLCJfcmVmNiRmaWx0ZXJzIiwic2hvd0FkZERhdGFNb2RhbCIsInBhbmVsTWV0YWRhdGEiLCJwYW5lbExpc3RWaWV3IiwidWlTdGF0ZUFjdGlvbnMiLCJhZGRGaWx0ZXIiLCJ0b2dnbGVQYW5lbExpc3RWaWV3Iiwic29tZSIsImYiLCJpc0FuaW1hdGluZyIsIm9uQ2xpY2tBZGRGaWx0ZXIiLCJ1c2VDYWxsYmFjayIsImlzU29ydEJ5RGF0YXNldE1vZGUiLCJQQU5FTF9WSUVXX1RPR0dMRVMiLCJieURhdGFzZXQiLCJmaWx0ZXJzQnlEYXRhc2V0cyIsImRhdGFJZCIsImZpZHgiLCJfVG9nZ2xlUGFuZWxMaXN0VmlldyIsImxpc3RWaWV3IiwicGFuZWxJZCIsImludGwiLCJ1c2VJbnRsIiwiZmlsdGVyTGlzdFByb3BzIiwic291cmNlRGF0YUNhdGFsb2dQcm9wcyIsImNsYXNzTmFtZSIsIm1vZGUiLCJfZXh0ZW5kczIiLCJzaG93RGF0YXNldExpc3QiLCJTaWRlUGFuZWxEaXZpZGVyIiwidGl0bGUiLCJmb3JtYXRNZXNzYWdlIiwibGFiZWwiLCJvbkFkZCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zaWRlLXBhbmVsL2ZpbHRlci1tYW5hZ2VyLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQgUmVhY3QsIHt1c2VDYWxsYmFjaywgdXNlTWVtb30gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHt1c2VJbnRsfSBmcm9tICdyZWFjdC1pbnRsJztcbmltcG9ydCB7U2lkZVBhbmVsRGl2aWRlciwgU2lkZVBhbmVsU2VjdGlvbn0gZnJvbSAnLi4vY29tbW9uL3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCBTb3VyY2VEYXRhQ2F0YWxvZ0ZhY3RvcnkgZnJvbSAnLi9jb21tb24vc291cmNlLWRhdGEtY2F0YWxvZyc7XG5pbXBvcnQgRmlsdGVyUGFuZWxGYWN0b3J5IGZyb20gJy4vZmlsdGVyLXBhbmVsL2ZpbHRlci1wYW5lbCc7XG5pbXBvcnQge0ZJTFRFUl9WSUVXX1RZUEVTLCBQQU5FTF9WSUVXX1RPR0dMRVN9IGZyb20gJ0BrZXBsZXIuZ2wvY29uc3RhbnRzJztcbmltcG9ydCB7RmlsdGVyfSBmcm9tICdAa2VwbGVyLmdsL3R5cGVzJztcbmltcG9ydCB7TGF5ZXJ9IGZyb20gJ0BrZXBsZXIuZ2wvbGF5ZXJzJztcbmltcG9ydCB7aXNTaWRlRmlsdGVyfSBmcm9tICdAa2VwbGVyLmdsL3V0aWxzJztcbmltcG9ydCB7VmlzU3RhdGVBY3Rpb25zLCBBY3Rpb25IYW5kbGVyLCBVSVN0YXRlQWN0aW9ucywgQWN0aW9uSGFuZGxlcnN9IGZyb20gJ0BrZXBsZXIuZ2wvYWN0aW9ucyc7XG5pbXBvcnQge0RhdGFzZXRzfSBmcm9tICdAa2VwbGVyLmdsL3RhYmxlJztcblxuaW1wb3J0IFBhbmVsVmlld0xpc3RUb2dnbGVGYWN0b3J5IGZyb20gJy4vcGFuZWwtdmlldy1saXN0LXRvZ2dsZSc7XG5pbXBvcnQgUGFuZWxUaXRsZUZhY3RvcnkgZnJvbSAnLi9wYW5lbC10aXRsZSc7XG5pbXBvcnQgQWRkRmlsdGVyQnV0dG9uRmFjdG9yeSBmcm9tICcuL2ZpbHRlci1wYW5lbC9hZGQtZmlsdGVyLWJ1dHRvbic7XG5pbXBvcnQgRGF0YXNldFNlY3Rpb25GYWN0b3J5IGZyb20gJy4vbGF5ZXItcGFuZWwvZGF0YXNldC1zZWN0aW9uJztcbmltcG9ydCB7UGFuZWxNZXRhfSBmcm9tICcuL2NvbW1vbi90eXBlcyc7XG5cbmV4cG9ydCB0eXBlIFZpc1N0YXRlQWN0aW9uSGFuZGxlcnMgPSBBY3Rpb25IYW5kbGVyczx0eXBlb2YgVmlzU3RhdGVBY3Rpb25zPjtcbmV4cG9ydCB0eXBlIFVpU3RhdGVBY3Rpb25IYW5kbGVycyA9IEFjdGlvbkhhbmRsZXJzPHR5cGVvZiBVSVN0YXRlQWN0aW9ucz47XG5cbmV4cG9ydCB0eXBlIEZpbHRlck1hbmFnZXJQcm9wcyA9IHtcbiAgZmlsdGVyczogRmlsdGVyW107XG4gIGRhdGFzZXRzOiBEYXRhc2V0cztcbiAgbGF5ZXJzOiBMYXllcltdO1xuICBzaG93RGF0YXNldFRhYmxlOiBBY3Rpb25IYW5kbGVyPHR5cGVvZiBWaXNTdGF0ZUFjdGlvbnMuc2hvd0RhdGFzZXRUYWJsZT47XG4gIHVwZGF0ZVRhYmxlQ29sb3I6IEFjdGlvbkhhbmRsZXI8dHlwZW9mIFZpc1N0YXRlQWN0aW9ucy51cGRhdGVUYWJsZUNvbG9yPjtcbiAgcmVtb3ZlRGF0YXNldDogQWN0aW9uSGFuZGxlcjx0eXBlb2YgVmlzU3RhdGVBY3Rpb25zLnJlbW92ZURhdGFzZXQ+O1xuICBzaG93QWRkRGF0YU1vZGFsOiAoKSA9PiB2b2lkO1xuXG4gIHBhbmVsTWV0YWRhdGE6IFBhbmVsTWV0YTtcbiAgcGFuZWxMaXN0Vmlldzogc3RyaW5nO1xuICB2aXNTdGF0ZUFjdGlvbnM6IFZpc1N0YXRlQWN0aW9uSGFuZGxlcnM7XG4gIHVpU3RhdGVBY3Rpb25zOiBVaVN0YXRlQWN0aW9uSGFuZGxlcnM7XG59O1xuXG50eXBlIEZpbHRlckxpc3RQcm9wcyA9IHtcbiAgZmlsdGVyczogRmlsdGVyW107XG4gIGRhdGFzZXRzOiBEYXRhc2V0cztcbiAgbGF5ZXJzOiBMYXllcltdO1xuICBmaWx0ZXJzQnlJbmRleDoge1xuICAgIGZpbHRlcjogRmlsdGVyO1xuICAgIGlkeDogbnVtYmVyO1xuICB9W107XG4gIGlzQW55RmlsdGVyQW5pbWF0aW5nOiBib29sZWFuO1xuICB2aXNTdGF0ZUFjdGlvbnM6IFZpc1N0YXRlQWN0aW9uSGFuZGxlcnM7XG59O1xuXG5GaWx0ZXJNYW5hZ2VyRmFjdG9yeS5kZXBzID0gW1xuICBEYXRhc2V0U2VjdGlvbkZhY3RvcnksXG4gIEZpbHRlclBhbmVsRmFjdG9yeSxcbiAgUGFuZWxUaXRsZUZhY3RvcnksXG4gIEFkZEZpbHRlckJ1dHRvbkZhY3RvcnksXG4gIFBhbmVsVmlld0xpc3RUb2dnbGVGYWN0b3J5LFxuICBTb3VyY2VEYXRhQ2F0YWxvZ0ZhY3Rvcnlcbl07XG5cbmZ1bmN0aW9uIEZpbHRlck1hbmFnZXJGYWN0b3J5KFxuICBEYXRhc2V0U2VjdGlvbjogUmV0dXJuVHlwZTx0eXBlb2YgRGF0YXNldFNlY3Rpb25GYWN0b3J5PixcbiAgRmlsdGVyUGFuZWw6IFJldHVyblR5cGU8dHlwZW9mIEZpbHRlclBhbmVsRmFjdG9yeT4sXG4gIFBhbmVsVGl0bGU6IFJldHVyblR5cGU8dHlwZW9mIFBhbmVsVGl0bGVGYWN0b3J5PixcbiAgQWRkRmlsdGVyQnV0dG9uOiBSZXR1cm5UeXBlPHR5cGVvZiBBZGRGaWx0ZXJCdXR0b25GYWN0b3J5PixcbiAgUGFuZWxWaWV3TGlzdFRvZ2dsZTogUmV0dXJuVHlwZTx0eXBlb2YgUGFuZWxWaWV3TGlzdFRvZ2dsZUZhY3Rvcnk+LFxuICBTb3VyY2VEYXRhQ2F0YWxvZzogUmV0dXJuVHlwZTx0eXBlb2YgU291cmNlRGF0YUNhdGFsb2dGYWN0b3J5PlxuKSB7XG4gIGNvbnN0IEZpbHRlckxpc3QgPSAoe1xuICAgIGZpbHRlcnNCeUluZGV4LFxuICAgIGZpbHRlcnMsXG4gICAgZGF0YXNldHMsXG4gICAgbGF5ZXJzLFxuICAgIGlzQW55RmlsdGVyQW5pbWF0aW5nLFxuICAgIHZpc1N0YXRlQWN0aW9uc1xuICB9OiBGaWx0ZXJMaXN0UHJvcHMpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICByZW1vdmVGaWx0ZXIsXG4gICAgICBzZXRGaWx0ZXIsXG4gICAgICBzZXRGaWx0ZXJQbG90LFxuICAgICAgdG9nZ2xlRmlsdGVyQW5pbWF0aW9uLFxuICAgICAgdG9nZ2xlRmlsdGVyRmVhdHVyZSxcbiAgICAgIHNldEZpbHRlclZpZXcsXG4gICAgICBzeW5jVGltZUZpbHRlcldpdGhMYXllclRpbWVsaW5lXG4gICAgfSA9IHZpc1N0YXRlQWN0aW9ucztcblxuICAgIGNvbnN0IGZpbHRlclBhbmVsQ2FsbGJhY2tzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICByZXR1cm4gZmlsdGVyc0J5SW5kZXgucmVkdWNlKFxuICAgICAgICAoYWNjdSwge2ZpbHRlciwgaWR4fSkgPT4gKHtcbiAgICAgICAgICAuLi5hY2N1LFxuICAgICAgICAgIFtmaWx0ZXIuaWRdOiB7XG4gICAgICAgICAgICByZW1vdmVGaWx0ZXI6ICgpID0+IHJlbW92ZUZpbHRlcihpZHgpLFxuICAgICAgICAgICAgdG9nZ2xlRmlsdGVyVmlldzogKCkgPT5cbiAgICAgICAgICAgICAgc2V0RmlsdGVyVmlldyhcbiAgICAgICAgICAgICAgICBpZHgsXG4gICAgICAgICAgICAgICAgaXNTaWRlRmlsdGVyKGZpbHRlcikgPyBGSUxURVJfVklFV19UWVBFUy5lbmxhcmdlZCA6IEZJTFRFUl9WSUVXX1RZUEVTLnNpZGVcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHRvZ2dsZUFuaW1hdGlvbjogKCkgPT4gdG9nZ2xlRmlsdGVyQW5pbWF0aW9uKGlkeCksXG4gICAgICAgICAgICB0b2dnbGVGaWx0ZXJGZWF0dXJlOiAoKSA9PiB0b2dnbGVGaWx0ZXJGZWF0dXJlKGlkeClcbiAgICAgICAgICB9XG4gICAgICAgIH0pLFxuICAgICAgICB7fVxuICAgICAgKTtcbiAgICB9LCBbZmlsdGVyc0J5SW5kZXgsIHJlbW92ZUZpbHRlciwgc2V0RmlsdGVyVmlldywgdG9nZ2xlRmlsdGVyQW5pbWF0aW9uLCB0b2dnbGVGaWx0ZXJGZWF0dXJlXSk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFNpZGVQYW5lbFNlY3Rpb24+XG4gICAgICAgIHtbLi4uZmlsdGVyc0J5SW5kZXhdLnJldmVyc2UoKS5tYXAoKHtmaWx0ZXIsIGlkeH0pID0+IChcbiAgICAgICAgICA8RmlsdGVyUGFuZWxcbiAgICAgICAgICAgIGtleT17YCR7ZmlsdGVyLmlkfS0ke2lkeH1gfVxuICAgICAgICAgICAgaWR4PXtpZHh9XG4gICAgICAgICAgICBmaWx0ZXJzPXtmaWx0ZXJzfVxuICAgICAgICAgICAgZmlsdGVyPXtmaWx0ZXJ9XG4gICAgICAgICAgICBkYXRhc2V0cz17ZGF0YXNldHN9XG4gICAgICAgICAgICBsYXllcnM9e2xheWVyc31cbiAgICAgICAgICAgIGlzQW55RmlsdGVyQW5pbWF0aW5nPXtpc0FueUZpbHRlckFuaW1hdGluZ31cbiAgICAgICAgICAgIHJlbW92ZUZpbHRlcj17ZmlsdGVyUGFuZWxDYWxsYmFja3NbZmlsdGVyLmlkXS5yZW1vdmVGaWx0ZXJ9XG4gICAgICAgICAgICBlbmxhcmdlRmlsdGVyPXtmaWx0ZXJQYW5lbENhbGxiYWNrc1tmaWx0ZXIuaWRdLnRvZ2dsZUZpbHRlclZpZXd9XG4gICAgICAgICAgICB0b2dnbGVBbmltYXRpb249e2ZpbHRlclBhbmVsQ2FsbGJhY2tzW2ZpbHRlci5pZF0udG9nZ2xlQW5pbWF0aW9ufVxuICAgICAgICAgICAgdG9nZ2xlRmlsdGVyRmVhdHVyZT17ZmlsdGVyUGFuZWxDYWxsYmFja3NbZmlsdGVyLmlkXS50b2dnbGVGaWx0ZXJGZWF0dXJlfVxuICAgICAgICAgICAgc2V0RmlsdGVyPXtzZXRGaWx0ZXJ9XG4gICAgICAgICAgICBzZXRGaWx0ZXJQbG90PXtzZXRGaWx0ZXJQbG90fVxuICAgICAgICAgICAgc3luY1RpbWVGaWx0ZXJXaXRoTGF5ZXJUaW1lbGluZT17c3luY1RpbWVGaWx0ZXJXaXRoTGF5ZXJUaW1lbGluZX1cbiAgICAgICAgICAvPlxuICAgICAgICApKX1cbiAgICAgIDwvU2lkZVBhbmVsU2VjdGlvbj5cbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IERhdGFzZXRGaWx0ZXJTZWN0aW9uID0gKHtcbiAgICBmaWx0ZXJzQnlJbmRleCxcbiAgICBmaWx0ZXJzLFxuICAgIGRhdGFzZXQsXG4gICAgZGF0YXNldHMsXG4gICAgbGF5ZXJzLFxuICAgIGlzQW55RmlsdGVyQW5pbWF0aW5nLFxuICAgIHZpc1N0YXRlQWN0aW9ucyxcbiAgICBzaG93RGF0YXNldFRhYmxlLFxuICAgIHVwZGF0ZVRhYmxlQ29sb3IsXG4gICAgcmVtb3ZlRGF0YXNldCxcbiAgICBzaG93RGVsZXRlRGF0YXNldFxuICB9KSA9PiB7XG4gICAgY29uc3QgZGF0YXNldENhdGFsb2cgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAgIHJldHVybiB7W2RhdGFzZXQuaWRdOiBkYXRhc2V0fTtcbiAgICB9LCBbZGF0YXNldF0pO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDw+XG4gICAgICAgIDxTb3VyY2VEYXRhQ2F0YWxvZ1xuICAgICAgICAgIGRhdGFzZXRzPXtkYXRhc2V0Q2F0YWxvZ31cbiAgICAgICAgICBzaG93RGF0YXNldFRhYmxlPXtzaG93RGF0YXNldFRhYmxlfVxuICAgICAgICAgIHVwZGF0ZVRhYmxlQ29sb3I9e3VwZGF0ZVRhYmxlQ29sb3J9XG4gICAgICAgICAgcmVtb3ZlRGF0YXNldD17cmVtb3ZlRGF0YXNldH1cbiAgICAgICAgICBzaG93RGVsZXRlRGF0YXNldD17c2hvd0RlbGV0ZURhdGFzZXR9XG4gICAgICAgIC8+XG4gICAgICAgIDxGaWx0ZXJMaXN0XG4gICAgICAgICAgZmlsdGVyc0J5SW5kZXg9e2ZpbHRlcnNCeUluZGV4fVxuICAgICAgICAgIGZpbHRlcnM9e2ZpbHRlcnN9XG4gICAgICAgICAgZGF0YXNldHM9e2RhdGFzZXRzfVxuICAgICAgICAgIGxheWVycz17bGF5ZXJzfVxuICAgICAgICAgIGlzQW55RmlsdGVyQW5pbWF0aW5nPXtpc0FueUZpbHRlckFuaW1hdGluZ31cbiAgICAgICAgICB2aXNTdGF0ZUFjdGlvbnM9e3Zpc1N0YXRlQWN0aW9uc31cbiAgICAgICAgLz5cbiAgICAgIDwvPlxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgRmlsdGVyTWFuYWdlcjogUmVhY3QuRkM8RmlsdGVyTWFuYWdlclByb3BzPiA9ICh7XG4gICAgZmlsdGVycyA9IFtdLFxuICAgIGRhdGFzZXRzLFxuICAgIGxheWVycyxcbiAgICBzaG93RGF0YXNldFRhYmxlLFxuICAgIHVwZGF0ZVRhYmxlQ29sb3IsXG4gICAgcmVtb3ZlRGF0YXNldCxcbiAgICBzaG93QWRkRGF0YU1vZGFsLFxuICAgIHBhbmVsTWV0YWRhdGEsXG4gICAgcGFuZWxMaXN0VmlldyxcbiAgICB2aXNTdGF0ZUFjdGlvbnMsXG4gICAgdWlTdGF0ZUFjdGlvbnNcbiAgfSkgPT4ge1xuICAgIGNvbnN0IHthZGRGaWx0ZXJ9ID0gdmlzU3RhdGVBY3Rpb25zO1xuICAgIGNvbnN0IHt0b2dnbGVQYW5lbExpc3RWaWV3fSA9IHVpU3RhdGVBY3Rpb25zO1xuICAgIGNvbnN0IGlzQW55RmlsdGVyQW5pbWF0aW5nID0gZmlsdGVycy5zb21lKGYgPT4gZi5pc0FuaW1hdGluZyk7XG4gICAgY29uc3Qgb25DbGlja0FkZEZpbHRlciA9IHVzZUNhbGxiYWNrKGRhdGFzZXQgPT4gYWRkRmlsdGVyKGRhdGFzZXQpLCBbYWRkRmlsdGVyXSk7XG4gICAgY29uc3QgaXNTb3J0QnlEYXRhc2V0TW9kZSA9IHBhbmVsTGlzdFZpZXcgPT09IFBBTkVMX1ZJRVdfVE9HR0xFUy5ieURhdGFzZXQ7XG4gICAgY29uc3QgZmlsdGVyc0J5SW5kZXggPSB1c2VNZW1vKFxuICAgICAgKCkgPT5cbiAgICAgICAgZmlsdGVycy5tYXAoKGYsIGlkeCkgPT4gKHtcbiAgICAgICAgICBmaWx0ZXI6IGYsXG4gICAgICAgICAgaWR4XG4gICAgICAgIH0pKSxcbiAgICAgIFtmaWx0ZXJzXVxuICAgICk7XG4gICAgY29uc3QgZmlsdGVyc0J5RGF0YXNldHMgPSB1c2VNZW1vKFxuICAgICAgKCkgPT5cbiAgICAgICAgT2JqZWN0LmtleXMoZGF0YXNldHMpLnJlZHVjZShcbiAgICAgICAgICAoYWNjdSwgZGF0YUlkKSA9PiAoe1xuICAgICAgICAgICAgLi4uYWNjdSxcbiAgICAgICAgICAgIC8vIGlmIHN5bmNlZCBmaWx0ZXIsIHNob3cgaXQgdW5mZGVyIGl0cyB0aGUgZmlyc3QgZGF0YXNldFxuICAgICAgICAgICAgW2RhdGFJZF06IGZpbHRlcnNCeUluZGV4LmZpbHRlcihcbiAgICAgICAgICAgICAgZmlkeCA9PiBmaWR4LmZpbHRlci5kYXRhSWQgJiYgZmlkeC5maWx0ZXIuZGF0YUlkWzBdID09PSBkYXRhSWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9KSxcbiAgICAgICAgICB7fVxuICAgICAgICApLFxuICAgICAgW2RhdGFzZXRzLCBmaWx0ZXJzQnlJbmRleF1cbiAgICApO1xuICAgIGNvbnN0IF9Ub2dnbGVQYW5lbExpc3RWaWV3ID0gdXNlQ2FsbGJhY2soXG4gICAgICBsaXN0VmlldyA9PiB7XG4gICAgICAgIHRvZ2dsZVBhbmVsTGlzdFZpZXcoe3BhbmVsSWQ6ICdmaWx0ZXInLCBsaXN0Vmlld30pO1xuICAgICAgfSxcbiAgICAgIFt0b2dnbGVQYW5lbExpc3RWaWV3XVxuICAgICk7XG5cbiAgICBjb25zdCBpbnRsID0gdXNlSW50bCgpO1xuICAgIGNvbnN0IGZpbHRlckxpc3RQcm9wcyA9IHtcbiAgICAgIGRhdGFzZXRzLFxuICAgICAgZmlsdGVycyxcbiAgICAgIGxheWVycyxcbiAgICAgIGlzQW55RmlsdGVyQW5pbWF0aW5nLFxuICAgICAgdmlzU3RhdGVBY3Rpb25zXG4gICAgfTtcblxuICAgIGNvbnN0IHNvdXJjZURhdGFDYXRhbG9nUHJvcHMgPSB7XG4gICAgICBzaG93RGF0YXNldFRhYmxlLFxuICAgICAgdXBkYXRlVGFibGVDb2xvcixcbiAgICAgIHJlbW92ZURhdGFzZXQsXG4gICAgICBzaG93RGVsZXRlRGF0YXNldDogdHJ1ZVxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJmaWx0ZXItbWFuYWdlclwiPlxuICAgICAgICA8U2lkZVBhbmVsU2VjdGlvbj5cbiAgICAgICAgICA8UGFuZWxWaWV3TGlzdFRvZ2dsZSB0b2dnbGVQYW5lbExpc3RWaWV3PXtfVG9nZ2xlUGFuZWxMaXN0Vmlld30gbW9kZT17cGFuZWxMaXN0Vmlld30gLz5cbiAgICAgICAgPC9TaWRlUGFuZWxTZWN0aW9uPlxuICAgICAgICA8RGF0YXNldFNlY3Rpb25cbiAgICAgICAgICBkYXRhc2V0cz17ZGF0YXNldHN9XG4gICAgICAgICAgey4uLnNvdXJjZURhdGFDYXRhbG9nUHJvcHN9XG4gICAgICAgICAgc2hvd0RhdGFzZXRMaXN0PXshaXNTb3J0QnlEYXRhc2V0TW9kZX1cbiAgICAgICAgICBzaG93QWRkRGF0YU1vZGFsPXtzaG93QWRkRGF0YU1vZGFsfVxuICAgICAgICAvPlxuICAgICAgICA8U2lkZVBhbmVsRGl2aWRlciAvPlxuICAgICAgICA8U2lkZVBhbmVsU2VjdGlvbj5cbiAgICAgICAgICA8UGFuZWxUaXRsZVxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZmlsdGVyLW1hbmFnZXItdGl0bGVcIlxuICAgICAgICAgICAgdGl0bGU9e2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6IHBhbmVsTWV0YWRhdGEubGFiZWx9KX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8QWRkRmlsdGVyQnV0dG9uIGRhdGFzZXRzPXtkYXRhc2V0c30gb25BZGQ9e29uQ2xpY2tBZGRGaWx0ZXJ9IC8+XG4gICAgICAgICAgPC9QYW5lbFRpdGxlPlxuICAgICAgICA8L1NpZGVQYW5lbFNlY3Rpb24+XG4gICAgICAgIDxTaWRlUGFuZWxTZWN0aW9uPlxuICAgICAgICAgIHtpc1NvcnRCeURhdGFzZXRNb2RlID8gKFxuICAgICAgICAgICAgT2JqZWN0LmtleXMoZmlsdGVyc0J5RGF0YXNldHMpLm1hcChkYXRhSWQgPT4gKFxuICAgICAgICAgICAgICA8RGF0YXNldEZpbHRlclNlY3Rpb25cbiAgICAgICAgICAgICAgICBrZXk9e2RhdGFJZH1cbiAgICAgICAgICAgICAgICBmaWx0ZXJzQnlJbmRleD17ZmlsdGVyc0J5RGF0YXNldHNbZGF0YUlkXX1cbiAgICAgICAgICAgICAgICBkYXRhc2V0PXtkYXRhc2V0c1tkYXRhSWRdfVxuICAgICAgICAgICAgICAgIHsuLi5maWx0ZXJMaXN0UHJvcHN9XG4gICAgICAgICAgICAgICAgey4uLnNvdXJjZURhdGFDYXRhbG9nUHJvcHN9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApKVxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8RmlsdGVyTGlzdCBmaWx0ZXJzQnlJbmRleD17ZmlsdGVyc0J5SW5kZXh9IHsuLi5maWx0ZXJMaXN0UHJvcHN9IC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9TaWRlUGFuZWxTZWN0aW9uPlxuICAgICAgPC9kaXY+XG4gICAgKTtcbiAgfTtcblxuICByZXR1cm4gRmlsdGVyTWFuYWdlcjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRmlsdGVyTWFuYWdlckZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBR0EsSUFBQUEsTUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUs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