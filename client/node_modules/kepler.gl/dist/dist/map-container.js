"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Droppable = exports.Attribution = void 0;
exports["default"] = MapContainerFactory;
exports.isSplitSelector = void 0;
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _styledComponents = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/styled-components"));
var _reactMapGl = require("react-map-gl");
var _react2 = _interopRequireDefault(require("@deck.gl/react"));
var _reselect = require("reselect");
var _core = require("@dnd-kit/core");
var _debounce = _interopRequireDefault(require("lodash/debounce"));
var _mapPopover = _interopRequireDefault(require("./map/map-popover"));
var _mapControl = _interopRequireDefault(require("./map/map-control"));
var _styledComponents2 = require("./common/styled-components");
var _editor = _interopRequireDefault(require("./editor/editor"));
var _layers = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/layers/src");
var _utils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/utils/src");
var _styles = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/styles/src");
var _constants = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/constants/src");
var _dndLayerItems = require("./common/dnd-layer-items");
var _mapViewStateContext = require("./map-view-state-context");
var _errorBoundary = _interopRequireDefault(require("./common/error-boundary"));
var _localization = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/localization/src");
var _core2 = require("@deck.gl/core");
var _reducers = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/reducers/src");
var _loadingIndicator = _interopRequireDefault(require("./loading-indicator"));
var _templateObject, _templateObject2; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
// libraries
// components
// utils
// default-settings
// Contexts
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      (0, _defineProperty2["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
}
function _callSuper(t, o, e) {
  return o = (0, _getPrototypeOf2["default"])(o), (0, _possibleConstructorReturn2["default"])(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2["default"])(t).constructor) : o.apply(t, e));
}
function _isNativeReflectConstruct() {
  try {
    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
  } catch (t) {}
  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {
    return !!t;
  })();
}
// Debounce the propagation of viewport change and mouse moves to redux store.
// This is to avoid too many renders of other components when the map is
// being panned/zoomed (leading to laggy basemap/deck syncing).
var DEBOUNCE_VIEWPORT_PROPAGATE = 10;
var DEBOUNCE_MOUSE_MOVE_PROPAGATE = 10;

// How long should we wait between layer loading state changes before triggering a UI update
var DEBOUNCE_LOADING_STATE_PROPAGATE = 100;
var MAP_STYLE = {
  container: {
    display: 'inline-block',
    position: 'relative',
    width: '100%',
    height: '100%'
  },
  top: {
    position: 'absolute',
    top: 0,
    width: '100%',
    height: '100%',
    pointerEvents: 'none'
  }
};
var LOCALE_CODES_ARRAY = Object.keys(_localization.LOCALE_CODES);
var StyledMap = (0, _styledComponents["default"])(_styledComponents2.StyledMapContainer)(function (_ref) {
  var _ref$$mixBlendMode = _ref.$mixBlendMode,
    $mixBlendMode = _ref$$mixBlendMode === void 0 ? 'normal' : _ref$$mixBlendMode,
    $mapLibCssClass = _ref.$mapLibCssClass;
  return "\n  #default-deckgl-overlay {\n    mix-blend-mode: ".concat($mixBlendMode, ";\n  };\n  *[").concat($mapLibCssClass, "-children] {\n    position: absolute;\n  }\n");
});
var MAPBOXGL_STYLE_UPDATE = 'style.load';
var MAPBOXGL_RENDER = 'render';
var nop = function nop() {
  return;
};
var MapLibLogo = function MapLibLogo(_ref2) {
  var baseMapLibraryConfig = _ref2.baseMapLibraryConfig;
  return /*#__PURE__*/_react["default"].createElement("div", {
    className: "attrition-logo"
  }, "Basemap by:", /*#__PURE__*/_react["default"].createElement("a", {
    style: {
      marginLeft: '5px'
    },
    className: "".concat(baseMapLibraryConfig.mapLibCssClass, "-ctrl-logo"),
    target: "_blank",
    rel: "noopener noreferrer",
    href: baseMapLibraryConfig.mapLibUrl,
    "aria-label": "".concat(baseMapLibraryConfig.mapLibName, " logo")
  }));
};
var StyledDroppable = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  background-color: ", ";\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  pointer-events: none;\n  z-index: 1;\n"])), function (props) {
  return props.isOver ? props.theme.dndOverBackgroundColor : 'none';
});
var isSplitSelector = exports.isSplitSelector = function isSplitSelector(props) {
  return props.visState.splitMaps && props.visState.splitMaps.length > 1;
};
var Droppable = exports.Droppable = function Droppable(_ref3) {
  var containerId = _ref3.containerId;
  var _useDroppable = (0, _core.useDroppable)({
      id: containerId,
      data: {
        type: _dndLayerItems.DROPPABLE_MAP_CONTAINER_TYPE,
        index: containerId
      },
      disabled: !containerId
    }),
    isOver = _useDroppable.isOver,
    setNodeRef = _useDroppable.setNodeRef;
  return /*#__PURE__*/_react["default"].createElement(StyledDroppable, {
    ref: setNodeRef,
    isOver: isOver
  });
};
var StyledDatasetAttributionsContainer = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  max-width: ", ";\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  color: ", ";\n  margin-right: 2px;\n  margin-bottom: 1px;\n  line-height: ", ";\n\n  &:hover {\n    white-space: inherit;\n  }\n"])), function (props) {
  return props.isPalm ? '200px' : '300px';
}, function (props) {
  return props.theme.labelColor;
}, function (props) {
  return props.isPalm ? '1em' : '1.4em';
});
var DatasetAttributions = function DatasetAttributions(_ref4) {
  var datasetAttributions = _ref4.datasetAttributions,
    isPalm = _ref4.isPalm;
  return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, datasetAttributions !== null && datasetAttributions !== void 0 && datasetAttributions.length ? /*#__PURE__*/_react["default"].createElement(StyledDatasetAttributionsContainer, {
    isPalm: isPalm
  }, datasetAttributions.map(function (ds, idx) {
    return /*#__PURE__*/_react["default"].createElement("a", (0, _extends2["default"])({}, ds.url ? {
      href: ds.url
    } : null, {
      target: "_blank",
      rel: "noopener noreferrer",
      key: "".concat(ds.title, "_").concat(idx)
    }), ds.title, idx !== datasetAttributions.length - 1 ? ', ' : null);
  })) : null);
};
var Attribution = exports.Attribution = function Attribution(_ref5) {
  var _ref5$showBaseMapLibL = _ref5.showBaseMapLibLogo,
    showBaseMapLibLogo = _ref5$showBaseMapLibL === void 0 ? true : _ref5$showBaseMapLibL,
    _ref5$showOsmBasemapA = _ref5.showOsmBasemapAttribution,
    showOsmBasemapAttribution = _ref5$showOsmBasemapA === void 0 ? false : _ref5$showOsmBasemapA,
    datasetAttributions = _ref5.datasetAttributions,
    baseMapLibraryConfig = _ref5.baseMapLibraryConfig;
  var isPalm = (0, _utils.hasMobileWidth)(_styles.breakPointValues);
  var memoizedComponents = (0, _react.useMemo)(function () {
    if (!showBaseMapLibLogo) {
      return /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledAttribution, {
        mapLibCssClass: baseMapLibraryConfig.mapLibCssClass,
        mapLibAttributionCssClass: baseMapLibraryConfig.mapLibAttributionCssClass
      }, /*#__PURE__*/_react["default"].createElement(_styledComponents2.EndHorizontalFlexbox, null, /*#__PURE__*/_react["default"].createElement(DatasetAttributions, {
        datasetAttributions: datasetAttributions,
        isPalm: isPalm
      }), showOsmBasemapAttribution ? /*#__PURE__*/_react["default"].createElement("div", {
        className: "attrition-link"
      }, datasetAttributions !== null && datasetAttributions !== void 0 && datasetAttributions.length ? /*#__PURE__*/_react["default"].createElement("span", {
        className: "pipe-separator"
      }, "|") : null, /*#__PURE__*/_react["default"].createElement("a", {
        href: "http://www.openstreetmap.org/copyright",
        target: "_blank",
        rel: "noopener noreferrer"
      }, "\xA9 OpenStreetMap")) : null));
    }
    return /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledAttribution, {
      mapLibCssClass: baseMapLibraryConfig.mapLibCssClass,
      mapLibAttributionCssClass: baseMapLibraryConfig.mapLibAttributionCssClass
    }, /*#__PURE__*/_react["default"].createElement(_styledComponents2.EndHorizontalFlexbox, null, /*#__PURE__*/_react["default"].createElement(DatasetAttributions, {
      datasetAttributions: datasetAttributions,
      isPalm: isPalm
    }), /*#__PURE__*/_react["default"].createElement("div", {
      className: "attrition-link"
    }, datasetAttributions !== null && datasetAttributions !== void 0 && datasetAttributions.length ? /*#__PURE__*/_react["default"].createElement("span", {
      className: "pipe-separator"
    }, "|") : null, isPalm ? /*#__PURE__*/_react["default"].createElement(MapLibLogo, {
      baseMapLibraryConfig: baseMapLibraryConfig
    }) : null, /*#__PURE__*/_react["default"].createElement("a", {
      href: "https://kepler.gl/policy/",
      target: "_blank",
      rel: "noopener noreferrer"
    }, "\xA9 kepler.gl |", ' '), !isPalm ? /*#__PURE__*/_react["default"].createElement(MapLibLogo, {
      baseMapLibraryConfig: baseMapLibraryConfig
    }) : null)));
  }, [showBaseMapLibLogo, showOsmBasemapAttribution, datasetAttributions, isPalm, baseMapLibraryConfig]);
  return memoizedComponents;
};
MapContainerFactory.deps = [_mapPopover["default"], _mapControl["default"], _editor["default"]];
function MapContainerFactory(MapPopover, MapControl, Editor) {
  var MapContainer = /*#__PURE__*/function (_Component) {
    function MapContainer(_props) {
      var _this;
      (0, _classCallCheck2["default"])(this, MapContainer);
      _this = _callSuper(this, MapContainer, [_props]);
      (0, _defineProperty2["default"])(_this, "displayName", 'MapContainer');
      (0, _defineProperty2["default"])(_this, "anyActiveLayerLoading", false);
      (0, _defineProperty2["default"])(_this, "state", {
        // Determines whether attribution should be visible based the result of loading the map style
        showBaseMapAttribution: true
      });
      (0, _defineProperty2["default"])(_this, "_deck", null);
      (0, _defineProperty2["default"])(_this, "_map", null);
      (0, _defineProperty2["default"])(_this, "_ref", /*#__PURE__*/(0, _react.createRef)());
      (0, _defineProperty2["default"])(_this, "_deckGLErrorsElapsed", {});
      (0, _defineProperty2["default"])(_this, "previousLayers", {
        // [layers.id]: mapboxLayerConfig
      });
      (0, _defineProperty2["default"])(_this, "_handleResize", function (dimensions) {
        var _this$props = _this.props,
          primary = _this$props.primary,
          index = _this$props.index;
        if (primary) {
          var mapStateActions = _this.props.mapStateActions;
          if (dimensions && dimensions.width > 0 && dimensions.height > 0) {
            mapStateActions.updateMap(dimensions, index);
          }
        }
      });
      (0, _defineProperty2["default"])(_this, "layersSelector", function (props) {
        return props.visState.layers;
      });
      (0, _defineProperty2["default"])(_this, "layerDataSelector", function (props) {
        return props.visState.layerData;
      });
      (0, _defineProperty2["default"])(_this, "splitMapSelector", function (props) {
        return props.visState.splitMaps;
      });
      (0, _defineProperty2["default"])(_this, "splitMapIndexSelector", function (props) {
        return props.index;
      });
      (0, _defineProperty2["default"])(_this, "mapLayersSelector", (0, _reselect.createSelector)(_this.splitMapSelector, _this.splitMapIndexSelector, _utils.getMapLayersFromSplitMaps));
      (0, _defineProperty2["default"])(_this, "layerOrderSelector", function (props) {
        return props.visState.layerOrder;
      });
      (0, _defineProperty2["default"])(_this, "layersToRenderSelector", (0, _reselect.createSelector)(_this.layersSelector, _this.layerDataSelector, _this.mapLayersSelector, _reducers.prepareLayersToRender));
      (0, _defineProperty2["default"])(_this, "layersForDeckSelector", (0, _reselect.createSelector)(_this.layersSelector, _this.layerDataSelector, _reducers.prepareLayersForDeck));
      (0, _defineProperty2["default"])(_this, "filtersSelector", function (props) {
        return props.visState.filters;
      });
      (0, _defineProperty2["default"])(_this, "polygonFiltersSelector", (0, _reselect.createSelector)(_this.filtersSelector, function (filters) {
        return filters.filter(function (f) {
          return f.type === _constants.FILTER_TYPES.polygon && f.enabled !== false;
        });
      }));
      (0, _defineProperty2["default"])(_this, "featuresSelector", function (props) {
        return props.visState.editor.features;
      });
      (0, _defineProperty2["default"])(_this, "selectedFeatureSelector", function (props) {
        return props.visState.editor.selectedFeature;
      });
      (0, _defineProperty2["default"])(_this, "featureCollectionSelector", (0, _reselect.createSelector)(_this.polygonFiltersSelector, _this.featuresSelector, function (polygonFilters, features) {
        return {
          type: 'FeatureCollection',
          features: features.concat(polygonFilters.map(function (f) {
            return f.value;
          }))
        };
      }));
      // @ts-ignore - No overload matches this call
      (0, _defineProperty2["default"])(_this, "selectedPolygonIndexSelector", (0, _reselect.createSelector)(_this.featureCollectionSelector, _this.selectedFeatureSelector, function (collection, selectedFeature) {
        return collection.features.findIndex(function (f) {
          return f.id === (selectedFeature === null || selectedFeature === void 0 ? void 0 : selectedFeature.id);
        });
      }));
      (0, _defineProperty2["default"])(_this, "selectedFeatureIndexArraySelector", (0, _reselect.createSelector)(function (value) {
        return value;
      }, function (value) {
        return value < 0 ? [] : [value];
      }));
      (0, _defineProperty2["default"])(_this, "generateMapboxLayerMethodSelector", function (props) {
        var _props$generateMapbox;
        return (_props$generateMapbox = props.generateMapboxLayers) !== null && _props$generateMapbox !== void 0 ? _props$generateMapbox : _layers.generateMapboxLayers;
      });
      (0, _defineProperty2["default"])(_this, "mapboxLayersSelector", (0, _reselect.createSelector)(_this.layersSelector, _this.layerDataSelector, _this.layerOrderSelector, _this.layersToRenderSelector, _this.generateMapboxLayerMethodSelector, function (layer, layerData, layerOrder, layersToRender, generateMapboxLayerMethod) {
        return generateMapboxLayerMethod(layer, layerData, layerOrder, layersToRender);
      }));
      // merge in a background-color style if the basemap choice is NO_MAP_ID
      // used by <StyledMap> inline style prop
      (0, _defineProperty2["default"])(_this, "mapStyleTypeSelector", function (props) {
        return props.mapStyle.styleType;
      });
      (0, _defineProperty2["default"])(_this, "mapStyleBackgroundColorSelector", function (props) {
        return props.mapStyle.backgroundColor;
      });
      (0, _defineProperty2["default"])(_this, "styleSelector", (0, _reselect.createSelector)(_this.mapStyleTypeSelector, _this.mapStyleBackgroundColorSelector, function (styleType, backgroundColor) {
        return _objectSpread(_objectSpread({}, MAP_STYLE.container), styleType === _constants.NO_MAP_ID ? {
          backgroundColor: (0, _utils.rgbToHex)(backgroundColor)
        } : {});
      }));
      /* component private functions */
      (0, _defineProperty2["default"])(_this, "_onCloseMapPopover", function () {
        _this.props.visStateActions.onLayerClick(null);
      });
      (0, _defineProperty2["default"])(_this, "_onLayerHover", function (_idx, info) {
        _this.props.visStateActions.onLayerHover(info, _this.props.index);
      });
      (0, _defineProperty2["default"])(_this, "_onLayerSetDomain", function (idx, value) {
        _this.props.visStateActions.layerConfigChange(_this.props.visState.layers[idx], {
          colorDomain: value.domain,
          aggregatedBins: value.aggregatedBins
        });
      });
      (0, _defineProperty2["default"])(_this, "_onLayerFilteredItemsChange", function (idx, event) {
        _this.props.visStateActions.layerFilteredItemsChange(_this.props.visState.layers[idx], event);
      });
      (0, _defineProperty2["default"])(_this, "_handleMapToggleLayer", function (layerId) {
        var _this$props2 = _this.props,
          _this$props2$index = _this$props2.index,
          mapIndex = _this$props2$index === void 0 ? 0 : _this$props2$index,
          visStateActions = _this$props2.visStateActions;
        visStateActions.toggleLayerForMap(mapIndex, layerId);
      });
      (0, _defineProperty2["default"])(_this, "_onMapboxStyleUpdate", function (update) {
        // force refresh mapboxgl layers
        _this.previousLayers = {};
        _this._updateMapboxLayers();
        if (update && update.style) {
          // No attributions are needed if the style doesn't reference Mapbox sources
          _this.setState({
            showBaseMapAttribution: (0, _utils.isStyleUsingMapboxTiles)(update.style) || !(0, _utils.isStyleUsingOpenStreetMapTiles)(update.style)
          });
        }
        if (typeof _this.props.onMapStyleLoaded === 'function') {
          _this.props.onMapStyleLoaded(_this._map);
        }
      });
      (0, _defineProperty2["default"])(_this, "_setMapRef", function (mapRef) {
        // Handle change of the map library
        if (_this._map && mapRef) {
          var map = mapRef.getMap();
          if (map && _this._map !== map) {
            var _this$_map, _this$_map2;
            (_this$_map = _this._map) === null || _this$_map === void 0 || _this$_map.off(MAPBOXGL_STYLE_UPDATE, nop);
            (_this$_map2 = _this._map) === null || _this$_map2 === void 0 || _this$_map2.off(MAPBOXGL_RENDER, nop);
            _this._map = null;
          }
        }
        if (!_this._map && mapRef) {
          _this._map = mapRef.getMap();
          // i noticed in certain context we don't access the actual map element
          if (!_this._map) {
            return;
          }
          // bind mapboxgl event listener
          _this._map.on(MAPBOXGL_STYLE_UPDATE, _this._onMapboxStyleUpdate);
          _this._map.on(MAPBOXGL_RENDER, function () {
            if (typeof _this.props.onMapRender === 'function') {
              _this.props.onMapRender(_this._map);
            }
          });
        }
        if (_this.props.getMapboxRef) {
          // The parent component can gain access to our MapboxGlMap by
          // providing this callback. Note that 'mapbox' will be null when the
          // ref is unset (e.g. when a split map is closed).
          _this.props.getMapboxRef(mapRef, _this.props.index);
        }
      });
      (0, _defineProperty2["default"])(_this, "_onBeforeRender", function (_ref6) {
        var gl = _ref6.gl;
        (0, _utils.setLayerBlending)(gl, _this.props.visState.layerBlending);
      });
      (0, _defineProperty2["default"])(_this, "_onDeckError", function (error, layer) {
        var errorMessage = (error === null || error === void 0 ? void 0 : error.message) || 'unknown-error';
        var layerMessage = layer !== null && layer !== void 0 && layer.id ? " in ".concat(layer.id, " layer") : '';
        var errorMessageFull = errorMessage === 'WebGL context is lost' ? 'Your GPU was disconnected. This can happen if your computer goes to sleep. It can also occur for other reasons, such as if you are running too many GPU applications.' : "An error in deck.gl: ".concat(errorMessage).concat(layerMessage, ".");

        // Throttle error notifications, as React doesn't like too many state changes from here.
        var lastShown = _this._deckGLErrorsElapsed[errorMessageFull];
        if (!lastShown || lastShown < Date.now() - _constants.THROTTLE_NOTIFICATION_TIME) {
          _this._deckGLErrorsElapsed[errorMessageFull] = Date.now();

          // Mark layer as invalid
          var extraLayerMessage = '';
          var visStateActions = _this.props.visStateActions;
          if (layer) {
            var _topMostLayer$props;
            var topMostLayer = layer;
            while (topMostLayer.parent) {
              topMostLayer = topMostLayer.parent;
            }
            if ((_topMostLayer$props = topMostLayer.props) !== null && _topMostLayer$props !== void 0 && _topMostLayer$props.id) {
              visStateActions.layerSetIsValid(topMostLayer, false);
              extraLayerMessage = 'The layer has been disabled and highlighted.';
            }
          }

          // Create new error notification or update existing one with same id.
          // Update is required to preserve the order of notifications as they probably are going to "jump" based on order of errors.
          var uiStateActions = _this.props.uiStateActions;
          uiStateActions.addNotification((0, _utils.errorNotification)({
            message: "".concat(errorMessageFull, " ").concat(extraLayerMessage),
            id: errorMessageFull // treat the error message as id
          }));
        }
      });
      (0, _defineProperty2["default"])(_this, "_onViewportChangePropagateDebounced", (0, _debounce["default"])(function () {
        var _this$context;
        var viewState = (_this$context = _this.context) === null || _this$context === void 0 ? void 0 : _this$context.getInternalViewState(_this.props.index);
        (0, _utils.onViewPortChange)(viewState, _this.props.mapStateActions.updateMap, _this.props.onViewStateChange, _this.props.primary, _this.props.index);
      }, DEBOUNCE_VIEWPORT_PROPAGATE));
      (0, _defineProperty2["default"])(_this, "_onViewportChange", function (viewport) {
        var viewState = viewport.viewState;
        if (_this.props.isExport) {
          // Image export map shouldn't be interactive (otherwise this callback can
          // lead to inadvertent changes to the state of the main map)
          return;
        }
        var setInternalViewState = _this.context.setInternalViewState;
        setInternalViewState(viewState, _this.props.index);
        _this._onViewportChangePropagateDebounced();
      });
      (0, _defineProperty2["default"])(_this, "_onLayerHoverDebounced", (0, _debounce["default"])(function (data, index) {
        _this.props.visStateActions.onLayerHover(data, index);
      }, DEBOUNCE_MOUSE_MOVE_PROPAGATE));
      (0, _defineProperty2["default"])(_this, "_onMouseMoveDebounced", (0, _debounce["default"])(function (event, viewport) {
        _this.props.visStateActions.onMouseMove((0, _utils.normalizeEvent)(event, viewport));
      }, DEBOUNCE_MOUSE_MOVE_PROPAGATE));
      (0, _defineProperty2["default"])(_this, "_onLayerLoadingStateChange", (0, _debounce["default"])(function () {
        // trigger loading indicator update without any change to update UI
        _this.props.visStateActions.setLoadingIndicator({
          change: 0
        });
      }, DEBOUNCE_LOADING_STATE_PROPAGATE));
      (0, _defineProperty2["default"])(_this, "_toggleMapControl", function (panelId) {
        var _this$props3 = _this.props,
          index = _this$props3.index,
          uiStateActions = _this$props3.uiStateActions;
        uiStateActions.toggleMapControl(panelId, Number(index));
      });
      return _this;
    }
    (0, _inherits2["default"])(MapContainer, _Component);
    return (0, _createClass2["default"])(MapContainer, [{
      key: "componentDidMount",
      value: function componentDidMount() {
        if (!this._ref.current) {
          return;
        }
        (0, _utils.observeDimensions)(this._ref.current, this._handleResize);
      }
    }, {
      key: "componentWillUnmount",
      value: function componentWillUnmount() {
        // unbind mapboxgl event listener
        if (this._map) {
          var _this$_map3, _this$_map4;
          (_this$_map3 = this._map) === null || _this$_map3 === void 0 || _this$_map3.off(MAPBOXGL_STYLE_UPDATE, nop);
          (_this$_map4 = this._map) === null || _this$_map4 === void 0 || _this$_map4.off(MAPBOXGL_RENDER, nop);
        }
        if (!this._ref.current) {
          return;
        }
        (0, _utils.unobserveDimensions)(this._ref.current);
      }
    }, {
      key: "_onDeckInitialized",
      value: function _onDeckInitialized(gl) {
        if (this.props.onDeckInitialized) {
          this.props.onDeckInitialized(this._deck, gl);
        }
      }

      /**
       * 1) Allow effects only for the first view.
       * 2) Prevent effect:preRender call without valid generated viewports.
       * @param viewIndex View index.
       * @returns Returns true if effects can be used.
       */
    }, {
      key: "_isOKToRenderEffects",
      value: function _isOKToRenderEffects(viewIndex) {
        var _this$_deck;
        return !viewIndex && Boolean((_this$_deck = this._deck) === null || _this$_deck === void 0 || (_this$_deck = _this$_deck.viewManager) === null || _this$_deck === void 0 || (_this$_deck = _this$_deck._viewports) === null || _this$_deck === void 0 ? void 0 : _this$_deck.length);
      }
    }, {
      key: "_renderMapPopover",
      value: /* component render functions */

      /* eslint-disable complexity */
      function _renderMapPopover() {
        var _this$props$visState$;
        // this check is for limiting the display of the `<MapPopover>` to the `<MapContainer>` the user is interacting with
        // the DeckGL onHover event handler adds a `mapIndex` property which is available in the `hoverInfo` object of `visState`
        if (this.props.index !== ((_this$props$visState$ = this.props.visState.hoverInfo) === null || _this$props$visState$ === void 0 ? void 0 : _this$props$visState$.mapIndex)) {
          return null;
        }

        // TODO: move this into reducer so it can be tested
        var _this$props4 = this.props,
          mapState = _this$props4.mapState,
          _this$props4$visState = _this$props4.visState,
          hoverInfo = _this$props4$visState.hoverInfo,
          clicked = _this$props4$visState.clicked,
          datasets = _this$props4$visState.datasets,
          interactionConfig = _this$props4$visState.interactionConfig,
          animationConfig = _this$props4$visState.animationConfig,
          layers = _this$props4$visState.layers,
          _this$props4$visState2 = _this$props4$visState.mousePos,
          mousePosition = _this$props4$visState2.mousePosition,
          coordinate = _this$props4$visState2.coordinate,
          pinned = _this$props4$visState2.pinned;
        var layersToRender = this.layersToRenderSelector(this.props);
        if (!mousePosition || !interactionConfig.tooltip) {
          return null;
        }
        var layerHoverProp = (0, _reducers.getLayerHoverProp)({
          animationConfig: animationConfig,
          interactionConfig: interactionConfig,
          hoverInfo: hoverInfo,
          layers: layers,
          layersToRender: layersToRender,
          datasets: datasets
        });
        var compareMode = interactionConfig.tooltip.config ? interactionConfig.tooltip.config.compareMode : false;
        var pinnedPosition = {
          x: 0,
          y: 0
        };
        var layerPinnedProp = null;
        if (pinned || clicked) {
          // project lnglat to screen so that tooltip follows the object on zoom
          var viewport = (0, _utils.getViewportFromMapState)(mapState);
          var lngLat = clicked ? clicked.coordinate : pinned.coordinate;
          pinnedPosition = this._getHoverXY(viewport, lngLat);
          layerPinnedProp = (0, _reducers.getLayerHoverProp)({
            animationConfig: animationConfig,
            interactionConfig: interactionConfig,
            hoverInfo: clicked,
            layers: layers,
            layersToRender: layersToRender,
            datasets: datasets
          });
          if (layerHoverProp && layerPinnedProp) {
            layerHoverProp.primaryData = layerPinnedProp.data;
            layerHoverProp.compareType = interactionConfig.tooltip.config.compareType;
          }
        }
        var commonProp = {
          onClose: this._onCloseMapPopover,
          zoom: mapState.zoom,
          container: this._deck ? this._deck.canvas : undefined
        };
        return /*#__PURE__*/_react["default"].createElement(_errorBoundary["default"], null, layerPinnedProp && /*#__PURE__*/_react["default"].createElement(MapPopover, (0, _extends2["default"])({}, pinnedPosition, commonProp, {
          layerHoverProp: layerPinnedProp,
          coordinate: interactionConfig.coordinate.enabled && (pinned || {}).coordinate,
          frozen: true,
          isBase: compareMode,
          onSetFeatures: this.props.visStateActions.setFeatures,
          setSelectedFeature: this.props.visStateActions.setSelectedFeature
          // @ts-ignore Argument of type 'Readonly<MapContainerProps>' is not assignable to parameter of type 'never'
          ,

          featureCollection: this.featureCollectionSelector(this.props)
        })), layerHoverProp && (!layerPinnedProp || compareMode) && /*#__PURE__*/_react["default"].createElement(MapPopover, (0, _extends2["default"])({
          x: mousePosition[0],
          y: mousePosition[1]
        }, commonProp, {
          layerHoverProp: layerHoverProp,
          frozen: false,
          coordinate: interactionConfig.coordinate.enabled && coordinate,
          onSetFeatures: this.props.visStateActions.setFeatures,
          setSelectedFeature: this.props.visStateActions.setSelectedFeature
          // @ts-ignore Argument of type 'Readonly<MapContainerProps>' is not assignable to parameter of type 'never'
          ,

          featureCollection: this.featureCollectionSelector(this.props)
        })));
      }

      /* eslint-enable complexity */
    }, {
      key: "_getHoverXY",
      value: function _getHoverXY(viewport, lngLat) {
        var screenCoord = !viewport || !lngLat ? null : viewport.project(lngLat);
        return screenCoord && {
          x: screenCoord[0],
          y: screenCoord[1]
        };
      }
    }, {
      key: "_renderDeckOverlay",
      value: function _renderDeckOverlay(layersForDeck) {
        var _this$context2,
          _this2 = this;
        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {
          primaryMap: false
        };
        var _this$props5 = this.props,
          mapStyle = _this$props5.mapStyle,
          visState = _this$props5.visState,
          mapState = _this$props5.mapState,
          visStateActions = _this$props5.visStateActions,
          mapboxApiAccessToken = _this$props5.mapboxApiAccessToken,
          mapboxApiUrl = _this$props5.mapboxApiUrl,
          deckGlProps = _this$props5.deckGlProps,
          index = _this$props5.index,
          mapControls = _this$props5.mapControls,
          deckRenderCallbacks = _this$props5.deckRenderCallbacks,
          theme = _this$props5.theme,
          generateDeckGLLayers = _this$props5.generateDeckGLLayers,
          onMouseMove = _this$props5.onMouseMove;
        var hoverInfo = visState.hoverInfo,
          editor = visState.editor;
        var primaryMap = options.primaryMap,
          isInteractive = options.isInteractive,
          children = options.children;

        // disable double click zoom when editor is in any draw mode
        var mapDraw = mapControls.mapDraw;
        var _ref7 = mapDraw || {},
          _ref7$active = _ref7.active,
          editorMenuActive = _ref7$active === void 0 ? false : _ref7$active;
        var isEditorDrawingMode = _layers.EditorLayerUtils.isDrawingActive(editorMenuActive, editor.mode);
        var internalViewState = (_this$context2 = this.context) === null || _this$context2 === void 0 ? void 0 : _this$context2.getInternalViewState(index);
        var internalMapState = _objectSpread(_objectSpread({}, mapState), internalViewState);
        var viewport = (0, _utils.getViewportFromMapState)(internalMapState);
        var editorFeatureSelectedIndex = this.selectedPolygonIndexSelector(this.props);
        var setFeatures = visStateActions.setFeatures,
          onLayerClick = visStateActions.onLayerClick,
          setSelectedFeature = visStateActions.setSelectedFeature;
        var generateDeckGLLayersMethod = generateDeckGLLayers !== null && generateDeckGLLayers !== void 0 ? generateDeckGLLayers : _reducers.computeDeckLayers;
        var deckGlLayers = generateDeckGLLayersMethod({
          visState: visState,
          mapState: internalMapState,
          mapStyle: mapStyle
        }, {
          mapIndex: index,
          primaryMap: primaryMap,
          mapboxApiAccessToken: mapboxApiAccessToken,
          mapboxApiUrl: mapboxApiUrl,
          layersForDeck: layersForDeck,
          editorInfo: primaryMap ? {
            editor: editor,
            editorMenuActive: editorMenuActive,
            onSetFeatures: setFeatures,
            setSelectedFeature: setSelectedFeature,
            // @ts-ignore Argument of type 'Readonly<MapContainerProps>' is not assignable to parameter of type 'never'
            featureCollection: this.featureCollectionSelector(this.props),
            selectedFeatureIndexes: this.selectedFeatureIndexArraySelector(
            // @ts-ignore Argument of type 'unknown' is not assignable to parameter of type 'number'.
            editorFeatureSelectedIndex),
            viewport: viewport
          } : undefined
        }, {
          onLayerHover: this._onLayerHover,
          onSetLayerDomain: this._onLayerSetDomain,
          onFilteredItemsChange: this._onLayerFilteredItemsChange
        }, deckGlProps);
        var extraDeckParams = {};
        if (primaryMap) {
          extraDeckParams.getTooltip = function (info) {
            return _layers.EditorLayerUtils.getTooltip(info, {
              editorMenuActive: editorMenuActive,
              editor: editor,
              theme: theme
            });
          };
          extraDeckParams.getCursor = function (_ref8) {
            var isDragging = _ref8.isDragging;
            var editorCursor = _layers.EditorLayerUtils.getCursor({
              editorMenuActive: editorMenuActive,
              editor: editor,
              hoverInfo: hoverInfo
            });
            if (editorCursor) return editorCursor;
            if (isDragging) return 'grabbing';
            if (hoverInfo !== null && hoverInfo !== void 0 && hoverInfo.layer) return 'pointer';
            return 'grab';
          };
        }
        var effects = this._isOKToRenderEffects(index) ? (0, _utils.computeDeckEffects)({
          visState: visState,
          mapState: mapState
        }) : [];
        var views = deckGlProps !== null && deckGlProps !== void 0 && deckGlProps.views ? deckGlProps === null || deckGlProps === void 0 ? void 0 : deckGlProps.views() : new _core2.MapView({
          legacyMeterSizes: true
        });
        var allDeckGlProps = _objectSpread(_objectSpread({}, deckGlProps), {}, {
          pickingRadius: _constants.DEFAULT_PICKING_RADIUS,
          views: views,
          layers: deckGlLayers,
          effects: effects
        });
        if (typeof (deckRenderCallbacks === null || deckRenderCallbacks === void 0 ? void 0 : deckRenderCallbacks.onDeckRender) === 'function') {
          allDeckGlProps = deckRenderCallbacks.onDeckRender(allDeckGlProps);
          if (!allDeckGlProps) {
            // if onDeckRender returns null, do not render deck.gl
            return null;
          }
        }
        return /*#__PURE__*/_react["default"].createElement("div", isInteractive ? {
          onMouseMove: primaryMap ? function (event) {
            onMouseMove === null || onMouseMove === void 0 || onMouseMove(event);
            _this2._onMouseMoveDebounced(event, viewport);
          } : undefined
        } : {
          style: {
            pointerEvents: 'none'
          }
        }, /*#__PURE__*/_react["default"].createElement(_react2["default"], (0, _extends2["default"])({
          id: "default-deckgl-overlay",
          onLoad: function onLoad() {
            if (typeof (deckRenderCallbacks === null || deckRenderCallbacks === void 0 ? void 0 : deckRenderCallbacks.onDeckLoad) === 'function') {
              deckRenderCallbacks.onDeckLoad();
            }
          }
        }, allDeckGlProps, {
          controller: isInteractive ? {
            doubleClickZoom: !isEditorDrawingMode,
            dragRotate: this.props.mapState.dragRotate
          } : false,
          initialViewState: internalViewState,
          onBeforeRender: this._onBeforeRender,
          onViewStateChange: isInteractive ? this._onViewportChange : undefined
        }, extraDeckParams, {
          onHover: isInteractive ? function (data) {
            var res = _layers.EditorLayerUtils.onHover(data, {
              editorMenuActive: editorMenuActive,
              editor: editor,
              hoverInfo: hoverInfo
            });
            if (res) return;
            _this2._onLayerHoverDebounced(data, index);
          } : null,
          onClick: function onClick(data, event) {
            // @ts-ignore
            (0, _utils.normalizeEvent)(event.srcEvent, viewport);
            var res = _layers.EditorLayerUtils.onClick(data, event, {
              editorMenuActive: editorMenuActive,
              editor: editor,
              onLayerClick: onLayerClick,
              setSelectedFeature: setSelectedFeature,
              mapIndex: index
            });
            if (res) return;
            visStateActions.onLayerClick(data);
          },
          onError: this._onDeckError,
          ref: function ref(comp) {
            // @ts-ignore
            if (comp && comp.deck && !_this2._deck) {
              // @ts-ignore
              _this2._deck = comp.deck;
            }
          },
          onWebGLInitialized: function onWebGLInitialized(gl) {
            return _this2._onDeckInitialized(gl);
          },
          onAfterRender: function onAfterRender() {
            if (typeof (deckRenderCallbacks === null || deckRenderCallbacks === void 0 ? void 0 : deckRenderCallbacks.onDeckAfterRender) === 'function') {
              deckRenderCallbacks.onDeckAfterRender(allDeckGlProps);
            }
            var anyActiveLayerLoading = (0, _reducers.areAnyDeckLayersLoading)(allDeckGlProps.layers);
            if (anyActiveLayerLoading !== _this2.anyActiveLayerLoading) {
              _this2._onLayerLoadingStateChange();
              _this2.anyActiveLayerLoading = anyActiveLayerLoading;
            }
          }
        }), children));
      }
    }, {
      key: "_updateMapboxLayers",
      value: function _updateMapboxLayers() {
        var mapboxLayers = this.mapboxLayersSelector(this.props);
        if (!Object.keys(mapboxLayers).length && !Object.keys(this.previousLayers).length) {
          return;
        }
        (0, _layers.updateMapboxLayers)(this._map, mapboxLayers, this.previousLayers);
        this.previousLayers = mapboxLayers;
      }
    }, {
      key: "_renderMapboxOverlays",
      value: function _renderMapboxOverlays() {
        if (this._map && this._map.isStyleLoaded()) {
          this._updateMapboxLayers();
        }
      }
    }, {
      key: "_renderMap",
      value: /* eslint-disable complexity */
      function _renderMap() {
        var _mapStyle$mapStyles, _getApplicationConfig, _this$context3, _mapStyle$bottomMapSt;
        var _this$props6 = this.props,
          visState = _this$props6.visState,
          mapState = _this$props6.mapState,
          mapStyle = _this$props6.mapStyle,
          mapStateActions = _this$props6.mapStateActions,
          _this$props6$MapCompo = _this$props6.MapComponent,
          MapComponent = _this$props6$MapCompo === void 0 ? _reactMapGl.Map : _this$props6$MapCompo,
          mapboxApiAccessToken = _this$props6.mapboxApiAccessToken,
          mapControls = _this$props6.mapControls,
          isExport = _this$props6.isExport,
          locale = _this$props6.locale,
          uiStateActions = _this$props6.uiStateActions,
          visStateActions = _this$props6.visStateActions,
          index = _this$props6.index,
          primary = _this$props6.primary,
          bottomMapContainerProps = _this$props6.bottomMapContainerProps,
          topMapContainerProps = _this$props6.topMapContainerProps,
          theme = _this$props6.theme,
          _this$props6$datasetA = _this$props6.datasetAttributions,
          datasetAttributions = _this$props6$datasetA === void 0 ? [] : _this$props6$datasetA,
          _this$props6$containe = _this$props6.containerId,
          containerId = _this$props6$containe === void 0 ? 0 : _this$props6$containe,
          isLoadingIndicatorVisible = _this$props6.isLoadingIndicatorVisible,
          activeSidePanel = _this$props6.activeSidePanel,
          sidePanelWidth = _this$props6.sidePanelWidth;
        var layers = visState.layers,
          datasets = visState.datasets,
          editor = visState.editor,
          interactionConfig = visState.interactionConfig;
        var layersToRender = this.layersToRenderSelector(this.props);
        var layersForDeck = this.layersForDeckSelector(this.props);

        // Current style can be a custom style, from which we pull the mapbox API acccess token
        var currentStyle = (_mapStyle$mapStyles = mapStyle.mapStyles) === null || _mapStyle$mapStyles === void 0 ? void 0 : _mapStyle$mapStyles[mapStyle.styleType];
        var baseMapLibraryName = (0, _utils.getBaseMapLibrary)(currentStyle);
        var baseMapLibraryConfig = (_getApplicationConfig = (0, _utils.getApplicationConfig)().baseMapLibraryConfig) === null || _getApplicationConfig === void 0 ? void 0 : _getApplicationConfig[baseMapLibraryName];
        var internalViewState = (_this$context3 = this.context) === null || _this$context3 === void 0 ? void 0 : _this$context3.getInternalViewState(index);
        var mapProps = _objectSpread(_objectSpread({}, internalViewState), {}, {
          preserveDrawingBuffer: true,
          mapboxAccessToken: (currentStyle === null || currentStyle === void 0 ? void 0 : currentStyle.accessToken) || mapboxApiAccessToken,
          // baseApiUrl: mapboxApiUrl,
          mapLib: baseMapLibraryConfig.getMapLib(),
          transformRequest: this.props.transformRequest || (0, _utils.transformRequest)((currentStyle === null || currentStyle === void 0 ? void 0 : currentStyle.accessToken) || mapboxApiAccessToken)
        });
        var hasGeocoderLayer = Boolean(layers.find(function (l) {
          return l.id === _constants.GEOCODER_LAYER_ID;
        }));
        var isSplit = Boolean(mapState.isSplit);
        var deck = this._renderDeckOverlay(layersForDeck, {
          primaryMap: true,
          isInteractive: true,
          children: /*#__PURE__*/_react["default"].createElement(MapComponent, (0, _extends2["default"])({
            key: "bottom-".concat(baseMapLibraryName)
          }, mapProps, {
            mapStyle: (_mapStyle$bottomMapSt = mapStyle.bottomMapStyle) !== null && _mapStyle$bottomMapSt !== void 0 ? _mapStyle$bottomMapSt : _constants.EMPTY_MAPBOX_STYLE
          }, bottomMapContainerProps, {
            ref: this._setMapRef
          }))
        });
        if (!deck) {
          // deckOverlay can be null if onDeckRender returns null
          // in this case we don't want to render the map
          return null;
        }
        return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement(MapControl, {
          mapState: mapState,
          datasets: datasets,
          availableLocales: LOCALE_CODES_ARRAY,
          dragRotate: mapState.dragRotate,
          isSplit: isSplit,
          primary: Boolean(primary),
          isExport: isExport,
          layers: layers,
          layersToRender: layersToRender,
          mapIndex: index || 0,
          mapControls: mapControls,
          readOnly: this.props.readOnly,
          scale: mapState.scale || 1,
          top: interactionConfig.geocoder && interactionConfig.geocoder.enabled ? theme.mapControlTop : 0,
          editor: editor,
          locale: locale,
          onTogglePerspective: mapStateActions.togglePerspective,
          onToggleSplitMap: mapStateActions.toggleSplitMap,
          onMapToggleLayer: this._handleMapToggleLayer,
          onToggleMapControl: this._toggleMapControl,
          onToggleSplitMapViewport: mapStateActions.toggleSplitMapViewport,
          onSetEditorMode: visStateActions.setEditorMode,
          onSetLocale: uiStateActions.setLocale,
          onToggleEditorVisibility: visStateActions.toggleEditorVisibility,
          onLayerVisConfigChange: visStateActions.layerVisConfigChange,
          mapHeight: mapState.height,
          setMapControlSettings: uiStateActions.setMapControlSettings,
          activeSidePanel: activeSidePanel
        }), isSplitSelector(this.props) && /*#__PURE__*/_react["default"].createElement(Droppable, {
          containerId: containerId
        }), deck, this._renderMapboxOverlays(), /*#__PURE__*/_react["default"].createElement(Editor, {
          index: index || 0,
          datasets: datasets,
          editor: editor,
          filters: this.polygonFiltersSelector(this.props),
          layers: layers,
          onDeleteFeature: visStateActions.deleteFeature,
          onSelect: visStateActions.setSelectedFeature,
          onTogglePolygonFilter: visStateActions.setPolygonFilterLayer,
          onSetEditorMode: visStateActions.setEditorMode,
          style: {
            pointerEvents: 'all',
            position: 'absolute',
            display: editor.visible ? 'block' : 'none'
          }
        }), this.props.children, mapStyle.topMapStyle ? /*#__PURE__*/_react["default"].createElement(MapComponent, (0, _extends2["default"])({
          key: "top-".concat(baseMapLibraryName),
          viewState: internalViewState,
          mapStyle: mapStyle.topMapStyle,
          style: MAP_STYLE.top,
          mapboxAccessToken: mapProps.mapboxAccessToken,
          transformRequest: mapProps.transformRequest,
          mapLib: baseMapLibraryConfig.getMapLib()
        }, topMapContainerProps)) : null, hasGeocoderLayer ? this._renderDeckOverlay((0, _defineProperty2["default"])({}, _constants.GEOCODER_LAYER_ID, hasGeocoderLayer), {
          primaryMap: false,
          isInteractive: false
        }) : null, this._renderMapPopover(), primary !== isSplit ? /*#__PURE__*/_react["default"].createElement(_loadingIndicator["default"], {
          isVisible: Boolean(isLoadingIndicatorVisible || this.anyActiveLayerLoading),
          activeSidePanel: Boolean(activeSidePanel),
          sidePanelWidth: sidePanelWidth
        }) : null, this.props.primary ? /*#__PURE__*/_react["default"].createElement(Attribution, {
          showBaseMapLibLogo: this.state.showBaseMapAttribution,
          showOsmBasemapAttribution: true,
          datasetAttributions: datasetAttributions,
          baseMapLibraryConfig: baseMapLibraryConfig
        }) : null);
      }
    }, {
      key: "render",
      value: function render() {
        var _mapStyle$mapStyles2, _getApplicationConfig2;
        var _this$props7 = this.props,
          visState = _this$props7.visState,
          mapStyle = _this$props7.mapStyle;
        var mapContent = this._renderMap();
        if (!mapContent) {
          // mapContent can be null if onDeckRender returns null
          // in this case we don't want to render the map
          return null;
        }
        var currentStyle = (_mapStyle$mapStyles2 = mapStyle.mapStyles) === null || _mapStyle$mapStyles2 === void 0 ? void 0 : _mapStyle$mapStyles2[mapStyle.styleType];
        var baseMapLibraryName = (0, _utils.getBaseMapLibrary)(currentStyle);
        var baseMapLibraryConfig = (_getApplicationConfig2 = (0, _utils.getApplicationConfig)().baseMapLibraryConfig) === null || _getApplicationConfig2 === void 0 ? void 0 : _getApplicationConfig2[baseMapLibraryName];
        return /*#__PURE__*/_react["default"].createElement(StyledMap, {
          ref: this._ref,
          style: this.styleSelector(this.props),
          onContextMenu: function onContextMenu(event) {
            return event.preventDefault();
          },
          $mixBlendMode: visState.overlayBlending,
          $mapLibCssClass: baseMapLibraryConfig.mapLibCssClass
        }, mapContent);
      }
    }]);
  }(_react.Component);
  (0, _defineProperty2["default"])(MapContainer, "contextType", _mapViewStateContext.MapViewStateContext);
  (0, _defineProperty2["default"])(MapContainer, "defaultProps", {
    MapComponent: _reactMapGl.Map,
    deckGlProps: {},
    index: 0,
    primary: true
  });
  return (0, _styledComponents.withTheme)(MapContainer);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9yZWFjdE1hcEdsIiwiX3JlYWN0MiIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfcmVzZWxlY3QiLCJfY29yZSIsIl9kZWJvdW5jZSIsIl9tYXBQb3BvdmVyIiwiX21hcENvbnRyb2wiLCJfc3R5bGVkQ29tcG9uZW50czIiLCJfZWRpdG9yIiwiX2xheWVycyIsIl91dGlscyIsIl9zdHlsZXMiLCJfY29uc3RhbnRzIiwiX2RuZExheWVySXRlbXMiLCJfbWFwVmlld1N0YXRlQ29udGV4dCIsIl9lcnJvckJvdW5kYXJ5IiwiX2xvY2FsaXphdGlvbiIsIl9jb3JlMiIsIl9yZWR1Y2VycyIsIl9sb2FkaW5nSW5kaWNhdG9yIiwiX3RlbXBsYXRlT2JqZWN0IiwiX3RlbXBsYXRlT2JqZWN0MiIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiX3R5cGVvZiIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsIl9jYWxsU3VwZXIiLCJfZ2V0UHJvdG90eXBlT2YyIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4yIiwiX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIlJlZmxlY3QiLCJjb25zdHJ1Y3QiLCJjb25zdHJ1Y3RvciIsIkJvb2xlYW4iLCJwcm90b3R5cGUiLCJ2YWx1ZU9mIiwiREVCT1VOQ0VfVklFV1BPUlRfUFJPUEFHQVRFIiwiREVCT1VOQ0VfTU9VU0VfTU9WRV9QUk9QQUdBVEUiLCJERUJPVU5DRV9MT0FESU5HX1NUQVRFX1BST1BBR0FURSIsIk1BUF9TVFlMRSIsImNvbnRhaW5lciIsImRpc3BsYXkiLCJwb3NpdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwidG9wIiwicG9pbnRlckV2ZW50cyIsIkxPQ0FMRV9DT0RFU19BUlJBWSIsIkxPQ0FMRV9DT0RFUyIsIlN0eWxlZE1hcCIsIlN0eWxlZE1hcENvbnRhaW5lciIsIl9yZWYiLCJfcmVmJCRtaXhCbGVuZE1vZGUiLCIkbWl4QmxlbmRNb2RlIiwiJG1hcExpYkNzc0NsYXNzIiwiY29uY2F0IiwiTUFQQk9YR0xfU1RZTEVfVVBEQVRFIiwiTUFQQk9YR0xfUkVOREVSIiwibm9wIiwiTWFwTGliTG9nbyIsIl9yZWYyIiwiYmFzZU1hcExpYnJhcnlDb25maWciLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwic3R5bGUiLCJtYXJnaW5MZWZ0IiwibWFwTGliQ3NzQ2xhc3MiLCJ0YXJnZXQiLCJyZWwiLCJocmVmIiwibWFwTGliVXJsIiwibWFwTGliTmFtZSIsIlN0eWxlZERyb3BwYWJsZSIsImRpdiIsIl90YWdnZWRUZW1wbGF0ZUxpdGVyYWwyIiwicHJvcHMiLCJpc092ZXIiLCJ0aGVtZSIsImRuZE92ZXJCYWNrZ3JvdW5kQ29sb3IiLCJpc1NwbGl0U2VsZWN0b3IiLCJleHBvcnRzIiwidmlzU3RhdGUiLCJzcGxpdE1hcHMiLCJEcm9wcGFibGUiLCJfcmVmMyIsImNvbnRhaW5lcklkIiwiX3VzZURyb3BwYWJsZSIsInVzZURyb3BwYWJsZSIsImlkIiwiZGF0YSIsInR5cGUiLCJEUk9QUEFCTEVfTUFQX0NPTlRBSU5FUl9UWVBFIiwiaW5kZXgiLCJkaXNhYmxlZCIsInNldE5vZGVSZWYiLCJyZWYiLCJTdHlsZWREYXRhc2V0QXR0cmlidXRpb25zQ29udGFpbmVyIiwiaXNQYWxtIiwibGFiZWxDb2xvciIsIkRhdGFzZXRBdHRyaWJ1dGlvbnMiLCJfcmVmNCIsImRhdGFzZXRBdHRyaWJ1dGlvbnMiLCJGcmFnbWVudCIsIm1hcCIsImRzIiwiaWR4IiwiX2V4dGVuZHMyIiwidXJsIiwia2V5IiwidGl0bGUiLCJBdHRyaWJ1dGlvbiIsIl9yZWY1IiwiX3JlZjUkc2hvd0Jhc2VNYXBMaWJMIiwic2hvd0Jhc2VNYXBMaWJMb2dvIiwiX3JlZjUkc2hvd09zbUJhc2VtYXBBIiwic2hvd09zbUJhc2VtYXBBdHRyaWJ1dGlvbiIsImhhc01vYmlsZVdpZHRoIiwiYnJlYWtQb2ludFZhbHVlcyIsIm1lbW9pemVkQ29tcG9uZW50cyIsInVzZU1lbW8iLCJTdHlsZWRBdHRyaWJ1dGlvbiIsIm1hcExpYkF0dHJpYnV0aW9uQ3NzQ2xhc3MiLCJFbmRIb3Jpem9udGFsRmxleGJveCIsIk1hcENvbnRhaW5lckZhY3RvcnkiLCJkZXBzIiwiTWFwUG9wb3ZlciIsIk1hcENvbnRyb2wiLCJFZGl0b3IiLCJNYXBDb250YWluZXIiLCJfQ29tcG9uZW50IiwiX3Byb3BzIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2syIiwic2hvd0Jhc2VNYXBBdHRyaWJ1dGlvbiIsImNyZWF0ZVJlZiIsImRpbWVuc2lvbnMiLCJfdGhpcyRwcm9wcyIsInByaW1hcnkiLCJtYXBTdGF0ZUFjdGlvbnMiLCJ1cGRhdGVNYXAiLCJsYXllcnMiLCJsYXllckRhdGEiLCJjcmVhdGVTZWxlY3RvciIsInNwbGl0TWFwU2VsZWN0b3IiLCJzcGxpdE1hcEluZGV4U2VsZWN0b3IiLCJnZXRNYXBMYXllcnNGcm9tU3BsaXRNYXBzIiwibGF5ZXJPcmRlciIsImxheWVyc1NlbGVjdG9yIiwibGF5ZXJEYXRhU2VsZWN0b3IiLCJtYXBMYXllcnNTZWxlY3RvciIsInByZXBhcmVMYXllcnNUb1JlbmRlciIsInByZXBhcmVMYXllcnNGb3JEZWNrIiwiZmlsdGVycyIsImZpbHRlcnNTZWxlY3RvciIsImYiLCJGSUxURVJfVFlQRVMiLCJwb2x5Z29uIiwiZW5hYmxlZCIsImVkaXRvciIsImZlYXR1cmVzIiwic2VsZWN0ZWRGZWF0dXJlIiwicG9seWdvbkZpbHRlcnNTZWxlY3RvciIsImZlYXR1cmVzU2VsZWN0b3IiLCJwb2x5Z29uRmlsdGVycyIsInZhbHVlIiwiZmVhdHVyZUNvbGxlY3Rpb25TZWxlY3RvciIsInNlbGVjdGVkRmVhdHVyZVNlbGVjdG9yIiwiY29sbGVjdGlvbiIsImZpbmRJbmRleCIsIl9wcm9wcyRnZW5lcmF0ZU1hcGJveCIsImdlbmVyYXRlTWFwYm94TGF5ZXJzIiwibGF5ZXJPcmRlclNlbGVjdG9yIiwibGF5ZXJzVG9SZW5kZXJTZWxlY3RvciIsImdlbmVyYXRlTWFwYm94TGF5ZXJNZXRob2RTZWxlY3RvciIsImxheWVyIiwibGF5ZXJzVG9SZW5kZXIiLCJnZW5lcmF0ZU1hcGJveExheWVyTWV0aG9kIiwibWFwU3R5bGUiLCJzdHlsZVR5cGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJtYXBTdHlsZVR5cGVTZWxlY3RvciIsIm1hcFN0eWxlQmFja2dyb3VuZENvbG9yU2VsZWN0b3IiLCJOT19NQVBfSUQiLCJyZ2JUb0hleCIsInZpc1N0YXRlQWN0aW9ucyIsIm9uTGF5ZXJDbGljayIsIl9pZHgiLCJpbmZvIiwib25MYXllckhvdmVyIiwibGF5ZXJDb25maWdDaGFuZ2UiLCJjb2xvckRvbWFpbiIsImRvbWFpbiIsImFnZ3JlZ2F0ZWRCaW5zIiwiZXZlbnQiLCJsYXllckZpbHRlcmVkSXRlbXNDaGFuZ2UiLCJsYXllcklkIiwiX3RoaXMkcHJvcHMyIiwiX3RoaXMkcHJvcHMyJGluZGV4IiwibWFwSW5kZXgiLCJ0b2dnbGVMYXllckZvck1hcCIsInVwZGF0ZSIsInByZXZpb3VzTGF5ZXJzIiwiX3VwZGF0ZU1hcGJveExheWVycyIsInNldFN0YXRlIiwiaXNTdHlsZVVzaW5nTWFwYm94VGlsZXMiLCJpc1N0eWxlVXNpbmdPcGVuU3RyZWV0TWFwVGlsZXMiLCJvbk1hcFN0eWxlTG9hZGVkIiwiX21hcCIsIm1hcFJlZiIsImdldE1hcCIsIl90aGlzJF9tYXAiLCJfdGhpcyRfbWFwMiIsIm9mZiIsIm9uIiwiX29uTWFwYm94U3R5bGVVcGRhdGUiLCJvbk1hcFJlbmRlciIsImdldE1hcGJveFJlZiIsIl9yZWY2IiwiZ2wiLCJzZXRMYXllckJsZW5kaW5nIiwibGF5ZXJCbGVuZGluZyIsImVycm9yIiwiZXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsImxheWVyTWVzc2FnZSIsImVycm9yTWVzc2FnZUZ1bGwiLCJsYXN0U2hvd24iLCJfZGVja0dMRXJyb3JzRWxhcHNlZCIsIkRhdGUiLCJub3ciLCJUSFJPVFRMRV9OT1RJRklDQVRJT05fVElNRSIsImV4dHJhTGF5ZXJNZXNzYWdlIiwiX3RvcE1vc3RMYXllciRwcm9wcyIsInRvcE1vc3RMYXllciIsInBhcmVudCIsImxheWVyU2V0SXNWYWxpZCIsInVpU3RhdGVBY3Rpb25zIiwiYWRkTm90aWZpY2F0aW9uIiwiZXJyb3JOb3RpZmljYXRpb24iLCJfdGhpcyRjb250ZXh0Iiwidmlld1N0YXRlIiwiY29udGV4dCIsImdldEludGVybmFsVmlld1N0YXRlIiwib25WaWV3UG9ydENoYW5nZSIsIm9uVmlld1N0YXRlQ2hhbmdlIiwidmlld3BvcnQiLCJpc0V4cG9ydCIsInNldEludGVybmFsVmlld1N0YXRlIiwiX29uVmlld3BvcnRDaGFuZ2VQcm9wYWdhdGVEZWJvdW5jZWQiLCJvbk1vdXNlTW92ZSIsIm5vcm1hbGl6ZUV2ZW50Iiwic2V0TG9hZGluZ0luZGljYXRvciIsImNoYW5nZSIsInBhbmVsSWQiLCJfdGhpcyRwcm9wczMiLCJ0b2dnbGVNYXBDb250cm9sIiwiTnVtYmVyIiwiX2luaGVyaXRzMiIsIl9jcmVhdGVDbGFzczIiLCJjb21wb25lbnREaWRNb3VudCIsImN1cnJlbnQiLCJvYnNlcnZlRGltZW5zaW9ucyIsIl9oYW5kbGVSZXNpemUiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsIl90aGlzJF9tYXAzIiwiX3RoaXMkX21hcDQiLCJ1bm9ic2VydmVEaW1lbnNpb25zIiwiX29uRGVja0luaXRpYWxpemVkIiwib25EZWNrSW5pdGlhbGl6ZWQiLCJfZGVjayIsIl9pc09LVG9SZW5kZXJFZmZlY3RzIiwidmlld0luZGV4IiwiX3RoaXMkX2RlY2siLCJ2aWV3TWFuYWdlciIsIl92aWV3cG9ydHMiLCJfcmVuZGVyTWFwUG9wb3ZlciIsIl90aGlzJHByb3BzJHZpc1N0YXRlJCIsImhvdmVySW5mbyIsIl90aGlzJHByb3BzNCIsIm1hcFN0YXRlIiwiX3RoaXMkcHJvcHM0JHZpc1N0YXRlIiwiY2xpY2tlZCIsImRhdGFzZXRzIiwiaW50ZXJhY3Rpb25Db25maWciLCJhbmltYXRpb25Db25maWciLCJfdGhpcyRwcm9wczQkdmlzU3RhdGUyIiwibW91c2VQb3MiLCJtb3VzZVBvc2l0aW9uIiwiY29vcmRpbmF0ZSIsInBpbm5lZCIsInRvb2x0aXAiLCJsYXllckhvdmVyUHJvcCIsImdldExheWVySG92ZXJQcm9wIiwiY29tcGFyZU1vZGUiLCJjb25maWciLCJwaW5uZWRQb3NpdGlvbiIsIngiLCJ5IiwibGF5ZXJQaW5uZWRQcm9wIiwiZ2V0Vmlld3BvcnRGcm9tTWFwU3RhdGUiLCJsbmdMYXQiLCJfZ2V0SG92ZXJYWSIsInByaW1hcnlEYXRhIiwiY29tcGFyZVR5cGUiLCJjb21tb25Qcm9wIiwib25DbG9zZSIsIl9vbkNsb3NlTWFwUG9wb3ZlciIsInpvb20iLCJjYW52YXMiLCJ1bmRlZmluZWQiLCJmcm96ZW4iLCJpc0Jhc2UiLCJvblNldEZlYXR1cmVzIiwic2V0RmVhdHVyZXMiLCJzZXRTZWxlY3RlZEZlYXR1cmUiLCJmZWF0dXJlQ29sbGVjdGlvbiIsInNjcmVlbkNvb3JkIiwicHJvamVjdCIsIl9yZW5kZXJEZWNrT3ZlcmxheSIsImxheWVyc0ZvckRlY2siLCJfdGhpcyRjb250ZXh0MiIsIl90aGlzMiIsIm9wdGlvbnMiLCJwcmltYXJ5TWFwIiwiX3RoaXMkcHJvcHM1IiwibWFwYm94QXBpQWNjZXNzVG9rZW4iLCJtYXBib3hBcGlVcmwiLCJkZWNrR2xQcm9wcyIsIm1hcENvbnRyb2xzIiwiZGVja1JlbmRlckNhbGxiYWNrcyIsImdlbmVyYXRlRGVja0dMTGF5ZXJzIiwiaXNJbnRlcmFjdGl2ZSIsImNoaWxkcmVuIiwibWFwRHJhdyIsIl9yZWY3IiwiX3JlZjckYWN0aXZlIiwiYWN0aXZlIiwiZWRpdG9yTWVudUFjdGl2ZSIsImlzRWRpdG9yRHJhd2luZ01vZGUiLCJFZGl0b3JMYXllclV0aWxzIiwiaXNEcmF3aW5nQWN0aXZlIiwibW9kZSIsImludGVybmFsVmlld1N0YXRlIiwiaW50ZXJuYWxNYXBTdGF0ZSIsImVkaXRvckZlYXR1cmVTZWxlY3RlZEluZGV4Iiwic2VsZWN0ZWRQb2x5Z29uSW5kZXhTZWxlY3RvciIsImdlbmVyYXRlRGVja0dMTGF5ZXJzTWV0aG9kIiwiY29tcHV0ZURlY2tMYXllcnMiLCJkZWNrR2xMYXllcnMiLCJlZGl0b3JJbmZvIiwic2VsZWN0ZWRGZWF0dXJlSW5kZXhlcyIsInNlbGVjdGVkRmVhdHVyZUluZGV4QXJyYXlTZWxlY3RvciIsIl9vbkxheWVySG92ZXIiLCJvblNldExheWVyRG9tYWluIiwiX29uTGF5ZXJTZXREb21haW4iLCJvbkZpbHRlcmVkSXRlbXNDaGFuZ2UiLCJfb25MYXllckZpbHRlcmVkSXRlbXNDaGFuZ2UiLCJleHRyYURlY2tQYXJhbXMiLCJnZXRUb29sdGlwIiwiZ2V0Q3Vyc29yIiwiX3JlZjgiLCJpc0RyYWdnaW5nIiwiZWRpdG9yQ3Vyc29yIiwiZWZmZWN0cyIsImNvbXB1dGVEZWNrRWZmZWN0cyIsInZpZXdzIiwiTWFwVmlldyIsImxlZ2FjeU1ldGVyU2l6ZXMiLCJhbGxEZWNrR2xQcm9wcyIsInBpY2tpbmdSYWRpdXMiLCJERUZBVUxUX1BJQ0tJTkdfUkFESVVTIiwib25EZWNrUmVuZGVyIiwiX29uTW91c2VNb3ZlRGVib3VuY2VkIiwib25Mb2FkIiwib25EZWNrTG9hZCIsImNvbnRyb2xsZXIiLCJkb3VibGVDbGlja1pvb20iLCJkcmFnUm90YXRlIiwiaW5pdGlhbFZpZXdTdGF0ZSIsIm9uQmVmb3JlUmVuZGVyIiwiX29uQmVmb3JlUmVuZGVyIiwiX29uVmlld3BvcnRDaGFuZ2UiLCJvbkhvdmVyIiwicmVzIiwiX29uTGF5ZXJIb3ZlckRlYm91bmNlZCIsIm9uQ2xpY2siLCJzcmNFdmVudCIsIm9uRXJyb3IiLCJfb25EZWNrRXJyb3IiLCJjb21wIiwiZGVjayIsIm9uV2ViR0xJbml0aWFsaXplZCIsIm9uQWZ0ZXJSZW5kZXIiLCJvbkRlY2tBZnRlclJlbmRlciIsImFueUFjdGl2ZUxheWVyTG9hZGluZyIsImFyZUFueURlY2tMYXllcnNMb2FkaW5nIiwiX29uTGF5ZXJMb2FkaW5nU3RhdGVDaGFuZ2UiLCJtYXBib3hMYXllcnMiLCJtYXBib3hMYXllcnNTZWxlY3RvciIsInVwZGF0ZU1hcGJveExheWVycyIsIl9yZW5kZXJNYXBib3hPdmVybGF5cyIsImlzU3R5bGVMb2FkZWQiLCJfcmVuZGVyTWFwIiwiX21hcFN0eWxlJG1hcFN0eWxlcyIsIl9nZXRBcHBsaWNhdGlvbkNvbmZpZyIsIl90aGlzJGNvbnRleHQzIiwiX21hcFN0eWxlJGJvdHRvbU1hcFN0IiwiX3RoaXMkcHJvcHM2IiwiX3RoaXMkcHJvcHM2JE1hcENvbXBvIiwiTWFwQ29tcG9uZW50IiwiTWFwIiwibG9jYWxlIiwiYm90dG9tTWFwQ29udGFpbmVyUHJvcHMiLCJ0b3BNYXBDb250YWluZXJQcm9wcyIsIl90aGlzJHByb3BzNiRkYXRhc2V0QSIsIl90aGlzJHByb3BzNiRjb250YWluZSIsImlzTG9hZGluZ0luZGljYXRvclZpc2libGUiLCJhY3RpdmVTaWRlUGFuZWwiLCJzaWRlUGFuZWxXaWR0aCIsImxheWVyc0ZvckRlY2tTZWxlY3RvciIsImN1cnJlbnRTdHlsZSIsIm1hcFN0eWxlcyIsImJhc2VNYXBMaWJyYXJ5TmFtZSIsImdldEJhc2VNYXBMaWJyYXJ5IiwiZ2V0QXBwbGljYXRpb25Db25maWciLCJtYXBQcm9wcyIsInByZXNlcnZlRHJhd2luZ0J1ZmZlciIsIm1hcGJveEFjY2Vzc1Rva2VuIiwiYWNjZXNzVG9rZW4iLCJtYXBMaWIiLCJnZXRNYXBMaWIiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaGFzR2VvY29kZXJMYXllciIsImZpbmQiLCJsIiwiR0VPQ09ERVJfTEFZRVJfSUQiLCJpc1NwbGl0IiwiYm90dG9tTWFwU3R5bGUiLCJFTVBUWV9NQVBCT1hfU1RZTEUiLCJfc2V0TWFwUmVmIiwiYXZhaWxhYmxlTG9jYWxlcyIsInJlYWRPbmx5Iiwic2NhbGUiLCJnZW9jb2RlciIsIm1hcENvbnRyb2xUb3AiLCJvblRvZ2dsZVBlcnNwZWN0aXZlIiwidG9nZ2xlUGVyc3BlY3RpdmUiLCJvblRvZ2dsZVNwbGl0TWFwIiwidG9nZ2xlU3BsaXRNYXAiLCJvbk1hcFRvZ2dsZUxheWVyIiwiX2hhbmRsZU1hcFRvZ2dsZUxheWVyIiwib25Ub2dnbGVNYXBDb250cm9sIiwiX3RvZ2dsZU1hcENvbnRyb2wiLCJvblRvZ2dsZVNwbGl0TWFwVmlld3BvcnQiLCJ0b2dnbGVTcGxpdE1hcFZpZXdwb3J0Iiwib25TZXRFZGl0b3JNb2RlIiwic2V0RWRpdG9yTW9kZSIsIm9uU2V0TG9jYWxlIiwic2V0TG9jYWxlIiwib25Ub2dnbGVFZGl0b3JWaXNpYmlsaXR5IiwidG9nZ2xlRWRpdG9yVmlzaWJpbGl0eSIsIm9uTGF5ZXJWaXNDb25maWdDaGFuZ2UiLCJsYXllclZpc0NvbmZpZ0NoYW5nZSIsIm1hcEhlaWdodCIsInNldE1hcENvbnRyb2xTZXR0aW5ncyIsIm9uRGVsZXRlRmVhdHVyZSIsImRlbGV0ZUZlYXR1cmUiLCJvblNlbGVjdCIsIm9uVG9nZ2xlUG9seWdvbkZpbHRlciIsInNldFBvbHlnb25GaWx0ZXJMYXllciIsInZpc2libGUiLCJ0b3BNYXBTdHlsZSIsImlzVmlzaWJsZSIsInN0YXRlIiwicmVuZGVyIiwiX21hcFN0eWxlJG1hcFN0eWxlczIiLCJfZ2V0QXBwbGljYXRpb25Db25maWcyIiwiX3RoaXMkcHJvcHM3IiwibWFwQ29udGVudCIsInN0eWxlU2VsZWN0b3IiLCJvbkNvbnRleHRNZW51IiwicHJldmVudERlZmF1bHQiLCJvdmVybGF5QmxlbmRpbmciLCJDb21wb25lbnQiLCJNYXBWaWV3U3RhdGVDb250ZXh0Iiwid2l0aFRoZW1lIl0sInNvdXJjZXMiOlsiLi4vc3JjL21hcC1jb250YWluZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbi8vIGxpYnJhcmllc1xuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50LCBjcmVhdGVSZWYsIHVzZU1lbW99IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzdHlsZWQsIHt3aXRoVGhlbWV9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCB7TWFwLCBNYXBSZWZ9IGZyb20gJ3JlYWN0LW1hcC1nbCc7XG5pbXBvcnQge1BpY2tJbmZvfSBmcm9tICdAZGVjay5nbC9jb3JlL2xpYi9kZWNrJztcbmltcG9ydCBEZWNrR0wgZnJvbSAnQGRlY2suZ2wvcmVhY3QnO1xuaW1wb3J0IHtjcmVhdGVTZWxlY3RvciwgU2VsZWN0b3J9IGZyb20gJ3Jlc2VsZWN0JztcbmltcG9ydCB7dXNlRHJvcHBhYmxlfSBmcm9tICdAZG5kLWtpdC9jb3JlJztcbmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnO1xuXG5pbXBvcnQge1Zpc1N0YXRlQWN0aW9ucywgTWFwU3RhdGVBY3Rpb25zLCBVSVN0YXRlQWN0aW9uc30gZnJvbSAnQGtlcGxlci5nbC9hY3Rpb25zJztcblxuLy8gY29tcG9uZW50c1xuaW1wb3J0IE1hcFBvcG92ZXJGYWN0b3J5IGZyb20gJy4vbWFwL21hcC1wb3BvdmVyJztcbmltcG9ydCBNYXBDb250cm9sRmFjdG9yeSBmcm9tICcuL21hcC9tYXAtY29udHJvbCc7XG5pbXBvcnQge1xuICBTdHlsZWRNYXBDb250YWluZXIsXG4gIFN0eWxlZEF0dHJpYnV0aW9uLFxuICBFbmRIb3Jpem9udGFsRmxleGJveFxufSBmcm9tICcuL2NvbW1vbi9zdHlsZWQtY29tcG9uZW50cyc7XG5cbmltcG9ydCBFZGl0b3JGYWN0b3J5IGZyb20gJy4vZWRpdG9yL2VkaXRvcic7XG5cbi8vIHV0aWxzXG5pbXBvcnQge1xuICBnZW5lcmF0ZU1hcGJveExheWVycyxcbiAgdXBkYXRlTWFwYm94TGF5ZXJzLFxuICBMYXllckJhc2VDb25maWcsXG4gIFZpc3VhbENoYW5uZWxEb21haW4sXG4gIEVkaXRvckxheWVyVXRpbHMsXG4gIEFnZ3JlZ2F0ZWRCaW5cbn0gZnJvbSAnQGtlcGxlci5nbC9sYXllcnMnO1xuaW1wb3J0IHtcbiAgRGF0YXNldEF0dHJpYnV0aW9uLFxuICBNYXBTdGF0ZSxcbiAgTWFwQ29udHJvbHMsXG4gIFZpZXdwb3J0LFxuICBTcGxpdE1hcCxcbiAgU3BsaXRNYXBMYXllcnNcbn0gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5pbXBvcnQge1xuICBlcnJvck5vdGlmaWNhdGlvbixcbiAgc2V0TGF5ZXJCbGVuZGluZyxcbiAgaXNTdHlsZVVzaW5nTWFwYm94VGlsZXMsXG4gIGlzU3R5bGVVc2luZ09wZW5TdHJlZXRNYXBUaWxlcyxcbiAgZ2V0QmFzZU1hcExpYnJhcnksXG4gIEJhc2VNYXBMaWJyYXJ5Q29uZmlnLFxuICB0cmFuc2Zvcm1SZXF1ZXN0LFxuICBvYnNlcnZlRGltZW5zaW9ucyxcbiAgdW5vYnNlcnZlRGltZW5zaW9ucyxcbiAgaGFzTW9iaWxlV2lkdGgsXG4gIGdldE1hcExheWVyc0Zyb21TcGxpdE1hcHMsXG4gIG9uVmlld1BvcnRDaGFuZ2UsXG4gIGdldFZpZXdwb3J0RnJvbU1hcFN0YXRlLFxuICBub3JtYWxpemVFdmVudCxcbiAgcmdiVG9IZXgsXG4gIGNvbXB1dGVEZWNrRWZmZWN0cyxcbiAgZ2V0QXBwbGljYXRpb25Db25maWcsXG4gIEdldE1hcFJlZlxufSBmcm9tICdAa2VwbGVyLmdsL3V0aWxzJztcbmltcG9ydCB7YnJlYWtQb2ludFZhbHVlc30gZnJvbSAnQGtlcGxlci5nbC9zdHlsZXMnO1xuXG4vLyBkZWZhdWx0LXNldHRpbmdzXG5pbXBvcnQge1xuICBGSUxURVJfVFlQRVMsXG4gIEdFT0NPREVSX0xBWUVSX0lELFxuICBUSFJPVFRMRV9OT1RJRklDQVRJT05fVElNRSxcbiAgREVGQVVMVF9QSUNLSU5HX1JBRElVUyxcbiAgTk9fTUFQX0lELFxuICBFTVBUWV9NQVBCT1hfU1RZTEVcbn0gZnJvbSAnQGtlcGxlci5nbC9jb25zdGFudHMnO1xuXG5pbXBvcnQge0RST1BQQUJMRV9NQVBfQ09OVEFJTkVSX1RZUEV9IGZyb20gJy4vY29tbW9uL2RuZC1sYXllci1pdGVtcyc7XG4vLyBDb250ZXh0c1xuaW1wb3J0IHtNYXBWaWV3U3RhdGVDb250ZXh0fSBmcm9tICcuL21hcC12aWV3LXN0YXRlLWNvbnRleHQnO1xuXG5pbXBvcnQgRXJyb3JCb3VuZGFyeSBmcm9tICcuL2NvbW1vbi9lcnJvci1ib3VuZGFyeSc7XG5pbXBvcnQge0xPQ0FMRV9DT0RFU30gZnJvbSAnQGtlcGxlci5nbC9sb2NhbGl6YXRpb24nO1xuaW1wb3J0IHtNYXBWaWV3fSBmcm9tICdAZGVjay5nbC9jb3JlJztcbmltcG9ydCB7XG4gIE1hcFN0eWxlLFxuICBhcmVBbnlEZWNrTGF5ZXJzTG9hZGluZyxcbiAgY29tcHV0ZURlY2tMYXllcnMsXG4gIGdldExheWVySG92ZXJQcm9wLFxuICBMYXllckhvdmVyUHJvcCxcbiAgcHJlcGFyZUxheWVyc0ZvckRlY2ssXG4gIHByZXBhcmVMYXllcnNUb1JlbmRlcixcbiAgTGF5ZXJzVG9SZW5kZXJcbn0gZnJvbSAnQGtlcGxlci5nbC9yZWR1Y2Vycyc7XG5pbXBvcnQge1Zpc1N0YXRlfSBmcm9tICdAa2VwbGVyLmdsL3NjaGVtYXMnO1xuXG5pbXBvcnQgTG9hZGluZ0luZGljYXRvciBmcm9tICcuL2xvYWRpbmctaW5kaWNhdG9yJztcblxuLy8gRGVib3VuY2UgdGhlIHByb3BhZ2F0aW9uIG9mIHZpZXdwb3J0IGNoYW5nZSBhbmQgbW91c2UgbW92ZXMgdG8gcmVkdXggc3RvcmUuXG4vLyBUaGlzIGlzIHRvIGF2b2lkIHRvbyBtYW55IHJlbmRlcnMgb2Ygb3RoZXIgY29tcG9uZW50cyB3aGVuIHRoZSBtYXAgaXNcbi8vIGJlaW5nIHBhbm5lZC96b29tZWQgKGxlYWRpbmcgdG8gbGFnZ3kgYmFzZW1hcC9kZWNrIHN5bmNpbmcpLlxuY29uc3QgREVCT1VOQ0VfVklFV1BPUlRfUFJPUEFHQVRFID0gMTA7XG5jb25zdCBERUJPVU5DRV9NT1VTRV9NT1ZFX1BST1BBR0FURSA9IDEwO1xuXG4vLyBIb3cgbG9uZyBzaG91bGQgd2Ugd2FpdCBiZXR3ZWVuIGxheWVyIGxvYWRpbmcgc3RhdGUgY2hhbmdlcyBiZWZvcmUgdHJpZ2dlcmluZyBhIFVJIHVwZGF0ZVxuY29uc3QgREVCT1VOQ0VfTE9BRElOR19TVEFURV9QUk9QQUdBVEUgPSAxMDA7XG5cbmNvbnN0IE1BUF9TVFlMRToge1trZXk6IHN0cmluZ106IFJlYWN0LkNTU1Byb3BlcnRpZXN9ID0ge1xuICBjb250YWluZXI6IHtcbiAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcbiAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGhlaWdodDogJzEwMCUnXG4gIH0sXG4gIHRvcDoge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICB3aWR0aDogJzEwMCUnLFxuICAgIGhlaWdodDogJzEwMCUnLFxuICAgIHBvaW50ZXJFdmVudHM6ICdub25lJ1xuICB9XG59O1xuXG5jb25zdCBMT0NBTEVfQ09ERVNfQVJSQVkgPSBPYmplY3Qua2V5cyhMT0NBTEVfQ09ERVMpO1xuXG5pbnRlcmZhY2UgU3R5bGVkTWFwQ29udGFpbmVyUHJvcHMge1xuICAkbWl4QmxlbmRNb2RlPzogc3RyaW5nO1xuICAkbWFwTGliQ3NzQ2xhc3M6IHN0cmluZztcbn1cblxuY29uc3QgU3R5bGVkTWFwID0gc3R5bGVkKFN0eWxlZE1hcENvbnRhaW5lcik8U3R5bGVkTWFwQ29udGFpbmVyUHJvcHM+KFxuICAoeyRtaXhCbGVuZE1vZGUgPSAnbm9ybWFsJywgJG1hcExpYkNzc0NsYXNzfSkgPT4gYFxuICAjZGVmYXVsdC1kZWNrZ2wtb3ZlcmxheSB7XG4gICAgbWl4LWJsZW5kLW1vZGU6ICR7JG1peEJsZW5kTW9kZX07XG4gIH07XG4gICpbJHskbWFwTGliQ3NzQ2xhc3N9LWNoaWxkcmVuXSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICB9XG5gXG4pO1xuXG5jb25zdCBNQVBCT1hHTF9TVFlMRV9VUERBVEUgPSAnc3R5bGUubG9hZCc7XG5jb25zdCBNQVBCT1hHTF9SRU5ERVIgPSAncmVuZGVyJztcbmNvbnN0IG5vcCA9ICgpID0+IHtcbiAgcmV0dXJuO1xufTtcblxudHlwZSBNYXBMaWJMb2dvUHJvcHMgPSB7XG4gIGJhc2VNYXBMaWJyYXJ5Q29uZmlnOiBCYXNlTWFwTGlicmFyeUNvbmZpZztcbn07XG5cbmNvbnN0IE1hcExpYkxvZ28gPSAoe2Jhc2VNYXBMaWJyYXJ5Q29uZmlnfTogTWFwTGliTG9nb1Byb3BzKSA9PiAoXG4gIDxkaXYgY2xhc3NOYW1lPVwiYXR0cml0aW9uLWxvZ29cIj5cbiAgICBCYXNlbWFwIGJ5OlxuICAgIDxhXG4gICAgICBzdHlsZT17e21hcmdpbkxlZnQ6ICc1cHgnfX1cbiAgICAgIGNsYXNzTmFtZT17YCR7YmFzZU1hcExpYnJhcnlDb25maWcubWFwTGliQ3NzQ2xhc3N9LWN0cmwtbG9nb2B9XG4gICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICBocmVmPXtiYXNlTWFwTGlicmFyeUNvbmZpZy5tYXBMaWJVcmx9XG4gICAgICBhcmlhLWxhYmVsPXtgJHtiYXNlTWFwTGlicmFyeUNvbmZpZy5tYXBMaWJOYW1lfSBsb2dvYH1cbiAgICAvPlxuICA8L2Rpdj5cbik7XG5cbmludGVyZmFjZSBTdHlsZWREcm9wcGFibGVQcm9wcyB7XG4gIGlzT3ZlcjogYm9vbGVhbjtcbn1cblxuY29uc3QgU3R5bGVkRHJvcHBhYmxlID0gc3R5bGVkLmRpdjxTdHlsZWREcm9wcGFibGVQcm9wcz5gXG4gIGJhY2tncm91bmQtY29sb3I6ICR7cHJvcHMgPT4gKHByb3BzLmlzT3ZlciA/IHByb3BzLnRoZW1lLmRuZE92ZXJCYWNrZ3JvdW5kQ29sb3IgOiAnbm9uZScpfTtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgei1pbmRleDogMTtcbmA7XG5cbmV4cG9ydCBjb25zdCBpc1NwbGl0U2VsZWN0b3IgPSBwcm9wcyA9PlxuICBwcm9wcy52aXNTdGF0ZS5zcGxpdE1hcHMgJiYgcHJvcHMudmlzU3RhdGUuc3BsaXRNYXBzLmxlbmd0aCA+IDE7XG5cbmV4cG9ydCBjb25zdCBEcm9wcGFibGUgPSAoe2NvbnRhaW5lcklkfSkgPT4ge1xuICBjb25zdCB7aXNPdmVyLCBzZXROb2RlUmVmfSA9IHVzZURyb3BwYWJsZSh7XG4gICAgaWQ6IGNvbnRhaW5lcklkLFxuICAgIGRhdGE6IHt0eXBlOiBEUk9QUEFCTEVfTUFQX0NPTlRBSU5FUl9UWVBFLCBpbmRleDogY29udGFpbmVySWR9LFxuICAgIGRpc2FibGVkOiAhY29udGFpbmVySWRcbiAgfSk7XG5cbiAgcmV0dXJuIDxTdHlsZWREcm9wcGFibGUgcmVmPXtzZXROb2RlUmVmfSBpc092ZXI9e2lzT3Zlcn0gLz47XG59O1xuXG5pbnRlcmZhY2UgU3R5bGVkRGF0YXNldEF0dHJpYnV0aW9uc0NvbnRhaW5lclByb3BzIHtcbiAgaXNQYWxtOiBib29sZWFuO1xufVxuXG5jb25zdCBTdHlsZWREYXRhc2V0QXR0cmlidXRpb25zQ29udGFpbmVyID0gc3R5bGVkLmRpdjxTdHlsZWREYXRhc2V0QXR0cmlidXRpb25zQ29udGFpbmVyUHJvcHM+YFxuICBtYXgtd2lkdGg6ICR7cHJvcHMgPT4gKHByb3BzLmlzUGFsbSA/ICcyMDBweCcgOiAnMzAwcHgnKX07XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICBjb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5sYWJlbENvbG9yfTtcbiAgbWFyZ2luLXJpZ2h0OiAycHg7XG4gIG1hcmdpbi1ib3R0b206IDFweDtcbiAgbGluZS1oZWlnaHQ6ICR7cHJvcHMgPT4gKHByb3BzLmlzUGFsbSA/ICcxZW0nIDogJzEuNGVtJyl9O1xuXG4gICY6aG92ZXIge1xuICAgIHdoaXRlLXNwYWNlOiBpbmhlcml0O1xuICB9XG5gO1xuXG5jb25zdCBEYXRhc2V0QXR0cmlidXRpb25zID0gKHtcbiAgZGF0YXNldEF0dHJpYnV0aW9ucyxcbiAgaXNQYWxtXG59OiB7XG4gIGRhdGFzZXRBdHRyaWJ1dGlvbnM6IERhdGFzZXRBdHRyaWJ1dGlvbltdO1xuICBpc1BhbG06IGJvb2xlYW47XG59KSA9PiAoXG4gIDw+XG4gICAge2RhdGFzZXRBdHRyaWJ1dGlvbnM/Lmxlbmd0aCA/IChcbiAgICAgIDxTdHlsZWREYXRhc2V0QXR0cmlidXRpb25zQ29udGFpbmVyIGlzUGFsbT17aXNQYWxtfT5cbiAgICAgICAge2RhdGFzZXRBdHRyaWJ1dGlvbnMubWFwKChkcywgaWR4KSA9PiAoXG4gICAgICAgICAgPGFcbiAgICAgICAgICAgIHsuLi4oZHMudXJsID8ge2hyZWY6IGRzLnVybH0gOiBudWxsKX1cbiAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICByZWw9XCJub29wZW5lciBub3JlZmVycmVyXCJcbiAgICAgICAgICAgIGtleT17YCR7ZHMudGl0bGV9XyR7aWR4fWB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2RzLnRpdGxlfVxuICAgICAgICAgICAge2lkeCAhPT0gZGF0YXNldEF0dHJpYnV0aW9ucy5sZW5ndGggLSAxID8gJywgJyA6IG51bGx9XG4gICAgICAgICAgPC9hPlxuICAgICAgICApKX1cbiAgICAgIDwvU3R5bGVkRGF0YXNldEF0dHJpYnV0aW9uc0NvbnRhaW5lcj5cbiAgICApIDogbnVsbH1cbiAgPC8+XG4pO1xuXG50eXBlIEF0dHJpYnV0aW9uUHJvcHMgPSB7XG4gIHNob3dCYXNlTWFwTGliTG9nbzogYm9vbGVhbjtcbiAgc2hvd09zbUJhc2VtYXBBdHRyaWJ1dGlvbjogYm9vbGVhbjtcbiAgZGF0YXNldEF0dHJpYnV0aW9uczogRGF0YXNldEF0dHJpYnV0aW9uW107XG4gIGJhc2VNYXBMaWJyYXJ5Q29uZmlnOiBCYXNlTWFwTGlicmFyeUNvbmZpZztcbn07XG5cbmV4cG9ydCBjb25zdCBBdHRyaWJ1dGlvbjogUmVhY3QuRkM8QXR0cmlidXRpb25Qcm9wcz4gPSAoe1xuICBzaG93QmFzZU1hcExpYkxvZ28gPSB0cnVlLFxuICBzaG93T3NtQmFzZW1hcEF0dHJpYnV0aW9uID0gZmFsc2UsXG4gIGRhdGFzZXRBdHRyaWJ1dGlvbnMsXG4gIGJhc2VNYXBMaWJyYXJ5Q29uZmlnXG59OiBBdHRyaWJ1dGlvblByb3BzKSA9PiB7XG4gIGNvbnN0IGlzUGFsbSA9IGhhc01vYmlsZVdpZHRoKGJyZWFrUG9pbnRWYWx1ZXMpO1xuXG4gIGNvbnN0IG1lbW9pemVkQ29tcG9uZW50cyA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghc2hvd0Jhc2VNYXBMaWJMb2dvKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8U3R5bGVkQXR0cmlidXRpb25cbiAgICAgICAgICBtYXBMaWJDc3NDbGFzcz17YmFzZU1hcExpYnJhcnlDb25maWcubWFwTGliQ3NzQ2xhc3N9XG4gICAgICAgICAgbWFwTGliQXR0cmlidXRpb25Dc3NDbGFzcz17YmFzZU1hcExpYnJhcnlDb25maWcubWFwTGliQXR0cmlidXRpb25Dc3NDbGFzc31cbiAgICAgICAgPlxuICAgICAgICAgIDxFbmRIb3Jpem9udGFsRmxleGJveD5cbiAgICAgICAgICAgIDxEYXRhc2V0QXR0cmlidXRpb25zIGRhdGFzZXRBdHRyaWJ1dGlvbnM9e2RhdGFzZXRBdHRyaWJ1dGlvbnN9IGlzUGFsbT17aXNQYWxtfSAvPlxuICAgICAgICAgICAge3Nob3dPc21CYXNlbWFwQXR0cmlidXRpb24gPyAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0cml0aW9uLWxpbmtcIj5cbiAgICAgICAgICAgICAgICB7ZGF0YXNldEF0dHJpYnV0aW9ucz8ubGVuZ3RoID8gPHNwYW4gY2xhc3NOYW1lPVwicGlwZS1zZXBhcmF0b3JcIj58PC9zcGFuPiA6IG51bGx9XG4gICAgICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgICAgIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiXG4gICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgwqkgT3BlblN0cmVldE1hcFxuICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICA8L0VuZEhvcml6b250YWxGbGV4Ym94PlxuICAgICAgICA8L1N0eWxlZEF0dHJpYnV0aW9uPlxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgPFN0eWxlZEF0dHJpYnV0aW9uXG4gICAgICAgIG1hcExpYkNzc0NsYXNzPXtiYXNlTWFwTGlicmFyeUNvbmZpZy5tYXBMaWJDc3NDbGFzc31cbiAgICAgICAgbWFwTGliQXR0cmlidXRpb25Dc3NDbGFzcz17YmFzZU1hcExpYnJhcnlDb25maWcubWFwTGliQXR0cmlidXRpb25Dc3NDbGFzc31cbiAgICAgID5cbiAgICAgICAgPEVuZEhvcml6b250YWxGbGV4Ym94PlxuICAgICAgICAgIDxEYXRhc2V0QXR0cmlidXRpb25zIGRhdGFzZXRBdHRyaWJ1dGlvbnM9e2RhdGFzZXRBdHRyaWJ1dGlvbnN9IGlzUGFsbT17aXNQYWxtfSAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYXR0cml0aW9uLWxpbmtcIj5cbiAgICAgICAgICAgIHtkYXRhc2V0QXR0cmlidXRpb25zPy5sZW5ndGggPyA8c3BhbiBjbGFzc05hbWU9XCJwaXBlLXNlcGFyYXRvclwiPnw8L3NwYW4+IDogbnVsbH1cbiAgICAgICAgICAgIHtpc1BhbG0gPyA8TWFwTGliTG9nbyBiYXNlTWFwTGlicmFyeUNvbmZpZz17YmFzZU1hcExpYnJhcnlDb25maWd9IC8+IDogbnVsbH1cbiAgICAgICAgICAgIDxhIGhyZWY9XCJodHRwczovL2tlcGxlci5nbC9wb2xpY3kvXCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlclwiPlxuICAgICAgICAgICAgICDCqSBrZXBsZXIuZ2wgfHsnICd9XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICB7IWlzUGFsbSA/IDxNYXBMaWJMb2dvIGJhc2VNYXBMaWJyYXJ5Q29uZmlnPXtiYXNlTWFwTGlicmFyeUNvbmZpZ30gLz4gOiBudWxsfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0VuZEhvcml6b250YWxGbGV4Ym94PlxuICAgICAgPC9TdHlsZWRBdHRyaWJ1dGlvbj5cbiAgICApO1xuICB9LCBbXG4gICAgc2hvd0Jhc2VNYXBMaWJMb2dvLFxuICAgIHNob3dPc21CYXNlbWFwQXR0cmlidXRpb24sXG4gICAgZGF0YXNldEF0dHJpYnV0aW9ucyxcbiAgICBpc1BhbG0sXG4gICAgYmFzZU1hcExpYnJhcnlDb25maWdcbiAgXSk7XG5cbiAgcmV0dXJuIG1lbW9pemVkQ29tcG9uZW50cztcbn07XG5cbk1hcENvbnRhaW5lckZhY3RvcnkuZGVwcyA9IFtNYXBQb3BvdmVyRmFjdG9yeSwgTWFwQ29udHJvbEZhY3RvcnksIEVkaXRvckZhY3RvcnldO1xuXG50eXBlIE1hcGJveFN0eWxlID0gc3RyaW5nIHwgb2JqZWN0IHwgdW5kZWZpbmVkO1xudHlwZSBQcm9wU2VsZWN0b3I8Uj4gPSBTZWxlY3RvcjxNYXBDb250YWluZXJQcm9wcywgUj47XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFwQ29udGFpbmVyUHJvcHMge1xuICB2aXNTdGF0ZTogVmlzU3RhdGU7XG4gIG1hcFN0YXRlOiBNYXBTdGF0ZTtcbiAgbWFwQ29udHJvbHM6IE1hcENvbnRyb2xzO1xuICBtYXBTdHlsZToge2JvdHRvbU1hcFN0eWxlPzogTWFwYm94U3R5bGU7IHRvcE1hcFN0eWxlPzogTWFwYm94U3R5bGV9ICYgTWFwU3R5bGU7XG4gIG1hcGJveEFwaUFjY2Vzc1Rva2VuOiBzdHJpbmc7XG4gIG1hcGJveEFwaVVybDogc3RyaW5nO1xuICB2aXNTdGF0ZUFjdGlvbnM6IHR5cGVvZiBWaXNTdGF0ZUFjdGlvbnM7XG4gIG1hcFN0YXRlQWN0aW9uczogdHlwZW9mIE1hcFN0YXRlQWN0aW9ucztcbiAgdWlTdGF0ZUFjdGlvbnM6IHR5cGVvZiBVSVN0YXRlQWN0aW9ucztcblxuICAvLyBvcHRpb25hbFxuICBwcmltYXJ5PzogYm9vbGVhbjsgLy8gcHJpbWFyeSBvbmUgd2lsbCBiZSByZXBvcnRpbmcgaXRzIHNpemUgdG8gYXBwU3RhdGVcbiAgcmVhZE9ubHk/OiBib29sZWFuO1xuICBpc0V4cG9ydD86IGJvb2xlYW47XG4gIC8vIG9uTWFwU3R5bGVMb2FkZWQ/OiAobWFwOiBtYXBsaWJyZWdsLk1hcCB8IFJldHVyblR5cGU8TWFwUmVmWydnZXRNYXAnXT4gfCBudWxsKSA9PiB2b2lkO1xuICBvbk1hcFN0eWxlTG9hZGVkPzogKG1hcDogR2V0TWFwUmVmIHwgbnVsbCkgPT4gdm9pZDtcbiAgb25NYXBSZW5kZXI/OiAobWFwOiBHZXRNYXBSZWYgfCBudWxsKSA9PiB2b2lkO1xuICBnZXRNYXBib3hSZWY/OiAobWFwYm94PzogTWFwUmVmIHwgbnVsbCwgaW5kZXg/OiBudW1iZXIpID0+IHZvaWQ7XG4gIGluZGV4PzogbnVtYmVyO1xuICBkZWxldGVNYXBMYWJlbHM/OiAoY29udGFpbmVySWQ6IHN0cmluZywgbGF5ZXJJZDogc3RyaW5nKSA9PiB2b2lkO1xuICBjb250YWluZXJJZD86IG51bWJlcjtcblxuICBpc0xvYWRpbmdJbmRpY2F0b3JWaXNpYmxlPzogYm9vbGVhbjtcbiAgYWN0aXZlU2lkZVBhbmVsOiBzdHJpbmcgfCBudWxsO1xuICBzaWRlUGFuZWxXaWR0aD86IG51bWJlcjtcblxuICBsb2NhbGU/OiBhbnk7XG4gIHRoZW1lPzogYW55O1xuICBlZGl0b3I/OiBhbnk7XG4gIE1hcENvbXBvbmVudD86IHR5cGVvZiBNYXA7XG4gIGRlY2tHbFByb3BzPzogYW55O1xuICBvbkRlY2tJbml0aWFsaXplZD86IChhOiBhbnksIGI6IGFueSkgPT4gdm9pZDtcbiAgb25WaWV3U3RhdGVDaGFuZ2U/OiAodmlld3BvcnQ6IFZpZXdwb3J0KSA9PiB2b2lkO1xuXG4gIHRvcE1hcENvbnRhaW5lclByb3BzOiBhbnk7XG4gIGJvdHRvbU1hcENvbnRhaW5lclByb3BzOiBhbnk7XG4gIHRyYW5zZm9ybVJlcXVlc3Q/OiAodXJsOiBzdHJpbmcsIHJlc291cmNlVHlwZT86IHN0cmluZykgPT4ge3VybDogc3RyaW5nfTtcblxuICBkYXRhc2V0QXR0cmlidXRpb25zPzogRGF0YXNldEF0dHJpYnV0aW9uW107XG5cbiAgZ2VuZXJhdGVNYXBib3hMYXllcnM/OiB0eXBlb2YgZ2VuZXJhdGVNYXBib3hMYXllcnM7XG4gIGdlbmVyYXRlRGVja0dMTGF5ZXJzPzogdHlwZW9mIGNvbXB1dGVEZWNrTGF5ZXJzO1xuXG4gIG9uTW91c2VNb3ZlPzogKGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50ICYge2xuZ0xhdD86IFtudW1iZXIsIG51bWJlcl19KSA9PiB2b2lkO1xuXG4gIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xuICBkZWNrUmVuZGVyQ2FsbGJhY2tzPzoge1xuICAgIG9uRGVja0xvYWQ/OiAoKSA9PiB2b2lkO1xuICAgIG9uRGVja1JlbmRlcj86IChkZWNrUHJvcHM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KSA9PiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IG51bGw7XG4gICAgb25EZWNrQWZ0ZXJSZW5kZXI/OiAoZGVja1Byb3BzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPikgPT4gYW55O1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBNYXBDb250YWluZXJGYWN0b3J5KFxuICBNYXBQb3BvdmVyOiBSZXR1cm5UeXBlPHR5cGVvZiBNYXBQb3BvdmVyRmFjdG9yeT4sXG4gIE1hcENvbnRyb2w6IFJldHVyblR5cGU8dHlwZW9mIE1hcENvbnRyb2xGYWN0b3J5PixcbiAgRWRpdG9yOiBSZXR1cm5UeXBlPHR5cGVvZiBFZGl0b3JGYWN0b3J5PlxuKTogUmVhY3QuQ29tcG9uZW50VHlwZTxNYXBDb250YWluZXJQcm9wcz4ge1xuICBjbGFzcyBNYXBDb250YWluZXIgZXh0ZW5kcyBDb21wb25lbnQ8TWFwQ29udGFpbmVyUHJvcHM+IHtcbiAgICBkaXNwbGF5TmFtZSA9ICdNYXBDb250YWluZXInO1xuXG4gICAgcHJpdmF0ZSBhbnlBY3RpdmVMYXllckxvYWRpbmcgPSBmYWxzZTtcblxuICAgIHN0YXRpYyBjb250ZXh0VHlwZSA9IE1hcFZpZXdTdGF0ZUNvbnRleHQ7XG5cbiAgICBkZWNsYXJlIGNvbnRleHQ6IFJlYWN0LkNvbnRleHRUeXBlPHR5cGVvZiBNYXBWaWV3U3RhdGVDb250ZXh0PjtcblxuICAgIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgICBNYXBDb21wb25lbnQ6IE1hcCxcbiAgICAgIGRlY2tHbFByb3BzOiB7fSxcbiAgICAgIGluZGV4OiAwLFxuICAgICAgcHJpbWFyeTogdHJ1ZVxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgc3VwZXIocHJvcHMpO1xuICAgIH1cblxuICAgIHN0YXRlID0ge1xuICAgICAgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIGF0dHJpYnV0aW9uIHNob3VsZCBiZSB2aXNpYmxlIGJhc2VkIHRoZSByZXN1bHQgb2YgbG9hZGluZyB0aGUgbWFwIHN0eWxlXG4gICAgICBzaG93QmFzZU1hcEF0dHJpYnV0aW9uOiB0cnVlXG4gICAgfTtcblxuICAgIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgICAgaWYgKCF0aGlzLl9yZWYuY3VycmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBvYnNlcnZlRGltZW5zaW9ucyh0aGlzLl9yZWYuY3VycmVudCwgdGhpcy5faGFuZGxlUmVzaXplKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgIC8vIHVuYmluZCBtYXBib3hnbCBldmVudCBsaXN0ZW5lclxuICAgICAgaWYgKHRoaXMuX21hcCkge1xuICAgICAgICB0aGlzLl9tYXA/Lm9mZihNQVBCT1hHTF9TVFlMRV9VUERBVEUsIG5vcCk7XG4gICAgICAgIHRoaXMuX21hcD8ub2ZmKE1BUEJPWEdMX1JFTkRFUiwgbm9wKTtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5fcmVmLmN1cnJlbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdW5vYnNlcnZlRGltZW5zaW9ucyh0aGlzLl9yZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgX2RlY2s6IGFueSA9IG51bGw7XG4gICAgX21hcDogR2V0TWFwUmVmIHwgbnVsbCA9IG51bGw7XG4gICAgX3JlZiA9IGNyZWF0ZVJlZjxIVE1MRGl2RWxlbWVudD4oKTtcbiAgICBfZGVja0dMRXJyb3JzRWxhcHNlZDoge1tpZDogc3RyaW5nXTogbnVtYmVyfSA9IHt9O1xuXG4gICAgcHJldmlvdXNMYXllcnMgPSB7XG4gICAgICAvLyBbbGF5ZXJzLmlkXTogbWFwYm94TGF5ZXJDb25maWdcbiAgICB9O1xuXG4gICAgX2hhbmRsZVJlc2l6ZSA9IGRpbWVuc2lvbnMgPT4ge1xuICAgICAgY29uc3Qge3ByaW1hcnksIGluZGV4fSA9IHRoaXMucHJvcHM7XG4gICAgICBpZiAocHJpbWFyeSkge1xuICAgICAgICBjb25zdCB7bWFwU3RhdGVBY3Rpb25zfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChkaW1lbnNpb25zICYmIGRpbWVuc2lvbnMud2lkdGggPiAwICYmIGRpbWVuc2lvbnMuaGVpZ2h0ID4gMCkge1xuICAgICAgICAgIG1hcFN0YXRlQWN0aW9ucy51cGRhdGVNYXAoZGltZW5zaW9ucywgaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxheWVyc1NlbGVjdG9yOiBQcm9wU2VsZWN0b3I8VmlzU3RhdGVbJ2xheWVycyddPiA9IHByb3BzID0+IHByb3BzLnZpc1N0YXRlLmxheWVycztcbiAgICBsYXllckRhdGFTZWxlY3RvcjogUHJvcFNlbGVjdG9yPFZpc1N0YXRlWydsYXllcnMnXT4gPSBwcm9wcyA9PiBwcm9wcy52aXNTdGF0ZS5sYXllckRhdGE7XG4gICAgc3BsaXRNYXBTZWxlY3RvcjogUHJvcFNlbGVjdG9yPFNwbGl0TWFwW10+ID0gcHJvcHMgPT4gcHJvcHMudmlzU3RhdGUuc3BsaXRNYXBzO1xuICAgIHNwbGl0TWFwSW5kZXhTZWxlY3RvcjogUHJvcFNlbGVjdG9yPG51bWJlciB8IHVuZGVmaW5lZD4gPSBwcm9wcyA9PiBwcm9wcy5pbmRleDtcbiAgICBtYXBMYXllcnNTZWxlY3RvcjogUHJvcFNlbGVjdG9yPFNwbGl0TWFwTGF5ZXJzIHwgbnVsbCB8IHVuZGVmaW5lZD4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMuc3BsaXRNYXBTZWxlY3RvcixcbiAgICAgIHRoaXMuc3BsaXRNYXBJbmRleFNlbGVjdG9yLFxuICAgICAgZ2V0TWFwTGF5ZXJzRnJvbVNwbGl0TWFwc1xuICAgICk7XG4gICAgbGF5ZXJPcmRlclNlbGVjdG9yOiBQcm9wU2VsZWN0b3I8VmlzU3RhdGVbJ2xheWVyT3JkZXInXT4gPSBwcm9wcyA9PiBwcm9wcy52aXNTdGF0ZS5sYXllck9yZGVyO1xuICAgIGxheWVyc1RvUmVuZGVyU2VsZWN0b3I6IFByb3BTZWxlY3RvcjxMYXllcnNUb1JlbmRlcj4gPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMubGF5ZXJzU2VsZWN0b3IsXG4gICAgICB0aGlzLmxheWVyRGF0YVNlbGVjdG9yLFxuICAgICAgdGhpcy5tYXBMYXllcnNTZWxlY3RvcixcbiAgICAgIHByZXBhcmVMYXllcnNUb1JlbmRlclxuICAgICk7XG4gICAgbGF5ZXJzRm9yRGVja1NlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgICB0aGlzLmxheWVyc1NlbGVjdG9yLFxuICAgICAgdGhpcy5sYXllckRhdGFTZWxlY3RvcixcbiAgICAgIHByZXBhcmVMYXllcnNGb3JEZWNrXG4gICAgKTtcbiAgICBmaWx0ZXJzU2VsZWN0b3IgPSBwcm9wcyA9PiBwcm9wcy52aXNTdGF0ZS5maWx0ZXJzO1xuICAgIHBvbHlnb25GaWx0ZXJzU2VsZWN0b3IgPSBjcmVhdGVTZWxlY3Rvcih0aGlzLmZpbHRlcnNTZWxlY3RvciwgZmlsdGVycyA9PlxuICAgICAgZmlsdGVycy5maWx0ZXIoZiA9PiBmLnR5cGUgPT09IEZJTFRFUl9UWVBFUy5wb2x5Z29uICYmIGYuZW5hYmxlZCAhPT0gZmFsc2UpXG4gICAgKTtcbiAgICBmZWF0dXJlc1NlbGVjdG9yID0gcHJvcHMgPT4gcHJvcHMudmlzU3RhdGUuZWRpdG9yLmZlYXR1cmVzO1xuICAgIHNlbGVjdGVkRmVhdHVyZVNlbGVjdG9yID0gcHJvcHMgPT4gcHJvcHMudmlzU3RhdGUuZWRpdG9yLnNlbGVjdGVkRmVhdHVyZTtcbiAgICBmZWF0dXJlQ29sbGVjdGlvblNlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3IoXG4gICAgICB0aGlzLnBvbHlnb25GaWx0ZXJzU2VsZWN0b3IsXG4gICAgICB0aGlzLmZlYXR1cmVzU2VsZWN0b3IsXG4gICAgICAocG9seWdvbkZpbHRlcnMsIGZlYXR1cmVzKSA9PiAoe1xuICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuICAgICAgICBmZWF0dXJlczogZmVhdHVyZXMuY29uY2F0KHBvbHlnb25GaWx0ZXJzLm1hcChmID0+IGYudmFsdWUpKVxuICAgICAgfSlcbiAgICApO1xuICAgIC8vIEB0cy1pZ25vcmUgLSBObyBvdmVybG9hZCBtYXRjaGVzIHRoaXMgY2FsbFxuICAgIHNlbGVjdGVkUG9seWdvbkluZGV4U2VsZWN0b3IgPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMuZmVhdHVyZUNvbGxlY3Rpb25TZWxlY3RvcixcbiAgICAgIHRoaXMuc2VsZWN0ZWRGZWF0dXJlU2VsZWN0b3IsXG4gICAgICAoY29sbGVjdGlvbiwgc2VsZWN0ZWRGZWF0dXJlKSA9PlxuICAgICAgICBjb2xsZWN0aW9uLmZlYXR1cmVzLmZpbmRJbmRleChmID0+IGYuaWQgPT09IHNlbGVjdGVkRmVhdHVyZT8uaWQpXG4gICAgKTtcbiAgICBzZWxlY3RlZEZlYXR1cmVJbmRleEFycmF5U2VsZWN0b3IgPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgICh2YWx1ZTogbnVtYmVyKSA9PiB2YWx1ZSxcbiAgICAgIHZhbHVlID0+IHtcbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgMCA/IFtdIDogW3ZhbHVlXTtcbiAgICAgIH1cbiAgICApO1xuXG4gICAgZ2VuZXJhdGVNYXBib3hMYXllck1ldGhvZFNlbGVjdG9yID0gcHJvcHMgPT4gcHJvcHMuZ2VuZXJhdGVNYXBib3hMYXllcnMgPz8gZ2VuZXJhdGVNYXBib3hMYXllcnM7XG5cbiAgICBtYXBib3hMYXllcnNTZWxlY3RvciA9IGNyZWF0ZVNlbGVjdG9yKFxuICAgICAgdGhpcy5sYXllcnNTZWxlY3RvcixcbiAgICAgIHRoaXMubGF5ZXJEYXRhU2VsZWN0b3IsXG4gICAgICB0aGlzLmxheWVyT3JkZXJTZWxlY3RvcixcbiAgICAgIHRoaXMubGF5ZXJzVG9SZW5kZXJTZWxlY3RvcixcbiAgICAgIHRoaXMuZ2VuZXJhdGVNYXBib3hMYXllck1ldGhvZFNlbGVjdG9yLFxuICAgICAgKGxheWVyLCBsYXllckRhdGEsIGxheWVyT3JkZXIsIGxheWVyc1RvUmVuZGVyLCBnZW5lcmF0ZU1hcGJveExheWVyTWV0aG9kKSA9PlxuICAgICAgICBnZW5lcmF0ZU1hcGJveExheWVyTWV0aG9kKGxheWVyLCBsYXllckRhdGEsIGxheWVyT3JkZXIsIGxheWVyc1RvUmVuZGVyKVxuICAgICk7XG5cbiAgICAvLyBtZXJnZSBpbiBhIGJhY2tncm91bmQtY29sb3Igc3R5bGUgaWYgdGhlIGJhc2VtYXAgY2hvaWNlIGlzIE5PX01BUF9JRFxuICAgIC8vIHVzZWQgYnkgPFN0eWxlZE1hcD4gaW5saW5lIHN0eWxlIHByb3BcbiAgICBtYXBTdHlsZVR5cGVTZWxlY3RvciA9IHByb3BzID0+IHByb3BzLm1hcFN0eWxlLnN0eWxlVHlwZTtcbiAgICBtYXBTdHlsZUJhY2tncm91bmRDb2xvclNlbGVjdG9yID0gcHJvcHMgPT4gcHJvcHMubWFwU3R5bGUuYmFja2dyb3VuZENvbG9yO1xuICAgIHN0eWxlU2VsZWN0b3IgPSBjcmVhdGVTZWxlY3RvcihcbiAgICAgIHRoaXMubWFwU3R5bGVUeXBlU2VsZWN0b3IsXG4gICAgICB0aGlzLm1hcFN0eWxlQmFja2dyb3VuZENvbG9yU2VsZWN0b3IsXG4gICAgICAoc3R5bGVUeXBlLCBiYWNrZ3JvdW5kQ29sb3IpID0+ICh7XG4gICAgICAgIC4uLk1BUF9TVFlMRS5jb250YWluZXIsXG4gICAgICAgIC4uLihzdHlsZVR5cGUgPT09IE5PX01BUF9JRCA/IHtiYWNrZ3JvdW5kQ29sb3I6IHJnYlRvSGV4KGJhY2tncm91bmRDb2xvcil9IDoge30pXG4gICAgICB9KVxuICAgICk7XG5cbiAgICAvKiBjb21wb25lbnQgcHJpdmF0ZSBmdW5jdGlvbnMgKi9cbiAgICBfb25DbG9zZU1hcFBvcG92ZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLnByb3BzLnZpc1N0YXRlQWN0aW9ucy5vbkxheWVyQ2xpY2sobnVsbCk7XG4gICAgfTtcblxuICAgIF9vbkxheWVySG92ZXIgPSAoX2lkeDogbnVtYmVyLCBpbmZvOiBQaWNrSW5mbzxhbnk+IHwgbnVsbCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMub25MYXllckhvdmVyKGluZm8sIHRoaXMucHJvcHMuaW5kZXgpO1xuICAgIH07XG5cbiAgICBfb25MYXllclNldERvbWFpbiA9IChcbiAgICAgIGlkeDogbnVtYmVyLFxuICAgICAgdmFsdWU6IHtkb21haW46IFZpc3VhbENoYW5uZWxEb21haW47IGFnZ3JlZ2F0ZWRCaW5zOiBBZ2dyZWdhdGVkQmluW119XG4gICAgKSA9PiB7XG4gICAgICB0aGlzLnByb3BzLnZpc1N0YXRlQWN0aW9ucy5sYXllckNvbmZpZ0NoYW5nZSh0aGlzLnByb3BzLnZpc1N0YXRlLmxheWVyc1tpZHhdLCB7XG4gICAgICAgIGNvbG9yRG9tYWluOiB2YWx1ZS5kb21haW4sXG4gICAgICAgIGFnZ3JlZ2F0ZWRCaW5zOiB2YWx1ZS5hZ2dyZWdhdGVkQmluc1xuICAgICAgfSBhcyBQYXJ0aWFsPExheWVyQmFzZUNvbmZpZz4pO1xuICAgIH07XG5cbiAgICBfb25MYXllckZpbHRlcmVkSXRlbXNDaGFuZ2UgPSAoaWR4LCBldmVudCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMubGF5ZXJGaWx0ZXJlZEl0ZW1zQ2hhbmdlKHRoaXMucHJvcHMudmlzU3RhdGUubGF5ZXJzW2lkeF0sIGV2ZW50KTtcbiAgICB9O1xuXG4gICAgX2hhbmRsZU1hcFRvZ2dsZUxheWVyID0gbGF5ZXJJZCA9PiB7XG4gICAgICBjb25zdCB7aW5kZXg6IG1hcEluZGV4ID0gMCwgdmlzU3RhdGVBY3Rpb25zfSA9IHRoaXMucHJvcHM7XG4gICAgICB2aXNTdGF0ZUFjdGlvbnMudG9nZ2xlTGF5ZXJGb3JNYXAobWFwSW5kZXgsIGxheWVySWQpO1xuICAgIH07XG5cbiAgICBfb25NYXBib3hTdHlsZVVwZGF0ZSA9IHVwZGF0ZSA9PiB7XG4gICAgICAvLyBmb3JjZSByZWZyZXNoIG1hcGJveGdsIGxheWVyc1xuICAgICAgdGhpcy5wcmV2aW91c0xheWVycyA9IHt9O1xuICAgICAgdGhpcy5fdXBkYXRlTWFwYm94TGF5ZXJzKCk7XG5cbiAgICAgIGlmICh1cGRhdGUgJiYgdXBkYXRlLnN0eWxlKSB7XG4gICAgICAgIC8vIE5vIGF0dHJpYnV0aW9ucyBhcmUgbmVlZGVkIGlmIHRoZSBzdHlsZSBkb2Vzbid0IHJlZmVyZW5jZSBNYXBib3ggc291cmNlc1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzaG93QmFzZU1hcEF0dHJpYnV0aW9uOlxuICAgICAgICAgICAgaXNTdHlsZVVzaW5nTWFwYm94VGlsZXModXBkYXRlLnN0eWxlKSB8fCAhaXNTdHlsZVVzaW5nT3BlblN0cmVldE1hcFRpbGVzKHVwZGF0ZS5zdHlsZSlcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5vbk1hcFN0eWxlTG9hZGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25NYXBTdHlsZUxvYWRlZCh0aGlzLl9tYXApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfc2V0TWFwUmVmID0gbWFwUmVmID0+IHtcbiAgICAgIC8vIEhhbmRsZSBjaGFuZ2Ugb2YgdGhlIG1hcCBsaWJyYXJ5XG4gICAgICBpZiAodGhpcy5fbWFwICYmIG1hcFJlZikge1xuICAgICAgICBjb25zdCBtYXAgPSBtYXBSZWYuZ2V0TWFwKCk7XG4gICAgICAgIGlmIChtYXAgJiYgdGhpcy5fbWFwICE9PSBtYXApIHtcbiAgICAgICAgICB0aGlzLl9tYXA/Lm9mZihNQVBCT1hHTF9TVFlMRV9VUERBVEUsIG5vcCk7XG4gICAgICAgICAgdGhpcy5fbWFwPy5vZmYoTUFQQk9YR0xfUkVOREVSLCBub3ApO1xuICAgICAgICAgIHRoaXMuX21hcCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9tYXAgJiYgbWFwUmVmKSB7XG4gICAgICAgIHRoaXMuX21hcCA9IG1hcFJlZi5nZXRNYXAoKTtcbiAgICAgICAgLy8gaSBub3RpY2VkIGluIGNlcnRhaW4gY29udGV4dCB3ZSBkb24ndCBhY2Nlc3MgdGhlIGFjdHVhbCBtYXAgZWxlbWVudFxuICAgICAgICBpZiAoIXRoaXMuX21hcCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBiaW5kIG1hcGJveGdsIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgIHRoaXMuX21hcC5vbihNQVBCT1hHTF9TVFlMRV9VUERBVEUsIHRoaXMuX29uTWFwYm94U3R5bGVVcGRhdGUpO1xuXG4gICAgICAgIHRoaXMuX21hcC5vbihNQVBCT1hHTF9SRU5ERVIsICgpID0+IHtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub25NYXBSZW5kZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMub25NYXBSZW5kZXIodGhpcy5fbWFwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5wcm9wcy5nZXRNYXBib3hSZWYpIHtcbiAgICAgICAgLy8gVGhlIHBhcmVudCBjb21wb25lbnQgY2FuIGdhaW4gYWNjZXNzIHRvIG91ciBNYXBib3hHbE1hcCBieVxuICAgICAgICAvLyBwcm92aWRpbmcgdGhpcyBjYWxsYmFjay4gTm90ZSB0aGF0ICdtYXBib3gnIHdpbGwgYmUgbnVsbCB3aGVuIHRoZVxuICAgICAgICAvLyByZWYgaXMgdW5zZXQgKGUuZy4gd2hlbiBhIHNwbGl0IG1hcCBpcyBjbG9zZWQpLlxuICAgICAgICB0aGlzLnByb3BzLmdldE1hcGJveFJlZihtYXBSZWYsIHRoaXMucHJvcHMuaW5kZXgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfb25EZWNrSW5pdGlhbGl6ZWQoZ2wpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLm9uRGVja0luaXRpYWxpemVkKSB7XG4gICAgICAgIHRoaXMucHJvcHMub25EZWNrSW5pdGlhbGl6ZWQodGhpcy5fZGVjaywgZ2wpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIDEpIEFsbG93IGVmZmVjdHMgb25seSBmb3IgdGhlIGZpcnN0IHZpZXcuXG4gICAgICogMikgUHJldmVudCBlZmZlY3Q6cHJlUmVuZGVyIGNhbGwgd2l0aG91dCB2YWxpZCBnZW5lcmF0ZWQgdmlld3BvcnRzLlxuICAgICAqIEBwYXJhbSB2aWV3SW5kZXggVmlldyBpbmRleC5cbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIHRydWUgaWYgZWZmZWN0cyBjYW4gYmUgdXNlZC5cbiAgICAgKi9cbiAgICBfaXNPS1RvUmVuZGVyRWZmZWN0cyh2aWV3SW5kZXg/OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiAhdmlld0luZGV4ICYmIEJvb2xlYW4odGhpcy5fZGVjaz8udmlld01hbmFnZXI/Ll92aWV3cG9ydHM/Lmxlbmd0aCk7XG4gICAgfVxuXG4gICAgX29uQmVmb3JlUmVuZGVyID0gKHtnbH0pID0+IHtcbiAgICAgIHNldExheWVyQmxlbmRpbmcoZ2wsIHRoaXMucHJvcHMudmlzU3RhdGUubGF5ZXJCbGVuZGluZyk7XG4gICAgfTtcblxuICAgIF9vbkRlY2tFcnJvciA9IChlcnJvciwgbGF5ZXIpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yPy5tZXNzYWdlIHx8ICd1bmtub3duLWVycm9yJztcbiAgICAgIGNvbnN0IGxheWVyTWVzc2FnZSA9IGxheWVyPy5pZCA/IGAgaW4gJHtsYXllci5pZH0gbGF5ZXJgIDogJyc7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2VGdWxsID1cbiAgICAgICAgZXJyb3JNZXNzYWdlID09PSAnV2ViR0wgY29udGV4dCBpcyBsb3N0J1xuICAgICAgICAgID8gJ1lvdXIgR1BVIHdhcyBkaXNjb25uZWN0ZWQuIFRoaXMgY2FuIGhhcHBlbiBpZiB5b3VyIGNvbXB1dGVyIGdvZXMgdG8gc2xlZXAuIEl0IGNhbiBhbHNvIG9jY3VyIGZvciBvdGhlciByZWFzb25zLCBzdWNoIGFzIGlmIHlvdSBhcmUgcnVubmluZyB0b28gbWFueSBHUFUgYXBwbGljYXRpb25zLidcbiAgICAgICAgICA6IGBBbiBlcnJvciBpbiBkZWNrLmdsOiAke2Vycm9yTWVzc2FnZX0ke2xheWVyTWVzc2FnZX0uYDtcblxuICAgICAgLy8gVGhyb3R0bGUgZXJyb3Igbm90aWZpY2F0aW9ucywgYXMgUmVhY3QgZG9lc24ndCBsaWtlIHRvbyBtYW55IHN0YXRlIGNoYW5nZXMgZnJvbSBoZXJlLlxuICAgICAgY29uc3QgbGFzdFNob3duID0gdGhpcy5fZGVja0dMRXJyb3JzRWxhcHNlZFtlcnJvck1lc3NhZ2VGdWxsXTtcbiAgICAgIGlmICghbGFzdFNob3duIHx8IGxhc3RTaG93biA8IERhdGUubm93KCkgLSBUSFJPVFRMRV9OT1RJRklDQVRJT05fVElNRSkge1xuICAgICAgICB0aGlzLl9kZWNrR0xFcnJvcnNFbGFwc2VkW2Vycm9yTWVzc2FnZUZ1bGxdID0gRGF0ZS5ub3coKTtcblxuICAgICAgICAvLyBNYXJrIGxheWVyIGFzIGludmFsaWRcbiAgICAgICAgbGV0IGV4dHJhTGF5ZXJNZXNzYWdlID0gJyc7XG4gICAgICAgIGNvbnN0IHt2aXNTdGF0ZUFjdGlvbnN9ID0gdGhpcy5wcm9wcztcbiAgICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgICAgbGV0IHRvcE1vc3RMYXllciA9IGxheWVyO1xuICAgICAgICAgIHdoaWxlICh0b3BNb3N0TGF5ZXIucGFyZW50KSB7XG4gICAgICAgICAgICB0b3BNb3N0TGF5ZXIgPSB0b3BNb3N0TGF5ZXIucGFyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodG9wTW9zdExheWVyLnByb3BzPy5pZCkge1xuICAgICAgICAgICAgdmlzU3RhdGVBY3Rpb25zLmxheWVyU2V0SXNWYWxpZCh0b3BNb3N0TGF5ZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIGV4dHJhTGF5ZXJNZXNzYWdlID0gJ1RoZSBsYXllciBoYXMgYmVlbiBkaXNhYmxlZCBhbmQgaGlnaGxpZ2h0ZWQuJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgbmV3IGVycm9yIG5vdGlmaWNhdGlvbiBvciB1cGRhdGUgZXhpc3Rpbmcgb25lIHdpdGggc2FtZSBpZC5cbiAgICAgICAgLy8gVXBkYXRlIGlzIHJlcXVpcmVkIHRvIHByZXNlcnZlIHRoZSBvcmRlciBvZiBub3RpZmljYXRpb25zIGFzIHRoZXkgcHJvYmFibHkgYXJlIGdvaW5nIHRvIFwianVtcFwiIGJhc2VkIG9uIG9yZGVyIG9mIGVycm9ycy5cbiAgICAgICAgY29uc3Qge3VpU3RhdGVBY3Rpb25zfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIHVpU3RhdGVBY3Rpb25zLmFkZE5vdGlmaWNhdGlvbihcbiAgICAgICAgICBlcnJvck5vdGlmaWNhdGlvbih7XG4gICAgICAgICAgICBtZXNzYWdlOiBgJHtlcnJvck1lc3NhZ2VGdWxsfSAke2V4dHJhTGF5ZXJNZXNzYWdlfWAsXG4gICAgICAgICAgICBpZDogZXJyb3JNZXNzYWdlRnVsbCAvLyB0cmVhdCB0aGUgZXJyb3IgbWVzc2FnZSBhcyBpZFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qIGNvbXBvbmVudCByZW5kZXIgZnVuY3Rpb25zICovXG5cbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBjb21wbGV4aXR5ICovXG4gICAgX3JlbmRlck1hcFBvcG92ZXIoKSB7XG4gICAgICAvLyB0aGlzIGNoZWNrIGlzIGZvciBsaW1pdGluZyB0aGUgZGlzcGxheSBvZiB0aGUgYDxNYXBQb3BvdmVyPmAgdG8gdGhlIGA8TWFwQ29udGFpbmVyPmAgdGhlIHVzZXIgaXMgaW50ZXJhY3Rpbmcgd2l0aFxuICAgICAgLy8gdGhlIERlY2tHTCBvbkhvdmVyIGV2ZW50IGhhbmRsZXIgYWRkcyBhIGBtYXBJbmRleGAgcHJvcGVydHkgd2hpY2ggaXMgYXZhaWxhYmxlIGluIHRoZSBgaG92ZXJJbmZvYCBvYmplY3Qgb2YgYHZpc1N0YXRlYFxuICAgICAgaWYgKHRoaXMucHJvcHMuaW5kZXggIT09IHRoaXMucHJvcHMudmlzU3RhdGUuaG92ZXJJbmZvPy5tYXBJbmRleCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETzogbW92ZSB0aGlzIGludG8gcmVkdWNlciBzbyBpdCBjYW4gYmUgdGVzdGVkXG4gICAgICBjb25zdCB7XG4gICAgICAgIG1hcFN0YXRlLFxuICAgICAgICB2aXNTdGF0ZToge1xuICAgICAgICAgIGhvdmVySW5mbyxcbiAgICAgICAgICBjbGlja2VkLFxuICAgICAgICAgIGRhdGFzZXRzLFxuICAgICAgICAgIGludGVyYWN0aW9uQ29uZmlnLFxuICAgICAgICAgIGFuaW1hdGlvbkNvbmZpZyxcbiAgICAgICAgICBsYXllcnMsXG4gICAgICAgICAgbW91c2VQb3M6IHttb3VzZVBvc2l0aW9uLCBjb29yZGluYXRlLCBwaW5uZWR9XG4gICAgICAgIH1cbiAgICAgIH0gPSB0aGlzLnByb3BzO1xuICAgICAgY29uc3QgbGF5ZXJzVG9SZW5kZXIgPSB0aGlzLmxheWVyc1RvUmVuZGVyU2VsZWN0b3IodGhpcy5wcm9wcyk7XG5cbiAgICAgIGlmICghbW91c2VQb3NpdGlvbiB8fCAhaW50ZXJhY3Rpb25Db25maWcudG9vbHRpcCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGF5ZXJIb3ZlclByb3AgPSBnZXRMYXllckhvdmVyUHJvcCh7XG4gICAgICAgIGFuaW1hdGlvbkNvbmZpZyxcbiAgICAgICAgaW50ZXJhY3Rpb25Db25maWcsXG4gICAgICAgIGhvdmVySW5mbyxcbiAgICAgICAgbGF5ZXJzLFxuICAgICAgICBsYXllcnNUb1JlbmRlcixcbiAgICAgICAgZGF0YXNldHNcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb21wYXJlTW9kZSA9IGludGVyYWN0aW9uQ29uZmlnLnRvb2x0aXAuY29uZmlnXG4gICAgICAgID8gaW50ZXJhY3Rpb25Db25maWcudG9vbHRpcC5jb25maWcuY29tcGFyZU1vZGVcbiAgICAgICAgOiBmYWxzZTtcblxuICAgICAgbGV0IHBpbm5lZFBvc2l0aW9uID0ge3g6IDAsIHk6IDB9O1xuICAgICAgbGV0IGxheWVyUGlubmVkUHJvcDogTGF5ZXJIb3ZlclByb3AgfCBudWxsID0gbnVsbDtcbiAgICAgIGlmIChwaW5uZWQgfHwgY2xpY2tlZCkge1xuICAgICAgICAvLyBwcm9qZWN0IGxuZ2xhdCB0byBzY3JlZW4gc28gdGhhdCB0b29sdGlwIGZvbGxvd3MgdGhlIG9iamVjdCBvbiB6b29tXG4gICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gZ2V0Vmlld3BvcnRGcm9tTWFwU3RhdGUobWFwU3RhdGUpO1xuICAgICAgICBjb25zdCBsbmdMYXQgPSBjbGlja2VkID8gY2xpY2tlZC5jb29yZGluYXRlIDogcGlubmVkLmNvb3JkaW5hdGU7XG4gICAgICAgIHBpbm5lZFBvc2l0aW9uID0gdGhpcy5fZ2V0SG92ZXJYWSh2aWV3cG9ydCwgbG5nTGF0KTtcbiAgICAgICAgbGF5ZXJQaW5uZWRQcm9wID0gZ2V0TGF5ZXJIb3ZlclByb3Aoe1xuICAgICAgICAgIGFuaW1hdGlvbkNvbmZpZyxcbiAgICAgICAgICBpbnRlcmFjdGlvbkNvbmZpZyxcbiAgICAgICAgICBob3ZlckluZm86IGNsaWNrZWQsXG4gICAgICAgICAgbGF5ZXJzLFxuICAgICAgICAgIGxheWVyc1RvUmVuZGVyLFxuICAgICAgICAgIGRhdGFzZXRzXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobGF5ZXJIb3ZlclByb3AgJiYgbGF5ZXJQaW5uZWRQcm9wKSB7XG4gICAgICAgICAgbGF5ZXJIb3ZlclByb3AucHJpbWFyeURhdGEgPSBsYXllclBpbm5lZFByb3AuZGF0YTtcbiAgICAgICAgICBsYXllckhvdmVyUHJvcC5jb21wYXJlVHlwZSA9IGludGVyYWN0aW9uQ29uZmlnLnRvb2x0aXAuY29uZmlnLmNvbXBhcmVUeXBlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbW1vblByb3AgPSB7XG4gICAgICAgIG9uQ2xvc2U6IHRoaXMuX29uQ2xvc2VNYXBQb3BvdmVyLFxuICAgICAgICB6b29tOiBtYXBTdGF0ZS56b29tLFxuICAgICAgICBjb250YWluZXI6IHRoaXMuX2RlY2sgPyB0aGlzLl9kZWNrLmNhbnZhcyA6IHVuZGVmaW5lZFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPEVycm9yQm91bmRhcnk+XG4gICAgICAgICAge2xheWVyUGlubmVkUHJvcCAmJiAoXG4gICAgICAgICAgICA8TWFwUG9wb3ZlclxuICAgICAgICAgICAgICB7Li4ucGlubmVkUG9zaXRpb259XG4gICAgICAgICAgICAgIHsuLi5jb21tb25Qcm9wfVxuICAgICAgICAgICAgICBsYXllckhvdmVyUHJvcD17bGF5ZXJQaW5uZWRQcm9wfVxuICAgICAgICAgICAgICBjb29yZGluYXRlPXtpbnRlcmFjdGlvbkNvbmZpZy5jb29yZGluYXRlLmVuYWJsZWQgJiYgKHBpbm5lZCB8fCB7fSkuY29vcmRpbmF0ZX1cbiAgICAgICAgICAgICAgZnJvemVuPXt0cnVlfVxuICAgICAgICAgICAgICBpc0Jhc2U9e2NvbXBhcmVNb2RlfVxuICAgICAgICAgICAgICBvblNldEZlYXR1cmVzPXt0aGlzLnByb3BzLnZpc1N0YXRlQWN0aW9ucy5zZXRGZWF0dXJlc31cbiAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRGZWF0dXJlPXt0aGlzLnByb3BzLnZpc1N0YXRlQWN0aW9ucy5zZXRTZWxlY3RlZEZlYXR1cmV9XG4gICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmUgQXJndW1lbnQgb2YgdHlwZSAnUmVhZG9ubHk8TWFwQ29udGFpbmVyUHJvcHM+JyBpcyBub3QgYXNzaWduYWJsZSB0byBwYXJhbWV0ZXIgb2YgdHlwZSAnbmV2ZXInXG4gICAgICAgICAgICAgIGZlYXR1cmVDb2xsZWN0aW9uPXt0aGlzLmZlYXR1cmVDb2xsZWN0aW9uU2VsZWN0b3IodGhpcy5wcm9wcyl9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICl9XG4gICAgICAgICAge2xheWVySG92ZXJQcm9wICYmICghbGF5ZXJQaW5uZWRQcm9wIHx8IGNvbXBhcmVNb2RlKSAmJiAoXG4gICAgICAgICAgICA8TWFwUG9wb3ZlclxuICAgICAgICAgICAgICB4PXttb3VzZVBvc2l0aW9uWzBdfVxuICAgICAgICAgICAgICB5PXttb3VzZVBvc2l0aW9uWzFdfVxuICAgICAgICAgICAgICB7Li4uY29tbW9uUHJvcH1cbiAgICAgICAgICAgICAgbGF5ZXJIb3ZlclByb3A9e2xheWVySG92ZXJQcm9wfVxuICAgICAgICAgICAgICBmcm96ZW49e2ZhbHNlfVxuICAgICAgICAgICAgICBjb29yZGluYXRlPXtpbnRlcmFjdGlvbkNvbmZpZy5jb29yZGluYXRlLmVuYWJsZWQgJiYgY29vcmRpbmF0ZX1cbiAgICAgICAgICAgICAgb25TZXRGZWF0dXJlcz17dGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMuc2V0RmVhdHVyZXN9XG4gICAgICAgICAgICAgIHNldFNlbGVjdGVkRmVhdHVyZT17dGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMuc2V0U2VsZWN0ZWRGZWF0dXJlfVxuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIEFyZ3VtZW50IG9mIHR5cGUgJ1JlYWRvbmx5PE1hcENvbnRhaW5lclByb3BzPicgaXMgbm90IGFzc2lnbmFibGUgdG8gcGFyYW1ldGVyIG9mIHR5cGUgJ25ldmVyJ1xuICAgICAgICAgICAgICBmZWF0dXJlQ29sbGVjdGlvbj17dGhpcy5mZWF0dXJlQ29sbGVjdGlvblNlbGVjdG9yKHRoaXMucHJvcHMpfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L0Vycm9yQm91bmRhcnk+XG4gICAgICApO1xuICAgIH1cblxuICAgIC8qIGVzbGludC1lbmFibGUgY29tcGxleGl0eSAqL1xuXG4gICAgX2dldEhvdmVyWFkodmlld3BvcnQsIGxuZ0xhdCkge1xuICAgICAgY29uc3Qgc2NyZWVuQ29vcmQgPSAhdmlld3BvcnQgfHwgIWxuZ0xhdCA/IG51bGwgOiB2aWV3cG9ydC5wcm9qZWN0KGxuZ0xhdCk7XG4gICAgICByZXR1cm4gc2NyZWVuQ29vcmQgJiYge3g6IHNjcmVlbkNvb3JkWzBdLCB5OiBzY3JlZW5Db29yZFsxXX07XG4gICAgfVxuXG4gICAgX3JlbmRlckRlY2tPdmVybGF5KFxuICAgICAgbGF5ZXJzRm9yRGVjayxcbiAgICAgIG9wdGlvbnM6IHtwcmltYXJ5TWFwOiBib29sZWFuOyBpc0ludGVyYWN0aXZlPzogYm9vbGVhbjsgY2hpbGRyZW4/OiBSZWFjdC5SZWFjdE5vZGV9ID0ge1xuICAgICAgICBwcmltYXJ5TWFwOiBmYWxzZVxuICAgICAgfVxuICAgICkge1xuICAgICAgY29uc3Qge1xuICAgICAgICBtYXBTdHlsZSxcbiAgICAgICAgdmlzU3RhdGUsXG4gICAgICAgIG1hcFN0YXRlLFxuICAgICAgICB2aXNTdGF0ZUFjdGlvbnMsXG4gICAgICAgIG1hcGJveEFwaUFjY2Vzc1Rva2VuLFxuICAgICAgICBtYXBib3hBcGlVcmwsXG4gICAgICAgIGRlY2tHbFByb3BzLFxuICAgICAgICBpbmRleCxcbiAgICAgICAgbWFwQ29udHJvbHMsXG4gICAgICAgIGRlY2tSZW5kZXJDYWxsYmFja3MsXG4gICAgICAgIHRoZW1lLFxuICAgICAgICBnZW5lcmF0ZURlY2tHTExheWVycyxcbiAgICAgICAgb25Nb3VzZU1vdmVcbiAgICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICBjb25zdCB7aG92ZXJJbmZvLCBlZGl0b3J9ID0gdmlzU3RhdGU7XG4gICAgICBjb25zdCB7cHJpbWFyeU1hcCwgaXNJbnRlcmFjdGl2ZSwgY2hpbGRyZW59ID0gb3B0aW9ucztcblxuICAgICAgLy8gZGlzYWJsZSBkb3VibGUgY2xpY2sgem9vbSB3aGVuIGVkaXRvciBpcyBpbiBhbnkgZHJhdyBtb2RlXG4gICAgICBjb25zdCB7bWFwRHJhd30gPSBtYXBDb250cm9scztcbiAgICAgIGNvbnN0IHthY3RpdmU6IGVkaXRvck1lbnVBY3RpdmUgPSBmYWxzZX0gPSBtYXBEcmF3IHx8IHt9O1xuICAgICAgY29uc3QgaXNFZGl0b3JEcmF3aW5nTW9kZSA9IEVkaXRvckxheWVyVXRpbHMuaXNEcmF3aW5nQWN0aXZlKGVkaXRvck1lbnVBY3RpdmUsIGVkaXRvci5tb2RlKTtcblxuICAgICAgY29uc3QgaW50ZXJuYWxWaWV3U3RhdGUgPSB0aGlzLmNvbnRleHQ/LmdldEludGVybmFsVmlld1N0YXRlKGluZGV4KTtcbiAgICAgIGNvbnN0IGludGVybmFsTWFwU3RhdGUgPSB7Li4ubWFwU3RhdGUsIC4uLmludGVybmFsVmlld1N0YXRlfTtcbiAgICAgIGNvbnN0IHZpZXdwb3J0ID0gZ2V0Vmlld3BvcnRGcm9tTWFwU3RhdGUoaW50ZXJuYWxNYXBTdGF0ZSk7XG5cbiAgICAgIGNvbnN0IGVkaXRvckZlYXR1cmVTZWxlY3RlZEluZGV4ID0gdGhpcy5zZWxlY3RlZFBvbHlnb25JbmRleFNlbGVjdG9yKHRoaXMucHJvcHMpO1xuXG4gICAgICBjb25zdCB7c2V0RmVhdHVyZXMsIG9uTGF5ZXJDbGljaywgc2V0U2VsZWN0ZWRGZWF0dXJlfSA9IHZpc1N0YXRlQWN0aW9ucztcblxuICAgICAgY29uc3QgZ2VuZXJhdGVEZWNrR0xMYXllcnNNZXRob2QgPSBnZW5lcmF0ZURlY2tHTExheWVycyA/PyBjb21wdXRlRGVja0xheWVycztcbiAgICAgIGNvbnN0IGRlY2tHbExheWVycyA9IGdlbmVyYXRlRGVja0dMTGF5ZXJzTWV0aG9kKFxuICAgICAgICB7XG4gICAgICAgICAgdmlzU3RhdGUsXG4gICAgICAgICAgbWFwU3RhdGU6IGludGVybmFsTWFwU3RhdGUsXG4gICAgICAgICAgbWFwU3R5bGVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG1hcEluZGV4OiBpbmRleCxcbiAgICAgICAgICBwcmltYXJ5TWFwLFxuICAgICAgICAgIG1hcGJveEFwaUFjY2Vzc1Rva2VuLFxuICAgICAgICAgIG1hcGJveEFwaVVybCxcbiAgICAgICAgICBsYXllcnNGb3JEZWNrLFxuICAgICAgICAgIGVkaXRvckluZm86IHByaW1hcnlNYXBcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICBlZGl0b3JNZW51QWN0aXZlLFxuICAgICAgICAgICAgICAgIG9uU2V0RmVhdHVyZXM6IHNldEZlYXR1cmVzLFxuICAgICAgICAgICAgICAgIHNldFNlbGVjdGVkRmVhdHVyZSxcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIEFyZ3VtZW50IG9mIHR5cGUgJ1JlYWRvbmx5PE1hcENvbnRhaW5lclByb3BzPicgaXMgbm90IGFzc2lnbmFibGUgdG8gcGFyYW1ldGVyIG9mIHR5cGUgJ25ldmVyJ1xuICAgICAgICAgICAgICAgIGZlYXR1cmVDb2xsZWN0aW9uOiB0aGlzLmZlYXR1cmVDb2xsZWN0aW9uU2VsZWN0b3IodGhpcy5wcm9wcyksXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRGZWF0dXJlSW5kZXhlczogdGhpcy5zZWxlY3RlZEZlYXR1cmVJbmRleEFycmF5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlIEFyZ3VtZW50IG9mIHR5cGUgJ3Vua25vd24nIGlzIG5vdCBhc3NpZ25hYmxlIHRvIHBhcmFtZXRlciBvZiB0eXBlICdudW1iZXInLlxuICAgICAgICAgICAgICAgICAgZWRpdG9yRmVhdHVyZVNlbGVjdGVkSW5kZXhcbiAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgIHZpZXdwb3J0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBvbkxheWVySG92ZXI6IHRoaXMuX29uTGF5ZXJIb3ZlcixcbiAgICAgICAgICBvblNldExheWVyRG9tYWluOiB0aGlzLl9vbkxheWVyU2V0RG9tYWluLFxuICAgICAgICAgIG9uRmlsdGVyZWRJdGVtc0NoYW5nZTogdGhpcy5fb25MYXllckZpbHRlcmVkSXRlbXNDaGFuZ2VcbiAgICAgICAgfSxcbiAgICAgICAgZGVja0dsUHJvcHNcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGV4dHJhRGVja1BhcmFtczoge1xuICAgICAgICBnZXRUb29sdGlwPzogKGluZm86IGFueSkgPT4gb2JqZWN0IHwgbnVsbDtcbiAgICAgICAgZ2V0Q3Vyc29yPzogKHtpc0RyYWdnaW5nfToge2lzRHJhZ2dpbmc6IGJvb2xlYW59KSA9PiBzdHJpbmc7XG4gICAgICB9ID0ge307XG4gICAgICBpZiAocHJpbWFyeU1hcCkge1xuICAgICAgICBleHRyYURlY2tQYXJhbXMuZ2V0VG9vbHRpcCA9IGluZm8gPT5cbiAgICAgICAgICBFZGl0b3JMYXllclV0aWxzLmdldFRvb2x0aXAoaW5mbywge1xuICAgICAgICAgICAgZWRpdG9yTWVudUFjdGl2ZSxcbiAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgIHRoZW1lXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgZXh0cmFEZWNrUGFyYW1zLmdldEN1cnNvciA9ICh7aXNEcmFnZ2luZ306IHtpc0RyYWdnaW5nOiBib29sZWFufSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGVkaXRvckN1cnNvciA9IEVkaXRvckxheWVyVXRpbHMuZ2V0Q3Vyc29yKHtcbiAgICAgICAgICAgIGVkaXRvck1lbnVBY3RpdmUsXG4gICAgICAgICAgICBlZGl0b3IsXG4gICAgICAgICAgICBob3ZlckluZm9cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoZWRpdG9yQ3Vyc29yKSByZXR1cm4gZWRpdG9yQ3Vyc29yO1xuXG4gICAgICAgICAgaWYgKGlzRHJhZ2dpbmcpIHJldHVybiAnZ3JhYmJpbmcnO1xuICAgICAgICAgIGlmIChob3ZlckluZm8/LmxheWVyKSByZXR1cm4gJ3BvaW50ZXInO1xuICAgICAgICAgIHJldHVybiAnZ3JhYic7XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLl9pc09LVG9SZW5kZXJFZmZlY3RzKGluZGV4KVxuICAgICAgICA/IGNvbXB1dGVEZWNrRWZmZWN0cyh7dmlzU3RhdGUsIG1hcFN0YXRlfSlcbiAgICAgICAgOiBbXTtcblxuICAgICAgY29uc3Qgdmlld3MgPSBkZWNrR2xQcm9wcz8udmlld3NcbiAgICAgICAgPyBkZWNrR2xQcm9wcz8udmlld3MoKVxuICAgICAgICA6IG5ldyBNYXBWaWV3KHtsZWdhY3lNZXRlclNpemVzOiB0cnVlfSk7XG5cbiAgICAgIGxldCBhbGxEZWNrR2xQcm9wcyA9IHtcbiAgICAgICAgLi4uZGVja0dsUHJvcHMsXG4gICAgICAgIHBpY2tpbmdSYWRpdXM6IERFRkFVTFRfUElDS0lOR19SQURJVVMsXG4gICAgICAgIHZpZXdzLFxuICAgICAgICBsYXllcnM6IGRlY2tHbExheWVycyxcbiAgICAgICAgZWZmZWN0c1xuICAgICAgfTtcblxuICAgICAgaWYgKHR5cGVvZiBkZWNrUmVuZGVyQ2FsbGJhY2tzPy5vbkRlY2tSZW5kZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgYWxsRGVja0dsUHJvcHMgPSBkZWNrUmVuZGVyQ2FsbGJhY2tzLm9uRGVja1JlbmRlcihhbGxEZWNrR2xQcm9wcyk7XG4gICAgICAgIGlmICghYWxsRGVja0dsUHJvcHMpIHtcbiAgICAgICAgICAvLyBpZiBvbkRlY2tSZW5kZXIgcmV0dXJucyBudWxsLCBkbyBub3QgcmVuZGVyIGRlY2suZ2xcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgey4uLihpc0ludGVyYWN0aXZlXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBvbk1vdXNlTW92ZTogcHJpbWFyeU1hcFxuICAgICAgICAgICAgICAgICAgPyBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgb25Nb3VzZU1vdmU/LihldmVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25Nb3VzZU1vdmVEZWJvdW5jZWQoZXZlbnQsIHZpZXdwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7c3R5bGU6IHtwb2ludGVyRXZlbnRzOiAnbm9uZSd9fSl9XG4gICAgICAgID5cbiAgICAgICAgICA8RGVja0dMXG4gICAgICAgICAgICBpZD1cImRlZmF1bHQtZGVja2dsLW92ZXJsYXlcIlxuICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVja1JlbmRlckNhbGxiYWNrcz8ub25EZWNrTG9hZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGRlY2tSZW5kZXJDYWxsYmFja3Mub25EZWNrTG9hZCgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgey4uLmFsbERlY2tHbFByb3BzfVxuICAgICAgICAgICAgY29udHJvbGxlcj17XG4gICAgICAgICAgICAgIGlzSW50ZXJhY3RpdmVcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZG91YmxlQ2xpY2tab29tOiAhaXNFZGl0b3JEcmF3aW5nTW9kZSxcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1JvdGF0ZTogdGhpcy5wcm9wcy5tYXBTdGF0ZS5kcmFnUm90YXRlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5pdGlhbFZpZXdTdGF0ZT17aW50ZXJuYWxWaWV3U3RhdGV9XG4gICAgICAgICAgICBvbkJlZm9yZVJlbmRlcj17dGhpcy5fb25CZWZvcmVSZW5kZXJ9XG4gICAgICAgICAgICBvblZpZXdTdGF0ZUNoYW5nZT17aXNJbnRlcmFjdGl2ZSA/IHRoaXMuX29uVmlld3BvcnRDaGFuZ2UgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICB7Li4uZXh0cmFEZWNrUGFyYW1zfVxuICAgICAgICAgICAgb25Ib3Zlcj17XG4gICAgICAgICAgICAgIGlzSW50ZXJhY3RpdmVcbiAgICAgICAgICAgICAgICA/IGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBFZGl0b3JMYXllclV0aWxzLm9uSG92ZXIoZGF0YSwge1xuICAgICAgICAgICAgICAgICAgICAgIGVkaXRvck1lbnVBY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLFxuICAgICAgICAgICAgICAgICAgICAgIGhvdmVySW5mb1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX29uTGF5ZXJIb3ZlckRlYm91bmNlZChkYXRhLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvbkNsaWNrPXsoZGF0YSwgZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICBub3JtYWxpemVFdmVudChldmVudC5zcmNFdmVudCwgdmlld3BvcnQpO1xuICAgICAgICAgICAgICBjb25zdCByZXMgPSBFZGl0b3JMYXllclV0aWxzLm9uQ2xpY2soZGF0YSwgZXZlbnQsIHtcbiAgICAgICAgICAgICAgICBlZGl0b3JNZW51QWN0aXZlLFxuICAgICAgICAgICAgICAgIGVkaXRvcixcbiAgICAgICAgICAgICAgICBvbkxheWVyQ2xpY2ssXG4gICAgICAgICAgICAgICAgc2V0U2VsZWN0ZWRGZWF0dXJlLFxuICAgICAgICAgICAgICAgIG1hcEluZGV4OiBpbmRleFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgaWYgKHJlcykgcmV0dXJuO1xuXG4gICAgICAgICAgICAgIHZpc1N0YXRlQWN0aW9ucy5vbkxheWVyQ2xpY2soZGF0YSk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25FcnJvcj17dGhpcy5fb25EZWNrRXJyb3J9XG4gICAgICAgICAgICByZWY9e2NvbXAgPT4ge1xuICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgIGlmIChjb21wICYmIGNvbXAuZGVjayAmJiAhdGhpcy5fZGVjaykge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWNrID0gY29tcC5kZWNrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25XZWJHTEluaXRpYWxpemVkPXtnbCA9PiB0aGlzLl9vbkRlY2tJbml0aWFsaXplZChnbCl9XG4gICAgICAgICAgICBvbkFmdGVyUmVuZGVyPXsoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVja1JlbmRlckNhbGxiYWNrcz8ub25EZWNrQWZ0ZXJSZW5kZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBkZWNrUmVuZGVyQ2FsbGJhY2tzLm9uRGVja0FmdGVyUmVuZGVyKGFsbERlY2tHbFByb3BzKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNvbnN0IGFueUFjdGl2ZUxheWVyTG9hZGluZyA9IGFyZUFueURlY2tMYXllcnNMb2FkaW5nKGFsbERlY2tHbFByb3BzLmxheWVycyk7XG4gICAgICAgICAgICAgIGlmIChhbnlBY3RpdmVMYXllckxvYWRpbmcgIT09IHRoaXMuYW55QWN0aXZlTGF5ZXJMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb25MYXllckxvYWRpbmdTdGF0ZUNoYW5nZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYW55QWN0aXZlTGF5ZXJMb2FkaW5nID0gYW55QWN0aXZlTGF5ZXJMb2FkaW5nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgICA8L0RlY2tHTD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIF91cGRhdGVNYXBib3hMYXllcnMoKSB7XG4gICAgICBjb25zdCBtYXBib3hMYXllcnMgPSB0aGlzLm1hcGJveExheWVyc1NlbGVjdG9yKHRoaXMucHJvcHMpO1xuICAgICAgaWYgKCFPYmplY3Qua2V5cyhtYXBib3hMYXllcnMpLmxlbmd0aCAmJiAhT2JqZWN0LmtleXModGhpcy5wcmV2aW91c0xheWVycykubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlTWFwYm94TGF5ZXJzKHRoaXMuX21hcCwgbWFwYm94TGF5ZXJzLCB0aGlzLnByZXZpb3VzTGF5ZXJzKTtcblxuICAgICAgdGhpcy5wcmV2aW91c0xheWVycyA9IG1hcGJveExheWVycztcbiAgICB9XG5cbiAgICBfcmVuZGVyTWFwYm94T3ZlcmxheXMoKSB7XG4gICAgICBpZiAodGhpcy5fbWFwICYmIHRoaXMuX21hcC5pc1N0eWxlTG9hZGVkKCkpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlTWFwYm94TGF5ZXJzKCk7XG4gICAgICB9XG4gICAgfVxuICAgIF9vblZpZXdwb3J0Q2hhbmdlUHJvcGFnYXRlRGVib3VuY2VkID0gZGVib3VuY2UoKCkgPT4ge1xuICAgICAgY29uc3Qgdmlld1N0YXRlID0gdGhpcy5jb250ZXh0Py5nZXRJbnRlcm5hbFZpZXdTdGF0ZSh0aGlzLnByb3BzLmluZGV4KTtcbiAgICAgIG9uVmlld1BvcnRDaGFuZ2UoXG4gICAgICAgIHZpZXdTdGF0ZSxcbiAgICAgICAgdGhpcy5wcm9wcy5tYXBTdGF0ZUFjdGlvbnMudXBkYXRlTWFwLFxuICAgICAgICB0aGlzLnByb3BzLm9uVmlld1N0YXRlQ2hhbmdlLFxuICAgICAgICB0aGlzLnByb3BzLnByaW1hcnksXG4gICAgICAgIHRoaXMucHJvcHMuaW5kZXhcbiAgICAgICk7XG4gICAgfSwgREVCT1VOQ0VfVklFV1BPUlRfUFJPUEFHQVRFKTtcblxuICAgIF9vblZpZXdwb3J0Q2hhbmdlID0gdmlld3BvcnQgPT4ge1xuICAgICAgY29uc3Qge3ZpZXdTdGF0ZX0gPSB2aWV3cG9ydDtcbiAgICAgIGlmICh0aGlzLnByb3BzLmlzRXhwb3J0KSB7XG4gICAgICAgIC8vIEltYWdlIGV4cG9ydCBtYXAgc2hvdWxkbid0IGJlIGludGVyYWN0aXZlIChvdGhlcndpc2UgdGhpcyBjYWxsYmFjayBjYW5cbiAgICAgICAgLy8gbGVhZCB0byBpbmFkdmVydGVudCBjaGFuZ2VzIHRvIHRoZSBzdGF0ZSBvZiB0aGUgbWFpbiBtYXApXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHtzZXRJbnRlcm5hbFZpZXdTdGF0ZX0gPSB0aGlzLmNvbnRleHQ7XG4gICAgICBzZXRJbnRlcm5hbFZpZXdTdGF0ZSh2aWV3U3RhdGUsIHRoaXMucHJvcHMuaW5kZXgpO1xuICAgICAgdGhpcy5fb25WaWV3cG9ydENoYW5nZVByb3BhZ2F0ZURlYm91bmNlZCgpO1xuICAgIH07XG5cbiAgICBfb25MYXllckhvdmVyRGVib3VuY2VkID0gZGVib3VuY2UoKGRhdGEsIGluZGV4KSA9PiB7XG4gICAgICB0aGlzLnByb3BzLnZpc1N0YXRlQWN0aW9ucy5vbkxheWVySG92ZXIoZGF0YSwgaW5kZXgpO1xuICAgIH0sIERFQk9VTkNFX01PVVNFX01PVkVfUFJPUEFHQVRFKTtcblxuICAgIF9vbk1vdXNlTW92ZURlYm91bmNlZCA9IGRlYm91bmNlKChldmVudCwgdmlld3BvcnQpID0+IHtcbiAgICAgIHRoaXMucHJvcHMudmlzU3RhdGVBY3Rpb25zLm9uTW91c2VNb3ZlKG5vcm1hbGl6ZUV2ZW50KGV2ZW50LCB2aWV3cG9ydCkpO1xuICAgIH0sIERFQk9VTkNFX01PVVNFX01PVkVfUFJPUEFHQVRFKTtcblxuICAgIF9vbkxheWVyTG9hZGluZ1N0YXRlQ2hhbmdlID0gZGVib3VuY2UoKCkgPT4ge1xuICAgICAgLy8gdHJpZ2dlciBsb2FkaW5nIGluZGljYXRvciB1cGRhdGUgd2l0aG91dCBhbnkgY2hhbmdlIHRvIHVwZGF0ZSBVSVxuICAgICAgdGhpcy5wcm9wcy52aXNTdGF0ZUFjdGlvbnMuc2V0TG9hZGluZ0luZGljYXRvcih7Y2hhbmdlOiAwfSk7XG4gICAgfSwgREVCT1VOQ0VfTE9BRElOR19TVEFURV9QUk9QQUdBVEUpO1xuXG4gICAgX3RvZ2dsZU1hcENvbnRyb2wgPSBwYW5lbElkID0+IHtcbiAgICAgIGNvbnN0IHtpbmRleCwgdWlTdGF0ZUFjdGlvbnN9ID0gdGhpcy5wcm9wcztcblxuICAgICAgdWlTdGF0ZUFjdGlvbnMudG9nZ2xlTWFwQ29udHJvbChwYW5lbElkLCBOdW1iZXIoaW5kZXgpKTtcbiAgICB9O1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgY29tcGxleGl0eSAqL1xuICAgIF9yZW5kZXJNYXAoKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHZpc1N0YXRlLFxuICAgICAgICBtYXBTdGF0ZSxcbiAgICAgICAgbWFwU3R5bGUsXG4gICAgICAgIG1hcFN0YXRlQWN0aW9ucyxcbiAgICAgICAgTWFwQ29tcG9uZW50ID0gTWFwLFxuICAgICAgICBtYXBib3hBcGlBY2Nlc3NUb2tlbixcbiAgICAgICAgLy8gbWFwYm94QXBpVXJsLFxuICAgICAgICBtYXBDb250cm9scyxcbiAgICAgICAgaXNFeHBvcnQsXG4gICAgICAgIGxvY2FsZSxcbiAgICAgICAgdWlTdGF0ZUFjdGlvbnMsXG4gICAgICAgIHZpc1N0YXRlQWN0aW9ucyxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHByaW1hcnksXG4gICAgICAgIGJvdHRvbU1hcENvbnRhaW5lclByb3BzLFxuICAgICAgICB0b3BNYXBDb250YWluZXJQcm9wcyxcbiAgICAgICAgdGhlbWUsXG4gICAgICAgIGRhdGFzZXRBdHRyaWJ1dGlvbnMgPSBbXSxcbiAgICAgICAgY29udGFpbmVySWQgPSAwLFxuICAgICAgICBpc0xvYWRpbmdJbmRpY2F0b3JWaXNpYmxlLFxuICAgICAgICBhY3RpdmVTaWRlUGFuZWwsXG4gICAgICAgIHNpZGVQYW5lbFdpZHRoXG4gICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgY29uc3Qge2xheWVycywgZGF0YXNldHMsIGVkaXRvciwgaW50ZXJhY3Rpb25Db25maWd9ID0gdmlzU3RhdGU7XG5cbiAgICAgIGNvbnN0IGxheWVyc1RvUmVuZGVyID0gdGhpcy5sYXllcnNUb1JlbmRlclNlbGVjdG9yKHRoaXMucHJvcHMpO1xuICAgICAgY29uc3QgbGF5ZXJzRm9yRGVjayA9IHRoaXMubGF5ZXJzRm9yRGVja1NlbGVjdG9yKHRoaXMucHJvcHMpO1xuXG4gICAgICAvLyBDdXJyZW50IHN0eWxlIGNhbiBiZSBhIGN1c3RvbSBzdHlsZSwgZnJvbSB3aGljaCB3ZSBwdWxsIHRoZSBtYXBib3ggQVBJIGFjY2Nlc3MgdG9rZW5cbiAgICAgIGNvbnN0IGN1cnJlbnRTdHlsZSA9IG1hcFN0eWxlLm1hcFN0eWxlcz8uW21hcFN0eWxlLnN0eWxlVHlwZV07XG4gICAgICBjb25zdCBiYXNlTWFwTGlicmFyeU5hbWUgPSBnZXRCYXNlTWFwTGlicmFyeShjdXJyZW50U3R5bGUpO1xuICAgICAgY29uc3QgYmFzZU1hcExpYnJhcnlDb25maWcgPVxuICAgICAgICBnZXRBcHBsaWNhdGlvbkNvbmZpZygpLmJhc2VNYXBMaWJyYXJ5Q29uZmlnPy5bYmFzZU1hcExpYnJhcnlOYW1lXTtcblxuICAgICAgY29uc3QgaW50ZXJuYWxWaWV3U3RhdGUgPSB0aGlzLmNvbnRleHQ/LmdldEludGVybmFsVmlld1N0YXRlKGluZGV4KTtcbiAgICAgIGNvbnN0IG1hcFByb3BzID0ge1xuICAgICAgICAuLi5pbnRlcm5hbFZpZXdTdGF0ZSxcbiAgICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlLFxuICAgICAgICBtYXBib3hBY2Nlc3NUb2tlbjogY3VycmVudFN0eWxlPy5hY2Nlc3NUb2tlbiB8fCBtYXBib3hBcGlBY2Nlc3NUb2tlbixcbiAgICAgICAgLy8gYmFzZUFwaVVybDogbWFwYm94QXBpVXJsLFxuICAgICAgICBtYXBMaWI6IGJhc2VNYXBMaWJyYXJ5Q29uZmlnLmdldE1hcExpYigpLFxuICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OlxuICAgICAgICAgIHRoaXMucHJvcHMudHJhbnNmb3JtUmVxdWVzdCB8fFxuICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3QoY3VycmVudFN0eWxlPy5hY2Nlc3NUb2tlbiB8fCBtYXBib3hBcGlBY2Nlc3NUb2tlbilcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGhhc0dlb2NvZGVyTGF5ZXIgPSBCb29sZWFuKGxheWVycy5maW5kKGwgPT4gbC5pZCA9PT0gR0VPQ09ERVJfTEFZRVJfSUQpKTtcbiAgICAgIGNvbnN0IGlzU3BsaXQgPSBCb29sZWFuKG1hcFN0YXRlLmlzU3BsaXQpO1xuXG4gICAgICBjb25zdCBkZWNrID0gdGhpcy5fcmVuZGVyRGVja092ZXJsYXkobGF5ZXJzRm9yRGVjaywge1xuICAgICAgICBwcmltYXJ5TWFwOiB0cnVlLFxuICAgICAgICBpc0ludGVyYWN0aXZlOiB0cnVlLFxuICAgICAgICBjaGlsZHJlbjogKFxuICAgICAgICAgIDxNYXBDb21wb25lbnRcbiAgICAgICAgICAgIGtleT17YGJvdHRvbS0ke2Jhc2VNYXBMaWJyYXJ5TmFtZX1gfVxuICAgICAgICAgICAgey4uLm1hcFByb3BzfVxuICAgICAgICAgICAgbWFwU3R5bGU9e21hcFN0eWxlLmJvdHRvbU1hcFN0eWxlID8/IEVNUFRZX01BUEJPWF9TVFlMRX1cbiAgICAgICAgICAgIHsuLi5ib3R0b21NYXBDb250YWluZXJQcm9wc31cbiAgICAgICAgICAgIHJlZj17dGhpcy5fc2V0TWFwUmVmfVxuICAgICAgICAgIC8+XG4gICAgICAgIClcbiAgICAgIH0pO1xuICAgICAgaWYgKCFkZWNrKSB7XG4gICAgICAgIC8vIGRlY2tPdmVybGF5IGNhbiBiZSBudWxsIGlmIG9uRGVja1JlbmRlciByZXR1cm5zIG51bGxcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIGRvbid0IHdhbnQgdG8gcmVuZGVyIHRoZSBtYXBcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8PlxuICAgICAgICAgIDxNYXBDb250cm9sXG4gICAgICAgICAgICBtYXBTdGF0ZT17bWFwU3RhdGV9XG4gICAgICAgICAgICBkYXRhc2V0cz17ZGF0YXNldHN9XG4gICAgICAgICAgICBhdmFpbGFibGVMb2NhbGVzPXtMT0NBTEVfQ09ERVNfQVJSQVl9XG4gICAgICAgICAgICBkcmFnUm90YXRlPXttYXBTdGF0ZS5kcmFnUm90YXRlfVxuICAgICAgICAgICAgaXNTcGxpdD17aXNTcGxpdH1cbiAgICAgICAgICAgIHByaW1hcnk9e0Jvb2xlYW4ocHJpbWFyeSl9XG4gICAgICAgICAgICBpc0V4cG9ydD17aXNFeHBvcnR9XG4gICAgICAgICAgICBsYXllcnM9e2xheWVyc31cbiAgICAgICAgICAgIGxheWVyc1RvUmVuZGVyPXtsYXllcnNUb1JlbmRlcn1cbiAgICAgICAgICAgIG1hcEluZGV4PXtpbmRleCB8fCAwfVxuICAgICAgICAgICAgbWFwQ29udHJvbHM9e21hcENvbnRyb2xzfVxuICAgICAgICAgICAgcmVhZE9ubHk9e3RoaXMucHJvcHMucmVhZE9ubHl9XG4gICAgICAgICAgICBzY2FsZT17bWFwU3RhdGUuc2NhbGUgfHwgMX1cbiAgICAgICAgICAgIHRvcD17XG4gICAgICAgICAgICAgIGludGVyYWN0aW9uQ29uZmlnLmdlb2NvZGVyICYmIGludGVyYWN0aW9uQ29uZmlnLmdlb2NvZGVyLmVuYWJsZWRcbiAgICAgICAgICAgICAgICA/IHRoZW1lLm1hcENvbnRyb2xUb3BcbiAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVkaXRvcj17ZWRpdG9yfVxuICAgICAgICAgICAgbG9jYWxlPXtsb2NhbGV9XG4gICAgICAgICAgICBvblRvZ2dsZVBlcnNwZWN0aXZlPXttYXBTdGF0ZUFjdGlvbnMudG9nZ2xlUGVyc3BlY3RpdmV9XG4gICAgICAgICAgICBvblRvZ2dsZVNwbGl0TWFwPXttYXBTdGF0ZUFjdGlvbnMudG9nZ2xlU3BsaXRNYXB9XG4gICAgICAgICAgICBvbk1hcFRvZ2dsZUxheWVyPXt0aGlzLl9oYW5kbGVNYXBUb2dnbGVMYXllcn1cbiAgICAgICAgICAgIG9uVG9nZ2xlTWFwQ29udHJvbD17dGhpcy5fdG9nZ2xlTWFwQ29udHJvbH1cbiAgICAgICAgICAgIG9uVG9nZ2xlU3BsaXRNYXBWaWV3cG9ydD17bWFwU3RhdGVBY3Rpb25zLnRvZ2dsZVNwbGl0TWFwVmlld3BvcnR9XG4gICAgICAgICAgICBvblNldEVkaXRvck1vZGU9e3Zpc1N0YXRlQWN0aW9ucy5zZXRFZGl0b3JNb2RlfVxuICAgICAgICAgICAgb25TZXRMb2NhbGU9e3VpU3RhdGVBY3Rpb25zLnNldExvY2FsZX1cbiAgICAgICAgICAgIG9uVG9nZ2xlRWRpdG9yVmlzaWJpbGl0eT17dmlzU3RhdGVBY3Rpb25zLnRvZ2dsZUVkaXRvclZpc2liaWxpdHl9XG4gICAgICAgICAgICBvbkxheWVyVmlzQ29uZmlnQ2hhbmdlPXt2aXNTdGF0ZUFjdGlvbnMubGF5ZXJWaXNDb25maWdDaGFuZ2V9XG4gICAgICAgICAgICBtYXBIZWlnaHQ9e21hcFN0YXRlLmhlaWdodH1cbiAgICAgICAgICAgIHNldE1hcENvbnRyb2xTZXR0aW5ncz17dWlTdGF0ZUFjdGlvbnMuc2V0TWFwQ29udHJvbFNldHRpbmdzfVxuICAgICAgICAgICAgYWN0aXZlU2lkZVBhbmVsPXthY3RpdmVTaWRlUGFuZWx9XG4gICAgICAgICAgLz5cbiAgICAgICAgICB7aXNTcGxpdFNlbGVjdG9yKHRoaXMucHJvcHMpICYmIDxEcm9wcGFibGUgY29udGFpbmVySWQ9e2NvbnRhaW5lcklkfSAvPn1cblxuICAgICAgICAgIHtkZWNrfVxuICAgICAgICAgIHt0aGlzLl9yZW5kZXJNYXBib3hPdmVybGF5cygpfVxuICAgICAgICAgIDxFZGl0b3JcbiAgICAgICAgICAgIGluZGV4PXtpbmRleCB8fCAwfVxuICAgICAgICAgICAgZGF0YXNldHM9e2RhdGFzZXRzfVxuICAgICAgICAgICAgZWRpdG9yPXtlZGl0b3J9XG4gICAgICAgICAgICBmaWx0ZXJzPXt0aGlzLnBvbHlnb25GaWx0ZXJzU2VsZWN0b3IodGhpcy5wcm9wcyl9XG4gICAgICAgICAgICBsYXllcnM9e2xheWVyc31cbiAgICAgICAgICAgIG9uRGVsZXRlRmVhdHVyZT17dmlzU3RhdGVBY3Rpb25zLmRlbGV0ZUZlYXR1cmV9XG4gICAgICAgICAgICBvblNlbGVjdD17dmlzU3RhdGVBY3Rpb25zLnNldFNlbGVjdGVkRmVhdHVyZX1cbiAgICAgICAgICAgIG9uVG9nZ2xlUG9seWdvbkZpbHRlcj17dmlzU3RhdGVBY3Rpb25zLnNldFBvbHlnb25GaWx0ZXJMYXllcn1cbiAgICAgICAgICAgIG9uU2V0RWRpdG9yTW9kZT17dmlzU3RhdGVBY3Rpb25zLnNldEVkaXRvck1vZGV9XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnYWxsJyxcbiAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGVkaXRvci52aXNpYmxlID8gJ2Jsb2NrJyA6ICdub25lJ1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIHt0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgIHttYXBTdHlsZS50b3BNYXBTdHlsZSA/IChcbiAgICAgICAgICAgIDxNYXBDb21wb25lbnRcbiAgICAgICAgICAgICAga2V5PXtgdG9wLSR7YmFzZU1hcExpYnJhcnlOYW1lfWB9XG4gICAgICAgICAgICAgIHZpZXdTdGF0ZT17aW50ZXJuYWxWaWV3U3RhdGV9XG4gICAgICAgICAgICAgIG1hcFN0eWxlPXttYXBTdHlsZS50b3BNYXBTdHlsZX1cbiAgICAgICAgICAgICAgc3R5bGU9e01BUF9TVFlMRS50b3B9XG4gICAgICAgICAgICAgIG1hcGJveEFjY2Vzc1Rva2VuPXttYXBQcm9wcy5tYXBib3hBY2Nlc3NUb2tlbn1cbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdD17bWFwUHJvcHMudHJhbnNmb3JtUmVxdWVzdH1cbiAgICAgICAgICAgICAgbWFwTGliPXtiYXNlTWFwTGlicmFyeUNvbmZpZy5nZXRNYXBMaWIoKX1cbiAgICAgICAgICAgICAgey4uLnRvcE1hcENvbnRhaW5lclByb3BzfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogbnVsbH1cblxuICAgICAgICAgIHtoYXNHZW9jb2RlckxheWVyXG4gICAgICAgICAgICA/IHRoaXMuX3JlbmRlckRlY2tPdmVybGF5KFxuICAgICAgICAgICAgICAgIHtbR0VPQ09ERVJfTEFZRVJfSURdOiBoYXNHZW9jb2RlckxheWVyfSxcbiAgICAgICAgICAgICAgICB7cHJpbWFyeU1hcDogZmFsc2UsIGlzSW50ZXJhY3RpdmU6IGZhbHNlfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICA6IG51bGx9XG4gICAgICAgICAge3RoaXMuX3JlbmRlck1hcFBvcG92ZXIoKX1cbiAgICAgICAgICB7cHJpbWFyeSAhPT0gaXNTcGxpdCA/IChcbiAgICAgICAgICAgIDxMb2FkaW5nSW5kaWNhdG9yXG4gICAgICAgICAgICAgIGlzVmlzaWJsZT17Qm9vbGVhbihpc0xvYWRpbmdJbmRpY2F0b3JWaXNpYmxlIHx8IHRoaXMuYW55QWN0aXZlTGF5ZXJMb2FkaW5nKX1cbiAgICAgICAgICAgICAgYWN0aXZlU2lkZVBhbmVsPXtCb29sZWFuKGFjdGl2ZVNpZGVQYW5lbCl9XG4gICAgICAgICAgICAgIHNpZGVQYW5lbFdpZHRoPXtzaWRlUGFuZWxXaWR0aH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAge3RoaXMucHJvcHMucHJpbWFyeSA/IChcbiAgICAgICAgICAgIDxBdHRyaWJ1dGlvblxuICAgICAgICAgICAgICBzaG93QmFzZU1hcExpYkxvZ289e3RoaXMuc3RhdGUuc2hvd0Jhc2VNYXBBdHRyaWJ1dGlvbn1cbiAgICAgICAgICAgICAgc2hvd09zbUJhc2VtYXBBdHRyaWJ1dGlvbj17dHJ1ZX1cbiAgICAgICAgICAgICAgZGF0YXNldEF0dHJpYnV0aW9ucz17ZGF0YXNldEF0dHJpYnV0aW9uc31cbiAgICAgICAgICAgICAgYmFzZU1hcExpYnJhcnlDb25maWc9e2Jhc2VNYXBMaWJyYXJ5Q29uZmlnfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC8+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgIGNvbnN0IHt2aXNTdGF0ZSwgbWFwU3R5bGV9ID0gdGhpcy5wcm9wcztcbiAgICAgIGNvbnN0IG1hcENvbnRlbnQgPSB0aGlzLl9yZW5kZXJNYXAoKTtcbiAgICAgIGlmICghbWFwQ29udGVudCkge1xuICAgICAgICAvLyBtYXBDb250ZW50IGNhbiBiZSBudWxsIGlmIG9uRGVja1JlbmRlciByZXR1cm5zIG51bGxcbiAgICAgICAgLy8gaW4gdGhpcyBjYXNlIHdlIGRvbid0IHdhbnQgdG8gcmVuZGVyIHRoZSBtYXBcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1cnJlbnRTdHlsZSA9IG1hcFN0eWxlLm1hcFN0eWxlcz8uW21hcFN0eWxlLnN0eWxlVHlwZV07XG4gICAgICBjb25zdCBiYXNlTWFwTGlicmFyeU5hbWUgPSBnZXRCYXNlTWFwTGlicmFyeShjdXJyZW50U3R5bGUpO1xuICAgICAgY29uc3QgYmFzZU1hcExpYnJhcnlDb25maWcgPVxuICAgICAgICBnZXRBcHBsaWNhdGlvbkNvbmZpZygpLmJhc2VNYXBMaWJyYXJ5Q29uZmlnPy5bYmFzZU1hcExpYnJhcnlOYW1lXTtcblxuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFN0eWxlZE1hcFxuICAgICAgICAgIHJlZj17dGhpcy5fcmVmfVxuICAgICAgICAgIHN0eWxlPXt0aGlzLnN0eWxlU2VsZWN0b3IodGhpcy5wcm9wcyl9XG4gICAgICAgICAgb25Db250ZXh0TWVudT17ZXZlbnQgPT4gZXZlbnQucHJldmVudERlZmF1bHQoKX1cbiAgICAgICAgICAkbWl4QmxlbmRNb2RlPXt2aXNTdGF0ZS5vdmVybGF5QmxlbmRpbmd9XG4gICAgICAgICAgJG1hcExpYkNzc0NsYXNzPXtiYXNlTWFwTGlicmFyeUNvbmZpZy5tYXBMaWJDc3NDbGFzc31cbiAgICAgICAgPlxuICAgICAgICAgIHttYXBDb250ZW50fVxuICAgICAgICA8L1N0eWxlZE1hcD5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHdpdGhUaGVtZShNYXBDb250YWluZXIpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFJQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxpQkFBQSxHQUFBRix1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsV0FBQSxHQUFBRixPQUFBO0FBRUEsSUFBQUcsT0FBQSxHQUFBQyxzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQUssU0FBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sS0FBQSxHQUFBTixPQUFBO0FBQ0EsSUFBQU8sU0FBQSxHQUFBSCxzQkFBQSxDQUFBSixPQUFBO0FBS0EsSUFBQVEsV0FBQSxHQUFBSixzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQVMsV0FBQSxHQUFBTCxzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQVUsa0JBQUEsR0FBQVYsT0FBQTtBQU1BLElBQUFXLE9BQUEsR0FBQVAsc0JBQUEsQ0FBQUosT0FBQTtBQUdBLElBQUFZLE9BQUEsR0FBQVosT0FBQTtBQWdCQSxJQUFBYSxNQUFBLEdBQUFiLE9BQUE7QUFvQkEsSUFBQWMsT0FBQSxHQUFBZCxPQUFBO0FBR0EsSUFBQWUsVUFBQSxHQUFBZixPQUFBO0FBU0EsSUFBQWdCLGNBQUEsR0FBQWhCLE9BQUE7QUFFQSxJQUFBaUIsb0JBQUEsR0FBQWpCLE9BQUE7QUFFQSxJQUFBa0IsY0FBQSxHQUFB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