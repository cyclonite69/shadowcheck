"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getPropValueToMerger = getPropValueToMerger;
exports.hasPropsToMerge = hasPropsToMerge;
exports.isValidMerger = isValidMerger;
exports.mergeStateFromMergers = mergeStateFromMergers;
exports.resetStateToMergeProps = resetStateToMergeProps;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _tasks = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react-palm/tasks");
var _utils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/utils/src");
var _commonUtils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/common-utils/src");
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      (0, _defineProperty2["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
} // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function isValidMerger(merger) {
  return (0, _utils.isObject)(merger) && typeof merger.merge === 'function' && (typeof merger.prop === 'string' || Array.isArray(merger.prop));
}

/**
 * Call state updater, return the tasks created by the state update with withTask()
 */
function callFunctionGetTask(fn) {
  var before = (0, _tasks.getGlobalTaskQueue)();
  var ret = fn();
  var after = (0, _tasks.getGlobalTaskQueue)();
  var diff = after.filter(function (t) {
    return !before.includes(t);
  });
  return [ret, diff];
}
function mergeStateFromMergers(state, initialState, mergers, postMergerPayload) {
  // const newDataIds = Object.keys(postMergerPayload.newDataEntries);
  var mergedState = state;
  // merge state with config to be merged
  var mergerQueue = (0, _toConsumableArray2["default"])(mergers);
  var _loop = function _loop() {
      var merger = mergerQueue.shift();
      if (merger && isValidMerger(merger) && merger.toMergeProp && hasPropsToMerge(state, merger.toMergeProp)) {
        // put the rest of mergers and payload for postMergeUpdater in mergerActionPayload
        // and pass it to current merger, which (if async) knows to continue merging
        var mergerActionPayload = {
          mergers: mergerQueue,
          postMergerPayload: postMergerPayload
        };
        // reset toMerge
        var toMerge = getPropValueToMerger(mergedState, merger.toMergeProp, merger.toMergeProp);
        mergedState = resetStateToMergeProps(mergedState, initialState, merger.toMergeProp);
        // call merger
        // eslint-disable-next-line no-loop-func
        var mergeFunc = function mergeFunc() {
          return merger.merge(mergedState, toMerge, false, mergerActionPayload);
        };
        var _callFunctionGetTask = callFunctionGetTask(mergeFunc),
          _callFunctionGetTask2 = (0, _slicedToArray2["default"])(_callFunctionGetTask, 2),
          updatedState = _callFunctionGetTask2[0],
          newTasks = _callFunctionGetTask2[1];
        mergedState = updatedState;

        // check if asyncTask was created (time consuming tasks)
        if (newTasks.length && merger.waitToFinish) {
          // skip rest, the async merger will call applyMergerUpdater() to continue
          return {
            v: {
              mergedState: mergedState,
              allMerged: false
            }
          };
        }
      }
    },
    _ret;
  while (mergerQueue.length) {
    _ret = _loop();
    if (_ret) return _ret.v;
  }

  // we merged all mergers in the queue, and we can call post merger now
  return {
    mergedState: mergedState,
    allMerged: true
  };
}
function hasPropsToMerge(state, mergerProps) {
  return Array.isArray(mergerProps) ? Boolean(mergerProps.some(function (p) {
    return Object.prototype.hasOwnProperty.call(state, p);
  })) : typeof mergerProps === 'string' && Object.prototype.hasOwnProperty.call(state, mergerProps);
}
function getPropValueToMerger(state, mergerProps, toMergeProps) {
  return Array.isArray(mergerProps) && Array.isArray(toMergeProps) ? mergerProps.reduce(function (accu, p, i) {
    if (!toMergeProps) return accu;
    return _objectSpread(_objectSpread({}, accu), {}, (0, _defineProperty2["default"])({}, toMergeProps[i], state[p]));
  }, {}) : state[mergerProps];
}
function resetStateToMergeProps(state, initialState, mergerProps) {
  return (0, _commonUtils.toArray)(mergerProps).reduce(function (accu, prop) {
    return _objectSpread(_objectSpread({}, accu), {}, (0, _defineProperty2["default"])({}, prop, initialState[prop]));
  }, state);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdGFza3MiLCJyZXF1aXJlIiwiX3V0aWxzIiwiX2NvbW1vblV0aWxzIiwib3duS2V5cyIsImUiLCJyIiwidCIsIk9iamVjdCIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJpc1ZhbGlkTWVyZ2VyIiwibWVyZ2VyIiwiaXNPYmplY3QiLCJtZXJnZSIsInByb3AiLCJBcnJheSIsImlzQXJyYXkiLCJjYWxsRnVuY3Rpb25HZXRUYXNrIiwiZm4iLCJiZWZvcmUiLCJnZXRHbG9iYWxUYXNrUXVldWUiLCJyZXQiLCJhZnRlciIsImRpZmYiLCJpbmNsdWRlcyIsIm1lcmdlU3RhdGVGcm9tTWVyZ2VycyIsInN0YXRlIiwiaW5pdGlhbFN0YXRlIiwibWVyZ2VycyIsInBvc3RNZXJnZXJQYXlsb2FkIiwibWVyZ2VkU3RhdGUiLCJtZXJnZXJRdWV1ZSIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJfbG9vcCIsInNoaWZ0IiwidG9NZXJnZVByb3AiLCJoYXNQcm9wc1RvTWVyZ2UiLCJtZXJnZXJBY3Rpb25QYXlsb2FkIiwidG9NZXJnZSIsImdldFByb3BWYWx1ZVRvTWVyZ2VyIiwicmVzZXRTdGF0ZVRvTWVyZ2VQcm9wcyIsIm1lcmdlRnVuYyIsIl9jYWxsRnVuY3Rpb25HZXRUYXNrIiwiX2NhbGxGdW5jdGlvbkdldFRhc2syIiwiX3NsaWNlZFRvQXJyYXkyIiwidXBkYXRlZFN0YXRlIiwibmV3VGFza3MiLCJ3YWl0VG9GaW5pc2giLCJ2IiwiYWxsTWVyZ2VkIiwiX3JldCIsIm1lcmdlclByb3BzIiwiQm9vbGVhbiIsInNvbWUiLCJwIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidG9NZXJnZVByb3BzIiwicmVkdWNlIiwiYWNjdSIsImkiLCJ0b0FycmF5Il0sInNvdXJjZXMiOlsiLi4vc3JjL21lcmdlci1oYW5kbGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCB7Z2V0R2xvYmFsVGFza1F1ZXVlfSBmcm9tICdyZWFjdC1wYWxtL3Rhc2tzJztcbmltcG9ydCB7aXNPYmplY3R9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuaW1wb3J0IHt0b0FycmF5fSBmcm9tICdAa2VwbGVyLmdsL2NvbW1vbi11dGlscyc7XG5pbXBvcnQge1ZhbHVlT2Z9IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuaW1wb3J0IHtWaXNTdGF0ZSwgTWVyZ2VyLCBQb3N0TWVyZ2VyUGF5bG9hZH0gZnJvbSAnQGtlcGxlci5nbC9zY2hlbWFzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRNZXJnZXIobWVyZ2VyOiBNZXJnZXI8YW55Pik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgIGlzT2JqZWN0KG1lcmdlcikgJiZcbiAgICB0eXBlb2YgbWVyZ2VyLm1lcmdlID09PSAnZnVuY3Rpb24nICYmXG4gICAgKHR5cGVvZiBtZXJnZXIucHJvcCA9PT0gJ3N0cmluZycgfHwgQXJyYXkuaXNBcnJheShtZXJnZXIucHJvcCkpXG4gICk7XG59XG5cbi8qKlxuICogQ2FsbCBzdGF0ZSB1cGRhdGVyLCByZXR1cm4gdGhlIHRhc2tzIGNyZWF0ZWQgYnkgdGhlIHN0YXRlIHVwZGF0ZSB3aXRoIHdpdGhUYXNrKClcbiAqL1xuZnVuY3Rpb24gY2FsbEZ1bmN0aW9uR2V0VGFzayhmbjogKCkgPT4gYW55KTogW2FueSwgYW55XSB7XG4gIGNvbnN0IGJlZm9yZSA9IGdldEdsb2JhbFRhc2tRdWV1ZSgpO1xuICBjb25zdCByZXQgPSBmbigpO1xuICBjb25zdCBhZnRlciA9IGdldEdsb2JhbFRhc2tRdWV1ZSgpO1xuICBjb25zdCBkaWZmID0gYWZ0ZXIuZmlsdGVyKHQgPT4gIWJlZm9yZS5pbmNsdWRlcyh0KSk7XG4gIHJldHVybiBbcmV0LCBkaWZmXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlU3RhdGVGcm9tTWVyZ2VyczxTdGF0ZSBleHRlbmRzIFZpc1N0YXRlPihcbiAgc3RhdGU6IFN0YXRlLFxuICBpbml0aWFsU3RhdGU6IFN0YXRlLFxuICBtZXJnZXJzOiBNZXJnZXI8U3RhdGU+W10sXG4gIHBvc3RNZXJnZXJQYXlsb2FkOiBQb3N0TWVyZ2VyUGF5bG9hZFxuKToge1xuICBtZXJnZWRTdGF0ZTogU3RhdGU7XG4gIGFsbE1lcmdlZDogYm9vbGVhbjtcbn0ge1xuICAvLyBjb25zdCBuZXdEYXRhSWRzID0gT2JqZWN0LmtleXMocG9zdE1lcmdlclBheWxvYWQubmV3RGF0YUVudHJpZXMpO1xuICBsZXQgbWVyZ2VkU3RhdGUgPSBzdGF0ZTtcbiAgLy8gbWVyZ2Ugc3RhdGUgd2l0aCBjb25maWcgdG8gYmUgbWVyZ2VkXG4gIGNvbnN0IG1lcmdlclF1ZXVlID0gWy4uLm1lcmdlcnNdO1xuXG4gIHdoaWxlIChtZXJnZXJRdWV1ZS5sZW5ndGgpIHtcbiAgICBjb25zdCBtZXJnZXIgPSBtZXJnZXJRdWV1ZS5zaGlmdCgpO1xuXG4gICAgaWYgKFxuICAgICAgbWVyZ2VyICYmXG4gICAgICBpc1ZhbGlkTWVyZ2VyKG1lcmdlcikgJiZcbiAgICAgIG1lcmdlci50b01lcmdlUHJvcCAmJlxuICAgICAgaGFzUHJvcHNUb01lcmdlKHN0YXRlLCBtZXJnZXIudG9NZXJnZVByb3ApXG4gICAgKSB7XG4gICAgICAvLyBwdXQgdGhlIHJlc3Qgb2YgbWVyZ2VycyBhbmQgcGF5bG9hZCBmb3IgcG9zdE1lcmdlVXBkYXRlciBpbiBtZXJnZXJBY3Rpb25QYXlsb2FkXG4gICAgICAvLyBhbmQgcGFzcyBpdCB0byBjdXJyZW50IG1lcmdlciwgd2hpY2ggKGlmIGFzeW5jKSBrbm93cyB0byBjb250aW51ZSBtZXJnaW5nXG4gICAgICBjb25zdCBtZXJnZXJBY3Rpb25QYXlsb2FkID0ge1xuICAgICAgICBtZXJnZXJzOiBtZXJnZXJRdWV1ZSxcbiAgICAgICAgcG9zdE1lcmdlclBheWxvYWRcbiAgICAgIH07XG4gICAgICAvLyByZXNldCB0b01lcmdlXG4gICAgICBjb25zdCB0b01lcmdlID0gZ2V0UHJvcFZhbHVlVG9NZXJnZXIobWVyZ2VkU3RhdGUsIG1lcmdlci50b01lcmdlUHJvcCwgbWVyZ2VyLnRvTWVyZ2VQcm9wKTtcblxuICAgICAgbWVyZ2VkU3RhdGUgPSByZXNldFN0YXRlVG9NZXJnZVByb3BzKG1lcmdlZFN0YXRlLCBpbml0aWFsU3RhdGUsIG1lcmdlci50b01lcmdlUHJvcCk7XG4gICAgICAvLyBjYWxsIG1lcmdlclxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWxvb3AtZnVuY1xuICAgICAgY29uc3QgbWVyZ2VGdW5jID0gKCkgPT4gbWVyZ2VyLm1lcmdlKG1lcmdlZFN0YXRlLCB0b01lcmdlLCBmYWxzZSwgbWVyZ2VyQWN0aW9uUGF5bG9hZCk7XG4gICAgICBjb25zdCBbdXBkYXRlZFN0YXRlLCBuZXdUYXNrc10gPSBjYWxsRnVuY3Rpb25HZXRUYXNrKG1lcmdlRnVuYyk7XG5cbiAgICAgIG1lcmdlZFN0YXRlID0gdXBkYXRlZFN0YXRlO1xuXG4gICAgICAvLyBjaGVjayBpZiBhc3luY1Rhc2sgd2FzIGNyZWF0ZWQgKHRpbWUgY29uc3VtaW5nIHRhc2tzKVxuICAgICAgaWYgKG5ld1Rhc2tzLmxlbmd0aCAmJiBtZXJnZXIud2FpdFRvRmluaXNoKSB7XG4gICAgICAgIC8vIHNraXAgcmVzdCwgdGhlIGFzeW5jIG1lcmdlciB3aWxsIGNhbGwgYXBwbHlNZXJnZXJVcGRhdGVyKCkgdG8gY29udGludWVcbiAgICAgICAgcmV0dXJuIHttZXJnZWRTdGF0ZSwgYWxsTWVyZ2VkOiBmYWxzZX07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gd2UgbWVyZ2VkIGFsbCBtZXJnZXJzIGluIHRoZSBxdWV1ZSwgYW5kIHdlIGNhbiBjYWxsIHBvc3QgbWVyZ2VyIG5vd1xuICByZXR1cm4ge21lcmdlZFN0YXRlLCBhbGxNZXJnZWQ6IHRydWV9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzUHJvcHNUb01lcmdlPFN0YXRlIGV4dGVuZHMgb2JqZWN0PihcbiAgc3RhdGU6IFN0YXRlLFxuICBtZXJnZXJQcm9wcz86IHN0cmluZyB8IHN0cmluZ1tdXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIEFycmF5LmlzQXJyYXkobWVyZ2VyUHJvcHMpXG4gICAgPyBCb29sZWFuKG1lcmdlclByb3BzLnNvbWUocCA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc3RhdGUsIHApKSlcbiAgICA6IHR5cGVvZiBtZXJnZXJQcm9wcyA9PT0gJ3N0cmluZycgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHN0YXRlLCBtZXJnZXJQcm9wcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm9wVmFsdWVUb01lcmdlcjxTdGF0ZSBleHRlbmRzIG9iamVjdD4oXG4gIHN0YXRlOiBTdGF0ZSxcbiAgbWVyZ2VyUHJvcHM/OiBzdHJpbmcgfCBzdHJpbmdbXSxcbiAgdG9NZXJnZVByb3BzPzogc3RyaW5nIHwgc3RyaW5nW11cbik6IFBhcnRpYWw8U3RhdGU+IHwgVmFsdWVPZjxTdGF0ZT4ge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheShtZXJnZXJQcm9wcykgJiYgQXJyYXkuaXNBcnJheSh0b01lcmdlUHJvcHMpXG4gICAgPyBtZXJnZXJQcm9wcy5yZWR1Y2UoKGFjY3UsIHAsIGkpID0+IHtcbiAgICAgICAgaWYgKCF0b01lcmdlUHJvcHMpIHJldHVybiBhY2N1O1xuICAgICAgICByZXR1cm4gey4uLmFjY3UsIFt0b01lcmdlUHJvcHNbaV1dOiBzdGF0ZVtwXX07XG4gICAgICB9LCB7fSlcbiAgICA6IHN0YXRlW21lcmdlclByb3BzIGFzIHN0cmluZ107XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldFN0YXRlVG9NZXJnZVByb3BzPFN0YXRlIGV4dGVuZHMgVmlzU3RhdGU+KFxuICBzdGF0ZTogU3RhdGUsXG4gIGluaXRpYWxTdGF0ZTogU3RhdGUsXG4gIG1lcmdlclByb3BzOiBzdHJpbmcgfCBzdHJpbmdbXVxuKSB7XG4gIHJldHVybiB0b0FycmF5KG1lcmdlclByb3BzKS5yZWR1Y2UoXG4gICAgKGFjY3UsIHByb3ApID0+ICh7XG4gICAgICAuLi5hY2N1LFxuICAgICAgW3Byb3BdOiBpbml0aWFsU3RhdGVbcHJvcF1cbiAgICB9KSxcbiAgICBzdGF0ZVxuICApO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUdBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFlBQUEsR0FBQUYsT0FBQTtBQUFnRCxTQUFBRyxRQUFBQyxDQUFBLEVBQUFDLENBQUE7RUFBQSxJQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsSUFBQSxDQUFBSixDQUFBO0VBQUEsSUFBQUcsTUFBQSxDQUFBRSxxQkFBQTtJQUFBLElBQUFDLENBQUEsR0FBQUgsTUFBQSxDQUFBRSxxQkFBQSxDQUFBTCxDQUFBO0lBQUFDLENBQUEsS0FBQUssQ0FBQSxHQUFBQSxDQUFBLENBQUFDLE1BQUEsV0FBQU4sQ0FBQTtNQUFBLE9BQUFFLE1BQUEsQ0FBQUssd0JBQUEsQ0FBQVIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFRLFVBQUE7SUFBQSxLQUFBUCxDQUFBLENBQUFRLElBQUEsQ0FBQUMsS0FBQSxDQUFBVCxDQUFBLEVBQUFJLENBQUE7RUFBQTtFQUFBLE9BQUFKLENBQUE7QUFBQTtBQUFBLFNBQUFVLGNBQUFaLENBQUE7RUFBQSxTQUFBQyxDQUFBLE1BQUFBLENBQUEsR0FBQVksU0FBQSxDQUFBQyxNQUFBLEVBQUFiLENBQUE7SUFBQSxJQUFBQyxDQUFBLFdBQUFXLFNBQUEsQ0FBQVosQ0FBQSxJQUFBWSxTQUFBLENBQUFaLENBQUE7SUFBQUEsQ0FBQSxPQUFBRixPQUFBLENBQUFJLE1BQUEsQ0FBQUQsQ0FBQSxPQUFBYSxPQUFBLFdBQUFkLENBQUE7TUFBQSxJQUFBZSxnQkFBQSxhQUFBaEIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsQ0FBQUQsQ0FBQTtJQUFBLEtBQUFFLE1BQUEsQ0FBQWMseUJBQUEsR0FBQWQsTUFBQSxDQUFBZSxnQkFBQSxDQUFBbEIsQ0FBQSxFQUFBRyxNQUFBLENBQUFjLHlCQUFBLENBQUFmLENBQUEsS0FBQUgsT0FBQSxDQUFBSSxNQUFBLENBQUFELENBQUEsR0FBQWEsT0FBQSxXQUFBZCxDQUFBO01BQUFFLE1BQUEsQ0FBQWdCLGNBQUEsQ0FBQW5CLENBQUEsRUFBQUMsQ0FBQSxFQUFBRSxNQUFBLENBQUFLLHdCQUFBLENBQUFOLENBQUEsRUFBQUQsQ0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBRCxDQUFBO0FBQUEsRUFMaEQ7QUFDQTtBQVFPLFNBQVNvQixhQUFhQSxDQUFDQyxNQUFtQixFQUFXO0VBQzFELE9BQ0UsSUFBQXhCLE1BQUEsQ0FBQXlCLFFBQVEsRUFBQ0QsTUFBTSxDQUFDLElBQ2hCLE9BQU9BLE1BQU0sQ0FBQ0UsS0FBSyxLQUFLLFVBQVUsS0FDakMsT0FBT0YsTUFBTSxDQUFDRyxJQUFJLEtBQUssUUFBUSxJQUFJQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0wsTUFBTSxDQUFDRyxJQUFJLENBQUMsQ0FBQztBQUVuRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTRyxtQkFBbUJBLENBQUNDLEVBQWEsRUFBYztFQUN0RCxJQUFNQyxNQUFNLEdBQUcsSUFBQWxDLE1BQUEsQ0FBQW1DLGtCQUFrQixFQUFDLENBQUM7RUFDbkMsSUFBTUMsR0FBRyxHQUFHSCxFQUFFLENBQUMsQ0FBQztFQUNoQixJQUFNSSxLQUFLLEdBQUcsSUFBQXJDLE1BQUEsQ0FBQW1DLGtCQUFrQixFQUFDLENBQUM7RUFDbEMsSUFBTUcsSUFBSSxHQUFHRCxLQUFLLENBQUN6QixNQUFNLENBQUMsVUFBQUwsQ0FBQztJQUFBLE9BQUksQ0FBQzJCLE1BQU0sQ0FBQ0ssUUFBUSxDQUFDaEMsQ0FBQyxDQUFDO0VBQUEsRUFBQztFQUNuRCxPQUFPLENBQUM2QixHQUFHLEVBQUVFLElBQUksQ0FBQztBQUNwQjtBQUVPLFNBQVNFLHFCQUFxQkEsQ0FDbkNDLEtBQVksRUFDWkMsWUFBbUIsRUFDbkJDLE9BQXdCLEVBQ3hCQyxpQkFBb0MsRUFJcEM7RUFDQTtFQUNBLElBQUlDLFdBQVcsR0FBR0osS0FBSztFQUN2QjtFQUNBLElBQU1LLFdBQVcsT0FBQUMsbUJBQUEsYUFBT0osT0FBTyxDQUFDO0VBQUMsSUFBQUssS0FBQSxZQUFBQSxNQUFBLEVBRU47TUFDekIsSUFBTXRCLE1BQU0sR0FBR29CLFdBQVcsQ0FBQ0csS0FBSyxDQUFDLENBQUM7TUFFbEMsSUFDRXZCLE1BQU0sSUFDTkQsYUFBYSxDQUFDQyxNQUFNLENBQUMsSUFDckJBLE1BQU0sQ0FBQ3dCLFdBQVcsSUFDbEJDLGVBQWUsQ0FBQ1YsS0FBSyxFQUFFZixNQUFNLENBQUN3QixXQUFXLENBQUMsRUFDMUM7UUFDQTtRQUNBO1FBQ0EsSUFBTUUsbUJBQW1CLEdBQUc7VUFDMUJULE9BQU8sRUFBRUcsV0FBVztVQUNwQkYsaUJBQWlCLEVBQWpCQTtRQUNGLENBQUM7UUFDRDtRQUNBLElBQU1TLE9BQU8sR0FBR0Msb0JBQW9CLENBQUNULFdBQVcsRUFBRW5CLE1BQU0sQ0FBQ3dCLFdBQVcsRUFBRXhCLE1BQU0sQ0FBQ3dCLFdBQVcsQ0FBQztRQUV6RkwsV0FBVyxHQUFHVSxzQkFBc0IsQ0FBQ1YsV0FBVyxFQUFFSCxZQUFZLEVBQUVoQixNQUFNLENBQUN3QixXQUFXLENBQUM7UUFDbkY7UUFDQTtRQUNBLElBQU1NLFNBQVMsR0FBRyxTQUFaQSxTQUFTQSxDQUFBO1VBQUEsT0FBUzlCLE1BQU0sQ0FBQ0UsS0FBSyxDQUFDaUIsV0FBVyxFQUFFUSxPQUFPLEVBQUUsS0FBSyxFQUFFRCxtQkFBbUIsQ0FBQztRQUFBO1FBQ3RGLElBQUFLLG9CQUFBLEdBQWlDekIsbUJBQW1CLENBQUN3QixTQUFTLENBQUM7VUFBQUUscUJBQUEsT0FBQUMsZUFBQSxhQUFBRixvQkFBQTtVQUF4REcsWUFBWSxHQUFBRixxQkFBQTtVQUFFRyxRQUFRLEdBQUFILHFCQUFBO1FBRTdCYixXQUFXLEdBQUdlLFlBQVk7O1FBRTFCO1FBQ0EsSUFBSUMsUUFBUSxDQUFDMUMsTUFBTSxJQUFJTyxNQUFNLENBQUNvQyxZQUFZLEVBQUU7VUFDMUM7VUFBQTtZQUFBQyxDQUFBLEVBQ087Y0FBQ2xCLFdBQVcsRUFBWEEsV0FBVztjQUFFbUIsU0FBUyxFQUFFO1lBQUs7VUFBQztRQUN4QztNQUNGO0lBQ0YsQ0FBQztJQUFBQyxJQUFBO0VBaENELE9BQU9uQixXQUFXLENBQUMzQixNQUFNO0lBQUE4QyxJQUFBLEdBQUFqQixLQUFBO0lBQUEsSUFBQWlCLElBQUEsU0FBQUEsSUFBQSxDQUFBRixDQUFBO0VBQUE7O0VBa0N6QjtFQUNBLE9BQU87SUFBQ2xCLFdBQVcsRUFBWEEsV0FBVztJQUFFbUIsU0FBUyxFQUFFO0VBQUksQ0FBQztBQUN2QztBQUVPLFNBQVNiLGVBQWVBLENBQzdCVixLQUFZLEVBQ1p5QixXQUErQixFQUN0QjtFQUNULE9BQU9wQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ21DLFdBQVcsQ0FBQyxHQUM3QkMsT0FBTyxDQUFDRCxXQUFXLENBQUNFLElBQUksQ0FBQyxVQUFBQyxDQUFDO0lBQUEsT0FBSTdELE1BQU0sQ0FBQzhELFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUMvQixLQUFLLEVBQUU0QixDQUFDLENBQUM7RUFBQSxFQUFDLENBQUMsR0FDOUUsT0FBT0gsV0FBVyxLQUFLLFFBQVEsSUFBSTFELE1BQU0sQ0FBQzhELFNBQVMsQ0FBQ0MsY0FBYyxDQUFDQyxJQUFJLENBQUMvQixLQUFLLEVBQUV5QixXQUFXLENBQUM7QUFDakc7QUFFTyxTQUFTWixvQkFBb0JBLENBQ2xDYixLQUFZLEVBQ1p5QixXQUErQixFQUMvQk8sWUFBZ0MsRUFDQztFQUNqQyxPQUFPM0MsS0FBSyxDQUFDQyxPQUFPLENBQUNtQyxXQUFXLENBQUMsSUFBSXBDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDMEMsWUFBWSxDQUFDLEdBQzVEUCxXQUFXLENBQUNRLE1BQU0sQ0FBQyxVQUFDQyxJQUFJLEVBQUVOLENBQUMsRUFBRU8sQ0FBQyxFQUFLO0lBQ2pDLElBQUksQ0FBQ0gsWUFBWSxFQUFFLE9BQU9FLElBQUk7SUFDOUIsT0FBQTFELGFBQUEsQ0FBQUEsYUFBQSxLQUFXMEQsSUFBSSxXQUFBdEQsZ0JBQUEsaUJBQUdvRCxZQUFZLENBQUNHLENBQUMsQ0FBQyxFQUFHbkMsS0FBSyxDQUFDNEIsQ0FBQyxDQUFDO0VBQzlDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUNONUIsS0FBSyxDQUFDeUIsV0FBVyxDQUFXO0FBQ2xDO0FBRU8sU0FBU1gsc0JBQXNCQSxDQUNwQ2QsS0FBWSxFQUNaQyxZQUFtQixFQUNuQndCLFdBQThCLEVBQzlCO0VBQ0EsT0FBTyxJQUFBL0QsWUFBQSxDQUFBMEUsT0FBTyxFQUFDWCxXQUFXLENBQUMsQ0FBQ1EsTUFBTSxDQUNoQyxVQUFDQyxJQUFJLEVBQUU5QyxJQUFJO0lBQUEsT0FBQVosYUFBQSxDQUFBQSxhQUFBLEtBQ04wRCxJQUFJLFdBQUF0RCxnQkFBQSxpQkFDTlEsSUFBSSxFQUFHYSxZQUFZLENBQUNiLElBQUksQ0FBQztFQUFBLENBQzFCLEVBQ0ZZLEtBQ0YsQ0FBQztBQUNIIiwiaWdub3JlTGlzdCI6W119