"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resetProviderStatusUpdater = exports.postSaveLoadSuccessUpdater = exports.loadCloudMapUpdater = exports.loadCloudMapSuccessUpdater = exports.loadCloudMapSuccess2Updater = exports.loadCloudMapErrorUpdater = exports.exportFileToCloudUpdater = exports.exportFileSuccessUpdater = exports.exportFileErrorUpdater = exports.INITIAL_PROVIDER_STATE = void 0;
var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _tasks = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react-palm/tasks"));
var _console = _interopRequireDefault(require("global/console"));
var _utils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/utils/src");
var _commonUtils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/common-utils/src");
var _tasks2 = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/tasks/src");
var _actions = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/actions/src");
var _constants = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/constants/src");
var _cloudProviders = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/cloud-providers/src");
var _processors = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/processors/src");
var _table = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/table/src");
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      (0, _defineProperty2["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
} // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
var INITIAL_PROVIDER_STATE = exports.INITIAL_PROVIDER_STATE = {
  isProviderLoading: false,
  isCloudMapLoading: false,
  providerError: null,
  currentProvider: null,
  successInfo: {},
  mapSaved: null,
  savedMapId: null,
  visualizations: []
};
function createActionTask(action, payload) {
  if (typeof action === 'function') {
    return (0, _tasks2.ACTION_TASK)().map(function () {
      return action(payload);
    });
  }
  return null;
}
function _validateProvider(provider, method) {
  if (!provider) {
    _console["default"].error("provider is not defined");
    return false;
  }
  if (typeof provider[method] !== 'function') {
    _console["default"].error("".concat(method, " is not a function of Cloud provider: ").concat(provider.name));
    return false;
  }
  return true;
}
function createGlobalNotificationTasks(_ref) {
  var type = _ref.type,
    message = _ref.message,
    _ref$delayClose = _ref.delayClose,
    delayClose = _ref$delayClose === void 0 ? true : _ref$delayClose;
  var id = (0, _commonUtils.generateHashId)();
  var successNote = {
    id: id,
    type: _constants.DEFAULT_NOTIFICATION_TYPES[type || ''] || _constants.DEFAULT_NOTIFICATION_TYPES.success,
    topic: _constants.DEFAULT_NOTIFICATION_TOPICS.global,
    message: message
  };
  var task = (0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.addNotification)(successNote);
  });
  return delayClose ? [task, (0, _tasks2.DELAY_TASK)(3000).map(function () {
    return (0, _actions.removeNotification)(id);
  })] : [task];
}

/**
 * This method will export the current kepler config file to the chosen cloud proder
 * add returns a share URL
 *
 */
var exportFileToCloudUpdater = exports.exportFileToCloudUpdater = function exportFileToCloudUpdater(state, action) {
  var _action$payload = action.payload,
    mapData = _action$payload.mapData,
    provider = _action$payload.provider,
    _action$payload$optio = _action$payload.options,
    options = _action$payload$optio === void 0 ? {} : _action$payload$optio,
    onSuccess = _action$payload.onSuccess,
    onError = _action$payload.onError,
    closeModal = _action$payload.closeModal;
  if (!_validateProvider(provider, 'uploadMap')) {
    return state;
  }
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: true,
    currentProvider: provider.name
  });

  // payload called by provider.uploadMap
  var payload = {
    mapData: mapData,
    options: options
  };
  var uploadFileTask = (0, _tasks2.EXPORT_FILE_TO_CLOUD_TASK)({
    provider: provider,
    payload: payload
  }).bimap(
  // success
  function (response) {
    return (0, _actions.exportFileSuccess)({
      response: response,
      provider: provider,
      options: options,
      onSuccess: onSuccess,
      closeModal: closeModal
    });
  },
  // error
  function (error) {
    return (0, _actions.exportFileError)({
      error: error,
      provider: provider,
      options: options,
      onError: onError
    });
  });
  return (0, _tasks.withTask)(newState, uploadFileTask);
};
var exportFileSuccessUpdater = exports.exportFileSuccessUpdater = function exportFileSuccessUpdater(state, action) {
  var _response$info$id, _response$info;
  var _action$payload2 = action.payload,
    response = _action$payload2.response,
    provider = _action$payload2.provider,
    _action$payload2$opti = _action$payload2.options,
    options = _action$payload2$opti === void 0 ? {} : _action$payload2$opti,
    onSuccess = _action$payload2.onSuccess,
    closeModal = _action$payload2.closeModal;
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: false,
    // TODO: do we always have to store this?
    successInfo: response
  }, !options.isPublic ? {
    mapSaved: provider.name,
    savedMapId: (_response$info$id = response === null || response === void 0 || (_response$info = response.info) === null || _response$info === void 0 ? void 0 : _response$info.id) !== null && _response$info$id !== void 0 ? _response$info$id : null
  } : {});
  var tasks = [createActionTask(onSuccess, {
    response: response,
    provider: provider,
    options: options
  }), closeModal && (0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.postSaveLoadSuccess)("Map saved to ".concat(state.currentProvider, "!"));
  })].filter(function (d) {
    return d;
  });
  return tasks.length ? (0, _tasks.withTask)(newState, tasks) : newState;
};

/**
 * Close modal on success and display notification
 */
var postSaveLoadSuccessUpdater = exports.postSaveLoadSuccessUpdater = function postSaveLoadSuccessUpdater(state, action) {
  var message = action.payload || "Saved / Load to ".concat(state.currentProvider, " Success");
  var tasks = [(0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.toggleModal)(null);
  }), (0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.resetProviderStatus)();
  })].concat((0, _toConsumableArray2["default"])(createGlobalNotificationTasks({
    message: message
  })));
  return (0, _tasks.withTask)(state, tasks);
};
var exportFileErrorUpdater = exports.exportFileErrorUpdater = function exportFileErrorUpdater(state, action) {
  var _action$payload3 = action.payload,
    error = _action$payload3.error,
    provider = _action$payload3.provider,
    onError = _action$payload3.onError;
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: false
  });
  if (isFileConflict(error)) {
    newState.mapSaved = provider.name;
    return (0, _tasks.withTask)(newState, [(0, _tasks2.ACTION_TASK)().map(function () {
      return (0, _actions.toggleModal)(_constants.OVERWRITE_MAP_ID);
    })]);
  }
  newState.providerError = (0, _utils.getError)(error);
  var task = createActionTask(onError, {
    error: error,
    provider: provider
  });
  return task ? (0, _tasks.withTask)(newState, task) : newState;
};
var loadCloudMapUpdater = exports.loadCloudMapUpdater = function loadCloudMapUpdater(state, action) {
  var _action$payload4 = action.payload,
    loadParams = _action$payload4.loadParams,
    provider = _action$payload4.provider,
    onSuccess = _action$payload4.onSuccess,
    onError = _action$payload4.onError;
  if (!loadParams) {
    _console["default"].warn('load map error: loadParams is undefined');
    return state;
  }
  if (!_validateProvider(provider, 'downloadMap')) {
    return state;
  }
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: true,
    isCloudMapLoading: true
  });

  // payload called by provider.downloadMap
  var uploadFileTask = (0, _tasks2.LOAD_CLOUD_MAP_TASK)({
    provider: provider,
    payload: loadParams
  }).bimap(
  // success
  // @ts-expect-error
  function (response) {
    return (0, _actions.loadCloudMapSuccess)({
      response: response,
      loadParams: loadParams,
      provider: provider,
      onSuccess: onSuccess,
      onError: onError
    });
  },
  // error
  // @ts-expect-error
  function (error) {
    return (0, _actions.loadCloudMapError)({
      error: error,
      provider: provider,
      onError: onError
    });
  });
  return (0, _tasks.withTask)(newState, uploadFileTask);
};
function isFileConflict(error) {
  return error && error.message === _cloudProviders.FILE_CONFLICT_MSG;
}
function checkLoadMapResponseError(response) {
  if (!response || !(0, _utils.isPlainObject)(response)) {
    return new Error('Load map response is empty');
  }
  if (!(0, _utils.isPlainObject)(response.map)) {
    return new Error("Load map response should be an object property \"map\"");
  }
  if (!response.map.datasets || !response.map.config) {
    return new Error("Load map response.map should be an object with property datasets or config");
  }
  return null;
}
function getDatasetHandler(format) {
  var _getApplicationConfig;
  var defaultHandler = _processors.DATASET_HANDLERS[_constants.DATASET_FORMATS.csv];
  if (!format) {
    _console["default"].warn('format is not provided in load map response, will use csv by default');
    return defaultHandler;
  }

  // use custom processors from table class
  var TableClass = (_getApplicationConfig = (0, _utils.getApplicationConfig)().table) !== null && _getApplicationConfig !== void 0 ? _getApplicationConfig : _table.KeplerTable;
  if (typeof TableClass.getFileProcessor === 'function') {
    var processorResult = TableClass.getFileProcessor(null, format);
    if (!processorResult.processor) {
      _console["default"].warn("No processor found for format ".concat(format, ", will use csv by default"));
      return defaultHandler;
    }
    return processorResult.processor;
  }
  if (!_processors.DATASET_HANDLERS[format]) {
    var supportedFormat = Object.keys(_constants.DATASET_FORMATS).map(function (k) {
      return "'".concat(k, "'");
    }).join(', ');
    _console["default"].warn("unknown format ".concat(format, ". Please use one of ").concat(supportedFormat, ", will use csv by default"));
    return defaultHandler;
  }
  return _processors.DATASET_HANDLERS[format];
}

/**
 * A task to handle async processorMethod
 * @param param0
 * @returns
 */
function parseLoadMapResponseTask(_x) {
  return _parseLoadMapResponseTask.apply(this, arguments);
}
function _parseLoadMapResponseTask() {
  _parseLoadMapResponseTask = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee2(_ref2) {
    var response, loadParams, provider, map, format, processorMethod, parsedDatasets, parsedMap, datasets, info;
    return _regenerator["default"].wrap(function _callee2$(_context2) {
      while (1) switch (_context2.prev = _context2.next) {
        case 0:
          response = _ref2.response, loadParams = _ref2.loadParams, provider = _ref2.provider;
          map = response.map, format = response.format;
          processorMethod = getDatasetHandler(format);
          parsedDatasets = [];
          if (!(format === _constants.DATASET_FORMATS.keplergl && processorMethod !== _processors.DATASET_HANDLERS[_constants.DATASET_FORMATS.keplergl])) {
            _context2.next = 11;
            break;
          }
          _context2.next = 7;
          return processorMethod(map);
        case 7:
          parsedMap = _context2.sent;
          parsedDatasets = parsedMap.datasets;
          _context2.next = 15;
          break;
        case 11:
          datasets = (0, _commonUtils.toArray)(map.datasets);
          _context2.next = 14;
          return Promise.all(datasets.map( /*#__PURE__*/function () {
            var _ref3 = (0, _asyncToGenerator2["default"])( /*#__PURE__*/_regenerator["default"].mark(function _callee(ds) {
              var info, data;
              return _regenerator["default"].wrap(function _callee$(_context) {
                while (1) switch (_context.prev = _context.next) {
                  case 0:
                    if (!(format === _constants.DATASET_FORMATS.keplergl)) {
                      _context.next = 4;
                      break;
                    }
                    _context.next = 3;
                    return processorMethod(ds);
                  case 3:
                    return _context.abrupt("return", _context.sent);
                  case 4:
                    info = ds && ds.info || {
                      id: (0, _commonUtils.generateHashId)(6)
                    };
                    _context.next = 7;
                    return processorMethod(ds.data || ds);
                  case 7:
                    data = _context.sent;
                    return _context.abrupt("return", {
                      info: info,
                      data: data
                    });
                  case 9:
                  case "end":
                    return _context.stop();
                }
              }, _callee);
            }));
            return function (_x2) {
              return _ref3.apply(this, arguments);
            };
          }()));
        case 14:
          parsedDatasets = _context2.sent;
        case 15:
          info = _objectSpread(_objectSpread({}, map.info), {}, {
            provider: provider.name,
            loadParams: loadParams
          });
          return _context2.abrupt("return", _objectSpread(_objectSpread({
            datasets: parsedDatasets,
            info: info
          }, map.config ? {
            config: map.config
          } : {}), {}, {
            options: {
              // do not center map when loading cloud map
              centerMap: false
            }
          }));
        case 17:
        case "end":
          return _context2.stop();
      }
    }, _callee2);
  }));
  return _parseLoadMapResponseTask.apply(this, arguments);
}
var PARSE_LOAD_MAP_RESPONSE_TASK = _tasks["default"].fromPromise(parseLoadMapResponseTask, 'PARSE_LOAD_MAP_RESPONSE_TASK');

/**
 * Used to load resources stored in a private storage.
 */
var loadCloudMapSuccessUpdater = exports.loadCloudMapSuccessUpdater = function loadCloudMapSuccessUpdater(state, action) {
  var _action$payload5 = action.payload,
    response = _action$payload5.response,
    loadParams = _action$payload5.loadParams,
    provider = _action$payload5.provider,
    onError = _action$payload5.onError;
  var formatError = checkLoadMapResponseError(response);
  if (formatError) {
    // if response format is not correct
    return exportFileErrorUpdater(state, {
      payload: {
        error: formatError,
        provider: provider,
        onError: onError
      }
    });
  }

  // processorMethod can be async so create a task
  var parseLoadMapResponseTask = PARSE_LOAD_MAP_RESPONSE_TASK({
    response: response,
    loadParams: loadParams,
    provider: provider
  }).bimap(function (datasetsPayload) {
    return (0, _actions.loadCloudMapSuccess2)(_objectSpread(_objectSpread({}, action.payload), {}, {
      datasetsPayload: datasetsPayload
    }));
  }, function (error) {
    return exportFileErrorUpdater(state, {
      payload: {
        error: error,
        provider: provider,
        onError: onError
      }
    });
  });
  return (0, _tasks.withTask)(state, parseLoadMapResponseTask);
};
var loadCloudMapSuccess2Updater = exports.loadCloudMapSuccess2Updater = function loadCloudMapSuccess2Updater(state, action) {
  var _action$payload6 = action.payload,
    datasetsPayload = _action$payload6.datasetsPayload,
    response = _action$payload6.response,
    loadParams = _action$payload6.loadParams,
    provider = _action$payload6.provider,
    onSuccess = _action$payload6.onSuccess;
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    mapSaved: provider.name,
    currentProvider: provider.name,
    isCloudMapLoading: false,
    isProviderLoading: false
  });
  var tasks = [(0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.addDataToMap)(datasetsPayload);
  }), createActionTask(onSuccess, {
    response: response,
    loadParams: loadParams,
    provider: provider
  }), (0, _tasks2.ACTION_TASK)().map(function () {
    return (0, _actions.postSaveLoadSuccess)("Map from ".concat(provider.name, " loaded"));
  })].filter(function (d) {
    return d;
  });
  return tasks.length ? (0, _tasks.withTask)(newState, tasks) : newState;
};
var loadCloudMapErrorUpdater = exports.loadCloudMapErrorUpdater = function loadCloudMapErrorUpdater(state, action) {
  var message = (0, _utils.getError)(action.payload.error) || "Error loading saved map";
  _console["default"].warn(message);
  var newState = _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: false,
    isCloudMapLoading: false,
    providerError: null
  });
  return (0, _tasks.withTask)(newState, createGlobalNotificationTasks({
    type: 'error',
    message: message,
    delayClose: false
  }));
};
var resetProviderStatusUpdater = exports.resetProviderStatusUpdater = function resetProviderStatusUpdater(state) {
  return _objectSpread(_objectSpread({}, state), {}, {
    isProviderLoading: false,
    providerError: null,
    isCloudMapLoading: false,
    successInfo: {}
  });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdGFza3MiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfY29uc29sZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdXRpbHMiLCJfY29tbW9uVXRpbHMiLCJfdGFza3MyIiwiX2FjdGlvbnMiLCJfY29uc3RhbnRzIiwiX2Nsb3VkUHJvdmlkZXJzIiwiX3Byb2Nlc3NvcnMiLCJfdGFibGUiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJlIiwiV2Vha01hcCIsInIiLCJ0IiwiX19lc01vZHVsZSIsIl90eXBlb2YiLCJoYXMiLCJnZXQiLCJuIiwiX19wcm90b19fIiwiYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwidSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImkiLCJzZXQiLCJvd25LZXlzIiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsIm8iLCJmaWx0ZXIiLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsImZvckVhY2giLCJfZGVmaW5lUHJvcGVydHkyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJJTklUSUFMX1BST1ZJREVSX1NUQVRFIiwiZXhwb3J0cyIsImlzUHJvdmlkZXJMb2FkaW5nIiwiaXNDbG91ZE1hcExvYWRpbmciLCJwcm92aWRlckVycm9yIiwiY3VycmVudFByb3ZpZGVyIiwic3VjY2Vzc0luZm8iLCJtYXBTYXZlZCIsInNhdmVkTWFwSWQiLCJ2aXN1YWxpemF0aW9ucyIsImNyZWF0ZUFjdGlvblRhc2siLCJhY3Rpb24iLCJwYXlsb2FkIiwiQUNUSU9OX1RBU0siLCJtYXAiLCJfdmFsaWRhdGVQcm92aWRlciIsInByb3ZpZGVyIiwibWV0aG9kIiwiZXJyb3IiLCJjb25jYXQiLCJuYW1lIiwiY3JlYXRlR2xvYmFsTm90aWZpY2F0aW9uVGFza3MiLCJfcmVmIiwidHlwZSIsIm1lc3NhZ2UiLCJfcmVmJGRlbGF5Q2xvc2UiLCJkZWxheUNsb3NlIiwiaWQiLCJnZW5lcmF0ZUhhc2hJZCIsInN1Y2Nlc3NOb3RlIiwiREVGQVVMVF9OT1RJRklDQVRJT05fVFlQRVMiLCJzdWNjZXNzIiwidG9waWMiLCJERUZBVUxUX05PVElGSUNBVElPTl9UT1BJQ1MiLCJnbG9iYWwiLCJ0YXNrIiwiYWRkTm90aWZpY2F0aW9uIiwiREVMQVlfVEFTSyIsInJlbW92ZU5vdGlmaWNhdGlvbiIsImV4cG9ydEZpbGVUb0Nsb3VkVXBkYXRlciIsInN0YXRlIiwiX2FjdGlvbiRwYXlsb2FkIiwibWFwRGF0YSIsIl9hY3Rpb24kcGF5bG9hZCRvcHRpbyIsIm9wdGlvbnMiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwiY2xvc2VNb2RhbCIsIm5ld1N0YXRlIiwidXBsb2FkRmlsZVRhc2siLCJFWFBPUlRfRklMRV9UT19DTE9VRF9UQVNLIiwiYmltYXAiLCJyZXNwb25zZSIsImV4cG9ydEZpbGVTdWNjZXNzIiwiZXhwb3J0RmlsZUVycm9yIiwid2l0aFRhc2siLCJleHBvcnRGaWxlU3VjY2Vzc1VwZGF0ZXIiLCJfcmVzcG9uc2UkaW5mbyRpZCIsIl9yZXNwb25zZSRpbmZvIiwiX2FjdGlvbiRwYXlsb2FkMiIsIl9hY3Rpb24kcGF5bG9hZDIkb3B0aSIsImlzUHVibGljIiwiaW5mbyIsInRhc2tzIiwicG9zdFNhdmVMb2FkU3VjY2VzcyIsImQiLCJwb3N0U2F2ZUxvYWRTdWNjZXNzVXBkYXRlciIsInRvZ2dsZU1vZGFsIiwicmVzZXRQcm92aWRlclN0YXR1cyIsIl90b0NvbnN1bWFibGVBcnJheTIiLCJleHBvcnRGaWxlRXJyb3JVcGRhdGVyIiwiX2FjdGlvbiRwYXlsb2FkMyIsImlzRmlsZUNvbmZsaWN0IiwiT1ZFUldSSVRFX01BUF9JRCIsImdldEVycm9yIiwibG9hZENsb3VkTWFwVXBkYXRlciIsIl9hY3Rpb24kcGF5bG9hZDQiLCJsb2FkUGFyYW1zIiwid2FybiIsIkxPQURfQ0xPVURfTUFQX1RBU0siLCJsb2FkQ2xvdWRNYXBTdWNjZXNzIiwibG9hZENsb3VkTWFwRXJyb3IiLCJGSUxFX0NPTkZMSUNUX01TRyIsImNoZWNrTG9hZE1hcFJlc3BvbnNlRXJyb3IiLCJpc1BsYWluT2JqZWN0IiwiRXJyb3IiLCJkYXRhc2V0cyIsImNvbmZpZyIsImdldERhdGFzZXRIYW5kbGVyIiwiZm9ybWF0IiwiX2dldEFwcGxpY2F0aW9uQ29uZmlnIiwiZGVmYXVsdEhhbmRsZXIiLCJEQVRBU0VUX0hBTkRMRVJTIiwiREFUQVNFVF9GT1JNQVRTIiwiY3N2IiwiVGFibGVDbGFzcyIsImdldEFwcGxpY2F0aW9uQ29uZmlnIiwidGFibGUiLCJLZXBsZXJUYWJsZSIsImdldEZpbGVQcm9jZXNzb3IiLCJwcm9jZXNzb3JSZXN1bHQiLCJwcm9jZXNzb3IiLCJzdXBwb3J0ZWRGb3JtYXQiLCJrIiwiam9pbiIsInBhcnNlTG9hZE1hcFJlc3BvbnNlVGFzayIsIl94IiwiX3BhcnNlTG9hZE1hcFJlc3BvbnNlVGFzayIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl9yZWdlbmVyYXRvciIsIm1hcmsiLCJfY2FsbGVlMiIsIl9yZWYyIiwicHJvY2Vzc29yTWV0aG9kIiwicGFyc2VkRGF0YXNldHMiLCJwYXJzZWRNYXAiLCJ3cmFwIiwiX2NhbGxlZTIkIiwiX2NvbnRleHQyIiwicHJldiIsIm5leHQiLCJrZXBsZXJnbCIsInNlbnQiLCJ0b0FycmF5IiwiUHJvbWlzZSIsImFsbCIsIl9yZWYzIiwiX2NhbGxlZSIsImRzIiwiZGF0YSIsIl9jYWxsZWUkIiwiX2NvbnRleHQiLCJhYnJ1cHQiLCJzdG9wIiwiX3gyIiwiY2VudGVyTWFwIiwiUEFSU0VfTE9BRF9NQVBfUkVTUE9OU0VfVEFTSyIsImZyb21Qcm9taXNlIiwibG9hZENsb3VkTWFwU3VjY2Vzc1VwZGF0ZXIiLCJfYWN0aW9uJHBheWxvYWQ1IiwiZm9ybWF0RXJyb3IiLCJkYXRhc2V0c1BheWxvYWQiLCJsb2FkQ2xvdWRNYXBTdWNjZXNzMiIsImxvYWRDbG91ZE1hcFN1Y2Nlc3MyVXBkYXRlciIsIl9hY3Rpb24kcGF5bG9hZDYiLCJhZGREYXRhVG9NYXAiLCJsb2FkQ2xvdWRNYXBFcnJvclVwZGF0ZXIiLCJyZXNldFByb3ZpZGVyU3RhdHVzVXBkYXRlciJdLCJzb3VyY2VzIjpbIi4uL3NyYy9wcm92aWRlci1zdGF0ZS11cGRhdGVycy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogTUlUXG4vLyBDb3B5cmlnaHQgY29udHJpYnV0b3JzIHRvIHRoZSBrZXBsZXIuZ2wgcHJvamVjdFxuXG5pbXBvcnQgVGFzaywge3dpdGhUYXNrfSBmcm9tICdyZWFjdC1wYWxtL3Rhc2tzJztcbmltcG9ydCBDb25zb2xlIGZyb20gJ2dsb2JhbC9jb25zb2xlJztcbmltcG9ydCB7Z2V0QXBwbGljYXRpb25Db25maWcsIGdldEVycm9yLCBpc1BsYWluT2JqZWN0fSBmcm9tICdAa2VwbGVyLmdsL3V0aWxzJztcbmltcG9ydCB7Z2VuZXJhdGVIYXNoSWQsIHRvQXJyYXl9IGZyb20gJ0BrZXBsZXIuZ2wvY29tbW9uLXV0aWxzJztcbmltcG9ydCB7XG4gIEVYUE9SVF9GSUxFX1RPX0NMT1VEX1RBU0ssXG4gIEFDVElPTl9UQVNLLFxuICBERUxBWV9UQVNLLFxuICBMT0FEX0NMT1VEX01BUF9UQVNLXG59IGZyb20gJ0BrZXBsZXIuZ2wvdGFza3MnO1xuaW1wb3J0IHtcbiAgZXhwb3J0RmlsZVN1Y2Nlc3MsXG4gIGV4cG9ydEZpbGVFcnJvcixcbiAgcG9zdFNhdmVMb2FkU3VjY2VzcyxcbiAgbG9hZENsb3VkTWFwU3VjY2VzcyxcbiAgbG9hZENsb3VkTWFwU3VjY2VzczIsXG4gIGxvYWRDbG91ZE1hcEVycm9yLFxuICByZXNldFByb3ZpZGVyU3RhdHVzLFxuICByZW1vdmVOb3RpZmljYXRpb24sXG4gIHRvZ2dsZU1vZGFsLFxuICBhZGROb3RpZmljYXRpb24sXG4gIGFkZERhdGFUb01hcCxcbiAgUHJvdmlkZXJBY3Rpb25zXG59IGZyb20gJ0BrZXBsZXIuZ2wvYWN0aW9ucyc7XG5pbXBvcnQge1xuICBERUZBVUxUX05PVElGSUNBVElPTl9UWVBFUyxcbiAgREVGQVVMVF9OT1RJRklDQVRJT05fVE9QSUNTLFxuICBEQVRBU0VUX0ZPUk1BVFMsXG4gIE9WRVJXUklURV9NQVBfSURcbn0gZnJvbSAnQGtlcGxlci5nbC9jb25zdGFudHMnO1xuaW1wb3J0IHtBZGREYXRhVG9NYXBQYXlsb2FkLCBFeHBvcnRGaWxlVG9DbG91ZFBheWxvYWR9IGZyb20gJ0BrZXBsZXIuZ2wvdHlwZXMnO1xuXG5pbXBvcnQge0ZJTEVfQ09ORkxJQ1RfTVNHLCBNYXBMaXN0SXRlbX0gZnJvbSAnQGtlcGxlci5nbC9jbG91ZC1wcm92aWRlcnMnO1xuaW1wb3J0IHtEQVRBU0VUX0hBTkRMRVJTfSBmcm9tICdAa2VwbGVyLmdsL3Byb2Nlc3NvcnMnO1xuaW1wb3J0IHtLZXBsZXJUYWJsZX0gZnJvbSAnQGtlcGxlci5nbC90YWJsZSc7XG5cbnR5cGUgQWN0aW9uUGF5bG9hZDxQPiA9IHtcbiAgdHlwZT86IHN0cmluZztcbiAgcGF5bG9hZDogUDtcbn07XG5cbmV4cG9ydCB0eXBlIFByb3ZpZGVyU3RhdGUgPSB7XG4gIGlzUHJvdmlkZXJMb2FkaW5nOiBib29sZWFuO1xuICBpc0Nsb3VkTWFwTG9hZGluZzogYm9vbGVhbjtcbiAgcHJvdmlkZXJFcnJvcjogYW55O1xuICBjdXJyZW50UHJvdmlkZXI6IHN0cmluZyB8IG51bGw7XG4gIHN1Y2Nlc3NJbmZvOiBhbnk7XG4gIG1hcFNhdmVkOiBudWxsIHwgc3RyaW5nO1xuICBzYXZlZE1hcElkOiBudWxsIHwgc3RyaW5nO1xuICBpbml0aWFsU3RhdGU/OiBhbnk7XG4gIHZpc3VhbGl6YXRpb25zOiBNYXBMaXN0SXRlbVtdO1xufTtcblxuZXhwb3J0IGNvbnN0IElOSVRJQUxfUFJPVklERVJfU1RBVEU6IFByb3ZpZGVyU3RhdGUgPSB7XG4gIGlzUHJvdmlkZXJMb2FkaW5nOiBmYWxzZSxcbiAgaXNDbG91ZE1hcExvYWRpbmc6IGZhbHNlLFxuICBwcm92aWRlckVycm9yOiBudWxsLFxuICBjdXJyZW50UHJvdmlkZXI6IG51bGwsXG4gIHN1Y2Nlc3NJbmZvOiB7fSxcbiAgbWFwU2F2ZWQ6IG51bGwsXG4gIHNhdmVkTWFwSWQ6IG51bGwsXG4gIHZpc3VhbGl6YXRpb25zOiBbXVxufTtcblxuZnVuY3Rpb24gY3JlYXRlQWN0aW9uVGFzayhhY3Rpb24sIHBheWxvYWQpIHtcbiAgaWYgKHR5cGVvZiBhY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gQUNUSU9OX1RBU0soKS5tYXAoKCkgPT4gYWN0aW9uKHBheWxvYWQpKTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBfdmFsaWRhdGVQcm92aWRlcihwcm92aWRlciwgbWV0aG9kKSB7XG4gIGlmICghcHJvdmlkZXIpIHtcbiAgICBDb25zb2xlLmVycm9yKGBwcm92aWRlciBpcyBub3QgZGVmaW5lZGApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcHJvdmlkZXJbbWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIENvbnNvbGUuZXJyb3IoYCR7bWV0aG9kfSBpcyBub3QgYSBmdW5jdGlvbiBvZiBDbG91ZCBwcm92aWRlcjogJHtwcm92aWRlci5uYW1lfWApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVHbG9iYWxOb3RpZmljYXRpb25UYXNrcyh7XG4gIHR5cGUsXG4gIG1lc3NhZ2UsXG4gIGRlbGF5Q2xvc2UgPSB0cnVlXG59OiB7XG4gIHR5cGU/OiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcbiAgZGVsYXlDbG9zZT86IGJvb2xlYW47XG59KSB7XG4gIGNvbnN0IGlkID0gZ2VuZXJhdGVIYXNoSWQoKTtcbiAgY29uc3Qgc3VjY2Vzc05vdGUgPSB7XG4gICAgaWQsXG4gICAgdHlwZTogREVGQVVMVF9OT1RJRklDQVRJT05fVFlQRVNbdHlwZSB8fCAnJ10gfHwgREVGQVVMVF9OT1RJRklDQVRJT05fVFlQRVMuc3VjY2VzcyxcbiAgICB0b3BpYzogREVGQVVMVF9OT1RJRklDQVRJT05fVE9QSUNTLmdsb2JhbCxcbiAgICBtZXNzYWdlXG4gIH07XG4gIGNvbnN0IHRhc2sgPSBBQ1RJT05fVEFTSygpLm1hcCgoKSA9PiBhZGROb3RpZmljYXRpb24oc3VjY2Vzc05vdGUpKTtcbiAgcmV0dXJuIGRlbGF5Q2xvc2UgPyBbdGFzaywgREVMQVlfVEFTSygzMDAwKS5tYXAoKCkgPT4gcmVtb3ZlTm90aWZpY2F0aW9uKGlkKSldIDogW3Rhc2tdO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHdpbGwgZXhwb3J0IHRoZSBjdXJyZW50IGtlcGxlciBjb25maWcgZmlsZSB0byB0aGUgY2hvc2VuIGNsb3VkIHByb2RlclxuICogYWRkIHJldHVybnMgYSBzaGFyZSBVUkxcbiAqXG4gKi9cbmV4cG9ydCBjb25zdCBleHBvcnRGaWxlVG9DbG91ZFVwZGF0ZXIgPSAoXG4gIHN0YXRlOiBQcm92aWRlclN0YXRlLFxuICBhY3Rpb246IEFjdGlvblBheWxvYWQ8RXhwb3J0RmlsZVRvQ2xvdWRQYXlsb2FkPlxuKTogUHJvdmlkZXJTdGF0ZSA9PiB7XG4gIGNvbnN0IHttYXBEYXRhLCBwcm92aWRlciwgb3B0aW9ucyA9IHt9LCBvblN1Y2Nlc3MsIG9uRXJyb3IsIGNsb3NlTW9kYWx9ID0gYWN0aW9uLnBheWxvYWQ7XG5cbiAgaWYgKCFfdmFsaWRhdGVQcm92aWRlcihwcm92aWRlciwgJ3VwbG9hZE1hcCcpKSB7XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgLi4uc3RhdGUsXG4gICAgaXNQcm92aWRlckxvYWRpbmc6IHRydWUsXG4gICAgY3VycmVudFByb3ZpZGVyOiBwcm92aWRlci5uYW1lXG4gIH07XG5cbiAgLy8gcGF5bG9hZCBjYWxsZWQgYnkgcHJvdmlkZXIudXBsb2FkTWFwXG4gIGNvbnN0IHBheWxvYWQgPSB7XG4gICAgbWFwRGF0YSxcbiAgICBvcHRpb25zXG4gIH07XG4gIGNvbnN0IHVwbG9hZEZpbGVUYXNrID0gRVhQT1JUX0ZJTEVfVE9fQ0xPVURfVEFTSyh7cHJvdmlkZXIsIHBheWxvYWR9KS5iaW1hcChcbiAgICAvLyBzdWNjZXNzXG4gICAgcmVzcG9uc2UgPT4gZXhwb3J0RmlsZVN1Y2Nlc3Moe3Jlc3BvbnNlLCBwcm92aWRlciwgb3B0aW9ucywgb25TdWNjZXNzLCBjbG9zZU1vZGFsfSksXG4gICAgLy8gZXJyb3JcbiAgICBlcnJvciA9PiBleHBvcnRGaWxlRXJyb3Ioe2Vycm9yLCBwcm92aWRlciwgb3B0aW9ucywgb25FcnJvcn0pXG4gICk7XG5cbiAgcmV0dXJuIHdpdGhUYXNrKG5ld1N0YXRlLCB1cGxvYWRGaWxlVGFzayk7XG59O1xuXG5leHBvcnQgY29uc3QgZXhwb3J0RmlsZVN1Y2Nlc3NVcGRhdGVyID0gKFxuICBzdGF0ZTogUHJvdmlkZXJTdGF0ZSxcbiAgYWN0aW9uOiBBY3Rpb25QYXlsb2FkPFByb3ZpZGVyQWN0aW9ucy5FeHBvcnRGaWxlU3VjY2Vzc1BheWxvYWQ+XG4pOiBQcm92aWRlclN0YXRlID0+IHtcbiAgY29uc3Qge3Jlc3BvbnNlLCBwcm92aWRlciwgb3B0aW9ucyA9IHt9LCBvblN1Y2Nlc3MsIGNsb3NlTW9kYWx9ID0gYWN0aW9uLnBheWxvYWQ7XG5cbiAgY29uc3QgbmV3U3RhdGUgPSB7XG4gICAgLi4uc3RhdGUsXG4gICAgaXNQcm92aWRlckxvYWRpbmc6IGZhbHNlLFxuICAgIC8vIFRPRE86IGRvIHdlIGFsd2F5cyBoYXZlIHRvIHN0b3JlIHRoaXM/XG4gICAgc3VjY2Vzc0luZm86IHJlc3BvbnNlLFxuICAgIC4uLighb3B0aW9ucy5pc1B1YmxpY1xuICAgICAgPyB7XG4gICAgICAgICAgbWFwU2F2ZWQ6IHByb3ZpZGVyLm5hbWUsXG4gICAgICAgICAgc2F2ZWRNYXBJZDogcmVzcG9uc2U/LmluZm8/LmlkID8/IG51bGxcbiAgICAgICAgfVxuICAgICAgOiB7fSlcbiAgfTtcblxuICBjb25zdCB0YXNrcyA9IFtcbiAgICBjcmVhdGVBY3Rpb25UYXNrKG9uU3VjY2Vzcywge3Jlc3BvbnNlLCBwcm92aWRlciwgb3B0aW9uc30pLFxuICAgIGNsb3NlTW9kYWwgJiZcbiAgICAgIEFDVElPTl9UQVNLKCkubWFwKCgpID0+IHBvc3RTYXZlTG9hZFN1Y2Nlc3MoYE1hcCBzYXZlZCB0byAke3N0YXRlLmN1cnJlbnRQcm92aWRlcn0hYCkpXG4gIF0uZmlsdGVyKGQgPT4gZCk7XG5cbiAgcmV0dXJuIHRhc2tzLmxlbmd0aCA/IHdpdGhUYXNrKG5ld1N0YXRlLCB0YXNrcykgOiBuZXdTdGF0ZTtcbn07XG5cbi8qKlxuICogQ2xvc2UgbW9kYWwgb24gc3VjY2VzcyBhbmQgZGlzcGxheSBub3RpZmljYXRpb25cbiAqL1xuZXhwb3J0IGNvbnN0IHBvc3RTYXZlTG9hZFN1Y2Nlc3NVcGRhdGVyID0gKFxuICBzdGF0ZTogUHJvdmlkZXJTdGF0ZSxcbiAgYWN0aW9uOiBBY3Rpb25QYXlsb2FkPFByb3ZpZGVyQWN0aW9ucy5Qb3N0U2F2ZUxvYWRTdWNjZXNzUGF5bG9hZD5cbik6IFByb3ZpZGVyU3RhdGUgPT4ge1xuICBjb25zdCBtZXNzYWdlID0gYWN0aW9uLnBheWxvYWQgfHwgYFNhdmVkIC8gTG9hZCB0byAke3N0YXRlLmN1cnJlbnRQcm92aWRlcn0gU3VjY2Vzc2A7XG5cbiAgY29uc3QgdGFza3MgPSBbXG4gICAgQUNUSU9OX1RBU0soKS5tYXAoKCkgPT4gdG9nZ2xlTW9kYWwobnVsbCkpLFxuICAgIEFDVElPTl9UQVNLKCkubWFwKCgpID0+IHJlc2V0UHJvdmlkZXJTdGF0dXMoKSksXG4gICAgLi4uY3JlYXRlR2xvYmFsTm90aWZpY2F0aW9uVGFza3Moe21lc3NhZ2V9KVxuICBdO1xuXG4gIHJldHVybiB3aXRoVGFzayhzdGF0ZSwgdGFza3MpO1xufTtcblxuZXhwb3J0IGNvbnN0IGV4cG9ydEZpbGVFcnJvclVwZGF0ZXIgPSAoXG4gIHN0YXRlOiBQcm92aWRlclN0YXRlLFxuICBhY3Rpb246IEFjdGlvblBheWxvYWQ8UHJvdmlkZXJBY3Rpb25zLkV4cG9ydEZpbGVFcnJvclBheWxvYWQ+XG4pOiBQcm92aWRlclN0YXRlID0+IHtcbiAgY29uc3Qge2Vycm9yLCBwcm92aWRlciwgb25FcnJvcn0gPSBhY3Rpb24ucGF5bG9hZDtcblxuICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAuLi5zdGF0ZSxcbiAgICBpc1Byb3ZpZGVyTG9hZGluZzogZmFsc2VcbiAgfTtcblxuICBpZiAoaXNGaWxlQ29uZmxpY3QoZXJyb3IpKSB7XG4gICAgbmV3U3RhdGUubWFwU2F2ZWQgPSBwcm92aWRlci5uYW1lO1xuICAgIHJldHVybiB3aXRoVGFzayhuZXdTdGF0ZSwgW0FDVElPTl9UQVNLKCkubWFwKCgpID0+IHRvZ2dsZU1vZGFsKE9WRVJXUklURV9NQVBfSUQpKV0pO1xuICB9XG5cbiAgbmV3U3RhdGUucHJvdmlkZXJFcnJvciA9IGdldEVycm9yKGVycm9yKTtcbiAgY29uc3QgdGFzayA9IGNyZWF0ZUFjdGlvblRhc2sob25FcnJvciwge2Vycm9yLCBwcm92aWRlcn0pO1xuXG4gIHJldHVybiB0YXNrID8gd2l0aFRhc2sobmV3U3RhdGUsIHRhc2spIDogbmV3U3RhdGU7XG59O1xuXG5leHBvcnQgY29uc3QgbG9hZENsb3VkTWFwVXBkYXRlciA9IChcbiAgc3RhdGU6IFByb3ZpZGVyU3RhdGUsXG4gIGFjdGlvbjogQWN0aW9uUGF5bG9hZDxQcm92aWRlckFjdGlvbnMuTG9hZENsb3VkTWFwUGF5bG9hZD5cbik6IFByb3ZpZGVyU3RhdGUgPT4ge1xuICBjb25zdCB7bG9hZFBhcmFtcywgcHJvdmlkZXIsIG9uU3VjY2Vzcywgb25FcnJvcn0gPSBhY3Rpb24ucGF5bG9hZDtcbiAgaWYgKCFsb2FkUGFyYW1zKSB7XG4gICAgQ29uc29sZS53YXJuKCdsb2FkIG1hcCBlcnJvcjogbG9hZFBhcmFtcyBpcyB1bmRlZmluZWQnKTtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cbiAgaWYgKCFfdmFsaWRhdGVQcm92aWRlcihwcm92aWRlciwgJ2Rvd25sb2FkTWFwJykpIHtcbiAgICByZXR1cm4gc3RhdGU7XG4gIH1cblxuICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAuLi5zdGF0ZSxcbiAgICBpc1Byb3ZpZGVyTG9hZGluZzogdHJ1ZSxcbiAgICBpc0Nsb3VkTWFwTG9hZGluZzogdHJ1ZVxuICB9O1xuXG4gIC8vIHBheWxvYWQgY2FsbGVkIGJ5IHByb3ZpZGVyLmRvd25sb2FkTWFwXG4gIGNvbnN0IHVwbG9hZEZpbGVUYXNrID0gTE9BRF9DTE9VRF9NQVBfVEFTSyh7cHJvdmlkZXIsIHBheWxvYWQ6IGxvYWRQYXJhbXN9KS5iaW1hcChcbiAgICAvLyBzdWNjZXNzXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgIHJlc3BvbnNlID0+IGxvYWRDbG91ZE1hcFN1Y2Nlc3Moe3Jlc3BvbnNlLCBsb2FkUGFyYW1zLCBwcm92aWRlciwgb25TdWNjZXNzLCBvbkVycm9yfSksXG4gICAgLy8gZXJyb3JcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgZXJyb3IgPT4gbG9hZENsb3VkTWFwRXJyb3Ioe2Vycm9yLCBwcm92aWRlciwgb25FcnJvcn0pXG4gICk7XG5cbiAgcmV0dXJuIHdpdGhUYXNrKG5ld1N0YXRlLCB1cGxvYWRGaWxlVGFzayk7XG59O1xuXG5mdW5jdGlvbiBpc0ZpbGVDb25mbGljdChlcnJvcikge1xuICByZXR1cm4gZXJyb3IgJiYgZXJyb3IubWVzc2FnZSA9PT0gRklMRV9DT05GTElDVF9NU0c7XG59XG5cbmZ1bmN0aW9uIGNoZWNrTG9hZE1hcFJlc3BvbnNlRXJyb3IocmVzcG9uc2UpIHtcbiAgaWYgKCFyZXNwb25zZSB8fCAhaXNQbGFpbk9iamVjdChyZXNwb25zZSkpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKCdMb2FkIG1hcCByZXNwb25zZSBpcyBlbXB0eScpO1xuICB9XG4gIGlmICghaXNQbGFpbk9iamVjdChyZXNwb25zZS5tYXApKSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihgTG9hZCBtYXAgcmVzcG9uc2Ugc2hvdWxkIGJlIGFuIG9iamVjdCBwcm9wZXJ0eSBcIm1hcFwiYCk7XG4gIH1cbiAgaWYgKCFyZXNwb25zZS5tYXAuZGF0YXNldHMgfHwgIXJlc3BvbnNlLm1hcC5jb25maWcpIHtcbiAgICByZXR1cm4gbmV3IEVycm9yKGBMb2FkIG1hcCByZXNwb25zZS5tYXAgc2hvdWxkIGJlIGFuIG9iamVjdCB3aXRoIHByb3BlcnR5IGRhdGFzZXRzIG9yIGNvbmZpZ2ApO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGdldERhdGFzZXRIYW5kbGVyKGZvcm1hdCkge1xuICBjb25zdCBkZWZhdWx0SGFuZGxlciA9IERBVEFTRVRfSEFORExFUlNbREFUQVNFVF9GT1JNQVRTLmNzdl07XG4gIGlmICghZm9ybWF0KSB7XG4gICAgQ29uc29sZS53YXJuKCdmb3JtYXQgaXMgbm90IHByb3ZpZGVkIGluIGxvYWQgbWFwIHJlc3BvbnNlLCB3aWxsIHVzZSBjc3YgYnkgZGVmYXVsdCcpO1xuICAgIHJldHVybiBkZWZhdWx0SGFuZGxlcjtcbiAgfVxuXG4gIC8vIHVzZSBjdXN0b20gcHJvY2Vzc29ycyBmcm9tIHRhYmxlIGNsYXNzXG4gIGNvbnN0IFRhYmxlQ2xhc3MgPSBnZXRBcHBsaWNhdGlvbkNvbmZpZygpLnRhYmxlID8/IEtlcGxlclRhYmxlO1xuICBpZiAodHlwZW9mIFRhYmxlQ2xhc3MuZ2V0RmlsZVByb2Nlc3NvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNvbnN0IHByb2Nlc3NvclJlc3VsdCA9IFRhYmxlQ2xhc3MuZ2V0RmlsZVByb2Nlc3NvcihudWxsLCBmb3JtYXQpO1xuICAgIGlmICghcHJvY2Vzc29yUmVzdWx0LnByb2Nlc3Nvcikge1xuICAgICAgQ29uc29sZS53YXJuKGBObyBwcm9jZXNzb3IgZm91bmQgZm9yIGZvcm1hdCAke2Zvcm1hdH0sIHdpbGwgdXNlIGNzdiBieSBkZWZhdWx0YCk7XG4gICAgICByZXR1cm4gZGVmYXVsdEhhbmRsZXI7XG4gICAgfVxuICAgIHJldHVybiBwcm9jZXNzb3JSZXN1bHQucHJvY2Vzc29yO1xuICB9XG5cbiAgaWYgKCFEQVRBU0VUX0hBTkRMRVJTW2Zvcm1hdF0pIHtcbiAgICBjb25zdCBzdXBwb3J0ZWRGb3JtYXQgPSBPYmplY3Qua2V5cyhEQVRBU0VUX0ZPUk1BVFMpXG4gICAgICAubWFwKGsgPT4gYCcke2t9J2ApXG4gICAgICAuam9pbignLCAnKTtcbiAgICBDb25zb2xlLndhcm4oXG4gICAgICBgdW5rbm93biBmb3JtYXQgJHtmb3JtYXR9LiBQbGVhc2UgdXNlIG9uZSBvZiAke3N1cHBvcnRlZEZvcm1hdH0sIHdpbGwgdXNlIGNzdiBieSBkZWZhdWx0YFxuICAgICk7XG4gICAgcmV0dXJuIGRlZmF1bHRIYW5kbGVyO1xuICB9XG5cbiAgcmV0dXJuIERBVEFTRVRfSEFORExFUlNbZm9ybWF0XTtcbn1cblxuLyoqXG4gKiBBIHRhc2sgdG8gaGFuZGxlIGFzeW5jIHByb2Nlc3Nvck1ldGhvZFxuICogQHBhcmFtIHBhcmFtMFxuICogQHJldHVybnNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcGFyc2VMb2FkTWFwUmVzcG9uc2VUYXNrKHtcbiAgcmVzcG9uc2UsXG4gIGxvYWRQYXJhbXMsXG4gIHByb3ZpZGVyXG59OiB7XG4gIHJlc3BvbnNlOiBQcm92aWRlckFjdGlvbnMuTG9hZENsb3VkTWFwU3VjY2Vzc1BheWxvYWRbJ3Jlc3BvbnNlJ107XG4gIGxvYWRQYXJhbXM6IFByb3ZpZGVyQWN0aW9ucy5Mb2FkQ2xvdWRNYXBTdWNjZXNzUGF5bG9hZFsnbG9hZFBhcmFtcyddO1xuICBwcm92aWRlcjogUHJvdmlkZXJBY3Rpb25zLkxvYWRDbG91ZE1hcFN1Y2Nlc3NQYXlsb2FkWydwcm92aWRlciddO1xufSkge1xuICBjb25zdCB7bWFwLCBmb3JtYXR9ID0gcmVzcG9uc2U7XG4gIGNvbnN0IHByb2Nlc3Nvck1ldGhvZCA9IGdldERhdGFzZXRIYW5kbGVyKGZvcm1hdCk7XG5cbiAgbGV0IHBhcnNlZERhdGFzZXRzOiBBZGREYXRhVG9NYXBQYXlsb2FkWydkYXRhc2V0cyddID0gW107XG5cbiAgaWYgKFxuICAgIGZvcm1hdCA9PT0gREFUQVNFVF9GT1JNQVRTLmtlcGxlcmdsICYmXG4gICAgcHJvY2Vzc29yTWV0aG9kICE9PSBEQVRBU0VUX0hBTkRMRVJTW0RBVEFTRVRfRk9STUFUUy5rZXBsZXJnbF1cbiAgKSB7XG4gICAgLy8gcGx1Z2luIHRhYmxlIHByb3ZpZGVzIHByb2Nlc3NvciBmb3Iga2VwbGVyZ2wgbWFwLCBub3Qgc2luZ2xlIGRhdGFzZXQgd2l0aCBhbGxEYXRhXG4gICAgY29uc3QgcGFyc2VkTWFwID0gYXdhaXQgcHJvY2Vzc29yTWV0aG9kKG1hcCk7XG4gICAgcGFyc2VkRGF0YXNldHMgPSBwYXJzZWRNYXAuZGF0YXNldHM7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgZGF0YXNldHMgPSB0b0FycmF5KG1hcC5kYXRhc2V0cyk7XG4gICAgcGFyc2VkRGF0YXNldHMgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIGRhdGFzZXRzLm1hcChhc3luYyBkcyA9PiB7XG4gICAgICAgIGlmIChmb3JtYXQgPT09IERBVEFTRVRfRk9STUFUUy5rZXBsZXJnbCkge1xuICAgICAgICAgIC8vIG5vIG5lZWQgdG8gb2J0YWluIGlkLCBkaXJlY3RseSBwYXNzIHRoZW0gaW5cbiAgICAgICAgICByZXR1cm4gYXdhaXQgcHJvY2Vzc29yTWV0aG9kKGRzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmZvID0gKGRzICYmIGRzLmluZm8pIHx8IHtpZDogZ2VuZXJhdGVIYXNoSWQoNil9O1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcHJvY2Vzc29yTWV0aG9kKGRzLmRhdGEgfHwgZHMpO1xuICAgICAgICByZXR1cm4ge2luZm8sIGRhdGF9O1xuICAgICAgfSlcbiAgICApO1xuICB9XG5cbiAgY29uc3QgaW5mbyA9IHtcbiAgICAuLi5tYXAuaW5mbyxcbiAgICBwcm92aWRlcjogcHJvdmlkZXIubmFtZSxcbiAgICBsb2FkUGFyYW1zXG4gIH07XG4gIHJldHVybiB7XG4gICAgZGF0YXNldHM6IHBhcnNlZERhdGFzZXRzLFxuICAgIGluZm8sXG4gICAgLi4uKG1hcC5jb25maWcgPyB7Y29uZmlnOiBtYXAuY29uZmlnfSA6IHt9KSxcbiAgICBvcHRpb25zOiB7XG4gICAgICAvLyBkbyBub3QgY2VudGVyIG1hcCB3aGVuIGxvYWRpbmcgY2xvdWQgbWFwXG4gICAgICBjZW50ZXJNYXA6IGZhbHNlXG4gICAgfVxuICB9O1xufVxuXG5jb25zdCBQQVJTRV9MT0FEX01BUF9SRVNQT05TRV9UQVNLID0gVGFzay5mcm9tUHJvbWlzZShcbiAgcGFyc2VMb2FkTWFwUmVzcG9uc2VUYXNrLFxuICAnUEFSU0VfTE9BRF9NQVBfUkVTUE9OU0VfVEFTSydcbik7XG5cbi8qKlxuICogVXNlZCB0byBsb2FkIHJlc291cmNlcyBzdG9yZWQgaW4gYSBwcml2YXRlIHN0b3JhZ2UuXG4gKi9cbmV4cG9ydCBjb25zdCBsb2FkQ2xvdWRNYXBTdWNjZXNzVXBkYXRlciA9IChcbiAgc3RhdGU6IFByb3ZpZGVyU3RhdGUsXG4gIGFjdGlvbjogQWN0aW9uUGF5bG9hZDxQcm92aWRlckFjdGlvbnMuTG9hZENsb3VkTWFwU3VjY2Vzc1BheWxvYWQ+XG4pOiBQcm92aWRlclN0YXRlID0+IHtcbiAgY29uc3Qge3Jlc3BvbnNlLCBsb2FkUGFyYW1zLCBwcm92aWRlciwgb25FcnJvcn0gPSBhY3Rpb24ucGF5bG9hZDtcblxuICBjb25zdCBmb3JtYXRFcnJvciA9IGNoZWNrTG9hZE1hcFJlc3BvbnNlRXJyb3IocmVzcG9uc2UpO1xuICBpZiAoZm9ybWF0RXJyb3IpIHtcbiAgICAvLyBpZiByZXNwb25zZSBmb3JtYXQgaXMgbm90IGNvcnJlY3RcbiAgICByZXR1cm4gZXhwb3J0RmlsZUVycm9yVXBkYXRlcihzdGF0ZSwge1xuICAgICAgcGF5bG9hZDoge2Vycm9yOiBmb3JtYXRFcnJvciwgcHJvdmlkZXIsIG9uRXJyb3J9XG4gICAgfSk7XG4gIH1cblxuICAvLyBwcm9jZXNzb3JNZXRob2QgY2FuIGJlIGFzeW5jIHNvIGNyZWF0ZSBhIHRhc2tcbiAgY29uc3QgcGFyc2VMb2FkTWFwUmVzcG9uc2VUYXNrID0gUEFSU0VfTE9BRF9NQVBfUkVTUE9OU0VfVEFTSyh7XG4gICAgcmVzcG9uc2UsXG4gICAgbG9hZFBhcmFtcyxcbiAgICBwcm92aWRlclxuICB9KS5iaW1hcChcbiAgICAoZGF0YXNldHNQYXlsb2FkOiBBZGREYXRhVG9NYXBQYXlsb2FkKSA9PiB7XG4gICAgICByZXR1cm4gbG9hZENsb3VkTWFwU3VjY2VzczIoey4uLmFjdGlvbi5wYXlsb2FkLCBkYXRhc2V0c1BheWxvYWR9KTtcbiAgICB9LFxuICAgIGVycm9yID0+XG4gICAgICBleHBvcnRGaWxlRXJyb3JVcGRhdGVyKHN0YXRlLCB7XG4gICAgICAgIHBheWxvYWQ6IHtlcnJvciwgcHJvdmlkZXIsIG9uRXJyb3J9XG4gICAgICB9KVxuICApO1xuXG4gIHJldHVybiB3aXRoVGFzayhzdGF0ZSwgcGFyc2VMb2FkTWFwUmVzcG9uc2VUYXNrKTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2FkQ2xvdWRNYXBTdWNjZXNzMlVwZGF0ZXIgPSAoXG4gIHN0YXRlOiBQcm92aWRlclN0YXRlLFxuICBhY3Rpb246IEFjdGlvblBheWxvYWQ8UHJvdmlkZXJBY3Rpb25zLkxvYWRDbG91ZE1hcFN1Y2Nlc3MyUGF5bG9hZD5cbik6IFByb3ZpZGVyU3RhdGUgPT4ge1xuICBjb25zdCB7ZGF0YXNldHNQYXlsb2FkLCByZXNwb25zZSwgbG9hZFBhcmFtcywgcHJvdmlkZXIsIG9uU3VjY2Vzc30gPSBhY3Rpb24ucGF5bG9hZDtcblxuICBjb25zdCBuZXdTdGF0ZSA9IHtcbiAgICAuLi5zdGF0ZSxcbiAgICBtYXBTYXZlZDogcHJvdmlkZXIubmFtZSxcbiAgICBjdXJyZW50UHJvdmlkZXI6IHByb3ZpZGVyLm5hbWUsXG4gICAgaXNDbG91ZE1hcExvYWRpbmc6IGZhbHNlLFxuICAgIGlzUHJvdmlkZXJMb2FkaW5nOiBmYWxzZVxuICB9O1xuXG4gIGNvbnN0IHRhc2tzID0gW1xuICAgIEFDVElPTl9UQVNLKCkubWFwKCgpID0+IGFkZERhdGFUb01hcChkYXRhc2V0c1BheWxvYWQpKSxcbiAgICBjcmVhdGVBY3Rpb25UYXNrKG9uU3VjY2Vzcywge3Jlc3BvbnNlLCBsb2FkUGFyYW1zLCBwcm92aWRlcn0pLFxuICAgIEFDVElPTl9UQVNLKCkubWFwKCgpID0+IHBvc3RTYXZlTG9hZFN1Y2Nlc3MoYE1hcCBmcm9tICR7cHJvdmlkZXIubmFtZX0gbG9hZGVkYCkpXG4gIF0uZmlsdGVyKGQgPT4gZCk7XG5cbiAgcmV0dXJuIHRhc2tzLmxlbmd0aCA/IHdpdGhUYXNrKG5ld1N0YXRlLCB0YXNrcykgOiBuZXdTdGF0ZTtcbn07XG5cbmV4cG9ydCBjb25zdCBsb2FkQ2xvdWRNYXBFcnJvclVwZGF0ZXIgPSAoXG4gIHN0YXRlOiBQcm92aWRlclN0YXRlLFxuICBhY3Rpb246IEFjdGlvblBheWxvYWQ8UHJvdmlkZXJBY3Rpb25zLkxvYWRDbG91ZE1hcEVycm9yUGF5bG9hZD5cbik6IFByb3ZpZGVyU3RhdGUgPT4ge1xuICBjb25zdCBtZXNzYWdlID0gZ2V0RXJyb3IoYWN0aW9uLnBheWxvYWQuZXJyb3IpIHx8IGBFcnJvciBsb2FkaW5nIHNhdmVkIG1hcGA7XG5cbiAgQ29uc29sZS53YXJuKG1lc3NhZ2UpO1xuXG4gIGNvbnN0IG5ld1N0YXRlID0ge1xuICAgIC4uLnN0YXRlLFxuICAgIGlzUHJvdmlkZXJMb2FkaW5nOiBmYWxzZSxcbiAgICBpc0Nsb3VkTWFwTG9hZGluZzogZmFsc2UsXG4gICAgcHJvdmlkZXJFcnJvcjogbnVsbFxuICB9O1xuXG4gIHJldHVybiB3aXRoVGFzayhcbiAgICBuZXdTdGF0ZSxcbiAgICBjcmVhdGVHbG9iYWxOb3RpZmljYXRpb25UYXNrcyh7dHlwZTogJ2Vycm9yJywgbWVzc2FnZSwgZGVsYXlDbG9zZTogZmFsc2V9KVxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IHJlc2V0UHJvdmlkZXJTdGF0dXNVcGRhdGVyID0gKHN0YXRlOiBQcm92aWRlclN0YXRlKTogUHJvdmlkZXJTdGF0ZSA9PiAoe1xuICAuLi5zdGF0ZSxcbiAgaXNQcm92aWRlckxvYWRpbmc6IGZhbHNlLFxuICBwcm92aWRlckVycm9yOiBudWxsLFxuICBpc0Nsb3VkTWFwTG9hZGluZzogZmFsc2UsXG4gIHN1Y2Nlc3NJbmZvOiB7fVxufSk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUdBLElBQUFBLE1BQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFlBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLE9BQUEsR0FBQUwsT0FBQTtBQU1BLElBQUFNLFFBQUEsR0FBQU4sT0FBQTtBQWNBLElBQUFPLFVBQUEsR0FBQVAsT0FBQTtBQVFBLElBQUFRLGVBQUEsR0FBQVIsT0FBQTtBQUNBLElBQUFTLFdBQUEsR0FBQVQsT0FBQTtBQUNBLElBQUFVLE1BQUEsR0FBQVYsT0FBQTtBQUE2QyxTQUFBVyx5QkFBQUMsQ0FBQTtFQUFBLHlCQUFBQyxPQUFBO0VBQUEsSUFBQUMsQ0FBQSxPQUFBRCxPQUFBO0lBQUFFLENBQUEsT0FBQUYsT0FBQTtFQUFBLFFBQUFGLHdCQUFBLFlBQUFBLHlCQUFBQyxDQUFBO0lBQUEsT0FBQUEsQ0FBQSxHQUFBRyxDQUFBLEdBQUFELENBQUE7RUFBQSxHQUFBRixDQUFBO0FBQUE7QUFBQSxTQUFBYix3QkFBQWEsQ0FBQSxFQUFBRSxDQUFBO0VBQUEsS0FBQUEsQ0FBQSxJQUFBRixDQUFBLElBQUFBLENBQUEsQ0FBQUksVUFBQSxTQUFBSixDQUFBO0VBQUEsYUFBQUEsQ0FBQSxnQkFBQUssT0FBQSxDQUFBTCxDQUFBLDBCQUFBQSxDQUFBO0lBQUEsV0FBQUE7RUFBQTtFQUFBLElBQUFHLENBQUEsR0FBQUosd0JBQUEsQ0FBQUcsQ0FBQTtFQUFBLElBQUFDLENBQUEsSUFBQUEsQ0FBQSxDQUFBRyxHQUFB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