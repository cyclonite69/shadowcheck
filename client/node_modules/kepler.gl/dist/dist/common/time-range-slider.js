"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = TimeRangeSliderFactory;
exports.getTimeBinsForInterval = getTimeBinsForInterval;
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _throttle = _interopRequireDefault(require("lodash/throttle"));
var _styledComponents = _interopRequireDefault(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/styled-components"));
var _rangeSlider = _interopRequireDefault(require("./range-slider"));
var _timeSliderMarker = _interopRequireDefault(require("./time-slider-marker"));
var _playbackControls = _interopRequireDefault(require("./animation-control/playback-controls"));
var _timeRangeSliderTimeTitle = _interopRequireDefault(require("./time-range-slider-time-title"));
var _animationControl = _interopRequireDefault(require("./animation-control/animation-control"));
var _templateObject; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
var animationControlWidth = 176;
var StyledSliderContainer = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  align-items: flex-end;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding-left: ", "px;\n\n  .timeline-container .kg-slider {\n    display: none;\n  }\n\n  .playback-controls {\n    margin-left: 22px;\n  }\n"])), function (props) {
  return props.isEnlarged ? 24 : 0;
});
var ANIMATION_CONTROL_STYLE = {
  flex: 1
};
TimeRangeSliderFactory.deps = [_playbackControls["default"], _rangeSlider["default"], _timeSliderMarker["default"], _timeRangeSliderTimeTitle["default"], _animationControl["default"]];
function getTimeBinsForInterval(timeBins, interval) {
  if (!timeBins) return {};
  return Object.keys(timeBins).reduce(function (acc, dataId) {
    acc[dataId] = timeBins[dataId][interval];
    return acc;
  }, {});
}
function TimeRangeSliderFactory(PlaybackControls, RangeSlider, TimeSliderMarker, TimeRangeSliderTimeTitle, AnimationControl) {
  var TimeRangeSlider = function TimeRangeSlider(props) {
    var domain = props.domain,
      value = props.value,
      isEnlarged = props.isEnlarged,
      isMinified = props.isMinified,
      hideTimeTitle = props.hideTimeTitle,
      isAnimating = props.isAnimating,
      resetAnimation = props.resetAnimation,
      timeFormat = props.timeFormat,
      timezone = props.timezone,
      timeBins = props.timeBins,
      plotType = props.plotType,
      lineChart = props.lineChart,
      invertTrendColor = props.invertTrendColor,
      step = props.step,
      isAnimatable = props.isAnimatable,
      speed = props.speed,
      animationWindow = props.animationWindow,
      updateAnimationSpeed = props.updateAnimationSpeed,
      setFilterAnimationWindow = props.setFilterAnimationWindow,
      toggleAnimation = props.toggleAnimation,
      onChange = props.onChange,
      setFilterPlot = props.setFilterPlot,
      timeline = props.timeline;
    var throttledOnchange = (0, _react.useMemo)(function () {
      return (0, _throttle["default"])(onChange, 20);
    }, [onChange]);
    var binsForInterval = (0, _react.useMemo)(function () {
      return getTimeBinsForInterval(timeBins, plotType === null || plotType === void 0 ? void 0 : plotType.interval);
    }, [timeBins, plotType === null || plotType === void 0 ? void 0 : plotType.interval]);
    var style = (0, _react.useMemo)(function () {
      return {
        width: isEnlarged ? "calc(100% - ".concat(animationControlWidth, "px)") : '100%'
      };
    }, [isEnlarged]);
    return /*#__PURE__*/_react["default"].createElement("div", {
      className: "time-range-slider"
    }, !hideTimeTitle && isEnlarged ? /*#__PURE__*/_react["default"].createElement("div", {
      className: "time-range-slider__title",
      style: style
    }, /*#__PURE__*/_react["default"].createElement(TimeRangeSliderTimeTitle, {
      timeFormat: timeFormat,
      timezone: timezone,
      value: value,
      isEnlarged: isEnlarged
    })) : null, /*#__PURE__*/_react["default"].createElement(StyledSliderContainer, {
      className: "time-range-slider__container",
      isEnlarged: isEnlarged
    }, !isMinified ? /*#__PURE__*/_react["default"].createElement("div", {
      className: "timeline-container",
      style: style
    }, /*#__PURE__*/_react["default"].createElement(RangeSlider, {
      range: domain,
      value0: value[0],
      value1: value[1],
      bins: binsForInterval,
      lineChart: lineChart,
      invertTrendColor: invertTrendColor,
      plotType: plotType,
      isEnlarged: isEnlarged,
      showInput: false,
      step: step,
      onChange: throttledOnchange,
      xAxis: TimeSliderMarker,
      timezone: timezone,
      timeFormat: timeFormat,
      setFilterPlot: setFilterPlot
    })) : /*#__PURE__*/_react["default"].createElement(AnimationControl, {
      style: ANIMATION_CONTROL_STYLE,
      isAnimatable: isAnimatable,
      isAnimating: isAnimating,
      resetAnimation: resetAnimation,
      toggleAnimation: toggleAnimation,
      updateAnimationSpeed: updateAnimationSpeed,
      setTimelineValue: throttledOnchange,
      setAnimationWindow: setFilterAnimationWindow,
      showTimeDisplay: false,
      timeline: timeline
    }), isEnlarged && !isMinified ? /*#__PURE__*/_react["default"].createElement(PlaybackControls, {
      isAnimatable: isAnimatable,
      width: animationControlWidth,
      speed: speed,
      animationWindow: animationWindow,
      updateAnimationSpeed: updateAnimationSpeed,
      setFilterAnimationWindow: setFilterAnimationWindow,
      pauseAnimation: toggleAnimation,
      resetAnimation: resetAnimation,
      isAnimating: isAnimating,
      startAnimation: toggleAnimation
    }) : null));
  };
  return /*#__PURE__*/_react["default"].memo(TimeRangeSlider);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfdGhyb3R0bGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3N0eWxlZENvbXBvbmVudHMiLCJfcmFuZ2VTbGlkZXIiLCJfdGltZVNsaWRlck1hcmtlciIsIl9wbGF5YmFja0NvbnRyb2xzIiwiX3RpbWVSYW5nZVNsaWRlclRpbWVUaXRsZSIsIl9hbmltYXRpb25Db250cm9sIiwiX3RlbXBsYXRlT2JqZWN0IiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsIl9fZXNNb2R1bGUiLCJfdHlwZW9mIiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0IiwiYW5pbWF0aW9uQ29udHJvbFdpZHRoIiwiU3R5bGVkU2xpZGVyQ29udGFpbmVyIiwiZGl2IiwiX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbDIiLCJwcm9wcyIsImlzRW5sYXJnZWQiLCJBTklNQVRJT05fQ09OVFJPTF9TVFlMRSIsImZsZXgiLCJUaW1lUmFuZ2VTbGlkZXJGYWN0b3J5IiwiZGVwcyIsImdldFRpbWVCaW5zRm9ySW50ZXJ2YWwiLCJ0aW1lQmlucyIsImludGVydmFsIiwia2V5cyIsInJlZHVjZSIsImFjYyIsImRhdGFJZCIsIlBsYXliYWNrQ29udHJvbHMiLCJSYW5nZVNsaWRlciIsIlRpbWVTbGlkZXJNYXJrZXIiLCJUaW1lUmFuZ2VTbGlkZXJUaW1lVGl0bGUiLCJBbmltYXRpb25Db250cm9sIiwiVGltZVJhbmdlU2xpZGVyIiwiZG9tYWluIiwidmFsdWUiLCJpc01pbmlmaWVkIiwiaGlkZVRpbWVUaXRsZSIsImlzQW5pbWF0aW5nIiwicmVzZXRBbmltYXRpb24iLCJ0aW1lRm9ybWF0IiwidGltZXpvbmUiLCJwbG90VHlwZSIsImxpbmVDaGFydCIsImludmVydFRyZW5kQ29sb3IiLCJzdGVwIiwiaXNBbmltYXRhYmxlIiwic3BlZWQiLCJhbmltYXRpb25XaW5kb3ciLCJ1cGRhdGVBbmltYXRpb25TcGVlZCIsInNldEZpbHRlckFuaW1hdGlvbldpbmRvdyIsInRvZ2dsZUFuaW1hdGlvbiIsIm9uQ2hhbmdlIiwic2V0RmlsdGVyUGxvdCIsInRpbWVsaW5lIiwidGhyb3R0bGVkT25jaGFuZ2UiLCJ1c2VNZW1vIiwiYmluc0ZvckludGVydmFsIiwic3R5bGUiLCJ3aWR0aCIsImNvbmNhdCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJyYW5nZSIsInZhbHVlMCIsInZhbHVlMSIsImJpbnMiLCJzaG93SW5wdXQiLCJ4QXhpcyIsInNldFRpbWVsaW5lVmFsdWUiLCJzZXRBbmltYXRpb25XaW5kb3ciLCJzaG93VGltZURpc3BsYXkiLCJwYXVzZUFuaW1hdGlvbiIsInN0YXJ0QW5pbWF0aW9uIiwibWVtbyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tb24vdGltZS1yYW5nZS1zbGlkZXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBSZWFjdCwge3VzZU1lbW99IGZyb20gJ3JlYWN0JztcbmltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gvdGhyb3R0bGUnO1xuaW1wb3J0IHN0eWxlZCwge0lTdHlsZWRDb21wb25lbnR9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcblxuaW1wb3J0IFJhbmdlU2xpZGVyRmFjdG9yeSBmcm9tICcuL3JhbmdlLXNsaWRlcic7XG5pbXBvcnQgVGltZVNsaWRlck1hcmtlckZhY3RvcnkgZnJvbSAnLi90aW1lLXNsaWRlci1tYXJrZXInO1xuaW1wb3J0IFBsYXliYWNrQ29udHJvbHNGYWN0b3J5IGZyb20gJy4vYW5pbWF0aW9uLWNvbnRyb2wvcGxheWJhY2stY29udHJvbHMnO1xuaW1wb3J0IFRpbWVSYW5nZVNsaWRlclRpbWVUaXRsZUZhY3RvcnkgZnJvbSAnLi90aW1lLXJhbmdlLXNsaWRlci10aW1lLXRpdGxlJztcbmltcG9ydCB7TGluZUNoYXJ0LCBUaW1lbGluZSwgQW5pbWF0aW9uQ29uZmlnLCBUaW1lQmluc30gZnJvbSAnQGtlcGxlci5nbC90eXBlcyc7XG5pbXBvcnQge0FjdGlvbkhhbmRsZXIsIHNldEZpbHRlclBsb3R9IGZyb20gJ0BrZXBsZXIuZ2wvYWN0aW9ucyc7XG5pbXBvcnQgQW5pbWF0aW9uQ29udHJvbEZhY3RvcnkgZnJvbSAnLi9hbmltYXRpb24tY29udHJvbC9hbmltYXRpb24tY29udHJvbCc7XG5pbXBvcnQge0Jhc2VDb21wb25lbnRQcm9wc30gZnJvbSAnLi4vdHlwZXMnO1xuXG5jb25zdCBhbmltYXRpb25Db250cm9sV2lkdGggPSAxNzY7XG5cbnR5cGUgVGltZVJhbmdlU2xpZGVyUHJvcHMgPSB7XG4gIGRvbWFpbj86IFtudW1iZXIsIG51bWJlcl07XG4gIHZhbHVlOiBbbnVtYmVyLCBudW1iZXJdO1xuICBpc0VubGFyZ2VkPzogYm9vbGVhbjtcbiAgaXNNaW5pZmllZD86IGJvb2xlYW47XG4gIGhpZGVUaW1lVGl0bGU/OiBib29sZWFuO1xuICBpc0FuaW1hdGluZzogYm9vbGVhbjtcbiAgdGltZUZvcm1hdDogc3RyaW5nO1xuICB0aW1lem9uZT86IHN0cmluZyB8IG51bGw7XG4gIHRpbWVCaW5zPzogVGltZUJpbnM7XG4gIHBsb3RUeXBlPzoge1xuICAgIFtrZXk6IHN0cmluZ106IGFueTtcbiAgfTtcbiAgbGluZUNoYXJ0PzogTGluZUNoYXJ0O1xuICBzdGVwOiBudW1iZXI7XG4gIGlzQW5pbWF0YWJsZT86IGJvb2xlYW47XG4gIHNwZWVkOiBudW1iZXI7XG4gIGFuaW1hdGlvbldpbmRvdzogc3RyaW5nO1xuICByZXNldEFuaW1hdGlvbj86ICgpID0+IHZvaWQ7XG4gIHRvZ2dsZUFuaW1hdGlvbjogKCkgPT4gdm9pZDtcbiAgdXBkYXRlQW5pbWF0aW9uU3BlZWQ/OiAodmFsOiBudW1iZXIpID0+IHZvaWQ7XG4gIHNldEZpbHRlckFuaW1hdGlvbldpbmRvdz86IChpZDogc3RyaW5nKSA9PiB2b2lkO1xuICBzZXRGaWx0ZXJQbG90PzogQWN0aW9uSGFuZGxlcjx0eXBlb2Ygc2V0RmlsdGVyUGxvdD47XG4gIG9uQ2hhbmdlOiAodjogbnVtYmVyW10pID0+IHZvaWQ7XG4gIHRpbWVsaW5lOiBUaW1lbGluZTtcbiAgaW52ZXJ0VHJlbmRDb2xvcj86IGJvb2xlYW47XG4gIGFuaW1hdGlvbkNvbmZpZz86IEFuaW1hdGlvbkNvbmZpZztcbn07XG5cbmV4cG9ydCB0eXBlIFN0eWxlZFNsaWRlckNvbnRhaW5lclByb3BzID0gQmFzZUNvbXBvbmVudFByb3BzICYge1xuICBpc0VubGFyZ2VkPzogYm9vbGVhbjtcbn07XG5cbmNvbnN0IFN0eWxlZFNsaWRlckNvbnRhaW5lcjogSVN0eWxlZENvbXBvbmVudDxcbiAgJ3dlYicsXG4gIFN0eWxlZFNsaWRlckNvbnRhaW5lclByb3BzXG4+ID0gc3R5bGVkLmRpdjxTdHlsZWRTbGlkZXJDb250YWluZXJQcm9wcz5gXG4gIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBwYWRkaW5nLWxlZnQ6ICR7cHJvcHMgPT4gKHByb3BzLmlzRW5sYXJnZWQgPyAyNCA6IDApfXB4O1xuXG4gIC50aW1lbGluZS1jb250YWluZXIgLmtnLXNsaWRlciB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuXG4gIC5wbGF5YmFjay1jb250cm9scyB7XG4gICAgbWFyZ2luLWxlZnQ6IDIycHg7XG4gIH1cbmA7XG5cbmNvbnN0IEFOSU1BVElPTl9DT05UUk9MX1NUWUxFID0ge2ZsZXg6IDF9O1xuXG5UaW1lUmFuZ2VTbGlkZXJGYWN0b3J5LmRlcHMgPSBbXG4gIFBsYXliYWNrQ29udHJvbHNGYWN0b3J5LFxuICBSYW5nZVNsaWRlckZhY3RvcnksXG4gIFRpbWVTbGlkZXJNYXJrZXJGYWN0b3J5LFxuICBUaW1lUmFuZ2VTbGlkZXJUaW1lVGl0bGVGYWN0b3J5LFxuICBBbmltYXRpb25Db250cm9sRmFjdG9yeVxuXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRpbWVCaW5zRm9ySW50ZXJ2YWwodGltZUJpbnM6IFRpbWVCaW5zIHwgdW5kZWZpbmVkLCBpbnRlcnZhbDogbnVtYmVyKSB7XG4gIGlmICghdGltZUJpbnMpIHJldHVybiB7fTtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKHRpbWVCaW5zKS5yZWR1Y2UoKGFjYywgZGF0YUlkKSA9PiB7XG4gICAgYWNjW2RhdGFJZF0gPSB0aW1lQmluc1tkYXRhSWRdW2ludGVydmFsXTtcbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRpbWVSYW5nZVNsaWRlckZhY3RvcnkoXG4gIFBsYXliYWNrQ29udHJvbHM6IFJldHVyblR5cGU8dHlwZW9mIFBsYXliYWNrQ29udHJvbHNGYWN0b3J5PixcbiAgUmFuZ2VTbGlkZXI6IFJldHVyblR5cGU8dHlwZW9mIFJhbmdlU2xpZGVyRmFjdG9yeT4sXG4gIFRpbWVTbGlkZXJNYXJrZXI6IFJldHVyblR5cGU8dHlwZW9mIFRpbWVTbGlkZXJNYXJrZXJGYWN0b3J5PixcbiAgVGltZVJhbmdlU2xpZGVyVGltZVRpdGxlOiBSZXR1cm5UeXBlPHR5cGVvZiBUaW1lUmFuZ2VTbGlkZXJUaW1lVGl0bGVGYWN0b3J5PixcbiAgQW5pbWF0aW9uQ29udHJvbDogUmV0dXJuVHlwZTx0eXBlb2YgQW5pbWF0aW9uQ29udHJvbEZhY3Rvcnk+XG4pIHtcbiAgY29uc3QgVGltZVJhbmdlU2xpZGVyOiBSZWFjdC5GQzxUaW1lUmFuZ2VTbGlkZXJQcm9wcz4gPSBwcm9wcyA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgZG9tYWluLFxuICAgICAgdmFsdWUsXG4gICAgICBpc0VubGFyZ2VkLFxuICAgICAgaXNNaW5pZmllZCxcbiAgICAgIGhpZGVUaW1lVGl0bGUsXG4gICAgICBpc0FuaW1hdGluZyxcbiAgICAgIHJlc2V0QW5pbWF0aW9uLFxuICAgICAgdGltZUZvcm1hdCxcbiAgICAgIHRpbWV6b25lLFxuICAgICAgdGltZUJpbnMsXG4gICAgICBwbG90VHlwZSxcbiAgICAgIGxpbmVDaGFydCxcbiAgICAgIGludmVydFRyZW5kQ29sb3IsXG4gICAgICBzdGVwLFxuICAgICAgaXNBbmltYXRhYmxlLFxuICAgICAgc3BlZWQsXG4gICAgICBhbmltYXRpb25XaW5kb3csXG4gICAgICB1cGRhdGVBbmltYXRpb25TcGVlZCxcbiAgICAgIHNldEZpbHRlckFuaW1hdGlvbldpbmRvdyxcbiAgICAgIHRvZ2dsZUFuaW1hdGlvbixcbiAgICAgIG9uQ2hhbmdlLFxuICAgICAgc2V0RmlsdGVyUGxvdCxcbiAgICAgIHRpbWVsaW5lXG4gICAgfSA9IHByb3BzO1xuXG4gICAgY29uc3QgdGhyb3R0bGVkT25jaGFuZ2UgPSB1c2VNZW1vKCgpID0+IHRocm90dGxlKG9uQ2hhbmdlLCAyMCksIFtvbkNoYW5nZV0pO1xuICAgIGNvbnN0IGJpbnNGb3JJbnRlcnZhbCA9IHVzZU1lbW8oXG4gICAgICAoKSA9PiBnZXRUaW1lQmluc0ZvckludGVydmFsKHRpbWVCaW5zLCBwbG90VHlwZT8uaW50ZXJ2YWwpLFxuICAgICAgW3RpbWVCaW5zLCBwbG90VHlwZT8uaW50ZXJ2YWxdXG4gICAgKTtcblxuICAgIGNvbnN0IHN0eWxlID0gdXNlTWVtbyhcbiAgICAgICgpID0+ICh7XG4gICAgICAgIHdpZHRoOiBpc0VubGFyZ2VkID8gYGNhbGMoMTAwJSAtICR7YW5pbWF0aW9uQ29udHJvbFdpZHRofXB4KWAgOiAnMTAwJSdcbiAgICAgIH0pLFxuICAgICAgW2lzRW5sYXJnZWRdXG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInRpbWUtcmFuZ2Utc2xpZGVyXCI+XG4gICAgICAgIHshaGlkZVRpbWVUaXRsZSAmJiBpc0VubGFyZ2VkID8gKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGltZS1yYW5nZS1zbGlkZXJfX3RpdGxlXCIgc3R5bGU9e3N0eWxlfT5cbiAgICAgICAgICAgIDxUaW1lUmFuZ2VTbGlkZXJUaW1lVGl0bGVcbiAgICAgICAgICAgICAgdGltZUZvcm1hdD17dGltZUZvcm1hdH1cbiAgICAgICAgICAgICAgdGltZXpvbmU9e3RpbWV6b25lfVxuICAgICAgICAgICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICAgICAgICAgIGlzRW5sYXJnZWQ9e2lzRW5sYXJnZWR9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPFN0eWxlZFNsaWRlckNvbnRhaW5lciBjbGFzc05hbWU9XCJ0aW1lLXJhbmdlLXNsaWRlcl9fY29udGFpbmVyXCIgaXNFbmxhcmdlZD17aXNFbmxhcmdlZH0+XG4gICAgICAgICAgeyFpc01pbmlmaWVkID8gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0aW1lbGluZS1jb250YWluZXJcIiBzdHlsZT17c3R5bGV9PlxuICAgICAgICAgICAgICA8UmFuZ2VTbGlkZXJcbiAgICAgICAgICAgICAgICByYW5nZT17ZG9tYWlufVxuICAgICAgICAgICAgICAgIHZhbHVlMD17dmFsdWVbMF19XG4gICAgICAgICAgICAgICAgdmFsdWUxPXt2YWx1ZVsxXX1cbiAgICAgICAgICAgICAgICBiaW5zPXtiaW5zRm9ySW50ZXJ2YWx9XG4gICAgICAgICAgICAgICAgbGluZUNoYXJ0PXtsaW5lQ2hhcnR9XG4gICAgICAgICAgICAgICAgaW52ZXJ0VHJlbmRDb2xvcj17aW52ZXJ0VHJlbmRDb2xvcn1cbiAgICAgICAgICAgICAgICBwbG90VHlwZT17cGxvdFR5cGV9XG4gICAgICAgICAgICAgICAgaXNFbmxhcmdlZD17aXNFbmxhcmdlZH1cbiAgICAgICAgICAgICAgICBzaG93SW5wdXQ9e2ZhbHNlfVxuICAgICAgICAgICAgICAgIHN0ZXA9e3N0ZXB9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9e3Rocm90dGxlZE9uY2hhbmdlfVxuICAgICAgICAgICAgICAgIHhBeGlzPXtUaW1lU2xpZGVyTWFya2VyfVxuICAgICAgICAgICAgICAgIHRpbWV6b25lPXt0aW1lem9uZX1cbiAgICAgICAgICAgICAgICB0aW1lRm9ybWF0PXt0aW1lRm9ybWF0fVxuICAgICAgICAgICAgICAgIHNldEZpbHRlclBsb3Q9e3NldEZpbHRlclBsb3R9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApIDogKFxuICAgICAgICAgICAgPEFuaW1hdGlvbkNvbnRyb2xcbiAgICAgICAgICAgICAgc3R5bGU9e0FOSU1BVElPTl9DT05UUk9MX1NUWUxFfVxuICAgICAgICAgICAgICBpc0FuaW1hdGFibGU9e2lzQW5pbWF0YWJsZX1cbiAgICAgICAgICAgICAgaXNBbmltYXRpbmc9e2lzQW5pbWF0aW5nfVxuICAgICAgICAgICAgICByZXNldEFuaW1hdGlvbj17cmVzZXRBbmltYXRpb259XG4gICAgICAgICAgICAgIHRvZ2dsZUFuaW1hdGlvbj17dG9nZ2xlQW5pbWF0aW9ufVxuICAgICAgICAgICAgICB1cGRhdGVBbmltYXRpb25TcGVlZD17dXBkYXRlQW5pbWF0aW9uU3BlZWR9XG4gICAgICAgICAgICAgIHNldFRpbWVsaW5lVmFsdWU9e3Rocm90dGxlZE9uY2hhbmdlfVxuICAgICAgICAgICAgICBzZXRBbmltYXRpb25XaW5kb3c9e3NldEZpbHRlckFuaW1hdGlvbldpbmRvd31cbiAgICAgICAgICAgICAgc2hvd1RpbWVEaXNwbGF5PXtmYWxzZX1cbiAgICAgICAgICAgICAgdGltZWxpbmU9e3RpbWVsaW5lfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApfVxuICAgICAgICAgIHtpc0VubGFyZ2VkICYmICFpc01pbmlmaWVkID8gKFxuICAgICAgICAgICAgPFBsYXliYWNrQ29udHJvbHNcbiAgICAgICAgICAgICAgaXNBbmltYXRhYmxlPXtpc0FuaW1hdGFibGV9XG4gICAgICAgICAgICAgIHdpZHRoPXthbmltYXRpb25Db250cm9sV2lkdGh9XG4gICAgICAgICAgICAgIHNwZWVkPXtzcGVlZH1cbiAgICAgICAgICAgICAgYW5pbWF0aW9uV2luZG93PXthbmltYXRpb25XaW5kb3d9XG4gICAgICAgICAgICAgIHVwZGF0ZUFuaW1hdGlvblNwZWVkPXt1cGRhdGVBbmltYXRpb25TcGVlZH1cbiAgICAgICAgICAgICAgc2V0RmlsdGVyQW5pbWF0aW9uV2luZG93PXtzZXRGaWx0ZXJBbmltYXRpb25XaW5kb3d9XG4gICAgICAgICAgICAgIHBhdXNlQW5pbWF0aW9uPXt0b2dnbGVBbmltYXRpb259XG4gICAgICAgICAgICAgIHJlc2V0QW5pbWF0aW9uPXtyZXNldEFuaW1hdGlvbn1cbiAgICAgICAgICAgICAgaXNBbmltYXRpbmc9e2lzQW5pbWF0aW5nfVxuICAgICAgICAgICAgICBzdGFydEFuaW1hdGlvbj17dG9nZ2xlQW5pbWF0aW9ufVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgPC9TdHlsZWRTbGlkZXJDb250YWluZXI+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9O1xuXG4gIHJldHVybiBSZWFjdC5tZW1vKFRpbWVSYW5nZVNsaWRlcik7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFHQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxpQkFBQSxHQUFBRCxzQkFBQSxDQUFBRixPQUFBO0FBRUEsSUFBQUksWUFBQSxHQUFBRixzQkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUssaUJBQUEsR0FBQUgsc0JBQUEsQ0FBQUYsT0FBQTtBQUNBLElBQUFNLGlCQUFB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