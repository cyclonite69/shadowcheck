"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _styledComponents = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/styled-components"));
var _localization = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/localization/src");
var _constants = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/constants/src");
var _utils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/utils/src");
var _styledComponents2 = require("../../common/styled-components");
var _icons = require("../../common/icons");
var _tippyTooltip = _interopRequireDefault(require("../../common/tippy-tooltip"));
var _filterPanelHeader = _interopRequireDefault(require("../../side-panel/filter-panel/filter-panel-header"));
var _sourceSelector = _interopRequireDefault(require("../../side-panel/common/source-selector"));
var _sourceDataSelector = _interopRequireDefault(require("../../side-panel/common/source-data-selector"));
var _layerTypeListItem = _interopRequireDefault(require("../../side-panel/layer-panel/layer-type-list-item"));
var _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6, _templateObject7, _templateObject8, _templateObject9, _templateObject10; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      (0, _defineProperty2["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
}
var TrashIcon = (0, _styledComponents["default"])(_icons.Trash)(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  cursor: pointer;\n  color: ", ";\n  margin-left: 8px;\n"])), function (props) {
  return props.theme.fontWhiteColor;
});
var SyncedDatasetsArea = _styledComponents["default"].div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n  .side-panel-section {\n    margin-bottom: 0;\n  }\n"])));
var StyledContentTitle = _styledComponents["default"].div(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n  color: ", ";\n  margin-bottom: 8px;\n"])), function (props) {
  return props.theme.subtextColor;
});
var StyledSeparator = _styledComponents["default"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2["default"])(["\n  border-left: 1px dashed ", ";\n  height: 16px;\n  margin: 4px 0 4px 8px;\n"])), function (props) {
  return props.theme.subtextColor;
});
var StyledButton = (0, _styledComponents["default"])(_styledComponents2.Button)(_templateObject5 || (_templateObject5 = (0, _taggedTemplateLiteral2["default"])(["\n  margin-top: 2px;\n  padding: 2px;\n"])));
function getDatasetsWithTimeField(datasets) {
  var rv = {};
  for (var _i = 0, _Object$keys = Object.keys(datasets); _i < _Object$keys.length; _i++) {
    var id = _Object$keys[_i];
    // TODO: change to
    if (datasets[id].fields.some(function (f) {
      return f.type === _constants.ALL_FIELD_TYPES.timestamp;
    })) {
      rv[id] = datasets[id];
    }
  }
  return rv;
}
function getTimeFields(dataset) {
  return dataset.fields.filter(function (f) {
    return f.type === _constants.ALL_FIELD_TYPES.timestamp;
  });
}
function DatasetItemFactory(SourceSelector, FilterPanelHeader) {
  var StyledFilterPanelHeader = (0, _styledComponents["default"])(FilterPanelHeader)(_templateObject6 || (_templateObject6 = (0, _taggedTemplateLiteral2["default"])(["\n    display: flex;\n    border: none;\n    height: unset;\n    padding: 2px 0;\n    background: none;\n    align-items: baseline;\n  "])));
  var StyledSourceSelector = (0, _styledComponents["default"])(SourceSelector)(_templateObject7 || (_templateObject7 = (0, _taggedTemplateLiteral2["default"])(["\n    flex: 1;\n    -webkit-border-radius: 8px;\n    -moz-border-radius: 8px;\n    border-radius: 8px;\n    background-color: transparent;\n  "])));

  // Check if this component already exists
  var DatasetItem = function DatasetItem(_ref) {
    var dataId = _ref.dataId,
      datasets = _ref.datasets,
      supportedFields = _ref.supportedFields,
      idx = _ref.idx,
      filter = _ref.filter,
      index = _ref.index,
      onRemoveSyncedFilter = _ref.onRemoveSyncedFilter,
      filterDatasetsNum = _ref.filterDatasetsNum,
      datasetsWithTimeNum = _ref.datasetsWithTimeNum,
      onSelectSyncedDataset = _ref.onSelectSyncedDataset,
      _onFieldSelector = _ref.onFieldSelector;
    return /*#__PURE__*/_react["default"].createElement("div", null, /*#__PURE__*/_react["default"].createElement(StyledSeparator, null), /*#__PURE__*/_react["default"].createElement(StyledFilterPanelHeader, {
      datasets: [datasets[dataId]],
      allAvailableFields: supportedFields,
      idx: idx,
      filter: filter,
      removeFilter: function removeFilter() {
        return onRemoveSyncedFilter(index);
      }
    }, /*#__PURE__*/_react["default"].createElement(StyledSourceSelector, {
      datasets: datasets,
      disabled: filterDatasetsNum >= datasetsWithTimeNum,
      dataId: dataId,
      onSelectDataset: function onSelectDataset(datasetId) {
        return onSelectSyncedDataset(datasetId, index);
      },
      fields: getTimeFields(datasets[dataId]),
      fieldValue: filter.name[index],
      onFieldSelector: function onFieldSelector(field) {
        return _onFieldSelector(field, index);
      }
    })));
  };
  return DatasetItem;
}
DatasetItemFactory.deps = [_sourceSelector["default"], _filterPanelHeader["default"]];
var StyledLayerTimeline = _styledComponents["default"].div(_templateObject8 || (_templateObject8 = (0, _taggedTemplateLiteral2["default"])(["\n  display: flex;\n  align-items: center;\n"])));
var StyledLayerList = _styledComponents["default"].div(_templateObject9 || (_templateObject9 = (0, _taggedTemplateLiteral2["default"])(["\n  flex: 1;\n"])));
function LayerTimelineFactory(LayerTypeListItem) {
  var StyledLayerTypeListItem = (0, _styledComponents["default"])(LayerTypeListItem)(_templateObject10 || (_templateObject10 = (0, _taggedTemplateLiteral2["default"])(["\n    background-color: ", ";\n    padding: 4px;\n  "])), function (props) {
    return props.theme.dropdownListHighlightBg;
  });
  var LayerTimeline = function LayerTimeline(_ref2) {
    var layers = _ref2.layers,
      theme = _ref2.theme,
      onDelete = _ref2.onDelete;
    return /*#__PURE__*/_react["default"].createElement(StyledLayerTimeline, null, /*#__PURE__*/_react["default"].createElement(StyledLayerList, null, layers.map(function (layer) {
      return /*#__PURE__*/_react["default"].createElement(StyledLayerTypeListItem, {
        key: layer.id,
        value: {
          icon: layer.layerIcon,
          label: layer.name
        },
        theme: _objectSpread(_objectSpread({}, theme), {}, {
          layerTypeIconSizeSM: 24
        })
      });
    })), /*#__PURE__*/_react["default"].createElement(TrashIcon, {
      height: "12px",
      width: "12px",
      onClick: onDelete
    }));
  };
  return (0, _styledComponents.withTheme)(LayerTimeline);
}
LayerTimelineFactory.deps = [_layerTypeListItem["default"]];
function SyncedDatasetButtonFactory() {
  var SyncedDatasetButton = function SyncedDatasetButton(_ref3) {
    var onAddSyncedFilter = _ref3.onAddSyncedFilter;
    return /*#__PURE__*/_react["default"].createElement("div", null, /*#__PURE__*/_react["default"].createElement(StyledSeparator, null), /*#__PURE__*/_react["default"].createElement(_tippyTooltip["default"], {
      delay: [500, 0],
      placement: "top",
      render: function render() {
        return /*#__PURE__*/_react["default"].createElement("div", null, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
          id: 'tooltip.timeFilterSync'
        }));
      }
    }, /*#__PURE__*/_react["default"].createElement(StyledButton, {
      className: "add-sync-dataset",
      secondary: true,
      onClick: onAddSyncedFilter
    }, /*#__PURE__*/_react["default"].createElement(_icons.Add, {
      height: "12px"
    }), /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
      id: 'filterManager.timeFilterSync'
    }))));
  };
  return SyncedDatasetButton;
}
function SyncLayerTimelineButtonFactory() {
  var SyncLayerTimelineButton = function SyncLayerTimelineButton(_ref4) {
    var onSyncLayerTimeline = _ref4.onSyncLayerTimeline;
    return /*#__PURE__*/_react["default"].createElement("div", null, /*#__PURE__*/_react["default"].createElement(StyledSeparator, null), /*#__PURE__*/_react["default"].createElement(_tippyTooltip["default"], {
      delay: [500, 0],
      placement: "top",
      render: function render() {
        return /*#__PURE__*/_react["default"].createElement("div", null, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
          id: 'tooltip.timeLayerSync'
        }));
      }
    }, /*#__PURE__*/_react["default"].createElement(StyledButton, {
      className: "add-sync-dataset",
      secondary: true,
      onClick: onSyncLayerTimeline
    }, /*#__PURE__*/_react["default"].createElement(_icons.Add, {
      height: "12px"
    }), /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
      id: 'filterManager.timeLayerSync'
    }))));
  };
  return SyncLayerTimelineButton;
}
function FilterSyncedDatasetPanelFactory(DatasetItem, LayerTimeline, SourceDataSelector, SyncedDatasetButton, SyncLayerTimelineButton) {
  var FilterSyncedDatasetPanel = function FilterSyncedDatasetPanel(_ref5) {
    var datasets = _ref5.datasets,
      layers = _ref5.layers,
      filter = _ref5.filter,
      setFilter = _ref5.setFilter,
      idx = _ref5.idx,
      supportedFields = _ref5.supportedFields,
      onFieldSelector = _ref5.onFieldSelector,
      onSourceDataSelector = _ref5.onSourceDataSelector,
      syncTimeFilterWithLayerTimeline = _ref5.syncTimeFilterWithLayerTimeline;
    var datasetsWithTime = (0, _react.useMemo)(function () {
      return getDatasetsWithTimeField(datasets);
    }, [datasets]);
    var filterDatasetsNum = (0, _react.useMemo)(function () {
      return filter.dataId.length;
    }, [filter.dataId]);
    var datasetsWithTimeNum = (0, _react.useMemo)(function () {
      return Object.keys(datasetsWithTime).length;
    }, [datasetsWithTime]);
    var onRemoveSyncedFilter = (0, _react.useCallback)(function (valueIndex) {
      setFilter(idx, 'dataId', null, valueIndex);
    }, [idx, setFilter]);
    var onSelectSyncedDataset = (0, _react.useCallback)(function (datasetId, valueIndex) {
      setFilter(idx, 'dataId', datasetId, valueIndex);
    }, [setFilter, idx]);
    var onAddSyncedFilter = (0, _react.useCallback)(function () {
      var _getTimeFields;
      var nextId = Object.keys(datasetsWithTime).find(function (id) {
        return !filter.dataId.includes(id);
      });
      if (!nextId) return;
      var timeFieldNames = (_getTimeFields = getTimeFields(datasets[nextId])) === null || _getTimeFields === void 0 ? void 0 : _getTimeFields.map(function (f) {
        return f.name;
      });
      if (!timeFieldNames || timeFieldNames.length < 1) return;
      var nextName = timeFieldNames.includes(filter.name[0]) ? filter.name[0] : timeFieldNames[0];
      setFilter(idx, ['dataId', 'name'], [nextId, nextName], filter.dataId.length);
    }, [setFilter, idx, datasetsWithTime, datasets, filter.dataId, filter.name]);
    var onSyncLayerTimeline = (0, _react.useCallback)(function () {
      return syncTimeFilterWithLayerTimeline(idx, true);
    }, [syncTimeFilterWithLayerTimeline, idx]);
    var onRemoveSyncWithLayerTimeline = (0, _react.useCallback)(function () {
      return syncTimeFilterWithLayerTimeline(idx, false);
    }, [syncTimeFilterWithLayerTimeline, idx]);
    var animatableLayers = (0, _react.useMemo)(function () {
      return (0, _utils.getAnimatableVisibleLayers)(layers);
    }, [layers]);
    var isLinkedWithLayerTimeline = (0, _react.useMemo)(function () {
      return filter.syncedWithLayerTimeline;
    }, [filter]);
    return /*#__PURE__*/_react["default"].createElement(SyncedDatasetsArea, null, filter.dataId.length > 1 ? /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement(StyledContentTitle, null, "Datasets"), filter.dataId.map(function (dataId, index) {
      return /*#__PURE__*/_react["default"].createElement(DatasetItem, {
        key: dataId,
        dataId: dataId,
        index: index,
        datasets: datasets,
        supportedFields: supportedFields,
        idx: idx,
        filter: filter,
        onRemoveSyncedFilter: onRemoveSyncedFilter,
        filterDatasetsNum: filterDatasetsNum,
        datasetsWithTimeNum: datasetsWithTimeNum,
        onSelectSyncedDataset: onSelectSyncedDataset,
        onFieldSelector: onFieldSelector
      });
    })) : /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement(SourceDataSelector, {
      inputTheme: "secondary",
      datasets: datasets,
      dataId: Array.isArray(filter.dataId) ? filter.dataId[0] : filter.dataId,
      onSelect: onSourceDataSelector
    })), isLinkedWithLayerTimeline ? /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement(StyledSeparator, null), /*#__PURE__*/_react["default"].createElement(LayerTimeline, {
      layers: animatableLayers,
      onDelete: onRemoveSyncWithLayerTimeline
    })) : /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, animatableLayers.length ? /*#__PURE__*/_react["default"].createElement(SyncLayerTimelineButton, {
      onSyncLayerTimeline: onSyncLayerTimeline
    }) : null), filterDatasetsNum < datasetsWithTimeNum ? /*#__PURE__*/_react["default"].createElement(SyncedDatasetButton, {
      onAddSyncedFilter: onAddSyncedFilter
    }) : null);
  };
  FilterSyncedDatasetPanel.displayName = 'FilterSyncedDatasetPanel';
  return FilterSyncedDatasetPanel;
}
FilterSyncedDatasetPanelFactory.deps = [DatasetItemFactory, LayerTimelineFactory, _sourceDataSelector["default"], SyncedDatasetButtonFactory, SyncLayerTimelineButtonFactory];
var _default = exports["default"] = FilterSyncedDatasetPanelFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfc3R5bGVkQ29tcG9uZW50cyIsIl9sb2NhbGl6YXRpb24iLCJfY29uc3RhbnRzIiwiX3V0aWxzIiwiX3N0eWxlZENvbXBvbmVudHMyIiwiX2ljb25zIiwiX3RpcHB5VG9vbHRpcCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfZmlsdGVyUGFuZWxIZWFkZXIiLCJfc291cmNlU2VsZWN0b3IiLCJfc291cmNlRGF0YVNlbGVjdG9yIiwiX2xheWVyVHlwZUxpc3RJdGVtIiwiX3RlbXBsYXRlT2JqZWN0IiwiX3RlbXBsYXRlT2JqZWN0MiIsIl90ZW1wbGF0ZU9iamVjdDMiLCJfdGVtcGxhdGVPYmplY3Q0IiwiX3RlbXBsYXRlT2JqZWN0NSIsIl90ZW1wbGF0ZU9iamVjdDYiLCJfdGVtcGxhdGVPYmplY3Q3IiwiX3RlbXBsYXRlT2JqZWN0OCIsIl90ZW1wbGF0ZU9iamVjdDkiLCJfdGVtcGxhdGVPYmplY3QxMCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsImUiLCJXZWFrTWFwIiwiciIsInQiLCJfX2VzTW9kdWxlIiwiX3R5cGVvZiIsImhhcyIsImdldCIsIm4iLCJfX3Byb3RvX18iLCJhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJ1IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiaSIsInNldCIsIm93bktleXMiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eTIiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVmaW5lUHJvcGVydGllcyIsIlRyYXNoSWNvbiIsIlRyYXNoIiwiX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbDIiLCJwcm9wcyIsInRoZW1lIiwiZm9udFdoaXRlQ29sb3IiLCJTeW5jZWREYXRhc2V0c0FyZWEiLCJkaXYiLCJTdHlsZWRDb250ZW50VGl0bGUiLCJzdWJ0ZXh0Q29sb3IiLCJTdHlsZWRTZXBhcmF0b3IiLCJTdHlsZWRCdXR0b24iLCJCdXR0b24iLCJnZXREYXRhc2V0c1dpdGhUaW1lRmllbGQiLCJkYXRhc2V0cyIsInJ2IiwiX2kiLCJfT2JqZWN0JGtleXMiLCJpZCIsImZpZWxkcyIsInNvbWUiLCJmIiwidHlwZSIsIkFMTF9GSUVMRF9UWVBFUyIsInRpbWVzdGFtcCIsImdldFRpbWVGaWVsZHMiLCJkYXRhc2V0IiwiRGF0YXNldEl0ZW1GYWN0b3J5IiwiU291cmNlU2VsZWN0b3IiLCJGaWx0ZXJQYW5lbEhlYWRlciIsIlN0eWxlZEZpbHRlclBhbmVsSGVhZGVyIiwiU3R5bGVkU291cmNlU2VsZWN0b3IiLCJEYXRhc2V0SXRlbSIsIl9yZWYiLCJkYXRhSWQiLCJzdXBwb3J0ZWRGaWVsZHMiLCJpZHgiLCJpbmRleCIsIm9uUmVtb3ZlU3luY2VkRmlsdGVyIiwiZmlsdGVyRGF0YXNldHNOdW0iLCJkYXRhc2V0c1dpdGhUaW1lTnVtIiwib25TZWxlY3RTeW5jZWREYXRhc2V0IiwiX29uRmllbGRTZWxlY3RvciIsIm9uRmllbGRTZWxlY3RvciIsImNyZWF0ZUVsZW1lbnQiLCJhbGxBdmFpbGFibGVGaWVsZHMiLCJyZW1vdmVGaWx0ZXIiLCJkaXNhYmxlZCIsIm9uU2VsZWN0RGF0YXNldCIsImRhdGFzZXRJZCIsImZpZWxkVmFsdWUiLCJuYW1lIiwiZmllbGQiLCJkZXBzIiwiU3R5bGVkTGF5ZXJUaW1lbGluZSIsIlN0eWxlZExheWVyTGlzdCIsIkxheWVyVGltZWxpbmVGYWN0b3J5IiwiTGF5ZXJUeXBlTGlzdEl0ZW0iLCJTdHlsZWRMYXllclR5cGVMaXN0SXRlbSIsImRyb3Bkb3duTGlzdEhpZ2hsaWdodEJnIiwiTGF5ZXJUaW1lbGluZSIsIl9yZWYyIiwibGF5ZXJzIiwib25EZWxldGUiLCJtYXAiLCJsYXllciIsImtleSIsInZhbHVlIiwiaWNvbiIsImxheWVySWNvbiIsImxhYmVsIiwibGF5ZXJUeXBlSWNvblNpemVTTSIsImhlaWdodCIsIndpZHRoIiwib25DbGljayIsIndpdGhUaGVtZSIsIlN5bmNlZERhdGFzZXRCdXR0b25GYWN0b3J5IiwiU3luY2VkRGF0YXNldEJ1dHRvbiIsIl9yZWYzIiwib25BZGRTeW5jZWRGaWx0ZXIiLCJkZWxheSIsInBsYWNlbWVudCIsInJlbmRlciIsIkZvcm1hdHRlZE1lc3NhZ2UiLCJjbGFzc05hbWUiLCJzZWNvbmRhcnkiLCJBZGQiLCJTeW5jTGF5ZXJUaW1lbGluZUJ1dHRvbkZhY3RvcnkiLCJTeW5jTGF5ZXJUaW1lbGluZUJ1dHRvbiIsIl9yZWY0Iiwib25TeW5jTGF5ZXJUaW1lbGluZSIsIkZpbHRlclN5bmNlZERhdGFzZXRQYW5lbEZhY3RvcnkiLCJTb3VyY2VEYXRhU2VsZWN0b3IiLCJGaWx0ZXJTeW5jZWREYXRhc2V0UGFuZWwiLCJfcmVmNSIsInNldEZpbHRlciIsIm9uU291cmNlRGF0YVNlbGVjdG9yIiwic3luY1RpbWVGaWx0ZXJXaXRoTGF5ZXJUaW1lbGluZSIsImRhdGFzZXRzV2l0aFRpbWUiLCJ1c2VNZW1vIiwidXNlQ2FsbGJhY2siLCJ2YWx1ZUluZGV4IiwiX2dldFRpbWVGaWVsZHMiLCJuZXh0SWQiLCJmaW5kIiwiaW5jbHVkZXMiLCJ0aW1lRmllbGROYW1lcyIsIm5leHROYW1lIiwib25SZW1vdmVTeW5jV2l0aExheWVyVGltZWxpbmUiLCJhbmltYXRhYmxlTGF5ZXJzIiwiZ2V0QW5pbWF0YWJsZVZpc2libGVMYXllcnMiLCJpc0xpbmtlZFdpdGhMYXllclRpbWVsaW5lIiwic3luY2VkV2l0aExheWVyVGltZWxpbmUiLCJGcmFnbWVudCIsImlucHV0VGhlbWUiLCJBcnJheSIsImlzQXJyYXkiLCJvblNlbGVjdCIsImRpc3BsYXlOYW1lIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2ZpbHRlcnMvZmlsdGVyLXBhbmVscy9maWx0ZXItc3luY2VkLWRhdGFzZXQtcGFuZWwudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBNSVRcbi8vIENvcHlyaWdodCBjb250cmlidXRvcnMgdG8gdGhlIGtlcGxlci5nbCBwcm9qZWN0XG5cbmltcG9ydCBSZWFjdCwge3VzZUNhbGxiYWNrLCB1c2VNZW1vfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc3R5bGVkLCB7d2l0aFRoZW1lfSBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5cbmltcG9ydCB7Rm9ybWF0dGVkTWVzc2FnZX0gZnJvbSAnQGtlcGxlci5nbC9sb2NhbGl6YXRpb24nO1xuaW1wb3J0IHtBTExfRklFTERfVFlQRVN9IGZyb20gJ0BrZXBsZXIuZ2wvY29uc3RhbnRzJztcbmltcG9ydCB7Z2V0QW5pbWF0YWJsZVZpc2libGVMYXllcnN9IGZyb20gJ0BrZXBsZXIuZ2wvdXRpbHMnO1xuXG5pbXBvcnQge0J1dHRvbn0gZnJvbSAnLi4vLi4vY29tbW9uL3N0eWxlZC1jb21wb25lbnRzJztcbmltcG9ydCB7QWRkLCBUcmFzaH0gZnJvbSAnLi4vLi4vY29tbW9uL2ljb25zJztcbmltcG9ydCBUaXBweVRvb2x0aXAgZnJvbSAnLi4vLi4vY29tbW9uL3RpcHB5LXRvb2x0aXAnO1xuaW1wb3J0IEZpbHRlclBhbmVsSGVhZGVyRmFjdG9yeSBmcm9tICcuLi8uLi9zaWRlLXBhbmVsL2ZpbHRlci1wYW5lbC9maWx0ZXItcGFuZWwtaGVhZGVyJztcbmltcG9ydCBTb3VyY2VTZWxlY3RvckZhY3RvcnkgZnJvbSAnLi4vLi4vc2lkZS1wYW5lbC9jb21tb24vc291cmNlLXNlbGVjdG9yJztcbmltcG9ydCBTb3VyY2VEYXRhU2VsZWN0b3JGYWN0b3J5IGZyb20gJy4uLy4uL3NpZGUtcGFuZWwvY29tbW9uL3NvdXJjZS1kYXRhLXNlbGVjdG9yJztcbmltcG9ydCBMYXllclR5cGVMaXN0SXRlbUZhY3RvcnkgZnJvbSAnLi4vLi4vc2lkZS1wYW5lbC9sYXllci1wYW5lbC9sYXllci10eXBlLWxpc3QtaXRlbSc7XG5cbmNvbnN0IFRyYXNoSWNvbiA9IHN0eWxlZChUcmFzaClgXG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuZm9udFdoaXRlQ29sb3J9O1xuICBtYXJnaW4tbGVmdDogOHB4O1xuYDtcblxuY29uc3QgU3luY2VkRGF0YXNldHNBcmVhID0gc3R5bGVkLmRpdmBcbiAgLnNpZGUtcGFuZWwtc2VjdGlvbiB7XG4gICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgfVxuYDtcblxuY29uc3QgU3R5bGVkQ29udGVudFRpdGxlID0gc3R5bGVkLmRpdmBcbiAgY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuc3VidGV4dENvbG9yfTtcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xuYDtcblxuY29uc3QgU3R5bGVkU2VwYXJhdG9yID0gc3R5bGVkLmRpdmBcbiAgYm9yZGVyLWxlZnQ6IDFweCBkYXNoZWQgJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5zdWJ0ZXh0Q29sb3J9O1xuICBoZWlnaHQ6IDE2cHg7XG4gIG1hcmdpbjogNHB4IDAgNHB4IDhweDtcbmA7XG5cbmNvbnN0IFN0eWxlZEJ1dHRvbiA9IHN0eWxlZChCdXR0b24pYFxuICBtYXJnaW4tdG9wOiAycHg7XG4gIHBhZGRpbmc6IDJweDtcbmA7XG5cbmZ1bmN0aW9uIGdldERhdGFzZXRzV2l0aFRpbWVGaWVsZChkYXRhc2V0cykge1xuICBjb25zdCBydiA9IHt9O1xuICBmb3IgKGNvbnN0IGlkIG9mIE9iamVjdC5rZXlzKGRhdGFzZXRzKSkge1xuICAgIC8vIFRPRE86IGNoYW5nZSB0b1xuICAgIGlmIChkYXRhc2V0c1tpZF0uZmllbGRzLnNvbWUoZiA9PiBmLnR5cGUgPT09IEFMTF9GSUVMRF9UWVBFUy50aW1lc3RhbXApKSB7XG4gICAgICBydltpZF0gPSBkYXRhc2V0c1tpZF07XG4gICAgfVxuICB9XG4gIHJldHVybiBydjtcbn1cblxuZnVuY3Rpb24gZ2V0VGltZUZpZWxkcyhkYXRhc2V0KSB7XG4gIHJldHVybiBkYXRhc2V0LmZpZWxkcy5maWx0ZXIoZiA9PiBmLnR5cGUgPT09IEFMTF9GSUVMRF9UWVBFUy50aW1lc3RhbXApO1xufVxuXG5mdW5jdGlvbiBEYXRhc2V0SXRlbUZhY3RvcnkoU291cmNlU2VsZWN0b3IsIEZpbHRlclBhbmVsSGVhZGVyKSB7XG4gIGNvbnN0IFN0eWxlZEZpbHRlclBhbmVsSGVhZGVyID0gc3R5bGVkKEZpbHRlclBhbmVsSGVhZGVyKWBcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBoZWlnaHQ6IHVuc2V0O1xuICAgIHBhZGRpbmc6IDJweCAwO1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgYWxpZ24taXRlbXM6IGJhc2VsaW5lO1xuICBgO1xuXG4gIGNvbnN0IFN0eWxlZFNvdXJjZVNlbGVjdG9yID0gc3R5bGVkKFNvdXJjZVNlbGVjdG9yKWBcbiAgICBmbGV4OiAxO1xuICAgIC13ZWJraXQtYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIC1tb3otYm9yZGVyLXJhZGl1czogOHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgYDtcblxuICAvLyBDaGVjayBpZiB0aGlzIGNvbXBvbmVudCBhbHJlYWR5IGV4aXN0c1xuICBjb25zdCBEYXRhc2V0SXRlbSA9ICh7XG4gICAgZGF0YUlkLFxuICAgIGRhdGFzZXRzLFxuICAgIHN1cHBvcnRlZEZpZWxkcyxcbiAgICBpZHgsXG4gICAgZmlsdGVyLFxuICAgIGluZGV4LFxuICAgIG9uUmVtb3ZlU3luY2VkRmlsdGVyLFxuICAgIGZpbHRlckRhdGFzZXRzTnVtLFxuICAgIGRhdGFzZXRzV2l0aFRpbWVOdW0sXG4gICAgb25TZWxlY3RTeW5jZWREYXRhc2V0LFxuICAgIG9uRmllbGRTZWxlY3RvclxuICB9KSA9PiAoXG4gICAgPGRpdj5cbiAgICAgIDxTdHlsZWRTZXBhcmF0b3IgLz5cbiAgICAgIDxTdHlsZWRGaWx0ZXJQYW5lbEhlYWRlclxuICAgICAgICBkYXRhc2V0cz17W2RhdGFzZXRzW2RhdGFJZF1dfVxuICAgICAgICBhbGxBdmFpbGFibGVGaWVsZHM9e3N1cHBvcnRlZEZpZWxkc31cbiAgICAgICAgaWR4PXtpZHh9XG4gICAgICAgIGZpbHRlcj17ZmlsdGVyfVxuICAgICAgICByZW1vdmVGaWx0ZXI9eygpID0+IG9uUmVtb3ZlU3luY2VkRmlsdGVyKGluZGV4KX1cbiAgICAgID5cbiAgICAgICAgPFN0eWxlZFNvdXJjZVNlbGVjdG9yXG4gICAgICAgICAgZGF0YXNldHM9e2RhdGFzZXRzfVxuICAgICAgICAgIGRpc2FibGVkPXtmaWx0ZXJEYXRhc2V0c051bSA+PSBkYXRhc2V0c1dpdGhUaW1lTnVtfVxuICAgICAgICAgIGRhdGFJZD17ZGF0YUlkfVxuICAgICAgICAgIG9uU2VsZWN0RGF0YXNldD17ZGF0YXNldElkID0+IG9uU2VsZWN0U3luY2VkRGF0YXNldChkYXRhc2V0SWQsIGluZGV4KX1cbiAgICAgICAgICBmaWVsZHM9e2dldFRpbWVGaWVsZHMoZGF0YXNldHNbZGF0YUlkXSl9XG4gICAgICAgICAgZmllbGRWYWx1ZT17ZmlsdGVyLm5hbWVbaW5kZXhdfVxuICAgICAgICAgIG9uRmllbGRTZWxlY3Rvcj17ZmllbGQgPT4gb25GaWVsZFNlbGVjdG9yKGZpZWxkLCBpbmRleCl9XG4gICAgICAgIC8+XG4gICAgICA8L1N0eWxlZEZpbHRlclBhbmVsSGVhZGVyPlxuICAgIDwvZGl2PlxuICApO1xuXG4gIHJldHVybiBEYXRhc2V0SXRlbTtcbn1cblxuRGF0YXNldEl0ZW1GYWN0b3J5LmRlcHMgPSBbU291cmNlU2VsZWN0b3JGYWN0b3J5LCBGaWx0ZXJQYW5lbEhlYWRlckZhY3RvcnldO1xuXG5jb25zdCBTdHlsZWRMYXllclRpbWVsaW5lID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbmA7XG5cbmNvbnN0IFN0eWxlZExheWVyTGlzdCA9IHN0eWxlZC5kaXZgXG4gIGZsZXg6IDE7XG5gO1xuXG5mdW5jdGlvbiBMYXllclRpbWVsaW5lRmFjdG9yeShMYXllclR5cGVMaXN0SXRlbSkge1xuICBjb25zdCBTdHlsZWRMYXllclR5cGVMaXN0SXRlbSA9IHN0eWxlZChMYXllclR5cGVMaXN0SXRlbSlgXG4gICAgYmFja2dyb3VuZC1jb2xvcjogJHtwcm9wcyA9PiBwcm9wcy50aGVtZS5kcm9wZG93bkxpc3RIaWdobGlnaHRCZ307XG4gICAgcGFkZGluZzogNHB4O1xuICBgO1xuXG4gIGNvbnN0IExheWVyVGltZWxpbmUgPSAoe2xheWVycywgdGhlbWUsIG9uRGVsZXRlfSkgPT4gKFxuICAgIDxTdHlsZWRMYXllclRpbWVsaW5lPlxuICAgICAgPFN0eWxlZExheWVyTGlzdD5cbiAgICAgICAge2xheWVycy5tYXAobGF5ZXIgPT4gKFxuICAgICAgICAgIDxTdHlsZWRMYXllclR5cGVMaXN0SXRlbVxuICAgICAgICAgICAga2V5PXtsYXllci5pZH1cbiAgICAgICAgICAgIHZhbHVlPXt7aWNvbjogbGF5ZXIubGF5ZXJJY29uLCBsYWJlbDogbGF5ZXIubmFtZX19XG4gICAgICAgICAgICB0aGVtZT17ey4uLnRoZW1lLCBsYXllclR5cGVJY29uU2l6ZVNNOiAyNH19XG4gICAgICAgICAgLz5cbiAgICAgICAgKSl9XG4gICAgICA8L1N0eWxlZExheWVyTGlzdD5cbiAgICAgIDxUcmFzaEljb24gaGVpZ2h0PVwiMTJweFwiIHdpZHRoPVwiMTJweFwiIG9uQ2xpY2s9e29uRGVsZXRlfSAvPlxuICAgIDwvU3R5bGVkTGF5ZXJUaW1lbGluZT5cbiAgKTtcblxuICByZXR1cm4gd2l0aFRoZW1lKExheWVyVGltZWxpbmUpO1xufVxuXG5MYXllclRpbWVsaW5lRmFjdG9yeS5kZXBzID0gW0xheWVyVHlwZUxpc3RJdGVtRmFjdG9yeV07XG5cbmZ1bmN0aW9uIFN5bmNlZERhdGFzZXRCdXR0b25GYWN0b3J5KCkge1xuICBjb25zdCBTeW5jZWREYXRhc2V0QnV0dG9uID0gKHtvbkFkZFN5bmNlZEZpbHRlcn0pID0+IChcbiAgICA8ZGl2PlxuICAgICAgPFN0eWxlZFNlcGFyYXRvciAvPlxuICAgICAgPFRpcHB5VG9vbHRpcFxuICAgICAgICBkZWxheT17WzUwMCwgMF19XG4gICAgICAgIHBsYWNlbWVudD1cInRvcFwiXG4gICAgICAgIHJlbmRlcj17KCkgPT4gKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD17J3Rvb2x0aXAudGltZUZpbHRlclN5bmMnfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICA8U3R5bGVkQnV0dG9uIGNsYXNzTmFtZT1cImFkZC1zeW5jLWRhdGFzZXRcIiBzZWNvbmRhcnk9e3RydWV9IG9uQ2xpY2s9e29uQWRkU3luY2VkRmlsdGVyfT5cbiAgICAgICAgICA8QWRkIGhlaWdodD1cIjEycHhcIiAvPlxuICAgICAgICAgIDxGb3JtYXR0ZWRNZXNzYWdlIGlkPXsnZmlsdGVyTWFuYWdlci50aW1lRmlsdGVyU3luYyd9IC8+XG4gICAgICAgIDwvU3R5bGVkQnV0dG9uPlxuICAgICAgPC9UaXBweVRvb2x0aXA+XG4gICAgPC9kaXY+XG4gICk7XG5cbiAgcmV0dXJuIFN5bmNlZERhdGFzZXRCdXR0b247XG59XG5cbmZ1bmN0aW9uIFN5bmNMYXllclRpbWVsaW5lQnV0dG9uRmFjdG9yeSgpIHtcbiAgY29uc3QgU3luY0xheWVyVGltZWxpbmVCdXR0b24gPSAoe29uU3luY0xheWVyVGltZWxpbmV9KSA9PiAoXG4gICAgPGRpdj5cbiAgICAgIDxTdHlsZWRTZXBhcmF0b3IgLz5cbiAgICAgIDxUaXBweVRvb2x0aXBcbiAgICAgICAgZGVsYXk9e1s1MDAsIDBdfVxuICAgICAgICBwbGFjZW1lbnQ9XCJ0b3BcIlxuICAgICAgICByZW5kZXI9eygpID0+IChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9eyd0b29sdGlwLnRpbWVMYXllclN5bmMnfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPlxuICAgICAgICA8U3R5bGVkQnV0dG9uIGNsYXNzTmFtZT1cImFkZC1zeW5jLWRhdGFzZXRcIiBzZWNvbmRhcnk9e3RydWV9IG9uQ2xpY2s9e29uU3luY0xheWVyVGltZWxpbmV9PlxuICAgICAgICAgIDxBZGQgaGVpZ2h0PVwiMTJweFwiIC8+XG4gICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9eydmaWx0ZXJNYW5hZ2VyLnRpbWVMYXllclN5bmMnfSAvPlxuICAgICAgICA8L1N0eWxlZEJ1dHRvbj5cbiAgICAgIDwvVGlwcHlUb29sdGlwPlxuICAgIDwvZGl2PlxuICApO1xuXG4gIHJldHVybiBTeW5jTGF5ZXJUaW1lbGluZUJ1dHRvbjtcbn1cblxuZnVuY3Rpb24gRmlsdGVyU3luY2VkRGF0YXNldFBhbmVsRmFjdG9yeShcbiAgRGF0YXNldEl0ZW0sXG4gIExheWVyVGltZWxpbmUsXG4gIFNvdXJjZURhdGFTZWxlY3RvcixcbiAgU3luY2VkRGF0YXNldEJ1dHRvbixcbiAgU3luY0xheWVyVGltZWxpbmVCdXR0b25cbikge1xuICBjb25zdCBGaWx0ZXJTeW5jZWREYXRhc2V0UGFuZWwgPSAoe1xuICAgIGRhdGFzZXRzLFxuICAgIGxheWVycyxcbiAgICBmaWx0ZXIsXG4gICAgc2V0RmlsdGVyLFxuICAgIGlkeCxcbiAgICBzdXBwb3J0ZWRGaWVsZHMsXG4gICAgb25GaWVsZFNlbGVjdG9yLFxuICAgIG9uU291cmNlRGF0YVNlbGVjdG9yLFxuICAgIHN5bmNUaW1lRmlsdGVyV2l0aExheWVyVGltZWxpbmVcbiAgfSkgPT4ge1xuICAgIGNvbnN0IGRhdGFzZXRzV2l0aFRpbWUgPSB1c2VNZW1vKCgpID0+IGdldERhdGFzZXRzV2l0aFRpbWVGaWVsZChkYXRhc2V0cyksIFtkYXRhc2V0c10pO1xuICAgIGNvbnN0IGZpbHRlckRhdGFzZXRzTnVtID0gdXNlTWVtbygoKSA9PiBmaWx0ZXIuZGF0YUlkLmxlbmd0aCwgW2ZpbHRlci5kYXRhSWRdKTtcbiAgICBjb25zdCBkYXRhc2V0c1dpdGhUaW1lTnVtID0gdXNlTWVtbyhcbiAgICAgICgpID0+IE9iamVjdC5rZXlzKGRhdGFzZXRzV2l0aFRpbWUpLmxlbmd0aCxcbiAgICAgIFtkYXRhc2V0c1dpdGhUaW1lXVxuICAgICk7XG5cbiAgICBjb25zdCBvblJlbW92ZVN5bmNlZEZpbHRlciA9IHVzZUNhbGxiYWNrKFxuICAgICAgdmFsdWVJbmRleCA9PiB7XG4gICAgICAgIHNldEZpbHRlcihpZHgsICdkYXRhSWQnLCBudWxsLCB2YWx1ZUluZGV4KTtcbiAgICAgIH0sXG4gICAgICBbaWR4LCBzZXRGaWx0ZXJdXG4gICAgKTtcblxuICAgIGNvbnN0IG9uU2VsZWN0U3luY2VkRGF0YXNldCA9IHVzZUNhbGxiYWNrKFxuICAgICAgKGRhdGFzZXRJZCwgdmFsdWVJbmRleCkgPT4ge1xuICAgICAgICBzZXRGaWx0ZXIoaWR4LCAnZGF0YUlkJywgZGF0YXNldElkLCB2YWx1ZUluZGV4KTtcbiAgICAgIH0sXG4gICAgICBbc2V0RmlsdGVyLCBpZHhdXG4gICAgKTtcblxuICAgIGNvbnN0IG9uQWRkU3luY2VkRmlsdGVyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgICAgY29uc3QgbmV4dElkID0gT2JqZWN0LmtleXMoZGF0YXNldHNXaXRoVGltZSkuZmluZChpZCA9PiAhZmlsdGVyLmRhdGFJZC5pbmNsdWRlcyhpZCkpO1xuICAgICAgaWYgKCFuZXh0SWQpIHJldHVybjtcbiAgICAgIGNvbnN0IHRpbWVGaWVsZE5hbWVzID0gZ2V0VGltZUZpZWxkcyhkYXRhc2V0c1tuZXh0SWRdKT8ubWFwKGYgPT4gZi5uYW1lKTtcbiAgICAgIGlmICghdGltZUZpZWxkTmFtZXMgfHwgdGltZUZpZWxkTmFtZXMubGVuZ3RoIDwgMSkgcmV0dXJuO1xuICAgICAgY29uc3QgbmV4dE5hbWUgPSB0aW1lRmllbGROYW1lcy5pbmNsdWRlcyhmaWx0ZXIubmFtZVswXSkgPyBmaWx0ZXIubmFtZVswXSA6IHRpbWVGaWVsZE5hbWVzWzBdO1xuICAgICAgc2V0RmlsdGVyKGlkeCwgWydkYXRhSWQnLCAnbmFtZSddLCBbbmV4dElkLCBuZXh0TmFtZV0sIGZpbHRlci5kYXRhSWQubGVuZ3RoKTtcbiAgICB9LCBbc2V0RmlsdGVyLCBpZHgsIGRhdGFzZXRzV2l0aFRpbWUsIGRhdGFzZXRzLCBmaWx0ZXIuZGF0YUlkLCBmaWx0ZXIubmFtZV0pO1xuXG4gICAgY29uc3Qgb25TeW5jTGF5ZXJUaW1lbGluZSA9IHVzZUNhbGxiYWNrKFxuICAgICAgKCkgPT4gc3luY1RpbWVGaWx0ZXJXaXRoTGF5ZXJUaW1lbGluZShpZHgsIHRydWUpLFxuICAgICAgW3N5bmNUaW1lRmlsdGVyV2l0aExheWVyVGltZWxpbmUsIGlkeF1cbiAgICApO1xuXG4gICAgY29uc3Qgb25SZW1vdmVTeW5jV2l0aExheWVyVGltZWxpbmUgPSB1c2VDYWxsYmFjayhcbiAgICAgICgpID0+IHN5bmNUaW1lRmlsdGVyV2l0aExheWVyVGltZWxpbmUoaWR4LCBmYWxzZSksXG4gICAgICBbc3luY1RpbWVGaWx0ZXJXaXRoTGF5ZXJUaW1lbGluZSwgaWR4XVxuICAgICk7XG5cbiAgICBjb25zdCBhbmltYXRhYmxlTGF5ZXJzID0gdXNlTWVtbygoKSA9PiBnZXRBbmltYXRhYmxlVmlzaWJsZUxheWVycyhsYXllcnMpLCBbbGF5ZXJzXSk7XG5cbiAgICBjb25zdCBpc0xpbmtlZFdpdGhMYXllclRpbWVsaW5lID0gdXNlTWVtbygoKSA9PiBmaWx0ZXIuc3luY2VkV2l0aExheWVyVGltZWxpbmUsIFtmaWx0ZXJdKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8U3luY2VkRGF0YXNldHNBcmVhPlxuICAgICAgICB7ZmlsdGVyLmRhdGFJZC5sZW5ndGggPiAxID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8U3R5bGVkQ29udGVudFRpdGxlPkRhdGFzZXRzPC9TdHlsZWRDb250ZW50VGl0bGU+XG4gICAgICAgICAgICB7ZmlsdGVyLmRhdGFJZC5tYXAoKGRhdGFJZCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8RGF0YXNldEl0ZW1cbiAgICAgICAgICAgICAgICAgIGtleT17ZGF0YUlkfVxuICAgICAgICAgICAgICAgICAgZGF0YUlkPXtkYXRhSWR9XG4gICAgICAgICAgICAgICAgICBpbmRleD17aW5kZXh9XG4gICAgICAgICAgICAgICAgICBkYXRhc2V0cz17ZGF0YXNldHN9XG4gICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRGaWVsZHM9e3N1cHBvcnRlZEZpZWxkc31cbiAgICAgICAgICAgICAgICAgIGlkeD17aWR4fVxuICAgICAgICAgICAgICAgICAgZmlsdGVyPXtmaWx0ZXJ9XG4gICAgICAgICAgICAgICAgICBvblJlbW92ZVN5bmNlZEZpbHRlcj17b25SZW1vdmVTeW5jZWRGaWx0ZXJ9XG4gICAgICAgICAgICAgICAgICBmaWx0ZXJEYXRhc2V0c051bT17ZmlsdGVyRGF0YXNldHNOdW19XG4gICAgICAgICAgICAgICAgICBkYXRhc2V0c1dpdGhUaW1lTnVtPXtkYXRhc2V0c1dpdGhUaW1lTnVtfVxuICAgICAgICAgICAgICAgICAgb25TZWxlY3RTeW5jZWREYXRhc2V0PXtvblNlbGVjdFN5bmNlZERhdGFzZXR9XG4gICAgICAgICAgICAgICAgICBvbkZpZWxkU2VsZWN0b3I9e29uRmllbGRTZWxlY3Rvcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIDxTb3VyY2VEYXRhU2VsZWN0b3JcbiAgICAgICAgICAgICAgaW5wdXRUaGVtZT1cInNlY29uZGFyeVwiXG4gICAgICAgICAgICAgIGRhdGFzZXRzPXtkYXRhc2V0c31cbiAgICAgICAgICAgICAgZGF0YUlkPXtBcnJheS5pc0FycmF5KGZpbHRlci5kYXRhSWQpID8gZmlsdGVyLmRhdGFJZFswXSA6IGZpbHRlci5kYXRhSWR9XG4gICAgICAgICAgICAgIG9uU2VsZWN0PXtvblNvdXJjZURhdGFTZWxlY3Rvcn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICl9XG4gICAgICAgIHsvKiogc3luYyB3aXRoIGFuaW1hdGFibGUgbGF5ZXJzICovfVxuICAgICAgICB7aXNMaW5rZWRXaXRoTGF5ZXJUaW1lbGluZSA/IChcbiAgICAgICAgICA8PlxuICAgICAgICAgICAgPFN0eWxlZFNlcGFyYXRvciAvPlxuICAgICAgICAgICAgPExheWVyVGltZWxpbmUgbGF5ZXJzPXthbmltYXRhYmxlTGF5ZXJzfSBvbkRlbGV0ZT17b25SZW1vdmVTeW5jV2l0aExheWVyVGltZWxpbmV9IC8+XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHthbmltYXRhYmxlTGF5ZXJzLmxlbmd0aCA/IChcbiAgICAgICAgICAgICAgPFN5bmNMYXllclRpbWVsaW5lQnV0dG9uIG9uU3luY0xheWVyVGltZWxpbmU9e29uU3luY0xheWVyVGltZWxpbmV9IC8+XG4gICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cbiAgICAgICAge2ZpbHRlckRhdGFzZXRzTnVtIDwgZGF0YXNldHNXaXRoVGltZU51bSA/IChcbiAgICAgICAgICA8U3luY2VkRGF0YXNldEJ1dHRvbiBvbkFkZFN5bmNlZEZpbHRlcj17b25BZGRTeW5jZWRGaWx0ZXJ9IC8+XG4gICAgICAgICkgOiBudWxsfVxuICAgICAgPC9TeW5jZWREYXRhc2V0c0FyZWE+XG4gICAgKTtcbiAgfTtcblxuICBGaWx0ZXJTeW5jZWREYXRhc2V0UGFuZWwuZGlzcGxheU5hbWUgPSAnRmlsdGVyU3luY2VkRGF0YXNldFBhbmVsJztcblxuICByZXR1cm4gRmlsdGVyU3luY2VkRGF0YXNldFBhbmVsO1xufVxuXG5GaWx0ZXJTeW5jZWREYXRhc2V0UGFuZWxGYWN0b3J5LmRlcHMgPSBbXG4gIERhdGFzZXRJdGVtRmFjdG9yeSxcbiAgTGF5ZXJUaW1lbGluZUZhY3RvcnksXG4gIFNvdXJjZURhdGFTZWxlY3RvckZhY3RvcnksXG4gIFN5bmNlZERhdGFzZXRCdXR0b25GYWN0b3J5LFxuICBTeW5jTGF5ZXJUaW1lbGluZUJ1dHRvbkZhY3Rvcnlcbl07XG5cbmV4cG9ydCBkZWZhdWx0IEZpbHRlclN5bmNlZERhdGFzZXRQYW5lbEZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFHQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxpQkFBQSxHQUFBRix1QkFBQSxDQUFBQyxPQUFBO0FBRUEsSUFBQUUsYUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsVUFBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksTUFBQSxHQUFBSixPQUFBO0FBRUEsSUFBQUssa0JBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLE1BQUEsR0FBQU4sT0FBQTtBQUNBLElBQUFPLGFBQUEsR0FBQUMsc0JBQUEsQ0FBQVIsT0FBQTtBQUNBLElBQUFTLGtCQUFBLEdBQUFELHNCQUFBLENBQUFSLE9BQUE7QUFDQSxJQUFBVSxlQUFBLEdBQUFGLHNCQUFBLENBQUFSLE9BQUE7QUFDQSxJQUFBVyxtQkFBQSxHQUFBSCxzQkFBQSxDQUFBUixPQUFBO0FBQ0EsSUFBQVksa0JBQUEsR0FBQUosc0JBQUEsQ0FBQVIsT0FBQTtBQUF5RixJQUFBYSxlQUFBLEVBQUFDLGdCQUFBLEVBQUFDLGdCQUFBLEVBQUFDLGdCQUFBLEVBQUFDLGdCQUFBLEVBQUFDLGdCQUFBLEVBQUFDLGdCQUFBLEVBQUFDLGdCQUFBLEVBQUFDLGdCQUFBLEVBQUFDLGlCQUFBLEVBaEJ6RjtBQUNBO0FBQUEsU0FBQUMseUJBQUFDLENBQUE7RUFBQSx5QkFBQUMsT0FBQTtFQUFBLElBQUFDLENBQUEsT0FBQUQsT0FBQTtJQUFB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Q0FBQyxDQUNELENBQUMsZ0JBRUh2RyxNQUFBLFlBQUF3RyxhQUFBLENBQUF4RyxNQUFBLFlBQUE2SyxRQUFBLHFCQUNFN0ssTUFBQSxZQUFBd0csYUFBQSxDQUFDZ0Qsa0JBQWtCO01BQ2pCc0IsVUFBVSxFQUFDLFdBQVc7TUFDdEJwRyxRQUFRLEVBQUVBLFFBQVM7TUFDbkJvQixNQUFNLEVBQUVpRixLQUFLLENBQUNDLE9BQU8sQ0FBQy9ILE1BQU0sQ0FBQzZDLE1BQU0sQ0FBQyxHQUFHN0MsTUFBTSxDQUFDNkMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHN0MsTUFBTSxDQUFDNkMsTUFBTztNQUN4RW1GLFFBQVEsRUFBRXJCO0lBQXFCLENBQ2hDLENBQ0QsQ0FDSCxFQUVBZSx5QkFBeUIsZ0JBQ3hCM0ssTUFBQSxZQUFBd0csYUFBQSxDQUFBeEcsTUFBQSxZQUFBNkssUUFBQSxxQkFDRTdLLE1BQUEsWUFBQXdHLGFBQUEsQ0FBQ2xDLGVBQWUsTUFBRSxDQUFDLGVBQ25CdEUsTUFBQSxZQUFBd0csYUFBQSxDQUFDZ0IsYUFBYTtNQUFDRSxNQUFNLEVBQUUrQyxnQkFBaUI7TUFBQzlDLFFBQVEsRUFBRTZDO0lBQThCLENBQUUsQ0FDbkYsQ0FBQyxnQkFFSHhLLE1BQUEsWUFBQXdHLGFBQUEsQ0FBQXhHLE1BQUEsWUFBQTZLLFFBQUEsUUFDR0osZ0JBQWdCLENBQUNsSCxNQUFNLGdCQUN0QnZELE1BQUEsWUFBQXdHLGFBQUEsQ0FBQzRDLHVCQUF1QjtNQUFDRSxtQkFBbUIsRUFBRUE7SUFBb0IsQ0FBRSxDQUFDLEdBQ25FLElBQ0osQ0FDSCxFQUNBbkQsaUJBQWlCLEdBQUdDLG1CQUFtQixnQkFDdENwRyxNQUFBLFlBQUF3RyxhQUFBLENBQUNpQyxtQkFBbUI7TUFBQ0UsaUJBQWlCLEVBQUVBO0lBQWtCLENBQUUsQ0FBQyxHQUMzRCxJQUNjLENBQUM7RUFFekIsQ0FBQztFQUVEYyx3QkFBd0IsQ0FBQ3lCLFdBQVcsR0FBRywwQkFBMEI7RUFFakUsT0FBT3pCLHdCQUF3QjtBQUNqQztBQUVBRiwrQkFBK0IsQ0FBQ3RDLElBQUksR0FBRyxDQUNyQzFCLGtCQUFrQixFQUNsQjZCLG9CQUFvQixFQUNwQnZHLG1CQUFBLFdBQXlCLEVBQ3pCMkgsMEJBQTBCLEVBQzFCVyw4QkFBOEIsQ0FDL0I7QUFBQyxJQUFBZ0MsUUFBQSxHQUFBQyxPQUFBLGNBRWE3QiwrQkFBK0IiLCJpZ25vcmVMaXN0IjpbXX0=