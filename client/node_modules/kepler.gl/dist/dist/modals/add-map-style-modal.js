"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _typeof = require("@babel/runtime/helpers/typeof");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _taggedTemplateLiteral2 = _interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteral"));
var _react = _interopRequireWildcard(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react"));
var _reactLifecyclesCompat = require("react-lifecycles-compat");
var _classnames = _interopRequireDefault(require("classnames"));
var _styledComponents = _interopRequireDefault(require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/styled-components"));
var _reactMapGl = require("react-map-gl");
var _styledComponents2 = require("../common/styled-components");
var _styles = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/styles/src");
var _utils = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/utils/src");
var _reactIntl = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/node_modules/react-intl");
var _localization = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/localization/src");
var _constants = require("/Users/ihordykhta/Desktop/unfolded/kepler.gl/src/constants/src");
var _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5; // SPDX-License-Identifier: MIT
// Copyright contributors to the kepler.gl project
// Utils
function _getRequireWildcardCache(e) {
  if ("function" != typeof WeakMap) return null;
  var r = new WeakMap(),
    t = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {
    return e ? t : r;
  })(e);
}
function _interopRequireWildcard(e, r) {
  if (!r && e && e.__esModule) return e;
  if (null === e || "object" != _typeof(e) && "function" != typeof e) return {
    "default": e
  };
  var t = _getRequireWildcardCache(r);
  if (t && t.has(e)) return t.get(e);
  var n = {
      __proto__: null
    },
    a = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var u in e) if ("default" !== u && {}.hasOwnProperty.call(e, u)) {
    var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;
    i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];
  }
  return n["default"] = e, t && t.set(e, n), n;
}
function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      (0, _defineProperty2["default"])(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
}
function _callSuper(t, o, e) {
  return o = (0, _getPrototypeOf2["default"])(o), (0, _possibleConstructorReturn2["default"])(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], (0, _getPrototypeOf2["default"])(t).constructor) : o.apply(t, e));
}
function _isNativeReflectConstruct() {
  try {
    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
  } catch (t) {}
  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {
    return !!t;
  })();
}
var MapH = 190;
var MapW = 264;
var ErrorMsg = {
  styleError: 'Failed to load map style, make sure it is published. For private style, paste in your access token.'
};
var PreviewMap = _styledComponents["default"].div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2["default"])(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-left: 116px;\n  flex-shrink: 0;\n\n  .preview-title {\n    font-weight: 500;\n    font-size: 10px;\n    padding: 8px 0px;\n  }\n\n  .preview-title.error {\n    color: ", ";\n    max-width: 250px;\n  }\n\n  ", ";\n\n  ", ";\n"])), function (props) {
  return props.theme.errorColor;
}, _styles.media.portable(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2["default"])(["\n    margin-left: 32px;\n  "]))), _styles.media.palm(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2["default"])(["\n    margin-left: unset;\n    .preview-title {\n      margin-top: 0px;\n    }\n  "]))));
var StyledPreviewImage = _styledComponents["default"].div(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2["default"])(["\n  background: ", ";\n  border-radius: 4px;\n  box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.18);\n  width: ", "px;\n  height: ", "px;\n  position: relative;\n\n  .preview-image-placeholder {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n\n  .preview-image-spinner {\n    position: absolute;\n    left: calc(50% - 25px);\n    top: calc(50% - 25px);\n  }\n"])), function (props) {
  return props.theme.modalImagePlaceHolder;
}, MapW, MapH);
var InlineLink = _styledComponents["default"].a(_templateObject5 || (_templateObject5 = (0, _taggedTemplateLiteral2["default"])(["\n  font-weight: 500;\n\n  &:hover {\n    cursor: pointer;\n  }\n"])));
var nop = function nop() {
  return;
};
function AddMapStyleModalFactory() {
  var AddMapStyleModal = /*#__PURE__*/function (_Component) {
    function AddMapStyleModal() {
      var _this;
      (0, _classCallCheck2["default"])(this, AddMapStyleModal);
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }
      _this = _callSuper(this, AddMapStyleModal, [].concat(args));
      (0, _defineProperty2["default"])(_this, "state", {
        reRenderKey: 0,
        previousToken: null
      });
      (0, _defineProperty2["default"])(_this, "_map", void 0);
      (0, _defineProperty2["default"])(_this, "_setMapRef", function (mapRef) {
        // Handle change of the basemap library
        if (_this._map && mapRef) {
          var _map = mapRef.getMap();
          if (_map && _this._map !== _map) {
            _this._map.off('style.load', nop);
            _this._map.off('error', nop);
            _this._map = null;
          }
        }
        var map = mapRef && mapRef.getMap();
        if (map && _this._map !== map) {
          _this._map = map;
          map.on('style.load', function () {
            var style = map.getStyle();
            _this.loadMapStyleJson(style);
          });
          map.on('error', function () {
            _this.loadMapStyleError();
          });
        }
      });
      (0, _defineProperty2["default"])(_this, "loadMapStyleJson", function (style) {
        _this.props.loadCustomMapStyle({
          style: style,
          error: false
        });
      });
      (0, _defineProperty2["default"])(_this, "loadMapStyleError", function () {
        _this.props.loadCustomMapStyle({
          error: true
        });
      });
      return _this;
    }
    (0, _inherits2["default"])(AddMapStyleModal, _Component);
    return (0, _createClass2["default"])(AddMapStyleModal, [{
      key: "render",
      value: function render() {
        var _this$props$transform,
          _this$props2,
          _this2 = this;
        var _this$props = this.props,
          inputStyle = _this$props.inputStyle,
          mapState = _this$props.mapState,
          intl = _this$props.intl;
        var baseMapLibraryName = (0, _utils.getBaseMapLibrary)(inputStyle);
        var baseMapLibraryConfig = (0, _utils.getApplicationConfig)().baseMapLibraryConfig[baseMapLibraryName];
        var mapboxApiAccessToken = inputStyle.accessToken || this.props.mapboxApiAccessToken;
        var mapProps = _objectSpread(_objectSpread({}, mapState), {}, {
          // TODO baseApiUrl should be taken into account in transformRequest as we use dynamic mapLib import
          // baseApiUrl: mapboxApiUrl,
          mapboxAccessToken: mapboxApiAccessToken,
          mapLib: baseMapLibraryConfig.getMapLib(),
          preserveDrawingBuffer: true,
          transformRequest: ((_this$props$transform = (_this$props2 = this.props).transformRequest) === null || _this$props$transform === void 0 ? void 0 : _this$props$transform.call(_this$props2, mapboxApiAccessToken)) || (0, _utils.transformRequest)(mapboxApiAccessToken)
        });
        return /*#__PURE__*/_react["default"].createElement("div", {
          className: "add-map-style-modal"
        }, /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledModalContent, null, /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledModalVerticalPanel, null, /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledModalSection, null, /*#__PURE__*/_react["default"].createElement("div", {
          className: "modal-section-title"
        }, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
          id: 'modal.addStyle.pasteTitle'
        })), /*#__PURE__*/_react["default"].createElement("div", {
          className: "modal-section-subtitle"
        }, intl.formatMessage({
          id: 'modal.addStyle.pasteSubtitle0'
        }), /*#__PURE__*/_react["default"].createElement(InlineLink, {
          target: "_blank",
          href: "https://www.mapbox.com/help/studio-manual-publish/#style-url"
        }, ' ', intl.formatMessage({
          id: 'modal.addStyle.pasteSubtitle2'
        })), ' ', intl.formatMessage({
          id: 'modal.addStyle.pasteSubtitle3'
        }), /*#__PURE__*/_react["default"].createElement(InlineLink, {
          target: "_blank",
          href: "https://docs.mapbox.com/mapbox-gl-js/style-spec"
        }, ' ', intl.formatMessage({
          id: 'modal.addStyle.pasteSubtitle4'
        }))), /*#__PURE__*/_react["default"].createElement(_styledComponents2.InputLight, {
          type: "text",
          value: inputStyle.url || '',
          onChange: function onChange(_ref) {
            var value = _ref.target.value;
            return _this2.props.inputMapStyle({
              url: value,
              id: 'Custom Style',
              icon: "".concat((0, _utils.getApplicationConfig)().cdnUrl, "/").concat(_constants.NO_BASEMAP_ICON)
            });
          },
          placeholder: "e.g. https://basemaps.cartocdn.com/gl/positron-gl-style/style.json"
        })), /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledModalSection, null, /*#__PURE__*/_react["default"].createElement("div", {
          className: "modal-section-title"
        }, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
          id: 'modal.addStyle.publishTitle'
        })), /*#__PURE__*/_react["default"].createElement("div", {
          className: "modal-section-subtitle"
        }, intl.formatMessage({
          id: 'modal.addStyle.publishSubtitle1'
        }), /*#__PURE__*/_react["default"].createElement(InlineLink, {
          target: "_blank",
          href: "https://www.mapbox.com/studio/styles/"
        }, ' ', "mapbox"), ' ', intl.formatMessage({
          id: 'modal.addStyle.publishSubtitle2'
        }), /*#__PURE__*/_react["default"].createElement(InlineLink, {
          target: "_blank",
          href: "https://www.mapbox.com/help/studio-manual-publish/"
        }, ' ', intl.formatMessage({
          id: 'modal.addStyle.publishSubtitle3'
        })), ' ', intl.formatMessage({
          id: 'modal.addStyle.publishSubtitle4'
        })), /*#__PURE__*/_react["default"].createElement("div", {
          className: "modal-section-subtitle"
        }, intl.formatMessage({
          id: 'modal.addStyle.publishSubtitle5'
        }), /*#__PURE__*/_react["default"].createElement(InlineLink, {
          target: "_blank",
          href: "https://www.mapbox.com/help/how-access-tokens-work/"
        }, ' ', intl.formatMessage({
          id: 'modal.addStyle.publishSubtitle6'
        })), ' ', intl.formatMessage({
          id: 'modal.addStyle.publishSubtitle7'
        })), /*#__PURE__*/_react["default"].createElement(_styledComponents2.InputLight, {
          type: "text",
          value: inputStyle.accessToken || '',
          onChange: function onChange(_ref2) {
            var value = _ref2.target.value;
            return _this2.props.inputMapStyle({
              accessToken: value
            });
          },
          placeholder: intl.formatMessage({
            id: 'modal.addStyle.exampleToken'
          })
        })), /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledModalSection, null, /*#__PURE__*/_react["default"].createElement("div", {
          className: "modal-section-title"
        }, /*#__PURE__*/_react["default"].createElement(_localization.FormattedMessage, {
          id: 'modal.addStyle.namingTitle'
        })), /*#__PURE__*/_react["default"].createElement(_styledComponents2.InputLight, {
          type: "text",
          value: inputStyle.label || '',
          onChange: function onChange(_ref3) {
            var value = _ref3.target.value;
            return _this2.props.inputMapStyle({
              label: value
            });
          },
          placeholder: "Name your style"
        }))), /*#__PURE__*/_react["default"].createElement(PreviewMap, null, /*#__PURE__*/_react["default"].createElement("div", {
          className: (0, _classnames["default"])('preview-title', {
            error: inputStyle.error
          })
        }, inputStyle.error ? ErrorMsg.styleError : inputStyle.style && inputStyle.style.name || ''), /*#__PURE__*/_react["default"].createElement(StyledPreviewImage, {
          className: "preview-image"
        }, !inputStyle.isValid ? /*#__PURE__*/_react["default"].createElement("div", {
          className: "preview-image-spinner"
        }) : /*#__PURE__*/_react["default"].createElement(_styledComponents2.StyledMapContainer, null, /*#__PURE__*/_react["default"].createElement(_reactMapGl.Map, (0, _extends2["default"])({}, mapProps, {
          ref: this._setMapRef,
          key: "".concat(baseMapLibraryName, "-").concat(this.state.reRenderKey, "-").concat(inputStyle.url, "-").concat(mapboxApiAccessToken),
          style: {
            width: MapW,
            height: MapH
          },
          mapStyle: inputStyle.url === null ? undefined : inputStyle.url
        })))))));
      }
    }], [{
      key: "getDerivedStateFromProps",
      value: function getDerivedStateFromProps(props, state) {
        if (props.inputStyle && props.inputStyle.accessToken && props.inputStyle.accessToken !== state.previousToken) {
          // toke has changed
          // ReactMapGl doesn't re-create map when token has changed
          // here we force the map to update

          return {
            reRenderKey: state.reRenderKey + 1,
            previousToken: props.inputStyle.accessToken
          };
        }
        return null;
      }
    }]);
  }(_react.Component);
  return (0, _reactIntl.injectIntl)((0, _reactLifecyclesCompat.polyfill)(AddMapStyleModal));
}
var _default = exports["default"] = AddMapStyleModalFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsInJlcXVpcmUiLCJfcmVhY3RMaWZlY3ljbGVzQ29tcGF0IiwiX2NsYXNzbmFtZXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3N0eWxlZENvbXBvbmVudHMiLCJfcmVhY3RNYXBHbCIsIl9zdHlsZWRDb21wb25lbnRzMiIsIl9zdHlsZXMiLCJfdXRpbHMiLCJfcmVhY3RJbnRsIiwiX2xvY2FsaXphdGlvbiIsIl9jb25zdGFudHMiLCJfdGVtcGxhdGVPYmplY3QiLCJfdGVtcGxhdGVPYmplY3QyIiwiX3RlbXBsYXRlT2JqZWN0MyIsIl90ZW1wbGF0ZU9iamVjdDQiLCJfdGVtcGxhdGVPYmplY3Q1IiwiX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlIiwiZSIsIldlYWtNYXAiLCJyIiwidCIsIl9fZXNNb2R1bGUiLCJfdHlwZW9mIiwiaGFzIiwiZ2V0IiwibiIsIl9fcHJvdG9fXyIsImEiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJpIiwic2V0Iiwib3duS2V5cyIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5MiIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiX2NhbGxTdXBlciIsIl9nZXRQcm90b3R5cGVPZjIiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybjIiLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImNvbnN0cnVjdG9yIiwiQm9vbGVhbiIsInByb3RvdHlwZSIsInZhbHVlT2YiLCJNYXBIIiwiTWFwVyIsIkVycm9yTXNnIiwic3R5bGVFcnJvciIsIlByZXZpZXdNYXAiLCJkaXYiLCJfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsMiIsInByb3BzIiwidGhlbWUiLCJlcnJvckNvbG9yIiwibWVkaWEiLCJwb3J0YWJsZSIsInBhbG0iLCJTdHlsZWRQcmV2aWV3SW1hZ2UiLCJtb2RhbEltYWdlUGxhY2VIb2xkZXIiLCJJbmxpbmVMaW5rIiwibm9wIiwiQWRkTWFwU3R5bGVNb2RhbEZhY3RvcnkiLCJBZGRNYXBTdHlsZU1vZGFsIiwiX0NvbXBvbmVudCIsIl90aGlzIiwiX2NsYXNzQ2FsbENoZWNrMiIsIl9sZW4iLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiY29uY2F0IiwicmVSZW5kZXJLZXkiLCJwcmV2aW91c1Rva2VuIiwibWFwUmVmIiwiX21hcCIsImdldE1hcCIsIm9mZiIsIm1hcCIsIm9uIiwic3R5bGUiLCJnZXRTdHlsZSIsImxvYWRNYXBTdHlsZUpzb24iLCJsb2FkTWFwU3R5bGVFcnJvciIsImxvYWRDdXN0b21NYXBTdHlsZSIsImVycm9yIiwiX2luaGVyaXRzMiIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsInJlbmRlciIsIl90aGlzJHByb3BzJHRyYW5zZm9ybSIsIl90aGlzJHByb3BzMiIsIl90aGlzMiIsIl90aGlzJHByb3BzIiwiaW5wdXRTdHlsZSIsIm1hcFN0YXRlIiwiaW50bCIsImJhc2VNYXBMaWJyYXJ5TmFtZSIsImdldEJhc2VNYXBMaWJyYXJ5IiwiYmFzZU1hcExpYnJhcnlDb25maWciLCJnZXRBcHBsaWNhdGlvbkNvbmZpZyIsIm1hcGJveEFwaUFjY2Vzc1Rva2VuIiwiYWNjZXNzVG9rZW4iLCJtYXBQcm9wcyIsIm1hcGJveEFjY2Vzc1Rva2VuIiwibWFwTGliIiwiZ2V0TWFwTGliIiwicHJlc2VydmVEcmF3aW5nQnVmZmVyIiwidHJhbnNmb3JtUmVxdWVzdCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJTdHlsZWRNb2RhbENvbnRlbnQiLCJTdHlsZWRNb2RhbFZlcnRpY2FsUGFuZWwiLCJTdHlsZWRNb2RhbFNlY3Rpb24iLCJGb3JtYXR0ZWRNZXNzYWdlIiwiaWQiLCJmb3JtYXRNZXNzYWdlIiwidGFyZ2V0IiwiaHJlZiIsIklucHV0TGlnaHQiLCJ0eXBlIiwidXJsIiwib25DaGFuZ2UiLCJfcmVmIiwiaW5wdXRNYXBTdHlsZSIsImljb24iLCJjZG5VcmwiLCJOT19CQVNFTUFQX0lDT04iLCJwbGFjZWhvbGRlciIsIl9yZWYyIiwibGFiZWwiLCJfcmVmMyIsIm5hbWUiLCJpc1ZhbGlkIiwiU3R5bGVkTWFwQ29udGFpbmVyIiwiTWFwIiwiX2V4dGVuZHMyIiwicmVmIiwiX3NldE1hcFJlZiIsInN0YXRlIiwid2lkdGgiLCJoZWlnaHQiLCJtYXBTdHlsZSIsInVuZGVmaW5lZCIsImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyIsIkNvbXBvbmVudCIsImluamVjdEludGwiLCJwb2x5ZmlsbCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RhbHMvYWRkLW1hcC1zdHlsZS1tb2RhbC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVFxuLy8gQ29weXJpZ2h0IGNvbnRyaWJ1dG9ycyB0byB0aGUga2VwbGVyLmdsIHByb2plY3RcblxuaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge3BvbHlmaWxsfSBmcm9tICdyZWFjdC1saWZlY3ljbGVzLWNvbXBhdCc7XG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuaW1wb3J0IHtNYXAsIE1hcGJveE1hcCwgTWFwUmVmfSBmcm9tICdyZWFjdC1tYXAtZ2wnO1xuaW1wb3J0IHtcbiAgU3R5bGVkTW9kYWxDb250ZW50LFxuICBJbnB1dExpZ2h0LFxuICBTdHlsZWRNYXBDb250YWluZXIsXG4gIFN0eWxlZE1vZGFsVmVydGljYWxQYW5lbCxcbiAgU3R5bGVkTW9kYWxTZWN0aW9uXG59IGZyb20gJy4uL2NvbW1vbi9zdHlsZWQtY29tcG9uZW50cyc7XG5pbXBvcnQge21lZGlhfSBmcm9tICdAa2VwbGVyLmdsL3N0eWxlcyc7XG5cbi8vIFV0aWxzXG5pbXBvcnQge2dldEFwcGxpY2F0aW9uQ29uZmlnLCBnZXRCYXNlTWFwTGlicmFyeSwgdHJhbnNmb3JtUmVxdWVzdH0gZnJvbSAnQGtlcGxlci5nbC91dGlscyc7XG5pbXBvcnQge2luamVjdEludGwsIEludGxTaGFwZX0gZnJvbSAncmVhY3QtaW50bCc7XG5pbXBvcnQge0Zvcm1hdHRlZE1lc3NhZ2V9IGZyb20gJ0BrZXBsZXIuZ2wvbG9jYWxpemF0aW9uJztcbmltcG9ydCB7Tk9fQkFTRU1BUF9JQ09OfSBmcm9tICdAa2VwbGVyLmdsL2NvbnN0YW50cyc7XG5pbXBvcnQge0lucHV0U3R5bGUsIE1hcFN0YXRlfSBmcm9tICdAa2VwbGVyLmdsL3R5cGVzJztcbmltcG9ydCB7QWN0aW9uSGFuZGxlciwgaW5wdXRNYXBTdHlsZSwgbG9hZEN1c3RvbU1hcFN0eWxlfSBmcm9tICdAa2VwbGVyLmdsL2FjdGlvbnMnO1xuXG5jb25zdCBNYXBIID0gMTkwO1xuY29uc3QgTWFwVyA9IDI2NDtcbmNvbnN0IEVycm9yTXNnID0ge1xuICBzdHlsZUVycm9yOlxuICAgICdGYWlsZWQgdG8gbG9hZCBtYXAgc3R5bGUsIG1ha2Ugc3VyZSBpdCBpcyBwdWJsaXNoZWQuIEZvciBwcml2YXRlIHN0eWxlLCBwYXN0ZSBpbiB5b3VyIGFjY2VzcyB0b2tlbi4nXG59O1xuXG5jb25zdCBQcmV2aWV3TWFwID0gc3R5bGVkLmRpdmBcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1hcmdpbi1sZWZ0OiAxMTZweDtcbiAgZmxleC1zaHJpbms6IDA7XG5cbiAgLnByZXZpZXctdGl0bGUge1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgZm9udC1zaXplOiAxMHB4O1xuICAgIHBhZGRpbmc6IDhweCAwcHg7XG4gIH1cblxuICAucHJldmlldy10aXRsZS5lcnJvciB7XG4gICAgY29sb3I6ICR7cHJvcHMgPT4gcHJvcHMudGhlbWUuZXJyb3JDb2xvcn07XG4gICAgbWF4LXdpZHRoOiAyNTBweDtcbiAgfVxuXG4gICR7bWVkaWEucG9ydGFibGVgXG4gICAgbWFyZ2luLWxlZnQ6IDMycHg7XG4gIGB9O1xuXG4gICR7bWVkaWEucGFsbWBcbiAgICBtYXJnaW4tbGVmdDogdW5zZXQ7XG4gICAgLnByZXZpZXctdGl0bGUge1xuICAgICAgbWFyZ2luLXRvcDogMHB4O1xuICAgIH1cbiAgYH07XG5gO1xuXG5jb25zdCBTdHlsZWRQcmV2aWV3SW1hZ2UgPSBzdHlsZWQuZGl2YFxuICBiYWNrZ3JvdW5kOiAke3Byb3BzID0+IHByb3BzLnRoZW1lLm1vZGFsSW1hZ2VQbGFjZUhvbGRlcn07XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgYm94LXNoYWRvdzogMCA4cHggMTZweCAwIHJnYmEoMCwgMCwgMCwgMC4xOCk7XG4gIHdpZHRoOiAke01hcFd9cHg7XG4gIGhlaWdodDogJHtNYXBIfXB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG5cbiAgLnByZXZpZXctaW1hZ2UtcGxhY2Vob2xkZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgbGVmdDogMDtcbiAgfVxuXG4gIC5wcmV2aWV3LWltYWdlLXNwaW5uZXIge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBsZWZ0OiBjYWxjKDUwJSAtIDI1cHgpO1xuICAgIHRvcDogY2FsYyg1MCUgLSAyNXB4KTtcbiAgfVxuYDtcblxuY29uc3QgSW5saW5lTGluayA9IHN0eWxlZC5hYFxuICBmb250LXdlaWdodDogNTAwO1xuXG4gICY6aG92ZXIge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgfVxuYDtcblxuY29uc3Qgbm9wID0gKCkgPT4ge1xuICByZXR1cm47XG59O1xuXG5pbnRlcmZhY2UgQWRkTWFwU3R5bGVNb2RhbFByb3BzIHtcbiAgaW5wdXRNYXBTdHlsZTogQWN0aW9uSGFuZGxlcjx0eXBlb2YgaW5wdXRNYXBTdHlsZT47XG4gIGlucHV0U3R5bGU6IElucHV0U3R5bGU7XG4gIGxvYWRDdXN0b21NYXBTdHlsZTogQWN0aW9uSGFuZGxlcjx0eXBlb2YgbG9hZEN1c3RvbU1hcFN0eWxlPjtcbiAgbWFwYm94QXBpQWNjZXNzVG9rZW46IHN0cmluZztcbiAgbWFwYm94QXBpVXJsPzogc3RyaW5nO1xuICB0cmFuc2Zvcm1SZXF1ZXN0PzogKG1hcGJveEtleTogc3RyaW5nKSA9PiAoXG4gICAgdXJsOiBzdHJpbmcsXG4gICAgcmVzb3VyY2VUeXBlOiBzdHJpbmdcbiAgKSA9PiB7XG4gICAgdXJsOiBzdHJpbmc7XG4gIH07XG4gIG1hcFN0YXRlOiBNYXBTdGF0ZTtcbiAgaW50bDogSW50bFNoYXBlO1xufVxuXG5mdW5jdGlvbiBBZGRNYXBTdHlsZU1vZGFsRmFjdG9yeSgpIHtcbiAgY2xhc3MgQWRkTWFwU3R5bGVNb2RhbCBleHRlbmRzIENvbXBvbmVudDxBZGRNYXBTdHlsZU1vZGFsUHJvcHM+IHtcbiAgICBzdGF0ZSA9IHtcbiAgICAgIHJlUmVuZGVyS2V5OiAwLFxuICAgICAgcHJldmlvdXNUb2tlbjogbnVsbFxuICAgIH07XG5cbiAgICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKHByb3BzLCBzdGF0ZSkge1xuICAgICAgaWYgKFxuICAgICAgICBwcm9wcy5pbnB1dFN0eWxlICYmXG4gICAgICAgIHByb3BzLmlucHV0U3R5bGUuYWNjZXNzVG9rZW4gJiZcbiAgICAgICAgcHJvcHMuaW5wdXRTdHlsZS5hY2Nlc3NUb2tlbiAhPT0gc3RhdGUucHJldmlvdXNUb2tlblxuICAgICAgKSB7XG4gICAgICAgIC8vIHRva2UgaGFzIGNoYW5nZWRcbiAgICAgICAgLy8gUmVhY3RNYXBHbCBkb2Vzbid0IHJlLWNyZWF0ZSBtYXAgd2hlbiB0b2tlbiBoYXMgY2hhbmdlZFxuICAgICAgICAvLyBoZXJlIHdlIGZvcmNlIHRoZSBtYXAgdG8gdXBkYXRlXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZVJlbmRlcktleTogc3RhdGUucmVSZW5kZXJLZXkgKyAxLFxuICAgICAgICAgIHByZXZpb3VzVG9rZW46IHByb3BzLmlucHV0U3R5bGUuYWNjZXNzVG9rZW5cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgX21hcDogTWFwYm94TWFwIHwgdW5kZWZpbmVkIHwgbnVsbDtcblxuICAgIF9zZXRNYXBSZWYgPSAobWFwUmVmOiBNYXBSZWYpID0+IHtcbiAgICAgIC8vIEhhbmRsZSBjaGFuZ2Ugb2YgdGhlIGJhc2VtYXAgbGlicmFyeVxuICAgICAgaWYgKHRoaXMuX21hcCAmJiBtYXBSZWYpIHtcbiAgICAgICAgY29uc3QgbWFwID0gbWFwUmVmLmdldE1hcCgpO1xuICAgICAgICBpZiAobWFwICYmIHRoaXMuX21hcCAhPT0gbWFwKSB7XG4gICAgICAgICAgdGhpcy5fbWFwLm9mZignc3R5bGUubG9hZCcsIG5vcCk7XG4gICAgICAgICAgdGhpcy5fbWFwLm9mZignZXJyb3InLCBub3ApO1xuICAgICAgICAgIHRoaXMuX21hcCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbWFwID0gbWFwUmVmICYmIG1hcFJlZi5nZXRNYXAoKTtcbiAgICAgIGlmIChtYXAgJiYgdGhpcy5fbWFwICE9PSBtYXApIHtcbiAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xuXG4gICAgICAgIG1hcC5vbignc3R5bGUubG9hZCcsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBzdHlsZSA9IG1hcC5nZXRTdHlsZSgpO1xuICAgICAgICAgIHRoaXMubG9hZE1hcFN0eWxlSnNvbihzdHlsZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIG1hcC5vbignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5sb2FkTWFwU3R5bGVFcnJvcigpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbG9hZE1hcFN0eWxlSnNvbiA9IHN0eWxlID0+IHtcbiAgICAgIHRoaXMucHJvcHMubG9hZEN1c3RvbU1hcFN0eWxlKHtzdHlsZSwgZXJyb3I6IGZhbHNlfSk7XG4gICAgfTtcblxuICAgIGxvYWRNYXBTdHlsZUVycm9yID0gKCkgPT4ge1xuICAgICAgdGhpcy5wcm9wcy5sb2FkQ3VzdG9tTWFwU3R5bGUoe2Vycm9yOiB0cnVlfSk7XG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgIGNvbnN0IHtpbnB1dFN0eWxlLCBtYXBTdGF0ZSwgaW50bH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICBjb25zdCBiYXNlTWFwTGlicmFyeU5hbWUgPSBnZXRCYXNlTWFwTGlicmFyeShpbnB1dFN0eWxlKTtcbiAgICAgIGNvbnN0IGJhc2VNYXBMaWJyYXJ5Q29uZmlnID0gZ2V0QXBwbGljYXRpb25Db25maWcoKS5iYXNlTWFwTGlicmFyeUNvbmZpZ1tiYXNlTWFwTGlicmFyeU5hbWVdO1xuXG4gICAgICBjb25zdCBtYXBib3hBcGlBY2Nlc3NUb2tlbiA9IGlucHV0U3R5bGUuYWNjZXNzVG9rZW4gfHwgdGhpcy5wcm9wcy5tYXBib3hBcGlBY2Nlc3NUb2tlbjtcbiAgICAgIGNvbnN0IG1hcFByb3BzID0ge1xuICAgICAgICAuLi5tYXBTdGF0ZSxcbiAgICAgICAgLy8gVE9ETyBiYXNlQXBpVXJsIHNob3VsZCBiZSB0YWtlbiBpbnRvIGFjY291bnQgaW4gdHJhbnNmb3JtUmVxdWVzdCBhcyB3ZSB1c2UgZHluYW1pYyBtYXBMaWIgaW1wb3J0XG4gICAgICAgIC8vIGJhc2VBcGlVcmw6IG1hcGJveEFwaVVybCxcbiAgICAgICAgbWFwYm94QWNjZXNzVG9rZW46IG1hcGJveEFwaUFjY2Vzc1Rva2VuLFxuICAgICAgICBtYXBMaWI6IGJhc2VNYXBMaWJyYXJ5Q29uZmlnLmdldE1hcExpYigpLFxuICAgICAgICBwcmVzZXJ2ZURyYXdpbmdCdWZmZXI6IHRydWUsXG4gICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6XG4gICAgICAgICAgdGhpcy5wcm9wcy50cmFuc2Zvcm1SZXF1ZXN0Py4obWFwYm94QXBpQWNjZXNzVG9rZW4pIHx8XG4gICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdChtYXBib3hBcGlBY2Nlc3NUb2tlbilcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWRkLW1hcC1zdHlsZS1tb2RhbFwiPlxuICAgICAgICAgIDxTdHlsZWRNb2RhbENvbnRlbnQ+XG4gICAgICAgICAgICA8U3R5bGVkTW9kYWxWZXJ0aWNhbFBhbmVsPlxuICAgICAgICAgICAgICA8U3R5bGVkTW9kYWxTZWN0aW9uPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtc2VjdGlvbi10aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9eydtb2RhbC5hZGRTdHlsZS5wYXN0ZVRpdGxlJ30gLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1vZGFsLXNlY3Rpb24tc3VidGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgIHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAnbW9kYWwuYWRkU3R5bGUucGFzdGVTdWJ0aXRsZTAnfSl9XG4gICAgICAgICAgICAgICAgICA8SW5saW5lTGlua1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgICBocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9oZWxwL3N0dWRpby1tYW51YWwtcHVibGlzaC8jc3R5bGUtdXJsXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgICAgICAge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICdtb2RhbC5hZGRTdHlsZS5wYXN0ZVN1YnRpdGxlMid9KX1cbiAgICAgICAgICAgICAgICAgIDwvSW5saW5lTGluaz57JyAnfVxuICAgICAgICAgICAgICAgICAge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICdtb2RhbC5hZGRTdHlsZS5wYXN0ZVN1YnRpdGxlMyd9KX1cbiAgICAgICAgICAgICAgICAgIDxJbmxpbmVMaW5rXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICAgICAgICAgIGhyZWY9XCJodHRwczovL2RvY3MubWFwYm94LmNvbS9tYXBib3gtZ2wtanMvc3R5bGUtc3BlY1wiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsnICd9XG4gICAgICAgICAgICAgICAgICAgIHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAnbW9kYWwuYWRkU3R5bGUucGFzdGVTdWJ0aXRsZTQnfSl9XG4gICAgICAgICAgICAgICAgICA8L0lubGluZUxpbms+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPElucHV0TGlnaHRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtpbnB1dFN0eWxlLnVybCB8fCAnJ31cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoe3RhcmdldDoge3ZhbHVlfX0pID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvcHMuaW5wdXRNYXBTdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgdXJsOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICBpZDogJ0N1c3RvbSBTdHlsZScsXG4gICAgICAgICAgICAgICAgICAgICAgaWNvbjogYCR7Z2V0QXBwbGljYXRpb25Db25maWcoKS5jZG5Vcmx9LyR7Tk9fQkFTRU1BUF9JQ09OfWBcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiZS5nLiBodHRwczovL2Jhc2VtYXBzLmNhcnRvY2RuLmNvbS9nbC9wb3NpdHJvbi1nbC1zdHlsZS9zdHlsZS5qc29uXCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1N0eWxlZE1vZGFsU2VjdGlvbj5cblxuICAgICAgICAgICAgICA8U3R5bGVkTW9kYWxTZWN0aW9uPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtc2VjdGlvbi10aXRsZVwiPlxuICAgICAgICAgICAgICAgICAgPEZvcm1hdHRlZE1lc3NhZ2UgaWQ9eydtb2RhbC5hZGRTdHlsZS5wdWJsaXNoVGl0bGUnfSAvPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibW9kYWwtc2VjdGlvbi1zdWJ0aXRsZVwiPlxuICAgICAgICAgICAgICAgICAge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICdtb2RhbC5hZGRTdHlsZS5wdWJsaXNoU3VidGl0bGUxJ30pfVxuICAgICAgICAgICAgICAgICAgPElubGluZUxpbmsgdGFyZ2V0PVwiX2JsYW5rXCIgaHJlZj1cImh0dHBzOi8vd3d3Lm1hcGJveC5jb20vc3R1ZGlvL3N0eWxlcy9cIj5cbiAgICAgICAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgICAgICAgbWFwYm94XG4gICAgICAgICAgICAgICAgICA8L0lubGluZUxpbms+eycgJ31cbiAgICAgICAgICAgICAgICAgIHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAnbW9kYWwuYWRkU3R5bGUucHVibGlzaFN1YnRpdGxlMid9KX1cbiAgICAgICAgICAgICAgICAgIDxJbmxpbmVMaW5rXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldD1cIl9ibGFua1wiXG4gICAgICAgICAgICAgICAgICAgIGhyZWY9XCJodHRwczovL3d3dy5tYXBib3guY29tL2hlbHAvc3R1ZGlvLW1hbnVhbC1wdWJsaXNoL1wiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsnICd9XG4gICAgICAgICAgICAgICAgICAgIHtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAnbW9kYWwuYWRkU3R5bGUucHVibGlzaFN1YnRpdGxlMyd9KX1cbiAgICAgICAgICAgICAgICAgIDwvSW5saW5lTGluaz57JyAnfVxuICAgICAgICAgICAgICAgICAge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICdtb2RhbC5hZGRTdHlsZS5wdWJsaXNoU3VidGl0bGU0J30pfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1zZWN0aW9uLXN1YnRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ21vZGFsLmFkZFN0eWxlLnB1Ymxpc2hTdWJ0aXRsZTUnfSl9XG4gICAgICAgICAgICAgICAgICA8SW5saW5lTGlua1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ9XCJfYmxhbmtcIlxuICAgICAgICAgICAgICAgICAgICBocmVmPVwiaHR0cHM6Ly93d3cubWFwYm94LmNvbS9oZWxwL2hvdy1hY2Nlc3MtdG9rZW5zLXdvcmsvXCJcbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgeycgJ31cbiAgICAgICAgICAgICAgICAgICAge2ludGwuZm9ybWF0TWVzc2FnZSh7aWQ6ICdtb2RhbC5hZGRTdHlsZS5wdWJsaXNoU3VidGl0bGU2J30pfVxuICAgICAgICAgICAgICAgICAgPC9JbmxpbmVMaW5rPnsnICd9XG4gICAgICAgICAgICAgICAgICB7aW50bC5mb3JtYXRNZXNzYWdlKHtpZDogJ21vZGFsLmFkZFN0eWxlLnB1Ymxpc2hTdWJ0aXRsZTcnfSl9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPElucHV0TGlnaHRcbiAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtpbnB1dFN0eWxlLmFjY2Vzc1Rva2VuIHx8ICcnfVxuICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyh7dGFyZ2V0OiB7dmFsdWV9fSkgPT4gdGhpcy5wcm9wcy5pbnB1dE1hcFN0eWxlKHthY2Nlc3NUb2tlbjogdmFsdWV9KX1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtpbnRsLmZvcm1hdE1lc3NhZ2Uoe2lkOiAnbW9kYWwuYWRkU3R5bGUuZXhhbXBsZVRva2VuJ30pfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkTW9kYWxTZWN0aW9uPlxuXG4gICAgICAgICAgICAgIDxTdHlsZWRNb2RhbFNlY3Rpb24+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtb2RhbC1zZWN0aW9uLXRpdGxlXCI+XG4gICAgICAgICAgICAgICAgICA8Rm9ybWF0dGVkTWVzc2FnZSBpZD17J21vZGFsLmFkZFN0eWxlLm5hbWluZ1RpdGxlJ30gLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8SW5wdXRMaWdodFxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgdmFsdWU9e2lucHV0U3R5bGUubGFiZWwgfHwgJyd9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHt0YXJnZXQ6IHt2YWx1ZX19KSA9PiB0aGlzLnByb3BzLmlucHV0TWFwU3R5bGUoe2xhYmVsOiB2YWx1ZX0pfVxuICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJOYW1lIHlvdXIgc3R5bGVcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvU3R5bGVkTW9kYWxTZWN0aW9uPlxuICAgICAgICAgICAgPC9TdHlsZWRNb2RhbFZlcnRpY2FsUGFuZWw+XG4gICAgICAgICAgICA8UHJldmlld01hcD5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NuYW1lcygncHJldmlldy10aXRsZScsIHtcbiAgICAgICAgICAgICAgICAgIGVycm9yOiBpbnB1dFN0eWxlLmVycm9yXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7aW5wdXRTdHlsZS5lcnJvclxuICAgICAgICAgICAgICAgICAgPyBFcnJvck1zZy5zdHlsZUVycm9yXG4gICAgICAgICAgICAgICAgICA6IChpbnB1dFN0eWxlLnN0eWxlICYmIGlucHV0U3R5bGUuc3R5bGUubmFtZSkgfHwgJyd9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8U3R5bGVkUHJldmlld0ltYWdlIGNsYXNzTmFtZT1cInByZXZpZXctaW1hZ2VcIj5cbiAgICAgICAgICAgICAgICB7LyoqIE5vdGUsIHdlIG5lZWQgdGhlIE1hcCB0byByZW5kZXIgd2l0aCBlcnJvcmVkIHBhcmFtcyB0byBnZXQgc3R5bGUuZXJyb3IgbWVzc2FnZXMgKi99XG4gICAgICAgICAgICAgICAgeyFpbnB1dFN0eWxlLmlzVmFsaWQgPyAoXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInByZXZpZXctaW1hZ2Utc3Bpbm5lclwiIC8+XG4gICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgIDxTdHlsZWRNYXBDb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgIDxNYXBcbiAgICAgICAgICAgICAgICAgICAgICB7Li4ubWFwUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgICAgcmVmPXt0aGlzLl9zZXRNYXBSZWZ9XG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtgJHtiYXNlTWFwTGlicmFyeU5hbWV9LSR7dGhpcy5zdGF0ZS5yZVJlbmRlcktleX0tJHtpbnB1dFN0eWxlLnVybH0tJHttYXBib3hBcGlBY2Nlc3NUb2tlbn1gfVxuICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogTWFwVyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogTWFwSFxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgbWFwU3R5bGU9e2lucHV0U3R5bGUudXJsID09PSBudWxsID8gdW5kZWZpbmVkIDogaW5wdXRTdHlsZS51cmx9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICA8L1N0eWxlZE1hcENvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L1N0eWxlZFByZXZpZXdJbWFnZT5cbiAgICAgICAgICAgIDwvUHJldmlld01hcD5cbiAgICAgICAgICA8L1N0eWxlZE1vZGFsQ29udGVudD5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpbmplY3RJbnRsKHBvbHlmaWxsKEFkZE1hcFN0eWxlTW9kYWwpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQWRkTWFwU3R5bGVNb2RhbEZhY3Rvcnk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFHQSxJQUFBQSxNQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxzQkFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsV0FBQSxHQUFBQyxzQkFBQSxDQUFBSCxPQUFBO0FBQ0EsSUFBQUksaUJBQUEsR0FBQUQsc0JBQUEsQ0FBQUgsT0FBQTtBQUNBLElBQUFLLFdBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLGtCQUFBLEdBQUFOLE9BQUE7QUFPQSxJQUFBTyxPQUFBLEdBQUFQLE9BQUE7QUFHQSxJQUFBUSxNQUFBLEdBQUFSLE9BQUE7QUFDQSxJQUFBUyxVQUFBLEdBQUFULE9BQUE7QUFDQSxJQUFBVSxh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